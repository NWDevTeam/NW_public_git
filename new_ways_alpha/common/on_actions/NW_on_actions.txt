on_actions = {
	on_startup = {
		effect = {
			set_variable = { global.troz_threat_var = 0 }

			set_global_flag = { flag = nw_drop_focus_tree value = 1 days = 2 }
			### INFRA IN STATE BONUS
			every_state = {
				limit = {
					OR = {
						state = 1088 state = 1097 state = 72 state = 766 state = 1037 state = 821 state = 820 state = 118 state = 1042 state = 1066 state = 822 state = 819 state = 823 state = 904 state = 102 state = 907 state = 906 state = 163 state = 815 state = 814 state = 801 state = 802
					}
				}
				set_variable = { state_infra_var = 0.75 }
				set_variable = { state_infra_half_var = 0.375 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			every_state = {
				limit = {
					OR = {
						state = 1002 state = 1001 state = 1111 state = 1120 state = 188 state = 770 state = 764 state = 765 state = 145 state = 974 state = 1038 state = 1061 state = 973 state = 116 state = 858 state = 847 state = 80 state = 838 state = 818 state = 77 state = 341 state = 964 state = 945 state = 1075 state = 940 state = 799 state = 997 state = 989 state = 817 state = 972 state = 895 state = 971 state = 967 state = 966 state = 969 state = 965 state = 798 state = 768 state = 937 state = 1029 state = 779 state = 12 state = 977 state = 1102
					}
				}
				set_variable = { state_infra_var = 0.5 }
				set_variable = { state_infra_half_var = 0.25 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			every_state = {
				limit = {
					OR = {
						state = 1105 state = 1109 state = 124 state = 35 state = 975 state = 811 state = 905 state = 103 state = 845 state = 783 state = 780 state = 772 state = 183 state = 1153 state = 979 state = 656 state = 773 state = 804 state = 87 state = 825 state = 212 state = 1026 state = 184 state = 782 state = 894 state = 837 state = 988 state = 990 state = 807 state = 813 state = 856 state = 187 state = 1025 state = 164 state = 1100 state = 553 state = 1101 state = 961 state = 1093 state = 701
					}
				}
				set_variable = { state_infra_var = 0.25 }
				set_variable = { state_infra_half_var = 0.125 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			every_state = {
				limit = {
					OR = {
						state = 100 state = 408 state = 409 state = 657 state = 561 state = 666 state = 863 state = 585 state = 584 state = 407 state = 573 state = 957 state = 329 state = 565 state = 567 state = 563 state = 376 state = 377 state = 393 state = 276 state = 1086 state = 331 state = 1083 state = 1082 state = 1081 state = 1079 state = 1085 state = 1138 state = 901 state = 271 state = 1080 state = 550 state = 269 state = 547 state = 295 state = 1065 state = 542 state = 681 state = 719 state = 272 state = 755 state = 607 state = 620 state = 602 state = 600 state = 598 state = 596 state = 595 state = 593 state = 599 state = 594 state = 524 state = 527 state = 539 state = 521 state = 285 state = 519 state = 520 state = 723 state = 924 state = 468 state = 487 state = 499 state = 496 state = 505 state = 792 state = 172 state = 680 state = 416 state = 411 state = 414 state = 1188 state = 410 state = 412 state = 425 state = 424 state = 427 state = 436 state = 438 state = 433 state = 440 state = 228 state = 640 state = 670 state = 671 state = 672 state = 334 state = 669 state = 482 state = 483 state = 484 state = 456 state = 769 state = 797 state = 1115 state = 293 state = 343 state = 348 state = 350 state = 352 state = 786 state = 344 state = 837 state = 106 state = 185 state = 47 state = 148 state = 587 state = 402 state = 1118 state = 1049
					}
				}
				set_variable = { state_infra_var = -0.25 }
				set_variable = { state_infra_half_var = -0.125 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			every_state = {
				limit = {
					OR = {
						state = 637 state = 886 state = 915 state = 887 state = 718 state = 538 state = 506 state = 574 state = 575 state = 576 state = 577 state = 580 state = 581 state = 214 state = 215 state = 213 state = 144 state = 404 state = 956 state = 330 state = 955 state = 954 state = 953 state = 330 state = 930 state = 375 state = 378 state = 380 state = 388 state = 473 state = 470 state = 469 state = 682 state = 467 state = 466 state = 1060 state = 663 state = 662 state = 661 state = 1068 state = 699 state = 556 state = 557 state = 1011 state = 1012 state = 928 state = 1013 state = 1019 state = 549 state = 767 state = 1051 state = 559 state = 830 state = 1114 state = 541 state = 1110 state = 983 state = 544 state = 543 state = 660 state = 1005 state = 549 state = 1006 state = 558 state = 323 state = 1104 state = 902 state = 434 state = 280 state = 929 state = 998 state = 292 state = 679 state = 944 state = 1119 state = 1170
					}
				}
				set_variable = { state_infra_var = -0.5 }
				set_variable = { state_infra_half_var = -0.25 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			every_state = {
				limit = {
					OR = {
						state = 262 state = 463 state = 911 state = 379 state = 1087 state = 101 state = 453 state = 1067 state = 757 state = 758 state = 601 state = 833 state = 324 state = 674 state = 495 state = 675 state = 457 state = 1054 state = 1116
						impassable = yes
					}
				}
				set_variable = { state_infra_var = -1 }
				set_variable = { state_infra_half_var = -0.5 }
				add_dynamic_modifier = { modifier = infra_in_state_dyn }
				force_update_dynamic_modifier = yes
			}
			
			every_state = {
				limit = {
					is_on_continent = europe
					NOT = { is_core_of = SOV }
				}
				add_state_modifier = {
					modifier = {
						europe_state_modifiers = 1
					}
				}
			}
			
			every_state = {
				limit = {
					OR = {
						state = 991 state = 960 state = 958 state = 959 state = 938 state = 293 state = 853 state = 854 state = 855 state = 851 state = 797 state = 769 state = 678 state = 679 state = 292 state = 1115 state = 1116 state = 1073 state = 417 state = 421 state = 413 state = 995 state = 962 state = 675 state = 656 state = 455 state = 291 state = 1053 state = 1054 state = 998 state = 680 state = 945 state = 961 state = 554 state = 1100 state = 1101 state = 1108 state = 1055 state = 675 state = 676 state = 677 state = 978 state = 979 state = 454 state = 980 state = 1097 state = 773 state = 1119 state = 658 state = 1186 state = 941 state = 942 state = 943 state = 936 state = 935 state = 805 state = 294 state = 1170 state = 944 state = 803 state = 659 state = 1052 state = 1118 state = 767 state = 552 state = 452 state = 456 state = 457 state = 452 state = 453 state = 446 state = 447 state = 1064 state = 662 state = 663 state = 661 state = 450 state = 451 state = 448 state = 449 state = 273 state = 1057 state = 1059 state = 458 state = 655 state = 1067 state = 460 state = 459 state = 513 state = 461 state = 290 state = 514 state = 462 state = 806 state = 1015 state = 178 state = 699
					}
				}
				add_state_modifier = {
					modifier = {
						arabia_cores_modifiers = 1
					}
				}
			}
			
			
			### AI_DIVISION_LIMITER_DYNAMIC
			if = {
				limit = {
					has_game_rule = { rule = ai_division_limiter_status option = AI_DIVISION_LIMITER_DYNAMIC }
				}
				every_possible_country = {
					set_variable = { ai_upper_limit = num_of_factories }
					multiply_variable = { ai_upper_limit = 1.15 }
					if = {
						limit = { is_major = yes }
						multiply_variable = { ai_upper_limit = 1.15 }
					}
					if = {
						limit = { has_war = yes }
						multiply_variable = { ai_upper_limit = 1.2 }
					}
					if = {
						limit = { threat > 0.74 }
						multiply_variable = { ai_upper_limit = 1.05 }
					}
					if = {
						limit = {
							OR = {
								has_idea = irregular_army
								has_idea = partial_regular_army
							}
						}
						add_to_variable = { ai_upper_limit = 10 }
						add_to_variable = { ai_upper_limit = peoples_militia_var }
					}
					round_variable = ai_upper_limit
				}
			}

			### AI_DIVISION_LIMITER_DYNAMIC
			random_country = {
				set_variable = { global.total_division = 0 }
				set_variable = { global.total_ships = 0 }
				set_variable = { global.total_avia = 0 }
				set_variable = { global.total_no_ai_player = 0 }
				every_country = {
					add_to_variable = { global.total_division = THIS.num_divisions }
					add_to_variable = { global.total_ships = THIS.num_ships }
					add_to_variable = { global.total_avia = THIS.num_deployed_planes }
				}
				every_country = {
					limit = { is_ai = no }
					add_to_variable = { global.total_no_ai_player = 1 }
				}
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_1000 } }
				random_country = { set_variable = { global.total_division_limit = 1000 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_1250 } }
				random_country = { set_variable = { global.total_division_limit = 1250 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_1500 } }
				random_country = { set_variable = { global.total_division_limit = 1500 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_1750 } }
				random_country = { set_variable = { global.total_division_limit = 1750 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_2000 } }
				random_country = { set_variable = { global.total_division_limit = 2000 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_2250 } }
				random_country = { set_variable = { global.total_division_limit = 2250 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_2500 } }
				random_country = { set_variable = { global.total_division_limit = 2500 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_2750 } }
				random_country = { set_variable = { global.total_division_limit = 2750 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_3000 } }
				random_country = { set_variable = { global.total_division_limit = 3000 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_3250 } }
				random_country = { set_variable = { global.total_division_limit = 3250 } }
			}
			if = {
				limit = { has_game_rule = { rule = ai_division_total_limiter_status option = AI_DIVISION_TOTAL_LIMITER_3500 } }
				random_country = { set_variable = { global.total_division_limit = 3500 } }
			}

			### volunteer_only
			every_possible_country = {
				limit = {
					has_idea = volunteer_only
					NOT = { has_dynamic_modifier = { modifier = volunteer_only_dyn } }
				}
				set_variable = { volunteer_only_var = party_popularity@ruling_party }
				multiply_variable = { volunteer_only_var = has_war_support }
				multiply_variable = { volunteer_only_var = 0.0045 }
				subtract_from_variable = { volunteer_only_var = 0.015 }
				add_dynamic_modifier = { modifier = volunteer_only_dyn }
			}
			
			
			
			
### АЛЬТОВЫЕ СЦЕНАРИИ
			if = {
				limit = {
					OR = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
				}
				#set_global_flag = AI_AGGRESSION_ULTRA_FLAG
				random_country = {
					limit = { is_ai = no }
					log = "[GetDateText]: [This.GetName] ([This.GetTag]): IS ADJUSTER"
					country_event = { id = NWgeneric.9998 }
				}
				set_variable = { global.total_trozkist = 0 }
				
				random_country = {
					limit = {
						has_government = trozkism
						not_is_really_trozkist = yes
					}
					set_var_for_troz_threat_dyn = yes
				}
				
				every_country = {
					if = {
						limit = { NOT = { has_focus_tree = generic_focus } }
						load_focus_tree = { tree = generic_focus keep_completed = no }
						every_unit_leader = { retire = yes }
					}
				
					if = {
						limit = { has_government = anarchism }
						country_event = { id = TRpolitical.106 }
					}
					if = {
						limit = { has_war_with = JAP }
						every_enemy_country = { PREV = { white_peace = PREV } }
					}
					if = {
						limit = { is_faction_leader = yes }
						dismantle_faction = yes
					}
					if = {
						limit = {
							has_government = trozkism
							not_is_really_trozkist = yes
						}
						add_to_variable = { global.total_trozkist = 1 }
						if = {
							limit = {
								NOT = { has_dynamic_modifier = { modifier = troz_threat_dyn } }
								not_is_really_trozkist = yes
							}
							add_dynamic_modifier = { modifier = troz_threat_dyn }
						}
						if = {
							limit = { NOT = { has_country_flag = is_trozkist_country_flag } }
							set_country_flag = is_trozkist_country_flag
						}
						if = {
							limit = { num_of_factories > 74 }
							add_to_variable = { global.troz_threat_var = 3 }
							log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 3 тронапряги как мажор"
						}
						else_if = {
							limit = { num_of_factories > 24 }
							add_to_variable = { global.troz_threat_var = 2 }
							log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 2 тронапряги как миддл"
						}
						else = {
							add_to_variable = { global.troz_threat_var = 1 }
							log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 1 тронапряги как минор)0"
						}
					}
	
					destroy_ships = { type = ship_hull_light		count = all }
					destroy_ships = { type = ship_hull_cruiser		count = all }
					destroy_ships = { type = ship_hull_heavy		count = all }
					destroy_ships = { type = ship_hull_carrier		count = all }
					destroy_ships = { type = ship_hull_submarine	count = all }
				}
				
				
				
### МИР РАСКОЛА
				if = {
					limit = { has_global_flag = WORLD_OF_SPLIT_FLAG }
					every_country = {
						limit = { is_subject = yes }
						drop_cosmetic_tag = yes
						OVERLORD = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_free
							}
						}
					}
					BUL = {
						start_civil_war = {
							ideology = fascism
							size = 0.5
						} 
					}
				}
			}
			
			
			
			
			
			#random_country = {
			#	set_country_flag = timer_timer_flag
			#	log = "[GetDateText]: [This.GetName] ([This.GetTag]): Избран крикуном"
			#}
			#Configurator
			#random_country = {
			#	limit = { is_ai = no }
			#	set_global_flag = nw_configurator_open
			#}
			
			set_variable = { counter_days = 0 }
			
			
			### Delete SAI // убран с карты по дефолту
			#CHL = { transfer_state = 933 }
			#933 = { remove_core_of = SAI }
			
			### Start legitimacy
			#every_country = {
			#	country_event = { id = tmo.migration.9 }
			#}
			#if = {
			#	limit = {
			#		is_historical_focus_on = no
			#		has_start_date < 1936.1.2
			#	}
			#	every_country = {
			#		limit = {
			#			OR = {
			#				has_focus_tree = generic_focus
			#				has_focus_tree = generic_anarchism_focus
			#			}
			#			democratic < 1
			#			communism < 1
			#			fascism < 1
			#			neutrality < 1
			#			technocracy < 1
			#			trozkism < 1
			#			monarchy < 1
			#			anarchism < 1
			#		}
			#		random_list = {
			#			50 = { }
			#			20 = { add_popularity = { ideology = technocracy popularity = 0.2 } }
			#			10 = { add_popularity = { ideology = technocracy popularity = 0.15 } }
			#			10 = { add_popularity = { ideology = technocracy popularity = 0.1 } }
			#			10 = { add_popularity = { ideology = technocracy popularity = 0.05 } }
			#		}
			#	}
			#}
			every_country = {
				limit = {
					OR = {
						tag = LIE
						tag = DNZ
						tag = ADR
						tag = MNC
						tag = TNR
						tag = SMA
						tag = VAT
					}
					is_ai = yes
				}
				set_rule = { can_join_factions = no }
				set_rule = { can_create_factions = no }
				add_ideas = justify_minor_idea
				log = "[GetDateText]: [This.GetName] ([This.GetTag]): запрет вступать в альянсы"
			}
			
#			if = {
#				limit = {
#					has_game_rule = {
#						rule = trade_weapons
#						option = DEFAULT
#					}
#				}
#				random_country = {
#					limit = { is_ai = no }
#					set_variable = {
#						var = global.total_infantry_weapons
#						value = 0
#					}
#					set_variable = {
#						var = global.total_artillery
#						value = 0
#					}
#					set_variable = {
#						var = global.total_support
#						value = 0
#					}
#					set_variable = {
#						var = global.total_motorized
#						value = 0
#					}
#					set_variable = {
#						var = global.total_mechanized
#						value = 0
#					}
#					set_variable = {
#						var = global.total_armored_car
#						value = 0
#					}
#					set_variable = {
#						var = global.total_light_tanks
#						value = 0
#					}
#					set_variable = {
#						var = global.total_medium_tanks
#						value = 0
#					}
#					set_variable = {
#						var = global.total_air_light_fighter
#						value = 0
#					}
#					set_variable = {
#						var = global.total_air_heavy_fighter
#						value = 0
#					}
#				}
#			}
			
			
			
### generic_tree_all_allowed
			if = {
				limit = {
					has_game_rule = {
						rule = generic_tree_all_allowed
						option = GENERIC_ALLOWED_ALL
					}
				}
				set_global_flag = generic_all_flag
			}
			
			### generic_tree_all_set_ideology
			if = {
				limit = {
					NOT = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = DEFAULT
						}
					}
				}
				set_global_flag = generic_all_flag
				if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_DEMOCRATIC
						}
					}
					set_global_flag = generic_all_set_democratic_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_COMMUNISM
						}
					}
					set_global_flag = generic_all_set_communism_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_FASCISM
						}
					}
					set_global_flag = generic_all_set_fascism_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_NEUTRALITY
						}
					}
					set_global_flag = generic_all_set_neutrality_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_TECHNOCRACY
						}
					}
					set_global_flag = generic_all_set_technocracy_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_TROZKISM
						}
					}
					set_global_flag = generic_all_set_trozkism_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_MONARCHY
						}
					}
					set_global_flag = generic_all_set_monarchy_flag
				}
				else_if = {
					limit = {
						has_game_rule = {
							rule = generic_tree_all_set_ideology
							option = GENERIC_ALL_SET_ANARCHISM
						}
					}
					set_global_flag = generic_all_set_anarchism_flag
				}
			}
			
			
### generic_spawn_anarchists перенесено в bookmarks
			if = {
				limit = {
					has_game_rule = {
						rule = generic_spawn_anarchists
						option = GENERIC_SPAWN_ANARCHISTS_ONE
					}
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = generic_spawn_anarchists
						option = GENERIC_SPAWN_ANARCHISTS_TWO
					}
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
			}
			else_if = {
				limit = {
					has_game_rule = {
						rule = generic_spawn_anarchists
						option = GENERIC_SPAWN_ANARCHISTS_THREE
					}
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
				random_country = {
					limit = {
						exists = yes
						is_ai = yes
						NOT = {
							tag = TIG
							has_government = anarchism
							has_country_flag = generic_spawn_anarchists_flag
						}
						NOT = {
							is_subject = yes
							OVERLORD = { has_government = fascism }
						}
						has_focus_tree = generic_focus
						num_of_controlled_states > 1
					}
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): выбран анархистом"
					set_country_flag = generic_spawn_anarchists_flag
				}
			}
			
			
			
### WONDERS
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = miracles_status
							option = MIRACLES
						}
						has_game_rule = {
							rule = miracles_status
							option = MIRACLES_AND_MOAI
						}
					}
				}
				random_country = {
					news_event = { id = trworldnews.35 hours = 3 }
					news_event = { id = trworldnews.36 hours = 4 }
				}
				2 = { set_state_flag = kolizeum_wonder_flag }
				616 = { set_state_flag = great_wall_wonder_flag }
				621 = { set_state_flag = great_wall_wonder_flag }
				611 = { set_state_flag = great_wall_wonder_flag }
				608 = { set_state_flag = great_wall_wonder_flag }
				609 = { set_state_flag = great_wall_wonder_flag }
				816 = { set_state_flag = great_wall_wonder_flag }
				494 = { set_state_flag = machu_pikchu_wonder_flag }
				455 = { set_state_flag = petra_wonder_flag }
				437 = { set_state_flag = taj_mahal_wonder_flag }
				500 = { set_state_flag = cristos_redentor_wonder_flag }
				474 = { set_state_flag = chichen_itza_wonder_flag }
				341 = { set_state_flag = sobor_sofia_wonder_flag }
				1024 = { set_state_flag = afin_acropol_wonder_flag }
				173 = { set_state_flag = algambra_wonder_flag }
				741 = { set_state_flag = angkor_wonder_flag }
				933 = { set_state_flag = moai_wonder_flag }
				219 = { set_state_flag = kremlin_wonder_flag }
				52 = { set_state_flag = noishvanshtain_wonder_flag }
				552 = { set_state_flag = piramids_wonder_flag }
				358 = { set_state_flag = statuya_liberty_wonder_flag }
				338 = { set_state_flag = stonehenge_wonder_flag }
				556 = { set_state_flag = tombuktu_wonder_flag }
				531 = { set_state_flag = temple_kiemidzu_dera_wonder_flag }
				16 = { set_state_flag = eiffel_tower_wonder_flag }
				
				2 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = kolizeum_wonder } }
				616 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				621 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				611 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				608 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				609 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				816 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } }
				494 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = machu_pikchu_wonder } }
				455 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = petra_wonder } }
				437 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = taj_mahal_wonder } }
				500 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = cristos_redentor_wonder } }
				474 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = chichen_itza_wonder } }
				341 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = sobor_sofia_wonder } }
				1024 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = afin_acropol_wonder } }
				173 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = algambra_wonder } }
				741 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = angkor_wonder } }
				933 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } } } 	#no wonder
				219 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = kremlin_wonder } }
				52 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = noishvanshtain_wonder } }
				552 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = piramids_wonder } }
				358 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = statuya_liberty_wonder } }
				338 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = stonehenge_wonder } }
				556 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = tombuktu_wonder } }
				531 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = temple_kiemidzu_dera_wonder } }
				16 = { controller = { add_to_variable = { var = wonder_thief_score value = 1 } add_ideas = eiffel_tower_wonder } }
				every_country = {
					limit = { any_controlled_state = { has_state_flag = great_wall_wonder_flag } }
					country_event = { id = TR.wonder.29 }
				}
				### Start pointer great china wall
				every_possible_country = {
					set_variable = { var = bonus_gw value = 0 }
				}
				if = {
					limit = {
						has_game_rule = {
							rule = miracles_status
							option = MIRACLES_AND_MOAI
						}
					}
					set_global_flag = magic_moai
					933 = { controller = { country_event = { id = TR.wonder.13 } } }
					else = {
						933 = { controller = { add_ideas = moai_wonder } }
					}
				}
			}
			
			
			set_variable = { var = var_add_pop value = 0 }
			
			#POL = { country_event = { id = poland.story.1 } }
			
			if = {
				limit = {
					OR = {
						has_game_rule = {
							rule = ai_aggression_status
							option = AI_AGGRESSION_ULTRA
						}
						has_global_flag = AI_AGGRESSION_ULTRA_FLAG
					}
				}
				every_country = {
					add_ideas = ai_aggression_ultra_idea
					set_rule = {
						can_declare_war_on_same_ideology = yes
						can_only_justify_war_on_threat_country = no
					}
				}
			}
			
			if = {
				limit = {
					has_game_rule = {
						rule = ai_faction_status
						option = AI_FACTION_NO
					}
				}
				every_country = {
					limit = { is_ai = yes }
					set_rule = { can_join_factions = no }
				}
			}
			
			if = {
				limit = {
					has_game_rule = {
						rule = ai_force_build_land_cruiser_status
						option = AI_FORCE_BUILD_LAND_CRUISER_UP
					}
				}
				set_global_flag = ai_force_build_land_cruiser_flag
			}
			
			
### СТАРТПАК СЕКЦИЯ ###
			set_global_flag = NW_TUR_OLD_FOCUS_TREE
			TUR = {
				every_controlled_state = {
					limit = { is_on_continent = europe }
					PREV = { add_to_variable = { turkey_europe_controlled_state = 1 } }
				}
			}
			if = {
			# 1936 #
				limit = { has_start_date < 1936.01.02 }
				# Саадабадский пакт
				every_country = {
					limit = {
						OR = {
							original_tag = TUR
							original_tag = PER
							original_tag = IRQ
							original_tag = AFG
							original_tag = EGY
							original_tag = SYR
							original_tag = BPL
							original_tag = LEB
							original_tag = ALW
							original_tag = JDS
						}
						
					}
					activate_mission = TUR_preliminary_negotiations
				}
				### Spain стартпак
				SPR = {
					country_event = { id = NWspain.2 days = 9 }
					country_event = { id = NWspain.3 days = 12 random_days = 2 }
					country_event = { id = NWspain.990 days = 15 } 			#Пульсар
					country_event = { id = NWspain.5 days = 44 }
					news_event = { id = trworldnews.171 days = 200 }		#Народная Олимпиада
				}
				# Greece стартпак
				GRE = {
					country_event = { id = nw_greece.1 days = 26 }
					country_event = { id = nw_greece.14 days = 730 }
				}
				### Цейлон стартпак
				SRL = {
					country_event = { id = lka.11 days = 69 }
					country_event = { id = lka.12 days = 458 }
					country_event = { id = lka.13 days = 490 }
					country_event = { id = lka.14 days = 503 }
					country_event = { id = lka.33 days = 315 }
				}
				### FRA стартпак
				FRA = { country_event = { id = NWfrance.51 months = 22 days = 16 hours = 13 } } # Попытка фашистского государственного переворота
				### Либерия стартпак
				LIB = {
					country_event = { id = nw_liberia.100 days = 215 }
					if = {
						limit = { has_dlc = "Man the Guns" }
						give_resource_rights = { receiver = USA state = 298 }
						give_resource_rights = { receiver = USA state = 1076 }
						give_resource_rights = { receiver = USA state = 1077 }
						give_resource_rights = { receiver = USA state = 1072 }
						give_resource_rights = { receiver = USA state = 1074 }
						give_resource_rights = { receiver = USA state = 1069 }
						give_resource_rights = { receiver = USA state = 1078 }
					}
				}
				### Иран стартпак
				PER = {
					country_event = { id = NWpersian.91 days = 7 }
					country_event = { id = NWpersian.153 days = 60 random_days = 10 }
				}
				### Ирак стартпак
				IRQ = {
					give_resource_rights = { receiver = ENG state = 676 }
					country_event = { id = NWiraq.3 days = 299 }
					country_event = { id = NWiraq.13 days = 588 }
					country_event = { id = NWiraq.48 days = 397 }
					country_event = { id = NWiraq.50 days = 742 }
					country_event = { id = NWiraq.52 days = 1127 }
				}
				### Палестина стартпак
				BPL = {
					country_event = { id = NWpalestine.8 days = 792 }
					country_event = { id = NWpalestine.65 days = 229 }
				}
				### Турок стартпак
				TUR = {
					country_event = { id = NW_new_turkey.132 days = 120 }
					country_event = { id = NW_new_turkey.133 days = 146 }
					country_event = { id = NW_new_turkey.1500 days = 364 }
					country_event = { id = NWkurd.0 days = 305 }
					country_event = { id = NWkurd.2 days = 444 }
					if = {
						limit = { has_global_flag = NW_TUR_OLD_FOCUS_TREE }
#						add_country_leader_trait = ataturk_trait
#						country_event = { id = NWturkey.1000 days = 1044 }
					}
					else = {
#						add_country_leader_trait = peace_in_country_world_peace
#						add_country_leader_trait = modernization
#						add_country_leader_trait = reformator
						country_event = { id = NW_new_turkey.56 days = 1044 }
						country_event = { id = NW_new_turkey.132 days = 60 }
					}
				}
				### HOL
				HOL = {
					country_event = { id = NW_HOL.0 days = 10 }
					country_event = { id = NW_HOL.1 days = 32 }
					country_event = { id = NW_HOL.7 days = 101 }
					country_event = { id = NW_HOL.8 days = 262 }
					country_event = { id = NW_HOL.9 days = 315 }
					country_event = { id = NW_HOL.10 days = 335 }
					country_event = { id = NW_HOL.11 days = 358 }
					country_event = { id = NW_HOL.12 days = 373 }
					country_event = { id = NW_HOL.13 days = 763 }
					country_event = { id = NW_HOL.14 days = 930 }
					country_event = { id = NW_HOL.15 days = 1014 }
					country_event = { id = NW_HOL.16 days = 1036 }
					country_event = { id = NW_HOL.18 days = 2578 }
					country_event = { id = NW_HOL.19 days = 1046 }
					country_event = { id = NW_HOL.20 days = 46 }
					country_event = { id = NW_HOL.70 days = 63 }
					country_event = { id = NW_HOL.71 days = 769 }
				}
				### AFG
				AFG = {
					country_event = { id = NW_AFG.0 hours = 0 } 
					country_event = { id = NW_AFG.1 days = 13 } 
					country_event = { id = NW_AFG.5 days = 36 }
					country_event = { id = NW_AFG.6 days = 59 }
					country_event = { id = NW_AFG.24 days = 175 }
					country_event = { id = NW_AFG.25 days = 505 }
					country_event = { id = NW_AFG.27 days = 460 }
				}
				### BRW
				BRW = {
					country_event = { id = NW_BRW.7 days = 61 }
					country_event = { id = NW_BRW.8 days = 181 }
					country_event = { id = NW_BRW.9 days = 1644 }
					country_event = { id = NW_BRW.10 days = 1873 }
					country_event = { id = NW_BRW.11 days = 2202 }
				}
				### Ньюф стартпак
				NFL = {
					country_event = { id = Newfoundland.7 days = 3 }
					country_event = { id = Newfoundland.72 days = 57 }  # смерть Элдердайса
				}
				### ENG
				ENG = {
					country_event = { id = britain.16 days = 19 }
					country_event = { id = britain.17 days = 345 }
					#NFL
					country_event = { id = Newfoundland.8 days = 218 }  # вопрос о губернаторе
					#TIB
					country_event = { id = tibet.602 days = 700 } 		# чтобы не застрял в воздухе. В пульсаре происходит проверка и переадресация правильным тегам
					#GER
					country_event = { id = NWgermany.25 days = 353 } 	# В GER может начаться ГВ и ивент застрянет в воздухе. В пульсаре происходит проверка и переадресация правильному GER
					country_event = { id = NWgermany.28 days = 1406 }
					#SAU
					country_event = { id = NWsaudi.600 days = 415 }
					country_event = { id = NWsaudi.601 days = 1123 }
					country_event = { id = NWsaudi.601 days = 1477 }
					country_event = { id = NWsaudi.601 days = 2186 }
					country_event = { id = NWsaudi.601 days = 2541 }
					country_event = { id = NWsaudi.601 days = 2895 }
					country_event = { id = NWsaudi.601 days = 3249 }
					country_event = { id = NWsaudi.601 days = 3603 }
					country_event = { id = NWsaudi.601 days = 3957 }
					country_event = { id = NWsaudi.601 days = 4312 }
					country_event = { id = NWsaudi.601 days = 4312 }
					country_event = { id = NWsaudi.601 days = 4666 }
					country_event = { id = NWsaudi.601 days = 5021 }
					country_event = { id = NWsaudi.601 days = 5376 }
					#Хадрамут
					country_event = { id = NWhadhramaut.1 days = 24 }	#25 января
					### ивенты-затычки
					country_event = { id = NWzatyk.17 days = 513 }
					country_event = { id = NWzatyk.1900 days = 1590 }
				}
				### Египет стартпак
				EGY = {
					country_event = { id = egy.59 days = 25 }
					country_event = { id = egy.60 days = 40 }
					country_event = { id = egy.3 days = 118 }
					country_event = { id = egy.4 days = 126 }
					country_event = { id = egy.5 days = 129 }
					country_event = { id = egy.63 days = 159 }
					country_event = { id = egy.64 days = 173 }
					country_event = { id = egy.58 days = 274 }
					country_event = { id = egy.61 days = 356 }
					country_event = { id = egy.62 days = 493 }
					country_event = { id = egy.6 days = 574 }
					country_event = { id = egy.7 days = 750 }
					country_event = { id = egy.75 days = 1133 }
					country_event = { id = egy.8 days = 2886 }
					country_event = { id = egy.9 days = 2896 }
				}
				### Бельгия стартпак
				BEL = {
					country_event = { id = NWbelgium.150 days = 1091 }
				}
				### Непал стартпак
				NEP = {
					country_event = { id = nepal.0 days = 493 }
					country_event = { id = nepal.30 days = 201 }
					country_event = { id = nepal.21 days = 399 }
				}
				### Бутан стартпак
				BHU = {
					country_event = { id = NWbhutan.1 days = 1805 }
				}
				### Тибет стартпак
				TIB = {
					country_event = { days = 40 id = tibet.48 }
					country_event = { days = 240 id = tibet.42 }
					country_event = { days = 410 id = tibet.43 }
					country_event = { days = 420 id = tibet.44 }
					country_event = { days = 420 id = tibet.44 }
					country_event = { days = 1055 id = tibet.450 }
					#country_event = { days = 5 id = tibet.65 }
					#country_event = { days = 12 id = tibet.66 }
					#MON
					country_event = { days = 60 id = NWmongol_left.5 }
					country_event = { days = 91 id = NWmongol_left.6 }
					country_event = { days = 121 id = NWmongol_left.7 }
				}
				### Албания стартпак
				ALB = {
					country_event = { days = 31 id = NWalbania.2 }
					country_event = { days = 186 id = NWalbania.6 }
					country_event = { days = 277 id = NWalbania.9 }
					country_event = { days = 310 id = NWalbania.16 } # 7 ноября
					country_event = { days = 147 id = NWalbania.70 } # 28 мая 1936 
					if = { 
						limit = {
							OR = {
								has_government = monarchy
								has_completed_focus = ALB_invite_fan_noli
							}
						}
						country_event = { days = 847 id = NWalbania.1400 }
						country_event = { days = 1190 id = NWalbania.20000 } 
					}
					give_resource_rights = { receiver = ITA state = 44 }
				}
				### Дания стартпак
				DEN = {
					country_event = { id = apdenmark.1 days = 20 }
					country_event = { id = apdenmark.2000 days = 247 }
					country_event = { id = apdenmark.4000 days = 2310 }	#1942.4.30
					country_event = { id = apdenmark.41000 days = 274 }	#1936.10.1
					country_event = { id = apdenmark.43000 days = 151 }	#1936.6.1
					country_event = { id = apdenmark.44000 days = 243 }	#1936.9.1
					country_event = { id = apdenmark.73 days = 181 }	#1936.7.1
					country_event = { id = apdenmark.78 days = 212 }
				}
				### Германия стартпак
				GER = {
					country_event = { id = NWgermany.1 days = 30 }
					country_event = { id = NWgermany.750 days = 1354 }
					country_event = { id = NWgermany.760 days = 1607 }
				}
				### SAU
				797 = { add_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate } }
				1115 = { add_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate } }
				679 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				1073 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				991 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				292 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn } }
				769 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn } }
				SAU = {
					give_resource_rights = { receiver = USA state = 1115 }
					country_event = { id = NWsaudi.50 days = 39 }
					country_event = { id = NWsaudi.6 days = 59 }
					country_event = { id = NWsaudi.10 days = 79 random_days = 40 }
					country_event = { id = NWsaudi.11 days = 89 }
					country_event = { id = NWsaudi.12 days = 122 }
					country_event = { id = NWsaudi.29 days = 274 }
					country_event = { id = NWsaudi.19 days = 314 }
					country_event = { id = NWsaudi.3100 days = 341 }
					country_event = { id = NWsaudi.20 days = 441 }
					country_event = { id = NWsaudi.2100 days = 486 }
					country_event = { id = NWsaudi.2200 days = 561 }
					country_event = { id = NWsaudi.23 days = 618 }
					country_event = { id = NWsaudi.500 days = 14 }
					country_event = { id = NWsaudi.3200 days = 741 }
					country_event = { id = NWsaudi.2700 days = 832 }
					country_event = { id = NWsaudi.24 days = 1028 }
					#OMA
					country_event = { id = NWmuscat.2 days = 46 random_days = 3 }
				}
				### Йемен стартпак
				YEM = {
					country_event = { id = yem.1 }
					country_event = { id = yem.4 days = 19 }
					country_event = { id = NWsaudi.50 days = 39 }
					country_event = { id = yem.6 days = 59 }
					country_event = { id = yem.8 days = 90 }
					country_event = { id = yem.9 days = 110 }
				}
				### Оман стартпак
				IOM = {
					country_event = { days = 24 id = NWoman.1 }
					country_event = { days = 89 id = NWoman.2 }
					country_event = { days = 125 id = NWoman.3 }
					country_event = { days = 152 id = NWoman.4 }
					country_event = { days = 217 id = NWoman.5 }
					country_event = { days = 314 id = NWoman.7 }
				}
				### Маскат стартпак
				OMA = {
					country_event = { days = 41 id = NWmuscat.1 }
					country_event = { days = 118 id = NWmuscat.8 }
					country_event = { days = 127 id = NWmuscat.9 }
					country_event = { days = 171 id = NWmuscat.15 }
					country_event = { days = 130 id = NWmuscat.17 }
					country_event = { days = 352 id = NWmuscat.24 }
					country_event = { days = 1783 id = NWmuscat.270 }	#18 ноября 1940 года
					country_event = { days = 381 id = NWmuscat.28 }		#16 января 1937
				}
				### Кипр стартпак
				CYP = {
					country_event = { id = NWcyprus.501 days = 122 }	#3 мая
					country_event = { id = NWcyprus.2 days = 141 }		#22 мая
					country_event = { id = NWcyprus.3 days = 831 }		#12.04.1938
				}
				### QUA стартпак
				QUA = {
					country_event = { id = NWhadhramaut.300 days = 397 }	#февраль 1937
				}
				### Индия стартпак
				RAJ = {
					country_event = { id = NWhadhramaut.800 days = 456 }	#апрель 1937
				}
				### Италия стартпак
				ITA = {
					country_event = { id = BBA_italo_ethiopian_war_events.400 days = 5 random_days = 5 }
				}
				### Монгол стартпак
				MON = {
					country_event = { days = 1 id = NWmongol_left.4 }
					country_event = { days = 6 id = NWmongol_left.10 }
				}
				### MAN стартпак
				MAN = {
					country_event = { days = 29 id = NWmongol_left.8 }
					country_event = { days = 42 id = NWmongol_left.9 }
				}
				### Тува стартпак
				TAN = {
					country_event = { id = NWtuva.3 days = 31 }
				}
				### ивенты-затычки | 1936
				LIT = {
					country_event = { id = NWzatyk.100 days = 1369 }
					country_event = { id = NWzatyk.200 days = 1627 }
				}
				LAT = {
					country_event = { id = NWzatyk.100 days = 1369 }
					country_event = { id = NWzatyk.200 days = 1627 }
				}
				EST = {
					country_event = { id = NWzatyk.100 days = 1369 }
					country_event = { id = NWzatyk.200 days = 1627 }
				}
				FIN = {
					country_event = { id = NWzatyk.300 days = 1400 }
				}
				ROM = {
					country_event = { id = NWzatyk.500 days = 1640 }
				}
				JAP = {
					country_event = { id = NWzatyk.12 days = 56 }
					country_event = { id = NW_marco_polo_bridge.1 days = 553 }
					country_event = { id = NWzatyk.1300 days = 930 }
					country_event = { id = NWzatyk.1500 days = 1226 }
				}
				USA = {
					country_event = { id = NWzatyk.9 days = 307 }
					country_event = { id = NWzatyk.1000 days = 1768 }
					country_event = { id = NWzatyk.1100 days = 1768 }
					country_event = { id = NWzatyk.6 days = 2131 }
					country_event = { id = NWzatyk.21 days = 3123 }
				}
				### сторис в инсту
				SOV = {
					country_event = { id = NWgeneric_stories.1 days = 488 }		#Извержение вулкана
					country_event = { id = NWgeneric_stories.1 days = 839 }		#Кыршехирское землетрясение
				}
			}
		# 1936 - 1939 #
			else_if = {
				limit = {
					has_start_date > 1936.1.2
					has_start_date < 1939.8.15
				}
				### Дания стартпак
				DEN = {
					country_event = { id = apdenmark.4000 days = 989 }	#1942.4.30
				}
				### Германия стартпак
				GER = {
					country_event = { id = NWgermany.750 days = 33 }
					country_event = { id = NWgermany.760 days = 286 }
				}
				### ENG
				ENG = {
					#GER
					country_event = { id = NWgermany.28 days = 85 } 	# В GER может начаться ГВ и ивент застрянет в воздухе. В пульсаре происходит проверка и переадресация правильному GER
					#SAU
					country_event = { id = NWsaudi.601 days = 156 }
					country_event = { id = NWsaudi.601 days = 865 }
					country_event = { id = NWsaudi.601 days = 1220 }
					country_event = { id = NWsaudi.601 days = 1574 }
					country_event = { id = NWsaudi.601 days = 1928 }
					country_event = { id = NWsaudi.601 days = 2282 }
					country_event = { id = NWsaudi.601 days = 2636 }
					country_event = { id = NWsaudi.601 days = 2991 }
					country_event = { id = NWsaudi.601 days = 3345 }
					country_event = { id = NWsaudi.601 days = 3700 }
					country_event = { id = NWsaudi.601 days = 4055 }
				}
				### SAU
				SAU = {
					country_event = { id = NWsaudi.500 days = 17 }
				}
				### OMA
				OMA = {
					country_event = { days = 462 id = NWmuscat.270 }	#18 ноября 1940 года
				}
				### SOV
				SOV = {
					country_event = { id = NWgeneric_stories.1 days = 39 }		#Землетрясение в Дикили
				}
			}
		# 1939 - 1940 #
			else_if = {
				limit = {
					has_start_date > 1939.01.01
					has_start_date < 1940.01.01
				}
				POL = { country_event = { id = poland.flavor.2 days = 89 } }
			}
### КОНЕЦ СЕКЦИИ ###

### БАЛАНСИРОВКА ИТАЛО-ЭФИОПСКОЙ
			if = {
				limit = {
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
				}
				if = {
					limit = {
						NOT = {
							has_game_rule = {
								rule = ETH_ai_behavior
								option = DEFAULT
							}
						}
					}
					ETH = {
						add_equipment_to_stockpile = { type = infantry_equipment amount = 15000 }
					}
				}
				ITA = {
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Coloniale\" division_template = \"Divisione Coloniale\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Coloniale\" division_template = \"Divisione Coloniale\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Coloniale\" division_template = \"Divisione Coloniale\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Coloniale\" division_template = \"Divisione Coloniale\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Coloniale\" division_template = \"Divisione Coloniale\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Celere\" division_template = \"Divisione Celere\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					random_owned_state = {
						limit = { OR = { state = 550 state = 559 } }
						create_unit = {
							division = "name = \"Divisione Celere\" division_template = \"Divisione Celere\" start_experience_factor = 0.5" 
							owner = PREV
						}
					}
					if = {
						limit = { is_ai = yes is_historical_focus_on = yes }
						add_equipment_to_stockpile = { type = infantry_equipment amount = 10000 }
						add_equipment_to_stockpile = { type = artillery_equipment amount = 500 }
						add_equipment_to_stockpile = { type = support_equipment amount = 500 }
						add_equipment_to_stockpile = { type = armored_car_equipment amount = 300 }
					}
				}
			}
			
			#Балансировка SAU
			if = {
				limit = { SAU = { is_ai = yes } }
				SAU = {
					capital_scope = {
						create_unit = {
							division = "division_template = \"Milishia Badawia\" start_experience_factor = 0.0" 
							owner = PREV
							count = 2
						}
					}
					add_to_variable = { num_of_regular_camelry_var = 2 }
				}
			}
			
			#Починка подчинения
			every_state = {
				limit = {
					OR = {
						AND = {
							NOT = { is_core_of = ENG }
							is_owned_by = ENG
						}
						AND = {
							NOT = { is_core_of = FRA }
							is_owned_by = FRA
						}
						AND = {
							NOT = { is_core_of = BPL }
							is_owned_by = BPL
						}
					}
				}
				set_compliance = 100
				set_resistance = 0
			}
			TUR = {
				every_owned_state = {
					limit = {
						is_core_of = KRD
						NOT = { is_core_of = TUR }
					}
					set_compliance = 20
					set_resistance = 40
				}
			}
			962 = {
				if = {
					limit = {
						has_resistance = yes
					}
					set_compliance = 10
					set_resistance = 80
				}
			}
			
			#Починка субки
			every_possible_country = {
				limit = {
					has_government = neutrality
					OR = {
						has_country_flag = militarism
						OR = {
							original_tag = GXC
							original_tag = YUN
							original_tag = SHX
							original_tag = XSM
							original_tag = SIK
							original_tag = SIH
							original_tag = XIK
							original_tag = SHA
							original_tag = TNG
							original_tag = NEA
							original_tag = NGX
						}
					}
				}
				set_country_leader_ideology = militarism_ideology
				clr_country_flag = militarism_ideology
			}
			set_variable = { global.num_of_extra_tank_school_var = 5 }
		}
	}

	on_government_exiled = {
		effect = {
			if = {
				limit = {
					original_tag = HOL
					has_country_flag = HOL_prepared_evacuation_of_gold_reserves_flag
				}
				country_event = { id = mtg_netherlands.63 days = 1 }
			}
		}
	}
	
	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		effect = {
			#Небесные воины сошли на землю и обратили белых в бегство
			# if = { #?
				# limit = {
					# ROOT = {
						# tag = COG
						# NOT = { has_country_flag = COG_no_state_flag }
					# }
					# FROM = { has_war_with = ROOT }
				# }
				# ROOT = {
					# country_event = { id = cog.7 }
				# }
			# }
			
			#Непонятная ГВ в Германии
			if = {
				limit = {
					tag = HOL
					has_government = monarchy
					has_completed_focus = HOL_wilhelminism
					FROM = {
						original_tag = GER
						has_government = fascism
						has_civil_war = no
					}
					FROM.FROM = { is_core_of = GER }
				}
				FROM.FROM = { set_state_flag = HOL_german_states_kaiser }
				country_event = { id = mtg_netherlands.73 }
			}
			
			#Разрушение дворца в Аддис-Абебе
			if = {
				limit = {
					FROM.FROM = { state = 271 }
					ROOT = {
						tag = ITA
						has_idea = ITA_gas_idea
					}
					FROM = {
						tag = ETH
						has_war_with = ROOT
					}
					NOT = { has_global_flag = ETH_destruction_of_palace }
				}
				FROM = { country_event = { id = NWethiopia.10 hours = 6 } }
			}
			
			#Припасы в Эфиопии
			if = {
				limit = {
					NOT = { has_global_flag = italo_ethiopian_war_over }
					FROM.FROM = {
						NOT = { is_in_array = { seizure_of_ammunition_states = This.id } }
					}
					ROOT = {
						tag = ITA
						has_war_with = ETH
					}
					FROM = {
						OR = {
							tag = ETH
							tag = AFA
							tag = TIG
						}
					}
				}
				FROM.FROM = { add_to_array = { global.seizure_of_ammunition_states = This.id } }
			}
			
			#Снос чужого призывного пункта в стейте // генерик решения
			if = {
				limit = {
					FROM.FROM = { has_state_flag = has_recruiting_station_flag_@FROM }
				}
				FROM.FROM = {
					if = {
						limit = { check_variable = { recruiting_station_var_level > 0 } }
						if = {
							limit = { check_variable = { recruiting_station_var_level = 6 } }
							add_state_modifier = { modifier = { local_manpower = -1.0 } }
						}
						else_if = {
							limit = { check_variable = { recruiting_station_var_level = 5 } }
							add_state_modifier = { modifier = { local_manpower = -0.9 } }
						}
						else_if = {
							limit = { check_variable = { recruiting_station_var_level = 4 } }
							add_state_modifier = { modifier = { local_manpower = -0.8 } }
						}
						else_if = {
							limit = { check_variable = { recruiting_station_var_level = 3 } }
							add_state_modifier = { modifier = { local_manpower = -0.7 } }
						}
						else_if = {
							limit = { check_variable = { recruiting_station_var_level = 2 } }
							add_state_modifier = { modifier = { local_manpower = -0.6 } }
						}
						else_if = {
							limit = { check_variable = { recruiting_station_var_level = 1 } }
							add_state_modifier = { modifier = { local_manpower = -0.5 } }
						}
						clear_variable = recruiting_station_var_level
					}
					clr_state_flag = has_recruiting_station_flag_@FROM
				}
			}
			if = {
				limit = {
					FROM.FROM = { is_on_continent = europe }
					ROOT = { has_focus_tree = nw_turkish_focus_new }
				}
				ROOT = { add_to_variable = { turkey_europe_controlled_state = 1 } }
			}
			if = {
				limit = {
					FROM.FROM = { is_on_continent = europe }
					FROM = { has_focus_tree = nw_turkish_focus_new }
				}
				FROM = { add_to_variable = { turkey_europe_controlled_state = -1 } }
			}
			
			#Снос корки анархиста в стейте // генерик решения
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = is_core_of_anarchist_flag
						is_core_of = FROM
					}
				}
				FROM.FROM = {
					clr_state_flag = is_core_of_anarchist_flag
					remove_core_of = FROM
				}
			}
			
			#Снос народных банков в стейте // генерик решения
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = has_peoples_bank_flag
					}
				}
				if = {
					limit = { ROOT = { NOT = { has_completed_focus = peoples_bank_focus } } }
					FROM.FROM = {
						clr_state_flag = has_peoples_bank_flag
					}
				}
				else = {
					ROOT = { set_actual_peoples_bank_idea = yes }
				}
				FROM = { set_actual_peoples_bank_idea = yes }
			}
			
			#Подчинение для BPL
			if = {
				limit = {
					FROM.FROM = {
						OR = {
							state = 455
							state = 1053
							state = 1054
						}
						NOT = { is_core_of = ROOT }
					}
					ROOT = { tag = BPL }
				}
				FROM.FROM = { set_compliance = 80 }
			}
			
			# GER_cornered_dyn
			if = {
				limit = {
					ROOT = {
						original_tag = GER
						OR = {
							has_dynamic_modifier = { modifier = GER_cornered_dyn }
							has_dynamic_modifier = { modifier = GER_battle_glory_dyn }
						}
					}
					FROM.FROM = {
						is_core_of = ROOT
					}
				}
				ROOT = {
					if = {
						limit = { has_dynamic_modifier = { modifier = GER_cornered_dyn } }
						set_variable = { var_cornered = num_core_states }
						subtract_from_variable = { var_cornered = num_controlled_states }
						divide_variable = { var_cornered = 1.85 }
						round_variable = var_cornered
						clamp_variable = { var = var_cornered	min = 0	max = 20 }
						set_variable = { var_cornered_2 = var_cornered }
						divide_variable = { var_cornered_2 = 2 }
						set_variable = { var_cornered_100 = var_cornered_2 }
						divide_variable = { var_cornered_100 = 50 }
						force_update_dynamic_modifier = yes
					}
					else_if = {
						limit = { has_dynamic_modifier = { modifier = GER_battle_glory_dyn } }
						set_variable = { var_battle_glory = num_controlled_states }
						divide_variable = { var_battle_glory = 1.85 }
						round_variable = var_battle_glory
						clamp_variable = { var = var_battle_glory	min = 0	max = 50 }
						divide_variable = { var_battle_glory = 100 }
						force_update_dynamic_modifier = yes
					}
				}
			}
			
			# Нефтянка Ирана для ВБ	413 / 1187
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = resource_rights_state_flag
					}
					ROOT = {
						NOT = { original_tag = PER }
					}
				}
				FROM.FROM = {
					clr_state_flag = resource_rights_state_flag
					set_state_flag = ex_resource_rights_state_flag
				}
				ENG = { remove_resource_rights = FROM.FROM }
			}
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = ex_resource_rights_state_flag
						NOT = { has_state_flag = resource_rights_state_flag }
					}
					ROOT = {
						original_tag = PER
						NOT = {
							is_left_ideology = yes
							has_completed_focus = PER_nationalize_oil_industry
						}
					}
				}
				FROM.FROM = {
					clr_state_flag = ex_resource_rights_state_flag
					set_state_flag = resource_rights_state_flag
				}
				ROOT = {
					if = {
						limit = { has_completed_focus = PER_coup_progerman_officers }
						give_resource_rights = { receiver = GFA state = FROM.FROM }
					}
					else = {
						give_resource_rights = { receiver = ENG state = FROM.FROM }
					}
				}
			}
			
			# Анархисты Италии по фокусу ITA_liberation_of_oppressed_peoples
			if = {
				limit = {
					FROM.FROM = {
						OR = {
							is_core_of = LBA
							is_core_of = SOM
							is_core_of = ERI
						}
					}
					ROOT = {
						tag = IFA
						OR = {
							AND = {
								all_of_scopes = {
									array = LBA.core_states
									is_controlled_by = IFA
								}
								NOT = { has_global_flag = IFA_LBA_core_states }
							}
							AND = {
								all_of_scopes = {
									array = SOM.core_states
									is_controlled_by = IFA
								}
								NOT = { has_global_flag = IFA_SOM_core_states }
							}
							AND = {
								all_of_scopes = {
									array = ERI.core_states
									is_controlled_by = IFA
								}
								NOT = { has_global_flag = IFA_ERI_core_states }
							}
						}
					}
				}
				ROOT = { country_event = { id = NWduce.5 hours = 5 random_hours = 5 } }
			}
			
			# Передача власти Петену // 16 state
			if = {
				limit = {
					FROM.FROM = { state = 16 }
					FROM = {
						original_tag = FRA
						FRA_philippe_petain = { is_country_leader = no }
						is_subject = no
						OR = {
							has_government = democratic
							has_government = neutrality
						}
						NOT = { has_war_with = FRC }
					}
					ROOT = {
						OR = {
							original_tag = GER
							original_tag = ITA
						}
					}
					OR = {
						AND = {
							has_war_with = GER
							GER = { has_government = fascism }
							NOT = { has_war_with = ITA }
						}
						AND = {
							has_war_with = ITA
							ITA = { has_government = fascism }
							NOT = { has_war_with = GER }
						}
						AND = {
							GER = {
								has_war_with = FRA
								has_government = fascism
							}
							ITA = {
								has_war_with = FRA
								is_in_faction_with = GER
								has_government = fascism
							}
						}
					}
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
				}
				ENG = { remove_resource_rights = FROM.FROM }
			}
		}
		
		
		effect = {
			### WONDER BLOCK ###
			
			# Колизей // Рим, Италия // 2
			if = {
				limit = { FROM.FROM = { has_state_flag = kolizeum_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.2 } }
			}
			# Мачу-Пикчу // Перу // 494
			if = {
				limit = { FROM.FROM = { has_state_flag = machu_pikchu_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.3 } }
			}
			# Петра // Иордания // 455
			if = {
				limit = { FROM.FROM = { has_state_flag = petra_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.4 } }
			}
			# Тадж-Махал // Агра, Индия // 437
			if = {
				limit = { FROM.FROM = { has_state_flag = taj_mahal_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.5 } }
			}
			# Статуя Христа-Искупителя // Рио-де-Жанейро, Бразилия // 500
			if = {
				limit = { FROM.FROM = { has_state_flag = cristos_redentor_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.6 } }
			}
			# Чичен-Ица // Юкатан, Мексика // 474
			if = {
				limit = { FROM.FROM = { has_state_flag = chichen_itza_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.7 } }
			}
			# Айя-София // Стамбул, Турция // 341
			if = {
				limit = { FROM.FROM = { has_state_flag = sobor_sofia_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.8 } }
			}
			# Афинский Акрополь // Афины, Греция // 1024
			if = {
				limit = { FROM.FROM = { has_state_flag = afin_acropol_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.9 } }
			}
			# Альгамбра // Гранада, Испания // 173
			if = {
				limit = { FROM.FROM = { has_state_flag = algambra_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.10 } }
			}
			# Ангкор // Ангкор, Камбоджа // 741
			if = {
				limit = { FROM.FROM = { has_state_flag = angkor_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.11 } }
			}
			# Моаи // Остров Пасхи, Чили // 933
			if = {
				limit = {
					NOT = { has_global_flag = magic_moai }
					FROM.FROM = { has_state_flag = moai_wonder_flag }
					ROOT = { NOT = { has_idea = moai_wonder } }
				}
				ROOT = { country_event = { id = TR.wonder.12 } }
			}
			# Детект владением моаи // Остров Пасхи, Чили // 933
			if = {
				limit = {
					has_global_flag = magic_moai
					FROM.FROM = { has_state_flag = moai_wonder_flag }
					ROOT = {
						NOT = { has_country_flag = moai_lord_wonder }
						NOT = {
							OR = {
								has_idea = moai_red_wonder
								has_idea = moai_blue_wonder
								has_idea = moai_green_wonder
								has_idea = moai_purp_wonder
							}
						}
					}
				}
				ROOT = { country_event = { id = TR.wonder.13 } }
			}
			# Московский Кремль // Москва, СССР // 219
			if = {
				limit = { FROM.FROM = { has_state_flag = kremlin_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.20 } }
			}
			# Нойшванштайн // Фюссен, Германия // 52
			if = {
				limit = { FROM.FROM = { has_state_flag = noishvanshtain_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.21 } }
			}
			# Пирамиды Гизы // Египет // 552
			if = {
				limit = { FROM.FROM = { has_state_flag = piramids_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.22 } }
			}
			# Статуя Свободы // Нью-Йорк, США // 358
			if = {
				limit = {
					FROM.FROM = { has_state_flag = statuya_liberty_wonder_flag }
					ROOT = {
						NOT = {
							has_idea = statuya_liberty_wonder
							has_idea = statuya_communism_wonder
							has_idea = statuya_monarchy_wonder
							has_idea = statuya_neutrality_wonder
							has_idea = statuya_trozkism_wonder
							has_idea = statuya_fascism_wonder
							has_idea = statuya_technocracy_wonder
							has_idea = statuya_anarchism_wonder
						}
					}
				}
				ROOT = { country_event = { id = TR.wonder.23 } }
			}
			# Стоунхендж // Уилтшир, Великобритания // 338
			if = {
				limit = { FROM.FROM = { has_state_flag = stonehenge_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.24 } }
			}
			# Томбукту // Мали // 556
			if = {
				limit = { FROM.FROM = { has_state_flag = tombuktu_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.25 } }
			}
			# Храм Киёмидзу-дэра // Киото, Япония // 531
			if = {
				limit = { FROM.FROM = { has_state_flag = temple_kiemidzu_dera_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.26 } }
			}
			# Эйфелева башня // Париж, Франция // 16
			if = {
				limit = { FROM.FROM = { has_state_flag = eiffel_tower_wonder_flag } }
				ROOT = { country_event = { id = TR.wonder.27 } }
			}
			#check controller of great china wall
			if = {
				limit = {
					FROM.FROM = {
						has_state_flag = great_wall_wonder_flag
						is_controlled_by = ROOT
					}
				}
				ROOT = {
					add_to_variable = { var = bonus_gw value = 1 }
					country_event = { id = TR.wonder.28 }
				}
				FROM = {
					subtract_from_variable = { var = bonus_gw value = 1 }
					country_event = { id = TR.wonder.28 }
				}
			}
		}
		#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	}
	
	
	
	on_government_change = {
		effect = {
			######### TROZKISM BLOCK #########
			if = {
				limit = { has_country_flag = is_trozkist_country_flag }
				clr_country_flag = is_trozkist_country_flag
				add_to_variable = { global.troz_threat_var = -1.5 }
				if = {
					limit = { has_cosmetic_tag = KMX_cosmetic }
					drop_cosmetic_tag = yes
				}
			}
			set_variable = { global.total_trozkist = 0 }
			every_country = {
				limit = {
					has_government = trozkism
					not_is_really_trozkist = yes
				}
				add_to_variable = { global.total_trozkist = 1 }
				if = {
					limit = { NOT = { has_dynamic_modifier = { modifier = troz_threat_dyn } } }
					add_dynamic_modifier = { modifier = troz_threat_dyn }
				}
			}
			if = {
				limit = {
					has_government = trozkism
					not_is_really_trozkist = yes
				}
				if = {
					limit = { NOT = { has_country_flag = is_trozkist_country_flag } }
					set_country_flag = is_trozkist_country_flag
				}
				if = {
					limit = { num_of_factories > 49 }
					add_to_variable = { global.troz_threat_var = 3 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 3 тронапряги как мажор"
				}
				else_if = {
					limit = { num_of_factories > 24 }
					add_to_variable = { global.troz_threat_var = 2 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 2 тронапряги как миддл"
				}
				else = {
					add_to_variable = { global.troz_threat_var = 1 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 1 тронапряги как минор)0"
				}
				set_var_for_troz_threat_dyn = yes
			}
			######### END TROZKISM BLOCK #########
			country_event = { id = TRpolitical.106 }
			#Габсы
			if = {
				limit = {
					NOT = { has_global_flag = WORLD_OF_SPLIT_FLAG }
					NOT = { has_country_flag = hhnbrg_flag }
					OR = {
						original_tag = CZE
						original_tag = AUS
						#AND = {
						#	original_tag = HUN	#Венгр и так монархист со старта
						#	HUN = { has_completed_focus = HUN_invite_the_habsburg_prince }
						#}
					}
					has_government = monarchy
				}
				if = {
					limit = {
						all_country = { NOT = { has_country_flag = hbbrg_flag } }
						NOT = {
							has_global_flag = THE_MOTHER_OF_ORDER_FLAG
							has_global_flag = WORLD_OF_SPLIT_FLAG
						}
					}
					country_event = { id = NWmonarchy.0 }
				}
				if = {
					limit = {
						any_country_with_original_tag = {
							original_tag_to_check = AUS
							NOT = { tag = ROOT }
							has_country_flag = hbbrg_flag
						}
						any_country_with_original_tag = {
							original_tag_to_check = HUN
							NOT = { tag = ROOT }
							has_country_flag = hbbrg_flag
						}
						any_country_with_original_tag = {
							original_tag_to_check = CZE
							NOT = { tag = ROOT }
							has_country_flag = hbbrg_flag
						}
					}
					set_country_flag = hbbrg_minor_flag
					random_country = {
						limit = { has_country_flag = hbbrg_flag }
						if = {
							limit = { has_government = fascism }
							set_autonomy = {
								target = ROOT
								autonomy_state = autonomy_reichsprotectorate
							}
						}
						if = {
							limit = { NOT = { has_government = fascism } }
							set_autonomy = {
								target = ROOT
								autonomy_state = autonomy_puppet
							}
						}
					}
				}
			}
			
			#International#
			if = {
				limit = {
					any_of_scopes = {
						array = global.Labour_and_Socialist_International
						NOT = { has_country_leader_ideology = socialism }
					}
				}
				random_scope_in_array = {
					array = global.Labour_and_Socialist_International
					limit = { NOT = { has_country_leader_ideology = socialism } }
					country_event = { id = NW_HOL.67 hours = 12 }
					remove_from_array = { global.Labour_and_Socialist_International = THIS }
				}
			}
			
			###
			
			if = {
				limit = {
					tag = TUR
					has_government = fascism
					NOT = { has_country_flag = NWturkey70_flag }
					has_global_flag = NW_TUR_OLD_FOCUS_TREE
					has_completed_focus = TUR_proclaim_panturkism
				}
				TUR = {
					set_country_flag = NWturkey70_flag
					country_event = { id = NWturkey.69 days = 140 }
				}
			}
			
			#ВБ стала троц и воюет с троц
			if = {
				limit = {
					tag = ENG
					has_government = trozkism
				}
				every_enemy_country = {
					limit = {
						has_government = trozkism
						is_subject = no
						OR = { is_faction_leader = yes is_in_faction = no }
					}
					ROOT = { white_peace = PREV }
				}
			}
			
			#Смена подидеологии в случае ошибочной генерации
			if = {
				limit = {
					has_government = neutrality
					NOT = {
						has_country_flag = authoritarian_democracy
						has_country_flag = militarism
					}
					NOT = {
						original_tag = GXC
						original_tag = YUN
						original_tag = SHX
						original_tag = XSM
						original_tag = SIK
						original_tag = SIH
						original_tag = XIK
						original_tag = SHA
						original_tag = TNG
						original_tag = NEA
					}
				}
				random_list = {
					25 = { set_country_leader_ideology = despotism }
					25 = { set_country_leader_ideology = oligarchism }
					25 = { set_country_leader_ideology = moderatism }
					25 = { set_country_leader_ideology = centrism }
				}
			}
			if = {
				limit = {
					has_government = neutrality
					has_country_flag = authoritarian_democracy
				}
				set_country_leader_ideology = authoritarian_democracy
				clr_country_flag = authoritarian_democracy
			}
			if = {
				limit = {
					has_government = neutrality
					OR = {
						has_country_flag = militarism
						OR = {
							original_tag = GXC
							original_tag = YUN
							original_tag = SHX
							original_tag = XSM
							original_tag = SIK
							original_tag = SIH
							original_tag = XIK
							original_tag = SHA
							original_tag = TNG
							original_tag = NEA
						}
					}
				}
				set_country_leader_ideology = militarism_ideology
				clr_country_flag = militarism_ideology
			}
			if = {
				limit = {
					has_government = monarchy
					has_country_flag = dual_monarchy
				}
				set_country_leader_ideology = dual_monarchy
				clr_country_flag = dual_monarchy
			}
			if = {
				limit = {
					has_government = monarchy
					has_country_flag = absolute_monarchy
				}
				set_country_leader_ideology = absolute_monarchy
				clr_country_flag = absolute_monarchy
			}
			if = {
				limit = {
					has_government = communism
					has_country_flag = socialist_stratocracy
				}
				set_country_leader_ideology = socialist_stratocracy
				clr_country_flag = socialist_stratocracy
			}
			if = {
				limit = {
					has_government = trozkism
					has_country_flag = left_communism
				}
				set_country_leader_ideology = left_communism
				clr_country_flag = left_communism
			}
			if = {
				limit = {
					has_government = trozkism
					has_country_flag = trozkism1
				}
				set_country_leader_ideology = trozkism1
				clr_country_flag = trozkism1
			}
			if = {
				limit = {
					has_government = fascism
					has_country_flag = fascism_corporatism
				}
				set_country_leader_ideology = fascism_corporatism
				clr_country_flag = fascism_corporatism
			}
			if = {
				limit = {
					has_government = fascism
					has_country_flag = nationalism_ideology
				}
				set_country_leader_ideology = nationalism_ideology
				clr_country_flag = nationalism_ideology
			}
			if = {
				limit = {
					has_government = fascism
					has_country_flag = nazism
				}
				set_country_leader_ideology = nazism
				clr_country_flag = nazism
			}
			if = {
				limit = {
					has_government = fascism
					has_country_flag = rexism
				}
				set_country_leader_ideology = rexism
				clr_country_flag = rexism
			}
			if = {
				limit = {
					has_government = fascism
					has_country_flag = integralism
				}
				set_country_leader_ideology = integralism_ideology
				clr_country_flag = integralism
			}
			
			
			#Фокус «Умиротворение Германии» // Автовыполнение у event_target:NW_france_scope
			if = {
				limit = {
					tag = GER
					has_government = democratic
				}
				if = {
					limit = {
						country_exists = FRA
						FRA = { NOT = { has_completed_focus = FRA_appeasement_of_germany } }
					}
					FRA = { complete_national_focus = FRA_appeasement_of_germany }
				}
			}
			if = {
				limit = {
					tag = GRE
					NOT = { has_government = fascism }
				}
				if = {
					limit = { has_idea = GRE_antiparliamentarism }
					remove_ideas = GRE_antiparliamentarism
				}
				if = {
					limit = { has_idea = GRE_right_parliament }
					remove_ideas = GRE_right_parliament
				}
			}
			if = {
				limit = {
					original_tag = PER
					has_dynamic_modifier = { modifier = PER_influence_of_clergy_dynamic_modifier }
				}
				set_opinion_with_clergy_var = yes
				set_influence_clergy_Value = yes
			}
			if = {
				limit = {
					has_idea = irregular_army
				}
				country_lock_all_division_template = yes
			}
			if = {
				limit = {
					NOT = { has_government = anarchism }
					has_country_flag = set_anarchism_party_name_flag
				}
				reset_anarchism_party_name = yes
			}
			
			if = {
				limit = {
					original_tag = MON
					has_completed_focus = MON_popularization_of_choibalsan_personality_cult
				}
				if = {
					limit = { has_country_leader = { character = MON_dansranbilegiin_dogsom ruling_only = yes } }
					set_province_name = { id = 10708 name = MON_dogsom_name }
				}
				else_if = {
					limit = { has_country_leader = { character = MON_khorloogiin_choibalsan ruling_only = yes } }
					set_province_name = { id = 10708 name = MON_choibalsan_name }
				}
			}
		}
		
		
		### ALBANIA
		effect = {
			if = {
				limit = {
					has_government = communism
					NOT = { has_opinion_modifier = red_bishop }
					any_country_with_original_tag = {
						original_tag_to_check = ALB
						has_country_leader_with_trait = red_bishop
					}
				}
				random_country_with_original_tag = {
					original_tag_to_check = ALB
					limit = { has_country_leader_with_trait = red_bishop }
					add_opinion_modifier = { target = ROOT modifier = red_bishop }
					ROOT = { add_opinion_modifier = { target = PREV modifier = red_bishop } }
				}
			}
			if = {
				limit = {
					NOT = { has_government = communism }
					has_opinion_modifier = red_bishop
				}
				every_country_with_original_tag = {
					original_tag_to_check = ALB
					remove_opinion_modifier = { target = ROOT modifier = red_bishop }
					ROOT = { remove_opinion_modifier = { target = PREV modifier = red_bishop } }
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					original_tag = ALB
				}
				if = {
					limit = { has_country_leader_with_trait = red_bishop }
					every_country = {
						limit = { has_government = communism }
						add_opinion_modifier = { target = ROOT modifier = red_bishop }
						ROOT = { add_opinion_modifier = { target = PREV modifier = red_bishop } }
					}
					else = {
						every_country = {
							limit = { has_government = communism }
							remove_opinion_modifier = { target = ROOT modifier = red_bishop }
							ROOT = { remove_opinion_modifier = { target = PREV modifier = red_bishop } }
						}
					}
				}
				
				if = {
					limit = {
						OR = {
							has_government = monarchy
							has_completed_focus = ALB_invite_fan_noli
						}
						NOT = {
							OR = {
							    has_character = ALB_prenk_pervizi
							    has_character = ALB_xhemal_aranitasi
							    has_character = ALB_king_zog
							}	
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_prenk_pervizi
						}
						ALB_prenk_pervizi = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_xhemal_aranitasi
						}
						ALB_xhemal_aranitasi = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_king_zog
						}
						ALB_king_zog = {
							set_nationality = ROOT
						}
					}
					ALB_king_zog = {
						promote_leader = yes
					}
				}	
				
				if = {
					limit = {
						NOT = {
							OR = {
								has_government = monarchy
								has_completed_focus = ALB_invite_fan_noli
							}
						}
						OR = {
							has_character = ALB_prenk_pervizi
							has_character = ALB_xhemal_aranitasi
							has_character = ALB_king_zog
						}
					}
					ALB_prenk_pervizi = {
						set_nationality = SAI
					}
					ALB_xhemal_aranitasi = {
						set_nationality = SAI
					}
					ALB_king_zog = {
						set_nationality = SAI
					}
				}
				
				if = {
					limit = {
						NOT = {
							OR = {
								has_government = neutrality
								has_government = communism
								has_government = trozkism
							}
							NOT = {
								has_character = ALB_gustav_von_myrdacz
							}
						}	
					}
					random_other_country = {
						limit = {
							has_character = ALB_gustav_von_myrdacz
						}
						ALB_gustav_von_myrdacz = {
							set_nationality = ROOT
						}
					}
				}	
				
				if = {
					limit = {
						NOT = {
							OR = {
								has_government = neutrality
								has_government = communism
								has_government = trozkism
							}
							has_character = ALB_gustav_von_myrdacz
						}
					}
					ALB_gustav_von_myrdacz = {
						set_nationality = SAI
					}
				}
				
				if = {
					limit = {
						OR = {
							has_government = democratic
							has_government = monarchy
						}
						NOT = {
							has_character = ALB_fiqri_dine
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_fiqri_dine
						}
						ALB_fiqri_dine = {
							set_nationality = ROOT
						}
					}
					else_if = {
						limit = {
							NOT = {
								OR = {
									has_government = democratic
									has_government = monarchy
								}
							}
							has_character = ALB_fiqri_dine
						}
						ALB_fiqri_dine = {
							set_nationality = SAI
						}
					}
				}
				
				#КОМ ГЕНЕРАЛЫ
				if = {
					limit = {
						has_government = communism
						NOT = {
							OR = {
							    has_character = ALB_spiro_moisiu
							    has_character = ALB_enver_hoxha
							    has_character = ALB_koci_xoxe
							    has_character = ALB_mehmet_shehu
							    has_character = ALB_beqir_balluku
					        } 						
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_spiro_moisiu
						}
						ALB_spiro_moisiu = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_enver_hoxha
						}
						ALB_enver_hoxha = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_koci_xoxe
						}
						ALB_koci_xoxe = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_mehmet_shehu
						}
						ALB_mehmet_shehu = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_beqir_balluku
						}
						ALB_beqir_balluku = {
							set_nationality = ROOT
						}
					}
				}
					
				if = {
					limit = {
						NOT = {
							has_government = communism
						}
						OR = {
						    has_character = ALB_spiro_moisiu
						    has_character = ALB_enver_hoxha
							has_character = ALB_koci_xoxe
							has_character = ALB_mehmet_shehu
							has_character = ALB_beqir_balluku
						}
					}
					ALB_spiro_moisiu = {
						set_nationality = SAI
					}
					ALB_enver_hoxha = {
						set_nationality = SAI
					}
					ALB_koci_xoxe = {
						set_nationality = SAI
					}
					ALB_mehmet_shehu = {
						set_nationality = SAI
					}
					ALB_beqir_balluku = {
						set_nationality = SAI
					}
				}
				
				#ТРО ГЕНЕРАЛЫ
				if = {
					limit = {
						has_government = trozkism
						NOT = {
							OR = {
							    has_character = ALB_spiro_moisiu
							    has_character = ALB_mehmet_shehu
							    has_character = ALB_beqir_balluku
					        } 						
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_spiro_moisiu
						}
						ALB_spiro_moisiu = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_mehmet_shehu
						}
						ALB_mehmet_shehu = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_beqir_balluku
						}
						ALB_beqir_balluku = {
							set_nationality = ROOT
						}
					}
				}	
				if = {
					limit = {
						NOT = {
							has_government = trozkism
						}
						OR = {
							has_character = ALB_spiro_moisiu
							has_character = ALB_mehmet_shehu
						    has_character = ALB_beqir_balluku
						}
					}
					ALB_spiro_moisiu = {
						set_nationality = SAI
					}
					ALB_mehmet_shehu = {
						set_nationality = SAI
					}
					ALB_beqir_balluku = {
						set_nationality = SAI
					}
				}
				
				#ФАШ ГЕНЕРАЛЫ
				if = {
					limit = {
						has_government = fascism
						NOT = {
							has_character = ALB_ndok_gjeloshi
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_ndok_gjeloshi
						}
						ALB_ndok_gjeloshi = {
							set_nationality = ROOT
						}
					}
				}
				
				if = {
					limit = {
						NOT = {
							has_government = fascism
						}
						has_character = ALB_ndok_gjeloshi
					}
					ALB_ndok_gjeloshi = {
						set_nationality = SAI
						
					}
				}
				
				#АВТОРИТАРИТАРНЫЕ ГЕНЕРАЛЫ
				if = {
					limit = {
						has_government = neutrality
						NOT = {
							OR = {
							    has_character = ALB_prek_cali
							    has_character = ALB_gjon_markagjoni
							}	
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_prek_cali
						}
						ALB_prek_cali = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_gjon_markagjoni
						}
						ALB_gjon_markagjoni = {
							set_nationality = ROOT
						}
					}
				}	
				if = {
					limit = {
						NOT = {
							has_government = neutrality
						}
						OR = {
						    has_character = ALB_prek_cali
						    has_character = ALB_gjon_markagjoni
						}
					}
					ALB_prek_cali = {
						set_nationality = SAI
					}
					ALB_gjon_markagjoni = {
						set_nationality = SAI
					}
				}
				
				#КАМБЕТАР
				if = {
					limit = {
						has_country_leader_with_trait =	father_of_albanian_nationalism
						NOT = {
							OR = {
							    has_character = ALB_muharrem_bajraktari
							    has_character = ALB_aziz_cami
							}	
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_muharrem_bajraktari
						}
						ALB_muharrem_bajraktari = {
							set_nationality = ROOT
						}
					}
					random_other_country = {
						limit = {
							has_character = ALB_aziz_cami
						}
						ALB_aziz_cami = {
							set_nationality = ROOT
						}
					}
				}	
				if = {
					limit = {
						NOT = {
							has_country_leader_with_trait =	father_of_albanian_nationalism
						}
						OR = {
						    has_character = ALB_muharrem_bajraktari
						    has_character = ALB_aziz_cami
						}
					}
					ALB_muharrem_bajraktari = {
						set_nationality = SAI
					}
					ALB_aziz_cami = {
						set_nationality = SAI
					}
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					original_tag = SOV
					OR = {
						has_focus_tree = generic_focus
						has_focus_tree = generic_anarchism_focus
					}
				}
				mark_focus_tree_layout_dirty = yes
			}
		}
	}
	
	
	
	on_ruling_party_change = {
		effect = {
			every_other_country = {
				clr_country_flag = peace_talks_@ROOT_flag
			}
			if = {
				limit = {
					any_enemy_country = {
						NOT = { original_tag = ROOT }
					}
				}
				every_enemy_country = {
					limit = { NOT = { original_tag = ROOT } }
					set_country_flag = peace_talks_@ROOT_flag		# scripted_diplomatic_actions "peace_talks"
				}
			}
		}
	}
	
	
	
	on_peace = {
		effect = {
			every_other_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					has_country_flag = peace_talks_@ROOT_flag
				}
				clr_country_flag = peace_talks_@ROOT_flag
			}
			every_other_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					ROOT = { has_country_flag = peace_talks_@PREV_flag }
				}
				ROOT = { clr_country_flag = peace_talks_@PREV_flag }
			}
		}
	}

	
	
	#ROOT is subject FROM is previous overlord
	on_subject_free = {
		effect = {
			if = {
				limit = {
					tag = BPL
					has_cosmetic_tag = BPL_ENG
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = PAL
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = JOR
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = LEB
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SYR
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SRL
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = NFL
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = POL
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = COG
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = PER
					FROM = { original_tag = ENG }
				}
				every_country = {
					limit = { has_country_flag = PER_integration_south_azerbaijan_flag }
					clr_country_flag = PER_integration_south_azerbaijan_flag
				}
				if = {
					limit = {
						original_tag = PER
					}
					if = {
						limit = {
							country_exists = QAS
							NOT = { has_war_with = QAS }
							NOT = { has_country_flag = NWpersian_74_flag }
						}
						country_event = { id = NWpersian.74 hours = 6 }
					}
				}
			}
			if = {
				limit = {
					has_cosmetic_tag = BPL_technat_subject
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = FIC_FRA
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = CYP_UK
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = HRE_subject_cosmetic
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					OR = {
						has_cosmetic_tag = HBBRG_use_subject
						has_cosmetic_tag = ADR_HBBRG_use_subject
						has_cosmetic_tag = ALB_HBBRG_use_subject
						has_cosmetic_tag = ARA_HBBRG_use_subject
						has_cosmetic_tag = AUS_HBBRG_use_subject
						has_cosmetic_tag = BEL_HBBRG_use_subject
						has_cosmetic_tag = BLR_HBBRG_use_subject
						has_cosmetic_tag = BOS_HBBRG_use_subject
						has_cosmetic_tag = BUL_HBBRG_use_subject
						has_cosmetic_tag = CAT_HBBRG_use_subject
						has_cosmetic_tag = CRI_HBBRG_use_subject
						has_cosmetic_tag = CRO_HBBRG_use_subject
						has_cosmetic_tag = CZE_HBBRG_use_subject
						has_cosmetic_tag = DEN_HBBRG_use_subject
						has_cosmetic_tag = DNZ_HBBRG_use_subject
						has_cosmetic_tag = ENG_HBBRG_use_subject
						has_cosmetic_tag = EST_HBBRG_use_subject
						has_cosmetic_tag = FIN_HBBRG_use_subject
						has_cosmetic_tag = FIU_HBBRG_use_subject
						has_cosmetic_tag = FRA_HBBRG_use_subject
						has_cosmetic_tag = GER_HBBRG_use_subject
						has_cosmetic_tag = GRE_HBBRG_use_subject
						has_cosmetic_tag = HOL_HBBRG_use_subject
						has_cosmetic_tag = HUN_HBBRG_use_subject
						has_cosmetic_tag = IRE_HBBRG_use_subject
						has_cosmetic_tag = ITA_HBBRG_use_subject
						has_cosmetic_tag = KOS_HBBRG_use_subject
						has_cosmetic_tag = LAT_HBBRG_use_subject
						has_cosmetic_tag = LIE_HBBRG_use_subject
						has_cosmetic_tag = LIT_HBBRG_use_subject
						has_cosmetic_tag = LUX_HBBRG_use_subject
						has_cosmetic_tag = MAC_HBBRG_use_subject
						has_cosmetic_tag = MNC_HBBRG_use_subject
						has_cosmetic_tag = MNT_HBBRG_use_subject
						has_cosmetic_tag = NOR_HBBRG_use_subject
						has_cosmetic_tag = POL_HBBRG_use_subject
						has_cosmetic_tag = POR_HBBRG_use_subject
						has_cosmetic_tag = PRE_HBBRG_use_subject
						has_cosmetic_tag = ROM_HBBRG_use_subject
						has_cosmetic_tag = SCO_HBBRG_use_subject
						has_cosmetic_tag = SER_HBBRG_use_subject
						has_cosmetic_tag = SLO_HBBRG_use_subject
						has_cosmetic_tag = SLV_HBBRG_use_subject
						has_cosmetic_tag = SMA_HBBRG_use_subject
						has_cosmetic_tag = SPR_HBBRG_use_subject
						has_cosmetic_tag = SWE_HBBRG_use_subject
						has_cosmetic_tag = SWI_HBBRG_use_subject
						has_cosmetic_tag = TUR_HBBRG_use_subject
						has_cosmetic_tag = UKR_HBBRG_use_subject
						has_cosmetic_tag = VAT_HBBRG_use_subject
						has_cosmetic_tag = VLA_HBBRG_use_subject
						has_cosmetic_tag = VNC_HBBRG_use_subject
						has_cosmetic_tag = VOJ_HBBRG_use_subject
						has_cosmetic_tag = WLS_HBBRG_use_subject
						has_cosmetic_tag = YUG_HBBRG_use_subject
						has_cosmetic_tag = ASU_HBBRG_use_subject
						has_cosmetic_tag = BRI_HBBRG_use_subject
						has_cosmetic_tag = ESS_HBBRG_use_subject
						has_cosmetic_tag = ICE_HBBRG_use_subject
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					ROOT = { tag = CYP }
					FROM = { original_tag = ENG }
				}
				ROOT = { news_event = { id = trworldnews.166 hours = 6 } }
			}
		}
	}
	
	
	#used when puppeting in a peace conference
	#ROOT = nation being puppeted, FROM = overlord
	on_puppet = {
		effect = {
			######### TROZKISM BLOCK #########
			if = {
				limit = { has_country_flag = is_trozkist_country_flag }
				clr_country_flag = is_trozkist_country_flag
				add_to_variable = { global.troz_threat_var = -1.5 }
			}
			set_variable = { global.total_trozkist = 0 }
			every_country = {
				limit = {
					has_government = trozkism
					not_is_really_trozkist = yes
				}
				add_to_variable = { global.total_trozkist = 1 }
				if = {
					limit = { NOT = { has_dynamic_modifier = { modifier = troz_threat_dyn } } }
					add_dynamic_modifier = { modifier = troz_threat_dyn }
				}
			}
			if = {
				limit = {
					ROOT = {
						has_government = trozkism
						not_is_really_trozkist = yes
					}
				}
				if = {
					limit = { NOT = { has_country_flag = is_trozkist_country_flag } }
					set_country_flag = is_trozkist_country_flag
				}
				if = {
					limit = { num_of_factories > 49 }
					add_to_variable = { global.troz_threat_var = 3 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 3 тронапряги как марионетка"
				}
				else_if = {
					limit = { num_of_factories > 24 }
					add_to_variable = { global.troz_threat_var = 2 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 2 тронапряги как марионетка"
				}
				else = {
					add_to_variable = { global.troz_threat_var = 1 }
					log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 1 тронапряги как марионетка"
				}
				set_var_for_troz_threat_dyn = yes
			}
			######### END TROZKISM BLOCK #########
			ROOT = { country_event = { id = TRpolitical.106 } }
			#Смена подидеологии в случае ошибочной генерации
			if = {
				limit = {
					has_government = neutrality
					NOT = { has_country_flag = authoritarian_democracy }
					NOT = { has_country_flag = militarism }
					NOT = {
						original_tag = GXC
						original_tag = YUN
						original_tag = SHX
						original_tag = XSM
						original_tag = SIK
						original_tag = SIH
						original_tag = XIK
						original_tag = SHA
						original_tag = TNG
						original_tag = NEA
					}
				}
				random_list = {
					25 = { set_country_leader_ideology = despotism }
					25 = { set_country_leader_ideology = oligarchism }
					25 = { set_country_leader_ideology = moderatism }
					25 = { set_country_leader_ideology = centrism }
				}
			}
			if = {
				limit = {
					has_government = neutrality
					has_country_flag = authoritarian_democracy
				}
				set_country_leader_ideology = authoritarian_democracy
			}
			if = {
				limit = {
					has_government = neutrality
					OR = {
						has_country_flag = militarism
						OR = {
							original_tag = GXC
							original_tag = YUN
							original_tag = SHX
							original_tag = XSM
							original_tag = SIK
							original_tag = SIH
							original_tag = XIK
							original_tag = SHA
							original_tag = TNG
							original_tag = NEA
						}
					}
				}
				set_country_leader_ideology = militarism_ideology
			}
			#Определение победителя // Конец ГВ либералов
			if = {
				limit = {
					OR = {
						has_global_flag = liberal_spanish_civil_war
						has_global_flag = haos_liberal_spanish_civil_war
					}
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
					NOT = { has_global_flag = scw_over }
					ROOT = {
						OR = {
							tag = SPR
							tag = CAS
							tag = NAV
							tag = SEU
							tag = SPC
							tag = ANL
							tag = ARA
							tag = ASU
							tag = SNT
							tag = CAT
							tag = BAS
							tag = GLC
							tag = VLA
						}
					}
					FROM = {
						OR = {
							tag = SPR
							tag = CAS
							tag = NAV
							tag = SEU
							tag = SPC
							tag = ANL
							tag = ARA
							tag = ASU
							tag = SNT
							tag = CAT
							tag = BAS
							tag = GLC
							tag = VLA
						}
					}
				}
				ROOT = { country_event = { id = NWspain.50 hours = 6 } }
			}
			if = {
				limit = {
					tag = SYR
					has_cosmetic_tag = SYR_FRA
					FROM = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = LEB
					has_cosmetic_tag = LEB_FR
					FROM = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SRL
					has_cosmetic_tag = SRL_ENG
					FROM = { original_tag = ENG }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = CYP
					has_cosmetic_tag = CYP_UK
					FROM = { original_tag = ENG }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = NFL
					has_cosmetic_tag = NFL_ENG
					FROM = { original_tag = ENG }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = BPL_technat_subject
					FROM = { NOT = { tag = BPL } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = FIC_FRA
					FROM = { NOT = { tag = event_target:NW_france_scope } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					AND = {
						tag = FIC
						is_subject_of = event_target:NW_france_scope
					}
				}
				set_cosmetic_tag = FIC_FRA
			}
			if = {
				limit = {
					FROM = { has_cosmetic_tag = HRE_UNIFIED }
					NOT = { has_cosmetic_tag = HRE_subject_cosmetic }
				}
				set_cosmetic_tag = HRE_subject_cosmetic
			}
			if = {
				limit = {
					FROM = { has_cosmetic_tag = HBBRG_use_tag }
					NOT = {
						has_cosmetic_tag = HBBRG_use_subject
						has_cosmetic_tag = ADR_HBBRG_use_subject
						has_cosmetic_tag = ALB_HBBRG_use_subject
						has_cosmetic_tag = ARA_HBBRG_use_subject
						has_cosmetic_tag = AUS_HBBRG_use_subject
						has_cosmetic_tag = BEL_HBBRG_use_subject
						has_cosmetic_tag = BLR_HBBRG_use_subject
						has_cosmetic_tag = BOS_HBBRG_use_subject
						has_cosmetic_tag = BUL_HBBRG_use_subject
						has_cosmetic_tag = CAT_HBBRG_use_subject
						has_cosmetic_tag = CRI_HBBRG_use_subject
						has_cosmetic_tag = CRO_HBBRG_use_subject
						has_cosmetic_tag = CZE_HBBRG_use_subject
						has_cosmetic_tag = DEN_HBBRG_use_subject
						has_cosmetic_tag = DNZ_HBBRG_use_subject
						has_cosmetic_tag = ENG_HBBRG_use_subject
						has_cosmetic_tag = EST_HBBRG_use_subject
						has_cosmetic_tag = FIN_HBBRG_use_subject
						has_cosmetic_tag = FIU_HBBRG_use_subject
						has_cosmetic_tag = FRA_HBBRG_use_subject
						has_cosmetic_tag = GER_HBBRG_use_subject
						has_cosmetic_tag = GRE_HBBRG_use_subject
						has_cosmetic_tag = HOL_HBBRG_use_subject
						has_cosmetic_tag = HUN_HBBRG_use_subject
						has_cosmetic_tag = IRE_HBBRG_use_subject
						has_cosmetic_tag = ITA_HBBRG_use_subject
						has_cosmetic_tag = KOS_HBBRG_use_subject
						has_cosmetic_tag = LAT_HBBRG_use_subject
						has_cosmetic_tag = LIE_HBBRG_use_subject
						has_cosmetic_tag = LIT_HBBRG_use_subject
						has_cosmetic_tag = LUX_HBBRG_use_subject
						has_cosmetic_tag = MAC_HBBRG_use_subject
						has_cosmetic_tag = MNC_HBBRG_use_subject
						has_cosmetic_tag = MNT_HBBRG_use_subject
						has_cosmetic_tag = NOR_HBBRG_use_subject
						has_cosmetic_tag = POL_HBBRG_use_subject
						has_cosmetic_tag = POR_HBBRG_use_subject
						has_cosmetic_tag = PRE_HBBRG_use_subject
						has_cosmetic_tag = ROM_HBBRG_use_subject
						has_cosmetic_tag = SCO_HBBRG_use_subject
						has_cosmetic_tag = SER_HBBRG_use_subject
						has_cosmetic_tag = SLO_HBBRG_use_subject
						has_cosmetic_tag = SLV_HBBRG_use_subject
						has_cosmetic_tag = SMA_HBBRG_use_subject
						has_cosmetic_tag = SPR_HBBRG_use_subject
						has_cosmetic_tag = SWE_HBBRG_use_subject
						has_cosmetic_tag = SWI_HBBRG_use_subject
						has_cosmetic_tag = TUR_HBBRG_use_subject
						has_cosmetic_tag = UKR_HBBRG_use_subject
						has_cosmetic_tag = VAT_HBBRG_use_subject
						has_cosmetic_tag = VLA_HBBRG_use_subject
						has_cosmetic_tag = VNC_HBBRG_use_subject
						has_cosmetic_tag = VOJ_HBBRG_use_subject
						has_cosmetic_tag = WLS_HBBRG_use_subject
						has_cosmetic_tag = YUG_HBBRG_use_subject
						has_cosmetic_tag = ASU_HBBRG_use_subject
						has_cosmetic_tag = BRI_HBBRG_use_subject
						has_cosmetic_tag = ESS_HBBRG_use_subject
						has_cosmetic_tag = ICE_HBBRG_use_subject
					}
					capital_scope = { is_on_continent = europe }
				}
				set_cosmetic_HBBRG_use_subject = yes
			}
			if = {
				limit = {
					original_tag = GER
					NOT = { has_government = communism }
					FROM = {
						has_government = communism
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_oppose_hitler }
				    	uncomplete_national_focus = {
							focus = GER_oppose_hitler
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_commie_ideas = yes
					unlock_national_focus = GER_where_thalmann
				}
			}	
			if = {
				limit = {
					original_tag = GER
					NOT = { has_government = fascism }
					FROM = {
						has_government = fascism
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_oppose_hitler }
				    	uncomplete_national_focus = {
							focus = GER_oppose_hitler
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_fascist_ideas = yes
					unlock_national_focus = GER_rhineland
				}
			}	
			if = {
				limit = {
					original_tag = GER
					NOT = { has_government = neutrality }
					FROM = {
						has_government = neutrality
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_return_of_the_kaiser }
				    	uncomplete_national_focus = {
							focus = GER_return_of_the_kaiser
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_imperial_constitution }
				    	uncomplete_national_focus = {
							focus = GER_imperial_constitution
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_neutral_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_start_implementing_wehrstaat
				}
			}	
			if = {
				limit = {
					original_tag = GER
					NOT = { has_government = democratic }
					FROM = {
						has_government = democratic
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_return_of_the_kaiser }
				    	uncomplete_national_focus = {
							focus = GER_return_of_the_kaiser
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_start_implementing_wehrstaat }
				    	uncomplete_national_focus = {
							focus = GER_start_implementing_wehrstaat
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_wehrmacht_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_imperial_constitution
				}
			}		
			if = {
				limit = {
					original_tag = GER
					NOT = { has_government = monarchy }
					FROM = {
						has_government = monarchy
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_imperial_constitution }
				    	uncomplete_national_focus = {
							focus = GER_imperial_constitution
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_start_implementing_wehrstaat }
				    	uncomplete_national_focus = {
							focus = GER_start_implementing_wehrstaat
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_wehrmacht_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_return_of_the_kaiser
				}
			}
			if = {
				limit = {
					original_tag = PER
					has_country_leader = { ruling_only = yes character = PER_khalil_maleki }
					FROM = {
						OR = {
						    AND = {
						   	    tag = SOV
								has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
							}	
					  		AND = {
						 	    tag = TUR
								has_country_leader = { ruling_only = yes character = TUR_sefik_husnu }
							}
						}
					}
				}
				PER = { 
					add_country_leader_role = {
						character = PER_iraj_eskandari
						country_leader ={
							expire = "1965.1.1"
							ideology = stalinism
							traits = {
								staunch_stalinist
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = PER
					NOT = { has_country_leader = { ruling_only = yes character = PER_khalil_maleki }}
					FROM = {
						tag = TUR
						has_country_leader = { ruling_only = yes character = TUR_sevket_aydemir }
					}
				}
				PER = { 
					add_country_leader_role = {
						character = PER_khalil_maleki
						country_leader ={
							expire = "1965.1.1"
							ideology = national_communism
							traits = {
								hater_of_ussr
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = PER
					has_country_leader = { ruling_only = yes character = PER_abu_l_hasan_al_isfahani }
					FROM = {
						has_government = fascism
					}	
				}
				PER = { 
					add_country_leader_role = {
						character = PER_habiballah_nowbakt
						country_leader = {
							desc="POLITICS_HABIB_ALLAH_NOWBAKT_DESC"
							expire = "1965.1.1"
							ideology = nationalism_ideology
							traits = {
								knave
							}	
						}
						promote_leader = yes	
					}
				}
				if = {
					limit = { has_completed_focus = PER_islamic_revolution }
					uncomplete_national_focus = {
						focus = PER_islamic_revolution
						uncomplete_children = yes
					}
					unlock_national_focus = PER_concessions_for_germanophiles
				}
				set_party_name = { ideology = fascism long_name = PER_nazi_faction name = PER_nazi_faction }
			}
			if = {
				limit = {
					original_tag = POL
					FROM = {
						tag = SOV
						has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
					}
				}
				POL = {
				    promote_character = POL_boleslaw_bierut
				}
			}			
			if = {
				limit = {
					original_tag = PRC
					FROM = {
						tag = SOV
						has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
					}
				}
				PRC = {
				    promote_character = PRC_wang_ming
				}
			}
			if = {
				limit = {
					original_tag = KOR
					FROM = {
						tag = PRC
					}
				}
				KOR = { 
					add_country_leader_role = {
						character = KOR_kim_tu_bong
						country_leader ={
							expire = "1965.1.1"
							ideology = leninism
							traits = {
								
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = KOR
					NOT = { has_country_leader = { ruling_only = yes character = KOR_kim_il_sung }}
					FROM = {
						tag = SOV
						has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
					}
				}
				random_other_country = {
					limit = {
						has_character = KOR_kim_il_sung
					}
					KOR_kim_il_sung = {
						set_nationality = KOR
					}
				}
				KOR = { 
					add_country_leader_role = {
						character = KOR_kim_il_sung
						country_leader ={
							expire = "1965.1.1"
							ideology = stalinism
							traits = {
								
							}
						}
						promote_leader = yes
					}
				}
			}
		}
		#ROOT = nation being puppeted, FROM = overlord
	}
	
	
	
	#used when puppeting through the occupied territories menu during peace time (or when releasing from non-core but owned territory, f.e. Britain releasing Egypt)
	#ROOT = nation being released, FROM = overlord
	
	on_release_as_puppet = {
		effect = {
			ROOT = { country_event = { id = TRpolitical.106 } }
			#Смена подидеологии в случае ошибочной генерации
			if = {
				limit = {
					has_government = neutrality
					NOT = { has_country_flag = authoritarian_democracy }
					NOT = { has_country_flag = militarism }
					NOT = {
						original_tag = GXC
						original_tag = YUN
						original_tag = SHX
						original_tag = XSM
						original_tag = SIK
						original_tag = SIH
						original_tag = XIK
						original_tag = SHA
						original_tag = TNG
						original_tag = NEA
						original_tag = NGX
						original_tag = YUL
						original_tag = HCP
					}
				}
				random_list = {
					25 = { set_country_leader_ideology = despotism }
					25 = { set_country_leader_ideology = oligarchism }
					25 = { set_country_leader_ideology = moderatism }
					25 = { set_country_leader_ideology = centrism }
				}
			}
			if = {
				limit = {
					has_government = neutrality
					has_country_flag = authoritarian_democracy
				}
				set_country_leader_ideology = authoritarian_democracy
			}
			if = {
				limit = {
					has_government = neutrality
					OR = {
						has_country_flag = militarism
						OR = {
							original_tag = GXC
							original_tag = YUN
							original_tag = SHX
							original_tag = XSM
							original_tag = SIK
							original_tag = SIH
							original_tag = XIK
							original_tag = SHA
							original_tag = TNG
							original_tag = NEA
							original_tag = NGX
							original_tag = YUL
							original_tag = HCP
						}
					}
				}
				set_country_leader_ideology = militarism_ideology
			}
			if = {
				limit = {
					tag = COG
					NOT = {
						FROM = {
							original_tag = BEL
						}
					}
				}
				COG = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					has_cosmetic_tag = FIC_FRA
					FROM = { NOT = { tag = event_target:NW_france_scope } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					AND = {
						tag = FIC
						is_subject_of = event_target:NW_france_scope
					}
				}
				set_cosmetic_tag = FIC_FRA
			}
			if = {
				limit = {
					has_cosmetic_tag = CYP_UK
					FROM = { NOT = { tag = ENG } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					AND = {
						tag = CYP
						is_subject_of = ENG
					}
				}
				set_cosmetic_tag = CYP_UK
			}
			if = {
				limit = {
					original_tag = GER
					FROM = {
						has_government = communism
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_oppose_hitler }
				    	uncomplete_national_focus = {
							focus = GER_oppose_hitler
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_commie_ideas = yes
					unlock_national_focus = GER_where_thalmann
				}
			}	
			if = {
				limit = {
					original_tag = GER
					FROM = {
						has_government = fascism
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_oppose_hitler }
				    	uncomplete_national_focus = {
							focus = GER_oppose_hitler
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_fascist_ideas = yes
					unlock_national_focus = GER_rhineland
				}
			}	
			if = {
				limit = {
					original_tag = GER
					FROM = {
						has_government = neutrality
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_return_of_the_kaiser }
				    	uncomplete_national_focus = {
							focus = GER_return_of_the_kaiser
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_imperial_constitution }
				    	uncomplete_national_focus = {
							focus = GER_imperial_constitution
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_neutral_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_start_implementing_wehrstaat
				}
			}	
			if = {
				limit = {
					original_tag = GER
					FROM = {
						has_government = democratic
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_return_of_the_kaiser }
				    	uncomplete_national_focus = {
							focus = GER_return_of_the_kaiser
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_start_implementing_wehrstaat }
				    	uncomplete_national_focus = {
							focus = GER_start_implementing_wehrstaat
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_wehrmacht_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_imperial_constitution
				}
			}		
			if = {
				limit = {
					original_tag = GER
					FROM = {
						has_government = monarchy
					}	
				}
				GER = { 
					if = {
					    limit = { has_completed_focus = GER_where_thalmann }
				    	uncomplete_national_focus = {
							focus = GER_where_thalmann
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_rhineland }
				    	uncomplete_national_focus = {
							focus = GER_rhineland
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_imperial_constitution }
				    	uncomplete_national_focus = {
							focus = GER_imperial_constitution
							uncomplete_children = yes
						}
					}		
					if = {
					    limit = { has_completed_focus = GER_start_implementing_wehrstaat }
				    	uncomplete_national_focus = {
							focus = GER_start_implementing_wehrstaat
							uncomplete_children = yes
						}
					}	
					if = {
					    limit = { has_completed_focus = GER_alternative_government_of_nsdap }
				    	uncomplete_national_focus = {
							focus = GER_alternative_government_of_nsdap
							uncomplete_children = yes
						}
					}
					remove_german_non_wehrmacht_ideas = yes
					if = {
					    limit = { NOT = { has_completed_focus = GER_oppose_hitler }}
					    unlock_national_focus = GER_oppose_hitler
					}	
					unlock_national_focus = GER_return_of_the_kaiser
				}
			}
			if = {
				limit = {
					original_tag = PER
					has_country_leader = { ruling_only = yes character = PER_khalil_maleki }
					FROM = {
						OR = {
						    AND = {
						   	    tag = SOV
								has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
							}	
					  		AND = {
						 	    tag = TUR
								has_country_leader = { ruling_only = yes character = TUR_sefik_husnu }
							}
						}
					}
				}
				PER = { 
					add_country_leader_role = {
						character = PER_iraj_eskandari
						country_leader ={
							expire = "1965.1.1"
							ideology = stalinism
							traits = {
								staunch_stalinist
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = PER
					NOT = { has_country_leader = { ruling_only = yes character = PER_khalil_maleki }}
					FROM = {
						tag = TUR
						has_country_leader = { ruling_only = yes character = TUR_sevket_aydemir }
					}
				}
				PER = { 
					add_country_leader_role = {
						character = PER_khalil_maleki
						country_leader ={
							expire = "1965.1.1"
							ideology = national_communism
							traits = {
								hater_of_ussr
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = PER
					has_country_leader = { ruling_only = yes character = PER_abu_l_hasan_al_isfahani }
					FROM = {
						has_government = fascism
					}	
				}
				PER = { 
					add_country_leader_role = {
						character = PER_habiballah_nowbakt
						country_leader = {
							desc="POLITICS_HABIB_ALLAH_NOWBAKT_DESC"
							expire = "1965.1.1"
							ideology = nationalism_ideology
							traits = {
								knave
							}	
						}
						promote_leader = yes	
					}
				}
				if = {
					limit = { has_completed_focus = PER_islamic_revolution }
					uncomplete_national_focus = {
						focus = PER_islamic_revolution
						uncomplete_children = yes
					}
					unlock_national_focus = PER_concessions_for_germanophiles
				}
				set_party_name = { ideology = fascism long_name = PER_nazi_faction name = PER_nazi_faction }
			}
			if = {
				limit = {
					original_tag = POL
					NOT = { has_country_leader = { ruling_only = yes character = POL_boleslaw_bierut }}
					FROM = {
						tag = SOV
						has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
					}
				}
				POL = {
				    promote_character = POL_boleslaw_bierut
				}	
			}		
			if = {
				limit = {
					original_tag = PRC
					NOT = { has_country_leader = { ruling_only = yes character = PRC_wang_ming }}
					FROM = {
						tag = SOV
					}
				}
				PRC = {
				    promote_character = PRC_wang_ming
				}
			}
			if = {
				limit = {
					original_tag = KOR
					FROM = {
						tag = PRC
					}
				}
				KOR = { 
					add_country_leader_role = {
						character = KOR_kim_tu_bong
						country_leader ={
							expire = "1965.1.1"
							ideology = leninism
							traits = {
								
							}
						}
						promote_leader = yes
					}
				}
			}
			if = {
				limit = {
					original_tag = KOR
					NOT = { has_country_leader = { ruling_only = yes character = KOR_kim_il_sung }}
					FROM = {
						tag = SOV
						has_country_leader = { ruling_only = yes character = SOV_iosif_stalin }
					}
				}
				random_other_country = {
					limit = {
						has_character = KOR_kim_il_sung
					}
					KOR_kim_il_sung = {
						set_nationality = KOR
					}
				}
				KOR = { 
					add_country_leader_role = {
						character = KOR_kim_il_sung
						country_leader ={
							expire = "1965.1.1"
							ideology = stalinism
							traits = {
								
							}
						}
						promote_leader = yes
					}
				}
			}
		}
	}
	
	#FROM is war target
	on_declare_war = {
		effect = {
			#YUG agr
			if = {
				limit = {
					ROOT = { tag = YUG }
					YUG = { has_country_flag = no_barter_flag }
					FROM = { has_country_flag = anti_YUG_flag }
				}
				FROM = {
					every_other_country = {
						limit = {
							has_country_flag = anti_YUG_flag
							NOT = { tag = FROM }
						}
						country_event = { id = NWmonarchy.97 days = 1 }
					}
				}
			}
			#YUG def
			if = {
				limit = {
					FROM = { tag = YUG }
					YUG = { has_country_flag = no_barter_flag }
					ROOT = { has_country_flag = anti_YUG_flag }
				}
				ROOT = {
					every_other_country = {
						limit = {
							has_country_flag = anti_YUG_flag
							NOT = { tag = ROOT }
						}
						country_event = { id = NWmonarchy.97 days = 1 }
					}
				}
			}
			#ARA states and troops
			if = {
				limit = {
					OR = {
						AND = {
							FROM = {
								OR = {
									tag = SPR
									tag = SPA
								}
								OR = {
									owns_state = 169
									owns_state = 173
								}
							}
							ROOT = { tag = ARA }
						}
						AND = {
							FROM = { tag = ARA }
							ROOT = {
								OR = {
									tag = SPR
									tag = SPA
								}
								OR = {
									owns_state = 169
									owns_state = 173
								}
							}
						}
					}
					ARA = { has_country_flag = ARA_call_to_anarchists_andalusia_flag }
				}
				ARA = {
					transfer_state = 169
					transfer_state = 173
					division_template = {
						name = "Anarchists Brigada N2"
						priority = 1
						is_locked = no
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
						}
					}
					169 = {
						create_unit = {
							division = "name = \"1. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.5" 
							owner = ARA
						}
					}
					173 = {
						create_unit = {
							division = "name = \"2. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.5" 
							owner = ARA
						}
					}
					clr_country_flag = ARA_call_to_anarchists_andalusia_flag
				}
			}
			
			#Анархо-Испанская ГВ (1vs1vs1)
			#if = {
			#	limit = {
			#		FROM = { tag = SPR }
			#		ROOT = { tag = ARA }
			#		has_global_flag = spanish_civil_war
			#		NOT = { has_global_flag = scw_over }
			#		SPR = { has_war_with = SPA }
			#	}
			#	ROOT = {
			#		news_event = { id = trworldnews.68 hours = 6 }
			#	}
			#}
			
			# Потеря Грецией нацдуха в случае британской агрессии
			if = { 
				limit = { 
					ROOT = { original_tag = ENG } 
					FROM = { original_tag = GRE }
					GRE = { has_idea = GRE_idea_pro_british_king }
				} 
				GRE = { 
					swap_ideas = {
						remove_idea = GRE_idea_pro_british_king
						add_idea = GRE_idea_georg_ii
					}
				}
			}
			#Сброс нац. духов ТроФранка
			if = {
				limit = {
					FROM = {
						OR = {
							tag = ITA
							tag = ENG
							tag = SPR
							tag = SIA
							tag = INS
							tag = RAJ
						}
						has_idea = trozkism_influence6
					}
					ROOT = {
						tag = event_target:NW_france_scope
						has_government = trozkism
					}
				}
				FROM = {
					remove_ideas = trozkism_influence6
				}
			}
			
			#FRA // Фокус "Укрепление Сопротивления в Северной Франции"
			if = {
				limit = {
					OR = {
						AND = {
							FROM = {
								OR = {
									tag = ITA
									tag = GER
								}
							}
							ROOT = {
								tag = FRA
								has_country_flag = FRA_strengthening_resistance_in_northern_france_flag
							}
						}
						AND = {
							FROM = {
								tag = FRA
								has_country_flag = FRA_strengthening_resistance_in_northern_france_flag
							}
							ROOT = {
								OR = {
									tag = ITA
									tag = GER
								}
							}
						}
					}
				}
				FRA = {
					clr_country_flag = FRA_strengthening_resistance_in_northern_france_flag
				}
				every_state = {
					limit = {
						is_core_of = FRA
						controller = {
							OR = {
								tag = ITA
								tag = GER
								is_in_faction_with = ITA
								is_in_faction_with = GER
								is_subject_of = GER
								is_subject_of = ITA
							}
						}
					}
					FRA = { transfer_state = PREV }
				}
			}
			#Франко ГВ
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRF
						}
					}
					ROOT = {
						OR = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRF
						}
					}
				}
				FROM = { add_ideas = FRA_civil_war }
				ROOT = { add_ideas = FRA_civil_war }
			}
			#Польша на два фронта
#			if = {
#				limit = {
#					has_global_flag = sov_yes_pact
#					NOT = { GER = { is_in_faction_with = SOV } }
#					POL = {
#						is_in_faction = yes
#						is_faction_leader = no
#					}
#					OR = {
#						POL = { has_war_with = GER }
#						POL = { has_war_with = SOV }
#					}
#					OR = {
#						AND = {
#							FROM = { OR = { tag = SOV tag = GER } }
#							ROOT = { tag = POL }
#						}
#						AND = {
#							FROM = { tag = POL }
#							ROOT = { OR = { tag = SOV tag = GER } }
#						}
#					}
#				}
#				FROM = { set_country_flag = POL_truce }
#				ROOT = { set_country_flag = POL_truce }
#				
#				random_country = {
#					limit = {
#						is_in_faction_with = POL
#						is_faction_leader = yes
#					}
#					if = {
#						limit = { NOT = { has_war_with = FROM has_war_with = ROOT } }
#						country_event = { id = poland.war.42 }
#					}
#					else = {
#						FROM = { clr_country_flag = POL_truce }
#						ROOT = { clr_country_flag = POL_truce }
#					}
#				}
#			}
			#Привлечение германских советников // PER
			if = {
				limit = {
					PER = {
						has_completed_focus = PER_involvement_german_advisers
						NOT = { has_country_flag = PER_involvement_german_advisers_once_flag }
					}
					OR = {
						AND = {
							FROM = { tag = GFA }
							ROOT = { tag = PER }
						}
						AND = {
							FROM = { tag = PER }
							ROOT = { tag = GFA }
						}
					}
				}
				PER = {
					set_country_flag = PER_involvement_german_advisers_once_flag
					every_owned_state = {
						remove_building = {
							type = infrastructure
							level = 1
						}
					}
				}
			}
			#Цейлон риск голода
			if = {
				limit = {
					OR = {
						ROOT = { tag = SRL }
						FROM = { tag = SRL }
					}
					SRL = { has_idea = SRL_idea_food_risk }
				}
				SRL = { country_event = { id = lka.46 days = 60 } }
			}
			#Последствия советско-персидского договора
			if = {
				limit = {
					FROM = {
						OR = {
							tag = SOV
							tag = PER
						}
					}
					ROOT = {
						OR = {
							tag = SOV
							tag = PER
						}
					}
					PER = { OR = { has_idea = PER_soviet_persian_treaty has_idea = PER_soviet_persian_treaty_1 has_idea = PER_soviet_persian_treaty_11 } }
				}
				PER = {
					remove_ideas = {
						PER_soviet_persian_treaty
						PER_soviet_persian_treaty_1
						PER_soviet_persian_treaty_11
					}
					add_timed_idea = { idea = PER_soviet_persian_treaty_2 days = 180 }
				}
			}
			#Отсчет Белого мира для Американо-либерийской
			if = {
				limit = {
					FROM = {
						OR = {
							tag = LIB
							tag = USA
						}
					}
					ROOT = {
						OR = {
							tag = LIB
							tag = USA
						}
					}
					USA = { has_country_flag = nw_liberia_27a_flag }
				}
				LIB = {
					set_country_flag = { flag = LIB_usa_white_peace_flag	days = 120	value = 1 }
				}
			}
			FROM = {
				set_country_flag = is_war_target_of_@ROOT
				log = "[GetDateText]: [This.GetName] ([This.GetTag]): is war target of [Root.GetName] ([Root.GetTag])"
			}
			#Страна в гражданской войне
			if = {
				limit = {
					if = {
						limit = { SPR_scw_in_progress = yes }
						FROM = { is_literally_spain = no }
						ROOT = { is_literally_spain = no }
					}
					FROM = {
						has_civil_war = yes
						NOT = { has_idea = generic_civil_war }
					}
					ROOT = {
						has_civil_war = yes
						NOT = { has_idea = generic_civil_war }
					}
				}
				FROM = { add_ideas = generic_civil_war }
				ROOT = { add_ideas = generic_civil_war }
			}
			#Клон танковых школ для FROM
			if = {
				limit = {
					FROM = { original_tag = ROOT NOT = { has_any_tank_school = yes } }
					ROOT = { has_any_tank_school = yes }
				}
				FROM = { copy_tank_school_by_root = yes }
			}
			#Клон танковых школ для ROOT
			if = {
				limit = {
					ROOT = { original_tag = FROM NOT = { has_any_tank_school = yes } }
					FROM = { has_any_tank_school = yes }
				}
				ROOT = { copy_tank_school_by_from = yes }
			}
			# азерское восстание?
			if = {
				limit = {
					FROM = {
						OR = {
							tag = SOV
							tag = PER
						}
					}
					ROOT = {
						OR = {
							tag = SOV
							tag = PER
						}
					}
					PER = {
						OR = {
							has_country_flag = PER_organize_an_uprising_in_tajikistan_complete_flag
							has_country_flag = PER_organize_an_uprising_in_azerbaijan_complete_flag
						}
					}
				}
				if = {
					limit = { PER = { has_country_flag = PER_organize_an_uprising_in_tajikistan_complete_flag } }
					PER = {
						clr_country_flag = PER_organize_an_uprising_in_tajikistan_complete_flag
						load_oob = "PER_soviet_rise_taj"
					}
				}
				if = {
					limit = { PER = { has_country_flag = PER_organize_an_uprising_in_azerbaijan_complete_flag } }
					PER = {
						clr_country_flag = PER_organize_an_uprising_in_azerbaijan_complete_flag
						load_oob = "PER_soviet_rise_azr"
					}
				}
			}
			### TRO THREAT ###
			if = {
				limit = {
					OR = {
						AND = {
							ROOT = { has_government = trozkism }
							FROM = { NOT = { has_government = trozkism } }
						}
						AND = {
							FROM = { has_government = trozkism }
							ROOT = { NOT = { has_government = trozkism } }
						}
					}
				}
				add_to_variable = { global.troz_threat_var = 1 tooltip = troz_threat_tt }
				set_var_for_troz_threat_dyn = yes
				log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил 1 тронапряги из-за нападения на [From.GetName] ([From.GetTag])"
			}
			if = {
				limit = {
					ROOT = { has_government = trozkism }
					FROM = { has_government = trozkism }
				}
				add_to_variable = { global.troz_threat_var = -5 tooltip = troz_threat_tt }
				set_var_for_troz_threat_dyn = yes
				log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил -5 тронапряги из-за нападения на [From.GetName] ([From.GetTag])"
			}
			if = {
				limit = {
					has_idea = BPL_anti_semitic_riots
					FROM = { tag = BPL }
				}
				swap_ideas = {
					remove_idea = BPL_anti_semitic_riots
					add_idea = BPL_anti_semitic_riots_2
				}
				hidden_effect = {
					if = {
						limit = { FROM = { NOT = { has_country_flag = NWpalestine_81_flag } } }
						FROM = {
							set_country_flag = NWpalestine_81_flag
							country_event = { id = NWpalestine.81 }
						}
					}
				}
			}
			# barbarossa
			if = {
				limit = {
					ROOT = {
						OR = {
							original_tag = GER
							is_in_faction_with = GER
						}
						any_allied_country = { is_neighbor_of = FROM }
					}
					FROM = { original_tag = SOV }
				}

				hidden_effect = {
					set_country_flag = { flag = NW_barbarossa_blitz value = 1 days = 30 }
					FROM = { set_country_flag = { flag = NW_barbarossa_defensive value = 1 days = 270 } }
				}
			}
			# GER wardec on SOV
			if = {
				limit = {
					ROOT = {
						original_tag = GER 
					}
					FROM = {
						original_tag = SOV
					}
				}

				if = { # fin continuation war
					limit = {
						FROM = {
							OR = {
								owns_state = 146
								owns_state = 147
							}
						}
					}
					FIN = {
						set_country_flag = { flag = NW_fin_continuation_war_flag_timeout value = 1 days = 6 }
						set_country_flag = NW_fin_continuation_war_flag
					}
					if = {
						limit = {
							is_faction_leader = yes
							OR = {
								has_government = fascism
								has_government = monarchy
								has_government = neutrality
							}
							FIN = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = neutrality
									has_government = democratic
								}
							}
						}
						FIN = { country_event = { id = generic.5 days = 3 } }
					}
				}
			}
			# Для снятия договора СССР с Прибалтикой
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = SOV
							has_idea = SOV_baltic_agreement_idea
						}
					}
					ROOT = {
						OR = {
							original_tag = SOV
							has_idea = SOV_baltic_agreement_idea
						}
					}
				}
				ROOT = {
					remove_ideas = SOV_baltic_agreement_idea
					clr_country_flag = SOV_baltic_falsification_ready
				}
				FROM = {
					remove_ideas = SOV_baltic_agreement_idea
					clr_country_flag = SOV_baltic_falsification_ready
				}
			}
			#PRC call in PRC_north_western_government
			if = {
				limit = {
					NOT = { original_tag = GXC }
					WTT_is_chinese_warlord = yes
					is_subject = no
					PRC = {
						has_country_flag = PRC_north_western_government_flag
						is_faction_leader = yes
					}
					FROM = {
						OR = {
							original_tag = CHI
							original_tag = JAP
						}
					}
				}
				PRC = {
					country_event = { id = tr_japan.8 hours = 3 }
				}
			}
			#Нефтяные концессии ВБ
			if = {
				limit = {
					tag = ENG
					FROM = {
						tag = PER
						OR = {
							owns_state = 413
							owns_state = 1187
						}
					}
				}
				ENG = {
					remove_resource_rights = 413
					remove_resource_rights = 1187
				}
				PER = {
					if = {
						limit = { NOT = { has_completed_focus = PER_nationalize_oil_industry } }
						unlock_national_focus = PER_nationalize_oil_industry
					}
					if = {
						limit = { has_idea = PER_payments_from_oil_sales }
						remove_ideas = PER_payments_from_oil_sales
					}
				}
			}
			if = {
				limit = {
					tag = ENG
					FROM = {
						tag = IRQ
						OR = {
							owns_state = 962
							owns_state = 676
							owns_state = 291
							owns_state = 995
						}
					}
				}
				ENG = {
					remove_resource_rights = 962
					remove_resource_rights = 676
					remove_resource_rights = 291
					remove_resource_rights = 995
				}
				IRQ = {
					if = {
						limit = { NOT = { has_completed_focus = IRQ_nationalization_of_oil_fields } }
						unlock_national_focus = IRQ_nationalization_of_oil_fields
					}
				}
			}
			### ИРРЕГУЛЯРКА ###
			if = {
				limit = {
					FROM = {
						OR = {
							has_idea = irregular_army
							has_idea = partial_regular_army
						}
					}
				}
				set_temp_variable = { peoples_militia_var_temp = FROM.peoples_militia_var }
				if = {
					limit = { check_variable = { peoples_militia_var_temp < 10 } }
					add_to_temp_variable = { peoples_militia_var_temp = 1 }
				}
				else_if = {
					limit = {
						check_variable = { peoples_militia_var_temp > 9 }
						check_variable = { peoples_militia_var_temp < 20 }
					}
					add_to_temp_variable = { peoples_militia_var_temp = 2 }
				}
				else = {
					multiply_temp_variable = { peoples_militia_var_temp = 1.1 }
				}
				round_temp_variable = peoples_militia_var_temp
				set_temp_variable = { peoples_militia_var_temp1 = peoples_militia_var_temp }
				set_temp_variable = { peoples_militia_var_temp2 = peoples_militia_var_temp }
				multiply_temp_variable = { peoples_militia_var_temp = 0.5 }
				round_temp_variable = peoples_militia_var_temp
				subtract_from_temp_variable = { peoples_militia_var_temp1 = peoples_militia_var_temp }
				add_to_temp_variable = { peoples_militia_var_temp2 = peoples_militia_var_temp }
				round_temp_variable = peoples_militia_var_temp1
				round_temp_variable = peoples_militia_var_temp2
				if = {
					limit = { check_variable = { peoples_militia_var_temp1 = peoples_militia_var_temp2 } }
					add_to_temp_variable = { peoples_militia_var_temp2 = 1 }
				}
				custom_effect_tooltip = irregular_army_tt2
			}
		}
		
		effect = {
			# Капитуляция Дании по событию
			if = {
				limit = {
					ROOT = {
						original_tag = GER
						has_government = fascism
						is_faction_leader = yes
						is_subject = no
					}
					FROM = {
						original_tag = DEN
						OR = {
							has_idea = DEN_christian_x
							has_idea = DEN_christian_x_1
							has_idea = DEN_christian_x_2
						}
						has_government = democratic
						has_capitulated = no
						is_faction_leader = no
						is_subject = no
					}
				}
				FROM = { country_event = apdenmark_c.1 }
			}
		}
	
		#Таймер перемирия | АЛБАНИЯ
		effect = {
			if = {
				limit = {
					FROM = { original_tag = ALB }
					tag = ITA
				}
				ALB = { set_country_flag = { flag = ALB_timer_whitepeace_year	days = 365	value = 1 } }
			}
		}
	
		# SOV
		effect = {
			if = {
				limit = {
					FROM = { original_tag = SOV }
					original_tag = SOV
					NOT = { has_global_flag = SOV_soviet_civil_war }
				}
				set_global_flag = SOV_soviet_civil_war
			}
			if = {
				limit = {
					FROM = { original_tag = FIN }
					tag = SOV
					SOV = { has_country_flag = soviet_finland_war_flag }
				}
				FROM = {
					if = {
						limit = { has_rule = can_create_factions }
						set_country_flag = can_create_factions_flag
					}
					set_rule = { can_join_factions = no }
					set_rule = { can_create_factions = no }
				}
			}
		}
	
		# GER SOV POL
		effect = {
			if = {
				limit = {
					FROM = { original_tag = POL }
					tag = GER
					has_global_flag = sov_yes_pact
				}
				SOV = {
					country_event = { id = NWgermany.98 days = 3 }
					add_ai_strategy = { type = prepare_for_war id = FROM value = 200 }
				}
				every_other_country = {
					limit = { has_guaranteed = FROM }
					add_ai_strategy = { type = diplo_action_desire id = FROM target = guarantee value = -200 }
#					diplomatic_relation = {
#						country = POL
#						relation = guarantee
#						active = no
#					}
				}
			}
		}
		
	} #FROM is war target
	
# THIS is country that has just gotten into a war.
	on_war = {
		# Крупная война в Европе // PER
		effect = {
			if = {
				limit = {
					SOV = { has_war = yes }
					ENG = { has_war = yes }
					GER = { has_war = yes }
					NOT = { has_global_flag = NWpersian_28_flag }
				}
				set_global_flag = NWpersian_28_flag
				PER = { country_event = { id = NWpersian.28 days = 1 } }
			}
		}
		# Предложить Советскому Союзу устроить вторжение в Иран // ENG
		effect = {
			if = {
				limit = {
					ENG = { has_war_with = GER NOT = { has_war_with = SOV } }
					GER = { has_war_with = SOV }
					PER = {
						OR = {
							has_completed_focus = PER_involvement_german_advisers
							NOT = { has_idea = neutrality_idea }
						}
						OR = {
							is_in_faction = no
							is_faction_leader = no
						}
						OR = {
							has_government = monarchy
							has_government = neutrality
							has_government = fascism
							has_government = democratic
						}
						NOT = {
							is_in_faction_with = SOV
							is_in_faction_with = ENG
							has_war_with = GER
							is_subject_of = SOV
							is_subject_of = ENG
						}
					}
					NOT = { has_global_flag = NWpersian_29_flag }
				}
				set_global_flag = NWpersian_29_flag
				ENG = { country_event = { id = NWpersian.29 days = 1 } }
			}
		}
	} # THIS is country that has just gotten into a war.


# ROOT is capitulated country, FROM is winner
	on_capitulation = {
		effect = {
#End of SCW
#Классическая ГВ Испании
			if = {
				limit = {
					FROM = {
						tag = SPA
					}
					ROOT = {
						tag = SPR
					}
				}
#				FROM = { add_timed_idea = { idea = SPA_recovering_from_civil_war days = 1825 } }
				
				FROM = {
					if = {
						limit = {
							ARA = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = ARA
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							BAS = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = BAS
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							CAT = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = CAT
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							GLC = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = GLC
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							ASU = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = ASU
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							SNT = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = SNT
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							VLA = {
								has_war_with = SPA
								is_puppet_of = SPR
							}
						}
						FROM = {
							annex_country = {
								target = VLA
								transfer_troops = no
							}
						}
					}
				
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
			if = {
				limit = {
					FROM = {
						OR = {
							tag = SPR
							tag = SPA
						}
					}
					ROOT = {
						OR = {
							tag = SPR
							tag = SPA
						}
					}
				}
				FROM = {
					#add_timed_idea = { idea = SPA_recovering_from_civil_war days = 1825 }
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
				every_state = {
					limit = { is_core_of = ROOT }
					remove_core_of = ROOT
				}
				every_state = {
					limit = { is_claimed_by = ROOT }
					remove_claim_by = ROOT
				}
			}
			if = {
				limit = {
					ROOT = { tag = ASU }
				}
				ROOT = {
					174 = { remove_core_of = ASU }
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					ROOT = { tag = SNT }
				}
				ROOT = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					FROM = {
						tag = JBS
					}
					ROOT = {
						tag = SAU
					}
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_saud_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_muhammad_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_muhammad_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_abdulaziz_ibn_saud } 
					}
					SAU = {
					    SAU_abdulaziz_ibn_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_faisal_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_faisal_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_mansour_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_mansour_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_noura_bint_abdul_rahman_al_saud } 
					}
					SAU = {
					    SAU_noura_bint_abdul_rahman_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_bin_jiluwi_al_saud } 
					}
					SAU = {
					    SAU_saud_bin_jiluwi_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_al_kabeer_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_saud_al_kabeer_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
            }				
			if = {
				limit = {
					ROOT = { tag = DZH }
				}
				ROOT = {
				    DZH_dalelkhan_sugirbayev = {
						promote_character = yes
					}
				    DZH_ospan_batyr = {
						promote_character = yes
					}
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					ROOT = { tag = KUM }
				}
				ROOT = {
				    760 = { remove_core_of = KUM }
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					ROOT = { tag = KAS }
				}
				ROOT = {
				    619 = { remove_core_of = KAS }
					1122 = { remove_core_of = KAS }
					drop_cosmetic_tag = yes
				}
			}
			
			#Святое войско уничтожило источник Сатаны на земле белых
			if = {
				limit = {
					FROM = {
						tag = COG
						NOT = { has_country_flag = COG_no_capitulation_flag }
					}
				}
				FROM = {
					country_event = { id = cog.9 }
				}
			}
			
			#BRW peace with BEL#
			if = {
				limit = { 
					FROM = { OR = { tag = BRD tag = RWA } }
					ROOT = {
						tag = BRW
						is_subject = yes
						OVERLORD = { has_war_with = FROM }
					}
				}
				ROOT = { OVERLORD = { country_event = NW_BRW.33 } }
			}
			
			#Образование Эллинского государства
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = GRE
							tag = CRE
						}
					}
					GER = { has_war_with = ROOT }
					has_global_flag = ger_form_hel_flag
					NOT = { has_global_flag = ger_form_hel_end_flag }
				}
				GER = { country_event = { id = NWgreece_hel.1 days = 1 } }
			}
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = GRE
							tag = CRE
						}
					}
					GER = {
						has_war_with = ROOT
						has_government = fascism
					}
					ITA = {
						has_government = fascism
						is_in_faction_with = GER
					}
					NOT = { has_global_flag = ger_form_hel_flag }
					NOT = { has_global_flag = ger_form_hel_end_flag }
				}
				random_country = {
					limit = {
						NOT = { tag = ROOT }
						has_war_with = ROOT
					}
					country_event = { id = NWgreece_hel.999 }
				}
			}
			
			#HOL BLOCK#
			if = {
				limit = { original_tag = HOL }
				# Reducing the Crisisjaren idea to level 1 when capitulated (in case player didn't manage to finish the mainland industrial focuses), but still needs Liberation to remove it fully
				if = {
					limit = { has_idea = HOL_de_crisisjaren_4 }
					swap_ideas = {
						remove_idea = HOL_de_crisisjaren_4
						add_idea = HOL_de_crisisjaren_1
					}
					add_to_variable = { var = HOL_percentage_of_unemployed value = -6 }
					HOL_the_mechanics_of_unemployment = yes
				}
				else_if = {
					limit = { has_idea = HOL_de_crisisjaren_3 }
					swap_ideas = {
						remove_idea = HOL_de_crisisjaren_3
						add_idea = HOL_de_crisisjaren_1
					}
					add_to_variable = { var = HOL_percentage_of_unemployed value = -4 }
					HOL_the_mechanics_of_unemployment = yes
				}
				else_if = {
					limit = { has_idea = HOL_de_crisisjaren_2 }
					swap_ideas = {
						remove_idea = HOL_de_crisisjaren_2
						add_idea = HOL_de_crisisjaren_1
					}
					add_to_variable = { var = HOL_percentage_of_unemployed value = -2 }
					HOL_the_mechanics_of_unemployment = yes
				}
				# Only possible if Abandon the Gold Standard hasn't been taken yet, this can be taken later so should be reduced to level 2 rather than 1 (вы педики шведские все равно, делает вид что умный и расписывает свою хуйню, а в ивентах тэги юзает вместо FROM)
				else_if = {
					limit = { has_idea = HOL_de_crisisjaren_5 }
					swap_ideas = {
						remove_idea = HOL_de_crisisjaren_5
						add_idea = HOL_de_crisisjaren_2
					}
					add_to_variable = { var = HOL_percentage_of_unemployed value = -6 }
					HOL_the_mechanics_of_unemployment = yes
				}
			}
			if = {
				limit = {
					tag = GER
					FROM = {
						tag = HOL
						has_completed_focus = HOL_wilhelminism
					}
				}
				HOL = { country_event = { id = mtg_netherlands.76 } }
			}
			
			#Падение марионеточной Греции
			if = {
				limit = {
					ROOT = { tag = HEL }
					FROM = {
						OR = {
							OR = {
								tag = GRE
								is_in_faction_with = GRE
							}
							OR = {
								tag = CRE
								is_in_faction_with = CRE
							}
						}
					}
					NOT = { has_global_flag = ger_form_hel_flag }
					NOT = { has_global_flag = ger_form_hel_end_flag }
				}
				FROM = { country_event = { id = NWgreece_hel.7 days = 1 } }
			}
			
			#Сопротивление Греции
			if = {
				limit = {
					ROOT = {
						OR = {
							tag = GRE
							AND = {
								tag = CRE
								NOT = {
									has_government = communism
									has_government = trozkism
								}
							}
						}
					}
				}
				if = {
					limit = {
						FROM = {
							NOT = {
								tag = HEL
								has_idea = HEL_illegitimate_government
							}
						}
					}
					FROM = {
						set_variable = { resistance_score = 48 }
						country_event = { id = NWgreece_hel.8 days = 1 }
					}
				}
			}
			
			#ГВ Габс/Гогены
			if = {
				limit = {
					has_civil_war = no
					OR = {
						AND = {
							ROOT = { tag = event_target:NW_hbbrg_scope }
							FROM = { tag = event_target:NW_hhnbrg_scope }
						}
						AND = {
							ROOT = { tag = event_target:NW_hhnbrg_scope }
							FROM = { tag = event_target:NW_hbbrg_scope }
						}
					}
				}
				ROOT = {
					every_core_state = {
						add_core_of = FROM
					}
				}
				FROM = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
			
			#ГВ IRQ
			if = {
				limit = {
					IRQ = { has_civil_war = yes }
					ROOT = {
						original_tag = IRQ
						NOT = { has_government = communism }
						is_subject_of = ENG
					}
				}
				ENG = { country_event = { id = NWiraq.8 } }
			}
			
			#ЖОР BPL = PAL/ISR
			if = {
				limit = {
					ROOT = {
						OR = {
							original_tag = PAL
							original_tag = ISR
						}
					}
					OR = {
						BPL = { is_subject_of = FROM }
						FROM = {
							OR = {
								original_tag = BPL
								is_in_faction_with = BPL
								is_subject_of = BPL
							}
						}
					}
				}
				ROOT = {
					every_core_state = {
						add_core_of = BPL
						remove_core_of = PREV
					}
				}
				BPL = {
					annex_country = {
						target = ROOT
						transfer_troops = yes
					}
				}
			}
			
			#ГВ GER-передача флота
			if = {
				limit = {
					FROM = { original_tag = GER }
					ROOT = { original_tag = GER }
				}
				ROOT = { transfer_navy = { target = FROM } }
			}
			#ГВ-Китай
			if = {
				limit = {
					FROM = {
						WTT_is_chinese_warlord = yes
					}
					ROOT = {
						tag = CHI
					}
				}
# ПОЧИНИТЬ ПОТОМ				
				FROM = {
#					load_focus_tree = china_nationalist_focus
					set_cosmetic_tag = CHI_warlord_leader
				}
				ROOT = {
					every_core_state = {
						remove_core_of = PREV
						add_core_of = FROM
					}
				}
			}
			if = {
				limit = {
					FROM = { tag = event_target:new_leader }
					ROOT = { tag = event_target:old_leader }
				}
				drop_cosmetic_tag = yes 
				set_cosmetic_tag = CHI
				remove_ideas = CHI_illegal_regime
				clear_global_event_target = WTT_current_china_leader
				save_global_event_target_as = WTT_current_china_leader
			}	
			if = {
				limit = {
					has_civil_war = no
					ROOT = { WTT_is_chinese_warlord = yes }
					FROM = { tag = CHI }
				}
				ROOT = {
					every_core_state = {
						remove_core_of = PREV
					}
				}
				FROM = {
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
			# ГВ-Франция
            if = {
				limit = {
					FROM = { tag = FRA }
					ROOT = { tag = FRC }
				}
				FRC = { transfer_navy = { target = FRA } }
			}
            if = {
				limit = {
					FROM = { tag = FRC }
					ROOT = { tag = FRA }
				}
				FRA = { transfer_navy = { target = FRC } }
			}			
			if = {
				limit = {
					FROM = { tag = FRA }
					ROOT = { tag = FRF }
				}
				FRF = { transfer_navy = { target = FRA } }
			}
            if = {
				limit = {
					FROM = { tag = FRF }
					ROOT = { tag = FRA }
				}
				FRA = { transfer_navy = { target = FRF } }
			}
			
			### TRO THREAT ###
			if = {
				limit = {
					ROOT = {
						has_government = trozkism
						not_is_really_trozkist = yes
					}
				}
				add_to_variable = { global.troz_threat_var = -1 }
				set_var_for_troz_threat_dyn = yes
				log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): добавил -1 тронапряги капитуляцией"
			}
			
			#### Слёт соглашения стран Прибалтики с СССР при капитуляции последней
			if = {
				limit = {
					ROOT = { original_tag = SOV }
				}
				every_country = {
					limit = { has_idea = SOV_baltic_agreement_idea }
					remove_ideas = SOV_baltic_agreement_idea
					clr_country_flag = SOV_baltic_falsification_ready
				}
			}
			
			#Чек Ялты
			if = {
				limit = {
					has_global_flag = had_yalta_conference
					ROOT = {
						tag = GER
						has_government = fascism
					}
				}
				every_country = {
					limit = {
						has_country_flag = JAP_yalta_conference_flag
					}
					clr_country_flag = JAP_yalta_conference_flag
					if = {
						limit = { NOT = { has_war_with = JAP } }
						activate_mission = generic_JAP_start_prepare_mission
					}
				}
			}
			
			#TUR / GRE договор о сердечном согласии
			if = {
				limit = {
					has_global_flag = TUR_extension_of_agreement_on_cordial_consent_flag
					OR = {
						ROOT = {
							OR = {
								has_completed_focus = TUR_extension_of_agreement_on_cordial_consent
								tag = GRE
							}
							has_government = democratic
						}
					}
				}
				random_country = {
					limit = {
						NOT = { tag = ROOT }
						has_capitulated = no
						OR = {
							has_completed_focus = TUR_extension_of_agreement_on_cordial_consent
							tag = GRE
						}
						has_government = democratic
					}
					ROOT = {
						become_exiled_in = {
							target = PREV
							legitimacy = 50
						}
					}
				}
			}
		}
		
		effect = {
			# Автомир СССР // ТуркГВ
			if = {
				limit = {
					ROOT = {
						original_tag = TUR
						has_completed_focus = TUR_soviet_support
						has_civil_war = yes
					}
					SOV = { has_country_flag = TUR_intervention_in_TCW_flag }
				}
				SOV = { clr_country_flag = TUR_intervention_in_TCW_flag }
			}
		}
		
		effect = {
			# Раздел Югославии
			if = {
				limit = {
					ROOT = { tag = YUG }
					FROM = {
						num_faction_members > 1
						OR = {
							original_tag = GER
							is_in_faction_with = GER
						}
					}
					NOT = { has_global_flag = axis_divid_yug_flag }
				}
				GER = { country_event = { id = NWYugoslavia.1 days = 1 } }
			}
		}
		
		effect = {
			# Капитуляция Пробританского Ирана = Мир с Союзниками
			if = {
				limit = {
					ROOT = {
						original_tag = PER
						is_subject_of = ENG
					}
					FROM = {
						original_tag = PER
					}
					NOT = { has_global_flag = PER_peace_with_allies_flag }
				}
				set_global_flag = PER_peace_with_allies_flag
				FROM = {
					every_enemy_country = {
						limit = {
							is_subject = no
							OR = { has_subject = ROOT is_in_faction_with = ROOT }
							OR = { is_faction_leader = yes is_in_faction = no }
							NOT = { original_tag = PREV }
						}
						FROM = {
							white_peace = {
								tag = PREV
								message = PER_peace_with_allies_flag
							}
						}
					}
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
			# Капитуляция Прогерманского Ирана = Мир с Осью
			if = {
				limit = {
					ROOT = {
						original_tag = PER
						is_subject_of = GER
					}
					FROM = {
						original_tag = PER
					}
					NOT = { has_global_flag = PER_peace_with_axis_flag }
				}
				set_global_flag = PER_peace_with_axis_flag
				FROM = {
					every_enemy_country = {
						limit = {
							is_subject = no
							OR = { has_subject = ROOT is_in_faction_with = ROOT }
							OR = { is_faction_leader = yes is_in_faction = no }
							NOT = { original_tag = PREV }
						}
						FROM = {
							white_peace = {
								tag = PREV
								message = PER_peace_with_axis_flag
							}
						}
					}
					annex_country = {
						target = ROOT
						transfer_troops = no
					}
				}
			}
		}
		
		
		effect = {
# Меха на воровство three hundred bucks из ВПО
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
					ROOT = { NOT = { has_country_flag = { flag = is_already_stolen_flag value > 0 } } }
				}
				ROOT = {
					set_country_flag = { flag = is_already_stolen_flag days = 365 value = 1 }
				}
				stolen_funds_mio_effect = yes
			}
		}
		# ROOT is capitulated country, FROM is winner
	}
	
	on_uncapitulation = {
		effect = {
			# Уборка фабрик и доков вне карты после возвращения домой
			if = {
				limit = {
					original_tag = ROOT
					check_variable = { var = industrialists_counter@ROOT value > 0 }
				}
				set_variable = { var_null@ROOT = 0 }
				subtract_from_variable = { var_null@ROOT = industrialists_counter@ROOT }
				add_offsite_building = { type = arms_factory level = var_null@ROOT }
				add_offsite_building = { type = industrial_complex level = var_null@ROOT }
				set_variable = { industrialists_counter@ROOT = 0 }
			}
			if = {
				limit = {
					original_tag = ROOT
					check_variable = { var = obtain_dockyard_counter@ROOT value > 0 }
				}
				set_variable = { var_null@ROOT = 0 }
				multiply_variable = { industrialists_counter@ROOT = 2 }				
				subtract_from_variable = { var_null@ROOT = obtain_dockyard_counter@ROOT }
				add_offsite_building = { type = dockyard level = var_null@ROOT }
				set_variable = { obtain_dockyard_counter@ROOT = 0 }
			}
		}
	}
	
	#ROOT is winner #FROM gets annexed - For civil wars on_civil_war_end is also fired
	on_annex = {
		effect = {
			#SPR - ARA
			if = {
				limit = {
					FROM = { tag = SPR }
					ROOT = {
						OR = {
							tag = ARA
							tag = CAT
						}
					}
				}
				ARA = {
					every_state = {
						limit = {
							is_claimed_by = ARA
							NOT = { is_fully_controlled_by = ARA }
						}
						remove_core_of = ARA
						remove_claim_by = ARA
					}
				}
				if = {
					limit = { GLC = { exists = yes } }
					ARA = {
						every_state = {
							limit = { is_fully_controlled_by = GLC }
							add_claim_by = ARA
							add_core_of = ARA
						}
					}
				}
				if = {
					limit = { BAS = { exists = yes } }
					ARA = {
						every_state = {
							limit = { is_fully_controlled_by = BAS }
							add_claim_by = ARA
							add_core_of = ARA
						}
					}
				}
				if = {
					limit = { ASU = { exists = yes } }
					ARA = {
						every_state = {
							limit = { is_fully_controlled_by = ASU }
							add_claim_by = ARA
							add_core_of = ARA
						}
					}
				}
				if = {
					limit = { SNT = { exists = yes } }
					ARA = {
						every_state = {
							limit = { is_fully_controlled_by = SNT }
							add_claim_by = ARA
							add_core_of = ARA
						}
					}
				}
				if = {
					limit = { CAT = { exists = yes } }
					CAT = {
						every_state = {
							limit = {
								is_claimed_by = CAT
								NOT = { is_fully_controlled_by = CAT }
							}
							remove_core_of = CAT
							remove_claim_by = CAT
						}
					}
				}
				SPR = {
					every_state = {
						limit = {
							is_core_of = SPR
						}
						remove_core_of = SPR
						remove_claim_by = SPR
					}
				}
			}
			
			
			#Пульсар побед лагерей // правые
			if = {
				limit = {
					has_global_flag = liberal_spanish_civil_war
					NOT = { has_global_flag = scw_over }
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
					FROM = {
						OR = {
							tag = SPC
							tag = ANL
							tag = ARA
						}
					}
				}
				ROOT = { country_event = { id = NWspain.51 hours = 6 } }
			}
			
			#Пульсар побед лагерей // левые
			if = {
				limit = {
					has_global_flag = liberal_spanish_civil_war
					NOT = { has_global_flag = scw_over }
					FROM = {
						OR = {
							tag = CAS
							tag = NAV
							tag = SEU
						}
					}
				}
				ROOT = { country_event = { id = NWspain.52 hours = 6 } }
			}
			
			#Снятие клеймов и корок у проигравшего минора Испании
			if = {
				limit = {
					OR = {
						has_global_flag = liberal_spanish_civil_war
						has_global_flag = haos_liberal_spanish_civil_war
					}
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
					NOT = { has_global_flag = scw_over }
					FROM = {
						OR = {
							tag = SPR
							tag = CAS
							tag = NAV
							tag = SEU
							tag = SPC
							tag = ANL
							tag = ARA
							tag = ASU
							tag = SNT
							tag = CAT
							tag = BAS
							tag = GLC
							tag = VLA
						}
					}
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
			}
			
			#Жор каталонии-марионетки // Либеральная ГВ
			if = {
				limit = {
					has_global_flag = liberal_spanish_civil_war
					NOT = { has_global_flag = scw_over }
					FROM = { tag = SPR }
				}
				if = {
					limit = {
						country_exists = CAT
						CAT = {
							is_ai = yes
							OR = {
								has_war_with = CAS
								has_war_with = NAV
								has_war_with = SEU
								has_war_with = SPC
								has_war_with = ANL
								has_war_with = ARA
								has_war_with = ROOT
							}
						}
					}
					ROOT = {
						annex_country = {
							target = CAT
							transfer_troops = no
						}
					}
				}
				else_if = {
					limit = {
						country_exists = CAT
						CAT = {
							NOT = {
								has_war_with = CAS
								has_war_with = NAV
								has_war_with = SEU
								has_war_with = SPC
								has_war_with = ANL
								has_war_with = ARA
								has_war_with = ROOT
							}
						}
					}
					ROOT = {
						add_ai_strategy = {
							type = antagonize
							id = "CAT"
							value = 500
						}
						add_ai_strategy = {
							type = conquer
							id = "CAT" 
							value = 500
						}
					}
				}
			}
			
			#Определение победителя // Конец ГВ либералов
			if = {
				limit = {
					OR = {
						has_global_flag = liberal_spanish_civil_war
						has_global_flag = haos_liberal_spanish_civil_war
					}
					NOT = {
						has_global_flag = THE_MOTHER_OF_ORDER_FLAG
						has_global_flag = WORLD_OF_SPLIT_FLAG
					}
					NOT = { has_global_flag = scw_over }
					ROOT = {
						OR = {
							tag = SPR
							tag = CAS
							tag = NAV
							tag = SEU
							tag = SPC
							tag = ANL
							tag = ARA
							tag = ASU
							tag = SNT
							tag = CAT
							tag = BAS
							tag = GLC
							tag = VLA
						}
					}
					FROM = {
						OR = {
							tag = SPR
							tag = CAS
							tag = NAV
							tag = SEU
							tag = SPC
							tag = ANL
							tag = ARA
							tag = ASU
							tag = SNT
							tag = CAT
							tag = BAS
							tag = GLC
							tag = VLA
						}
					}
				}
				ROOT = { country_event = { id = NWspain.50 hours = 6 } }
			}
			
			#SIK теряет нац.духа после аннексии Уйгуров
			if = {
				limit = {
					FROM = { tag = KAS }
					ROOT = { tag = SIK }
				}
				ROOT = { remove_ideas = SIK_nationalism }
			}
# ПОЧИНИТЬ ПОТОМ			
#			if = {
#				limit = {
#					FROM = { tag = KAS }
#					ROOT = { tag = SIK }
#				}
#				ROOT = { load_focus_tree = china_warlord_focus }
#			}
			
			if = {
				limit = {
					FROM = {
						has_idea = SOV_baltic_agreement_idea
					}
				}
				remove_ideas = SOV_baltic_agreement_idea
				clr_country_flag = SOV_baltic_falsification_ready
			}
			
			if = {
				limit = {
					FROM = { has_idea = TUR_debts_to_great_powers }
					ROOT = { original_tag = TUR }
				}
				ROOT = { add_ideas = TUR_debts_to_great_powers }
			}
		}
	} #ROOT is winner #FROM gets annexed - For civil wars on_civil_war_end is also fired
	
	on_release_as_free = {
		effect = {
			ROOT = { country_event = { id = TRpolitical.106 } }
			if = {
				limit = {
					tag = POL
					POL = { has_cosmetic_tag = POL_SOV }
				}
				POL = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					tag = COG
					FROM = {
						NOT = {
							original_tag = BEL
						}
					}
				}
				COG = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					tag = MAN
					FROM = {
						NOT = {
							original_tag = JAP
						}
					}
				}
				MAN = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					tag = SYR
					has_cosmetic_tag = SYR_FRA
					FROM = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = LEB
					has_cosmetic_tag = LEB_FR
					FROM = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SRL
					has_cosmetic_tag = SRL_ENG
					FROM = { NOT = { original_tag = ENG } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = BPL
					has_cosmetic_tag = BPL_ENG
					FROM = { NOT = { original_tag = ENG } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = NFL
					has_cosmetic_tag = NFL_ENG
					FROM = { NOT = { original_tag = ENG } }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = BPL_technat_subject
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = FIC_FRA
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = CYP_UK
				}
				drop_cosmetic_tag = yes
			}
		}
	}
	
	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			FROM = { country_event = { id = TRpolitical.106 } }
			#France
			if = {
				limit = {
					FROM = { tag = FRA }
					ROOT = { tag = FRC }
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
				every_enemy_country = {
					limit = {
						NOT = { original_tag = ROOT }
						NOT = { original_tag = FROM }
						is_subject = no
						OR = { is_faction_leader = yes is_in_faction = no }
					}
					ROOT = { white_peace = PREV }
				}
				ROOT = {
					remove_ideas = FRA_civil_war
					news_event = { id = trworldnews.80 hours = 6 }
					clear_global_event_target = NW_france_scope
					save_global_event_target_as = NW_france_scope
				}
			}
			#HOL#
			if = {
				limit = {
					original_tag = GER
					has_idea = HOL_german_defectors_2
					FROM = { original_tag = HOL }
				}
				remove_ideas = HOL_german_defectors_2
			}
			#SAU#
			if = {
				limit = {
					FROM = {
						original_tag = SAU
					}
					ROOT = { NOT = { original_tag = SAU } }
				}
				every_state = {
					limit = {
						OR = {
							state = 679
		    				state = 1073
							state = 991
						}
	                    has_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn }
					}
					remove_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn }
				}
				every_state = {
					limit = {
						OR = {
		    				state = 797
							state = 1125
						}
	                    has_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate }
					}
					remove_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate }
				}
				every_state = {
					limit = {
						OR = {
		    				state = 292
							state = 769
						}
	                    has_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn }
					}
					remove_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn }
				}
			}
			if = {
				limit = {
					FROM = { tag = FRC }
					ROOT = { tag = FRA }
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
				ROOT = {
					remove_ideas = FRA_civil_war
					news_event = { id = trworldnews.81 hours = 6 }
					clear_global_event_target = NW_france_scope
					save_global_event_target_as = NW_france_scope
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = FRC
						NOT = { tag = FRC }
						OR = { tag = D01 tag = D02 tag = D03 tag = D04 tag = D05 tag = D06 tag = D07 tag = D08 tag = D09 tag = D10 tag = D11 tag = D12 tag = D13 tag = D14 tag = D15 tag = D16 tag = D17 tag = D18 tag = D19 tag = D20 tag = D21 tag = D22 tag = D23 tag = D24 tag = D25 tag = D26 tag = D27 tag = D28 tag = D29 tag = D30 tag = D31 tag = D32 tag = D33 tag = D34 tag = D35 tag = D36 tag = D37 tag = D38 tag = D39 tag = D40 tag = D41 tag = D42 tag = D43 tag = D44 tag = D45 tag = D46 tag = D47 tag = D48 tag = D49 tag = D50 }
						#has_government = communism
					}
					ROOT = { OR = { tag = FRA tag = FRC } }
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
				ROOT = {
					annex_country = {
						target = FROM
						transfer_troops = no
					}
				}
			}
			
			#Кагуляры // FRF
			if = {
				limit = {
					FROM = { tag = FRA }
					ROOT = { tag = FRF }
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
				ROOT = {
					remove_ideas = FRA_civil_war
					news_event = { id = trworldnews.88 hours = 6 }
					clear_global_event_target = NW_france_scope
					save_global_event_target_as = NW_france_scope
				}
			}
			if = {
				limit = {
					FROM = { tag = FRF }
					ROOT = { tag = FRA }
				}
				every_state = {
					limit = { is_claimed_by = FROM }
					remove_claim_by = FROM
				}
				every_state = {
					limit = { is_core_of = FROM }
					remove_core_of = FROM
				}
				every_enemy_country = {
					limit = {
						NOT = { original_tag = ROOT }
						NOT = { original_tag = FROM }
						is_subject = no
						OR = { is_faction_leader = yes is_in_faction = no }
					}
					ROOT = { white_peace = PREV }
				}
				ROOT = {
					remove_ideas = FRA_civil_war
					news_event = { id = trworldnews.80 hours = 6 }
					clear_global_event_target = NW_france_scope
					save_global_event_target_as = NW_france_scope
				}
			}
			
			
			
			if = {
				limit = {
					FROM = { tag = POL }
					ROOT = { tag = event_target:NW_hhnbrg_scope }
				}
				event_target:NW_hhnbrg_scope = {
					delete_unit_template_and_units = {
						division_template = "Polish volunteers"
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tag = SYR
						has_cosmetic_tag = SYR_FRA
					}
					ROOT = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				FROM = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					FROM = {
						tag = LEB
						has_cosmetic_tag = LEB_FR
					}
					ROOT = {
						NOT = {
							original_tag = FRA
							original_tag = FRC
							original_tag = FRR
							original_tag = FRF
						}
					}
				}
				FROM = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					FROM = {
						tag = SRL
						has_cosmetic_tag = SRL_ENG
					}
					ROOT = { NOT = { original_tag = ENG } }
				}
				FROM = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					FROM = {
						tag = NFL
						has_cosmetic_tag = NFL_ENG
					}
					ROOT = { NOT = { original_tag = ENG } }
				}
				FROM = {
					drop_cosmetic_tag = yes
				}
			}
			if = {
				limit = {
					FROM = { has_cosmetic_tag = BPL_technat_subject }
					ROOT = { NOT = { tag = BPL } }
				}
				FROM = {
					drop_cosmetic_tag = yes
				}
			}
			#Костыль для советско-финской
			if = {
				limit = {
					FROM = {
						OR = {
							tag = SOV
							tag = FIN
						}
					}
					ROOT = {
						OR = {
							tag = SOV
							tag = FIN
						}
					}
					SOV = { has_country_flag = soviet_finland_war_flag }
				}
				SOV = { clr_country_flag = soviet_finland_war_flag }
				FIN = {
					if = {
						limit = { has_country_flag = can_create_factions_flag }
						clr_country_flag = can_create_factions_flag
						set_rule = { can_join_factions = yes }
					}
				}
			}
			#Дуче жрет ETH
			if = {
				limit = {
					ROOT = {
						tag = ITA
						is_ai = yes
					}
					FROM = { tag = ETH }
				}
				ROOT = {
					annex_country = {
						target = FROM
						transfer_troops = no
					}
				}
			}
			#ЖОР BPL = PAL/ISR
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = PAL
							original_tag = ISR
						}
					}
					OR = {
						BPL = { is_subject_of = ROOT }
						ROOT = {
							OR = {
								original_tag = BPL
								is_in_faction_with = BPL
								is_subject_of = BPL
							}
						}
					}
				}
				BPL = {
					annex_country = {
						target = FROM
						transfer_troops = yes
					}
				}
				every_state = {
					limit = { is_core_of = FROM }
					add_core_of = BPL
					remove_core_of = FROM
				}
			}
			#ЖОР 72 стейта GER = POL/CZE
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = POL
							original_tag = CZE
						}
					}
					72 = {
						owner = {
							OR = {
								original_tag = POL
								original_tag = CZE
							}
						}
					}
				}
				937 = { owner = { transfer_state = 72 } }
			}
			#Нормальная Ялта
			if = {
				limit = {
					FROM = {
						tag = GER
						GER = { has_government = fascism }
					}
					ROOT = {
						OR = {
							tag = SOV
							is_in_faction_with = SOV
							tag = ENG
							is_in_faction_with = ENG
							tag = FRA
							is_in_faction_with = FRA
						}
					}
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								tag = ENG
								is_in_faction_with = ENG
								tag = FRA
								is_in_faction_with = FRA
							}
							OR = {
								has_government = neutrality
								has_government = democratic
							}
						}
					}
					every_state = {
						limit = {
							is_core_of = WGR
							is_core_of = FROM
							#is_owned_by = FROM
						}
						WGR = { transfer_state = PREV }
					}
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								tag = SOV
								is_in_faction_with = SOV
							}
							OR = {
								has_government = communism
								has_government = trozkism
							}
						}
					}
					every_state = {
						limit = {
							is_core_of = DDR
							is_core_of = FROM
							#is_owned_by = FROM
						}
						DDR = { transfer_state = PREV }
					}
					if = {
						limit = {
							POL = {
								OR = {
									has_government = communism
									has_government = trozkism
								}
							}
						}
						every_state = {
							limit = {
								OR = {
									is_core_of = POL
									state = 800
								}
								OR = {
									is_owned_by = DDR
									is_core_of = FROM
								}
							}
							add_core_of = POL
							POL = { transfer_state = PREV }
						}
						if = {
							limit = { 85 = { OR = { controller = { OR = { is_in_faction_with = POL } } owner = { OR = { is_in_faction_with = POL } } } } }
							POL = { transfer_state = 85 }
							85 = { add_core_of = POL }
						}
						if = {
							limit = { 774 = { OR = { controller = { OR = { is_in_faction_with = POL } } owner = { OR = { is_in_faction_with = POL } } } } }
							POL = { transfer_state = 774 }
							774 = { add_core_of = POL }
						}
						if = {
							limit = { 798 = { OR = { controller = { OR = { is_in_faction_with = POL } } owner = { OR = { is_in_faction_with = POL } } } } }
							POL = { transfer_state = 798 }
							798 = { add_core_of = POL }
						}
						if = {
							limit = { 837 = { OR = { controller = { OR = { is_in_faction_with = POL } } owner = { OR = { is_in_faction_with = POL } } } } }
							POL = { transfer_state = 837 }
							837 = { add_core_of = POL }
						}
						if = {
							limit = { 908 = { OR = { controller = { OR = { is_in_faction_with = POL } } owner = { OR = { is_in_faction_with = POL } } } } }
							POL = { transfer_state = 908 }
							908 = { add_core_of = POL }
						}
						every_state = {
							limit = {
								is_core_of = POL
								is_owned_by = SOV
								NOT = { is_core_of = SOV }
							}
							remove_core_of = POL
							add_core_of = SOV
						}
					}
				}
			}
			#CHI annex PRC after cgw
			if = {
				limit = {
					FROM = {
						tag = PRC
						has_country_flag = PRC_north_western_government_flag
					}
					ROOT = {
						OR = {
							tag = CHI
							tag = JAP
						}
					}
					CHI = { is_in_faction_with = JAP }
				}
				PRC = { clr_country_flag = PRC_north_western_government_flag }
				CHI = {
					annex_country = {
						target = PRC
						transfer_troops = yes
					}
				}
			}
			
			#AUS USE fix
			if = {
				limit = {
					AUS = {
						has_focus_tree = hbbrg_focus
						has_completed_focus = HBBRG_european_family
						NOT = { has_cosmetic_tag = HBBRG_use_tag }
					}
				}
				AUS = {
					set_cosmetic_tag = HBBRG_use_tag
				}
				every_other_country = {
					limit = {
						is_subject_of = AUS
						has_autonomy_state = autonomy_habs_use_state
						OR = {
							capital_scope = { is_on_continent = europe }
							original_tag = TUR
						}
						NOT = { original_tag = SOV }
					}
					set_cosmetic_HBBRG_use_subject = yes
				}
			}
			#HUN USE fix
			if = {
				limit = {
					HUN = {
						has_focus_tree = hbbrg_focus
						has_completed_focus = HBBRG_european_family
						NOT = { has_cosmetic_tag = HBBRG_use_tag }
					}
				}
				HUN = {
					set_cosmetic_tag = HBBRG_use_tag
				}
				every_other_country = {
					limit = {
						is_subject_of = HUN
						has_autonomy_state = autonomy_habs_use_state
						OR = {
							capital_scope = { is_on_continent = europe }
							original_tag = TUR
						}
						NOT = { original_tag = SOV }
					}
					set_cosmetic_HBBRG_use_subject = yes
				}
			}
			#CZE USE fix
			if = {
				limit = {
					CZE = {
						has_focus_tree = hbbrg_focus
						has_completed_focus = HBBRG_european_family
						NOT = { has_cosmetic_tag = HBBRG_use_tag }
					}
				}
				CZE = {
					set_cosmetic_tag = HBBRG_use_tag
				}
				every_other_country = {
					limit = {
						is_subject_of = CZE
						has_autonomy_state = autonomy_habs_use_state
						OR = {
							capital_scope = { is_on_continent = europe }
							original_tag = TUR
						}
						NOT = { original_tag = SOV }
					}
					set_cosmetic_HBBRG_use_subject = yes
				}
			}
			#SAADABAD_PACT_COUNTRY_ARRAY fix
			if = {
				limit = {
					FROM = {
						OR = {
							original_tag = TUR
							original_tag = PER
							original_tag = IRQ
							original_tag = AFG
							original_tag = EGY
							original_tag = SYR
							original_tag = BPL
							original_tag = LEB
							original_tag = ALW
							original_tag = JDS
						}
						has_country_flag = saadabad_accept_flag
						OR = {
							is_subject = yes
							exists = no
						}
					}
				}
				FROM = {
					clr_country_flag = saadabad_accept_flag
					remove_from_array = { global.saadabad_pact_country_array = THIS }
				}
			}
		}
		
		### TUR
		effect = {
			if = {
				limit = {
					FROM = { original_tag = KRD }
					original_tag = TUR
					has_civil_war = no
					has_template = "Turkish Militia"
				}
				delete_unit_template_and_units = {
					division_template = "Turkish Militia"
					disband = yes
				}
			}
		}
		
		
		### Передача Сайуна
#		effect = {
#			if = {
#				limit = {
#					FROM = { original_tag = KTH }
#					original_tag = QUA
#					ENG = { has_country_flag = NWhadhramaut_1_a_flag }
#					OR = {
#						KTH = { is_subject_of = QUA }
#						NOT = { country_exists = KTH }
#					}
#				}
#				ENG = { country_event = { id = NWhadhramaut.2 hours = 8 } }
#			}
#		}

		### SAU
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							AND = {
								has_focus_tree = saud_focus_tree
								NOT = { has_country_flag = we_have_one_win_war_flag }
							}
							any_allied_country = {
								has_focus_tree = saud_focus_tree
								NOT = { has_country_flag = we_have_one_win_war_flag }
							}
						}
					}
				}
				random_country_with_original_tag = {
					original_tag_to_check = SAU
					limit = {
						has_focus_tree = saud_focus_tree
						NOT = { has_country_flag = we_have_one_win_war_flag }
					}
					set_country_flag = we_have_one_win_war_flag
				}
			}
		}
		#Жор Пшека
		effect = {
			if = {
				limit = {
					has_global_flag = sov_yes_pact
					ROOT = { OR = { tag = SOV tag = GER } }
					FROM = { tag = POL }
					SOV = { is_ai = yes }
					GER = { is_ai = yes }
				}
				every_state = {
					limit = {
						owner = {
							OR = {
								tag = POL
								tag = GER
								is_subject_of = GER
								is_in_faction_with = GER
							}
						}
						OR = {
							state = 96
							state = 95
							state = 94
							state = 93
							state = 91
							state = 97
							state = 89
							state = 771
							state = 774
							state = 837
							state = 908
							state = 939
							state = 997
							state = 1023
							state = 1029
						}
					}
					SOV = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						owner = {
							OR = {
								tag = POL
								tag = SOV
								is_subject_of = SOV
								is_in_faction_with = SOV
							}
						}
						OR = {
							state = 98
							state = 10
							state = 899
							state = 92
							state = 88
							state = 988
							state = 90
							state = 937
							state = 768
							state = 72
							state = 86
							state = 85
							state = 798
						}
					}
					GER = { transfer_state = PREV }
				}
			}
		}
	} #ROOT is winner #FROM is loser
	
	
	#FROM is invited guest, ROOT is faction leader.
	on_offer_join_faction = {
		effect = {
			if = {
				limit = {
					OR = {
						original_tag = FRA
						original_tag = FRC
					}
					FROM = {
						has_idea = BEL_flemish_walloon_conflict 
					}
				}
				FROM = {
					country_event = { id = NWbelgium.6 days = 1 }
				}
			}
			
			if = {
				limit = {
					is_in_faction_with = VAT
					VAT = {
						has_idea = VAT_symbolum_nicaeum
					}
					FROM = {
						NOT = { has_idea = VAT_in_necessariis_unitas_1 }
						OR = {
							original_tag = ITA
							original_tag = FRA
							original_tag = POR
							original_tag = BEL
							original_tag = GER
							original_tag = LUX
							original_tag = HOL
							original_tag = IRE
							original_tag = AUS
							original_tag = HUN
							original_tag = CRO
							original_tag = SLV
							original_tag = POL
							original_tag = EST
							original_tag = LIT
							original_tag = LAT
							original_tag = CZE
							original_tag = SLO
							is_literally_spain = yes
						}
						is_left_ideology = no
					}
				}
				FROM = {
					add_ideas = VAT_in_necessariis_unitas_1
				}
			}
			if = {
				limit = {
					is_in_faction_with = VAT
					VAT = {
						has_idea = VAT_symbolum_nicaeum
					}
					FROM = {
						NOT = { has_idea = VAT_in_necessariis_unitas_2 }
						capital_scope = { is_on_continent = europe }
						NOT = {
							original_tag = ITA
							original_tag = FRA
							original_tag = POR
							original_tag = BEL
							original_tag = GER
							original_tag = LUX
							original_tag = HOL
							original_tag = IRE
							original_tag = AUS
							original_tag = HUN
							original_tag = CRO
							original_tag = SLV
							original_tag = POL
							original_tag = EST
							original_tag = LIT
							original_tag = LAT
							original_tag = CZE
							original_tag = SLO
							is_literally_spain = yes
						}
						is_left_ideology = no
					}
				}
				FROM = {
					add_ideas = VAT_in_necessariis_unitas_2
				}
			}
			if = {
				limit = {
					FROM = {
						NOT = { has_government = anarchism }
						any_allied_country = {
							has_government = anarchism
						}
					}
				}
				every_other_country = {
					limit = {
						has_government = anarchism
						is_in_faction_with = FROM
					}
					FROM = { remove_isolate_ai_strategy = yes }
				}
			}
			if = {
				limit = {
					FROM = { has_government = anarchism }
				}
				every_other_country = {
					limit = {
						NOT = { has_government = anarchism }
						is_in_faction_with = FROM
					}
					FROM = { PREV = { remove_isolate_ai_strategy = yes } }
				}
			}
		}	#FROM is invited guest, ROOT is faction leader.
	}
	
	
	#FROM is ex faction leader, ROOT is leaver
	on_leave_faction = {
		effect = {
			if = {
				limit = { NOT = { has_government = anarchism } }
				every_other_country = {
					limit = {
						has_government = anarchism
						is_in_faction_with = FROM
					}
					ROOT = { add_isolate_ai_strategy = yes }
				}
			
				else = {
					every_other_country = {
						limit = {
							NOT = { has_government = anarchism }
							is_in_faction_with = FROM
						}
						add_isolate_ai_strategy = yes
					}
				}
			}
		}
	}
	
	
	#FROM is faction leader on join faction requests. THIS DOES NOT FIRE ON ADD_TO_FACTION EFFECT! USE ON_OFFER_JOIN_FACTION!
	on_join_faction = {
		effect = {
			if = {
				limit = {
					FROM = {
						OR = {
							is_in_faction_with = VAT
							has_idea = VAT_symbolum_nicaeum
						}
					}
					VAT = {
						has_idea = VAT_symbolum_nicaeum
					}
				}
				every_country = {
					limit = {
						is_in_faction_with = VAT
						NOT = { has_idea = VAT_in_necessariis_unitas_1 }
						OR = {
							original_tag = ITA
							original_tag = FRA
							original_tag = POR
							original_tag = BEL
							original_tag = GER
							original_tag = LUX
							original_tag = HOL
							original_tag = IRE
							original_tag = AUS
							original_tag = HUN
							original_tag = CRO
							original_tag = SLV
							original_tag = POL
							original_tag = EST
							original_tag = LIT
							original_tag = LAT
							original_tag = CZE
							original_tag = SLO
							is_literally_spain = yes
						}
						is_left_ideology = no
					}
					add_ideas = VAT_in_necessariis_unitas_1
				}
			}
			if = {
				limit = {
					FROM = {
						OR = {
							is_in_faction_with = VAT
							has_idea = VAT_symbolum_nicaeum
						}
					}
					VAT = {
						has_idea = VAT_symbolum_nicaeum
					}
				}
				every_country = {
					limit = {
						is_in_faction_with = VAT
						NOT = { has_idea = VAT_in_necessariis_unitas_2 }
						capital_scope = { is_on_continent = europe }
						NOT = {
							original_tag = ITA
							original_tag = FRA
							original_tag = POR
							original_tag = BEL
							original_tag = GER
							original_tag = LUX
							original_tag = HOL
							original_tag = IRE
							original_tag = AUS
							original_tag = HUN
							original_tag = CRO
							original_tag = SLV
							original_tag = POL
							original_tag = EST
							original_tag = LIT
							original_tag = LAT
							original_tag = CZE
							original_tag = SLO
							is_literally_spain = yes
						}
						is_left_ideology = no
					}
					add_ideas = VAT_in_necessariis_unitas_2
				}
			}
		}
	}
	
	
	#ROOT is subject FROM is overlord
	on_subject_autonomy_level_change = {
		effect = {
			if = {
				limit = {
					tag = COG
					has_autonomy_state = autonomy_puppet
					FROM = { original_tag = BEL }
				}
				set_cosmetic_tag = COG_colony
			}
			if = {
				limit = {
					tag = COG
					has_autonomy_state = autonomy_dominion
					FROM = { original_tag = BEL }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = HRE_subject_cosmetic
					NOT = { is_subject_of = event_target:NW_hbbrg_scope }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					FROM = { has_cosmetic_tag = HRE_UNIFIED }
					ROOT = { NOT = { has_cosmetic_tag = HRE_subject_cosmetic } }
				}
				ROOT = { set_cosmetic_tag = HRE_subject_cosmetic }
			}
			if = {
				limit = {
					OR = {
						has_cosmetic_tag = HBBRG_use_subject
						has_cosmetic_tag = ADR_HBBRG_use_subject
						has_cosmetic_tag = ALB_HBBRG_use_subject
						has_cosmetic_tag = ARA_HBBRG_use_subject
						has_cosmetic_tag = AUS_HBBRG_use_subject
						has_cosmetic_tag = BEL_HBBRG_use_subject
						has_cosmetic_tag = BLR_HBBRG_use_subject
						has_cosmetic_tag = BOS_HBBRG_use_subject
						has_cosmetic_tag = BUL_HBBRG_use_subject
						has_cosmetic_tag = CAT_HBBRG_use_subject
						has_cosmetic_tag = CRI_HBBRG_use_subject
						has_cosmetic_tag = CRO_HBBRG_use_subject
						has_cosmetic_tag = CZE_HBBRG_use_subject
						has_cosmetic_tag = DEN_HBBRG_use_subject
						has_cosmetic_tag = DNZ_HBBRG_use_subject
						has_cosmetic_tag = ENG_HBBRG_use_subject
						has_cosmetic_tag = EST_HBBRG_use_subject
						has_cosmetic_tag = FIN_HBBRG_use_subject
						has_cosmetic_tag = FIU_HBBRG_use_subject
						has_cosmetic_tag = FRA_HBBRG_use_subject
						has_cosmetic_tag = GER_HBBRG_use_subject
						has_cosmetic_tag = GRE_HBBRG_use_subject
						has_cosmetic_tag = HOL_HBBRG_use_subject
						has_cosmetic_tag = HUN_HBBRG_use_subject
						has_cosmetic_tag = IRE_HBBRG_use_subject
						has_cosmetic_tag = ITA_HBBRG_use_subject
						has_cosmetic_tag = KOS_HBBRG_use_subject
						has_cosmetic_tag = LAT_HBBRG_use_subject
						has_cosmetic_tag = LIE_HBBRG_use_subject
						has_cosmetic_tag = LIT_HBBRG_use_subject
						has_cosmetic_tag = LUX_HBBRG_use_subject
						has_cosmetic_tag = MAC_HBBRG_use_subject
						has_cosmetic_tag = MNC_HBBRG_use_subject
						has_cosmetic_tag = MNT_HBBRG_use_subject
						has_cosmetic_tag = NOR_HBBRG_use_subject
						has_cosmetic_tag = POL_HBBRG_use_subject
						has_cosmetic_tag = POR_HBBRG_use_subject
						has_cosmetic_tag = PRE_HBBRG_use_subject
						has_cosmetic_tag = ROM_HBBRG_use_subject
						has_cosmetic_tag = SCO_HBBRG_use_subject
						has_cosmetic_tag = SER_HBBRG_use_subject
						has_cosmetic_tag = SLO_HBBRG_use_subject
						has_cosmetic_tag = SLV_HBBRG_use_subject
						has_cosmetic_tag = SMA_HBBRG_use_subject
						has_cosmetic_tag = SPR_HBBRG_use_subject
						has_cosmetic_tag = SWE_HBBRG_use_subject
						has_cosmetic_tag = SWI_HBBRG_use_subject
						has_cosmetic_tag = TUR_HBBRG_use_subject
						has_cosmetic_tag = UKR_HBBRG_use_subject
						has_cosmetic_tag = VAT_HBBRG_use_subject
						has_cosmetic_tag = VLA_HBBRG_use_subject
						has_cosmetic_tag = VNC_HBBRG_use_subject
						has_cosmetic_tag = VOJ_HBBRG_use_subject
						has_cosmetic_tag = WLS_HBBRG_use_subject
						has_cosmetic_tag = YUG_HBBRG_use_subject
						has_cosmetic_tag = ASU_HBBRG_use_subject
						has_cosmetic_tag = BRI_HBBRG_use_subject
						has_cosmetic_tag = ESS_HBBRG_use_subject
						has_cosmetic_tag = ICE_HBBRG_use_subject
					}
					NOT = { is_subject_of = event_target:NW_hbbrg_scope }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = {
					FROM = { has_cosmetic_tag = HBBRG_use_tag }
					ROOT = {
						NOT = {
							has_cosmetic_tag = HBBRG_use_subject
							has_cosmetic_tag = ADR_HBBRG_use_subject
							has_cosmetic_tag = ALB_HBBRG_use_subject
							has_cosmetic_tag = ARA_HBBRG_use_subject
							has_cosmetic_tag = AUS_HBBRG_use_subject
							has_cosmetic_tag = BEL_HBBRG_use_subject
							has_cosmetic_tag = BLR_HBBRG_use_subject
							has_cosmetic_tag = BOS_HBBRG_use_subject
							has_cosmetic_tag = BUL_HBBRG_use_subject
							has_cosmetic_tag = CAT_HBBRG_use_subject
							has_cosmetic_tag = CRI_HBBRG_use_subject
							has_cosmetic_tag = CRO_HBBRG_use_subject
							has_cosmetic_tag = CZE_HBBRG_use_subject
							has_cosmetic_tag = DEN_HBBRG_use_subject
							has_cosmetic_tag = DNZ_HBBRG_use_subject
							has_cosmetic_tag = ENG_HBBRG_use_subject
							has_cosmetic_tag = EST_HBBRG_use_subject
							has_cosmetic_tag = FIN_HBBRG_use_subject
							has_cosmetic_tag = FIU_HBBRG_use_subject
							has_cosmetic_tag = FRA_HBBRG_use_subject
							has_cosmetic_tag = GER_HBBRG_use_subject
							has_cosmetic_tag = GRE_HBBRG_use_subject
							has_cosmetic_tag = HOL_HBBRG_use_subject
							has_cosmetic_tag = HUN_HBBRG_use_subject
							has_cosmetic_tag = IRE_HBBRG_use_subject
							has_cosmetic_tag = ITA_HBBRG_use_subject
							has_cosmetic_tag = KOS_HBBRG_use_subject
							has_cosmetic_tag = LAT_HBBRG_use_subject
							has_cosmetic_tag = LIE_HBBRG_use_subject
							has_cosmetic_tag = LIT_HBBRG_use_subject
							has_cosmetic_tag = LUX_HBBRG_use_subject
							has_cosmetic_tag = MAC_HBBRG_use_subject
							has_cosmetic_tag = MNC_HBBRG_use_subject
							has_cosmetic_tag = MNT_HBBRG_use_subject
							has_cosmetic_tag = NOR_HBBRG_use_subject
							has_cosmetic_tag = POL_HBBRG_use_subject
							has_cosmetic_tag = POR_HBBRG_use_subject
							has_cosmetic_tag = PRE_HBBRG_use_subject
							has_cosmetic_tag = ROM_HBBRG_use_subject
							has_cosmetic_tag = SCO_HBBRG_use_subject
							has_cosmetic_tag = SER_HBBRG_use_subject
							has_cosmetic_tag = SLO_HBBRG_use_subject
							has_cosmetic_tag = SLV_HBBRG_use_subject
							has_cosmetic_tag = SMA_HBBRG_use_subject
							has_cosmetic_tag = SPR_HBBRG_use_subject
							has_cosmetic_tag = SWE_HBBRG_use_subject
							has_cosmetic_tag = SWI_HBBRG_use_subject
							has_cosmetic_tag = TUR_HBBRG_use_subject
							has_cosmetic_tag = UKR_HBBRG_use_subject
							has_cosmetic_tag = VAT_HBBRG_use_subject
							has_cosmetic_tag = VLA_HBBRG_use_subject
							has_cosmetic_tag = VNC_HBBRG_use_subject
							has_cosmetic_tag = VOJ_HBBRG_use_subject
							has_cosmetic_tag = WLS_HBBRG_use_subject
							has_cosmetic_tag = YUG_HBBRG_use_subject
							has_cosmetic_tag = ASU_HBBRG_use_subject
							has_cosmetic_tag = BRI_HBBRG_use_subject
							has_cosmetic_tag = ESS_HBBRG_use_subject
							has_cosmetic_tag = ICE_HBBRG_use_subject
						}
						capital_scope = { is_on_continent = europe }
					}
				}
				ROOT = {
					set_cosmetic_HBBRG_use_subject = yes
				}
			}
		}
	}
	
	#ROOT is winner #FROM gets annexed - This will also fire on_annex
	on_civil_war_end = {
		effect = {
			#HOL#
			if = {
				limit = {
					ROOT = {
						original_tag = HOL
						OR = {
							has_government = communism
							has_government = trozkism
						}
					}
					FROM = { NOT = { has_government = communism has_government = trozkism } }
				}
				country_event = { id = NW_HOL.35 days = 1 }
				if = {
					limit = { FROM = { has_subject = INS } }
					if = {
						limit = {
							OR = {
								has_dlc = "Together for Victory"
								has_dlc = "Man the Guns"
							}	
						}
						ROOT = { set_autonomy = { target = INS autonomous_state = autonomy_integrated_puppet } }
						else = { ROOT = { puppet = INS } }
					}
				}
			}
			#Антибританские протесты в Тегеране
			if = {
				limit = {
					original_tag = PER
					has_government = neutrality
					has_country_flag = PER_NWpersian_3a_flag
					FROM = {
						has_government = fascism
					}
				}
				country_event = { id = NWpersian.27 days = 14 }
			}
			if = {
				limit = {
					original_tag = PER
					country_exists = KHU
					NOT = { has_country_flag = arabistan_flag }
				}
				if = {
					limit = { KHU = { is_in_faction = yes } }
					KHU = { leave_faction = yes }
				}
				country_event = { id = NWpersian.67 days = 1 }
			}
			if = {
				limit = {
					original_tag = PER
				}
				if = {
					limit = {
						country_exists = QAS
						ROOT = { NOT = { has_war_with = QAS } }
						NOT = { has_country_flag = NWpersian_74_flag }
					}
					country_event = { id = NWpersian.74 hours = 6 }
				}
			}
			#Исламисты победили в Иранской гражданской войне
			if = {
				limit = {
					original_tag = PER
					has_government = fascism
				}
				news_event = { id = trworldnews.95 hours = 6 }
			}
			#Реформисты победили в Иранской гражданской войне
			if = {
				limit = {
					original_tag = PER
					NOT = { has_government = fascism }
					FROM = { has_government = fascism }
				}
				news_event = { id = trworldnews.96 hours = 6 }
			}
			#Свержение императора
			if = {
				limit = {
					original_tag = ETH
					has_government = anarchism
				}
				country_event = { id = NWethiopia.101 hours = 6 }
			}
			#Боеспособность армии // Либерия
			if = {
				limit = {
					original_tag = LIB
					has_government = fascism
				}
				country_event = { id = nw_liberia.21 hours = 3 }
			}
			#Панчей-лама занял место регента // TIB
			if = {
				limit = {
					original_tag = TIB
					has_completed_focus = TIB_chinese_army
					country_exists = CHI
					NOT = { has_global_flag = TIB_panchen_lama_died }
				}
				country_event = { id = tibet.61 }
			}
			#Комми в Сикане слились. Тибет идет в демократию
			if = {
				limit = {
					original_tag = XIK
					has_country_flag = TIB_communist_uprising_of_tibetans_flag
					NOT = { has_government = communism }
					TIB = { NOT = { has_completed_focus = TIB_request_support_from_kuomintang } }
				}
				TIB = { country_event = { id = tibet.580 hours = 3 } }
			}
			if = {
				limit = {
					original_tag = SAU
					has_completed_focus = SAU_bedouin_uprising
				}
				country_event = NWsaudi.26
				if = {
					limit = { is_ai = no }
					country_event = { id = NWsaudi.52 days = 10 }
				}
			}
		}
		
		### ALB
		effect = {
			#Камбетар победил, ивент
			if = {
				limit = {
					original_tag = ALB
					has_government = democratic
				}
				ALB = { country_event = { id = NWalbania.51 hours = 3 } }
				news_event = NWalbania.68
				delete_unit_template_and_units = {
					division_template = "Militia of Great Albania"
					disband = yes
				}
			}
			#Ходжа победил
			if = {
				limit = {
					original_tag = ALB
					has_government = communism
					has_country_leader_with_trait = paranoid
				}
				news_event = NWalbania.65
				delete_unit_template_and_units = {
					division_template = "Revolutionary militia of Albania"
					disband = yes
				}
			}
			#Дзодзе
			if = {
				limit = {
					original_tag = ALB
					has_government = communism
					has_country_leader_with_trait = head_of_the_punitive_apparatus
				}
				news_event = NWalbania.66
				delete_unit_template_and_units = {
					division_template = "Revolutionary militia of Albania"
					disband = yes
				}
			}
			if = {
				limit = {
					original_tag = ALB
					has_government = trozkism
				}
				news_event = NWalbania.67
				delete_unit_template_and_units = {
					division_template = "Revolutionary militia of Albania"
					disband = yes
				}
			}
			if = {
				limit = {
					original_tag = ALB
					has_government = neutrality
				}
				if = {
					limit = { country_exists = GRE }
					GRE = {
						every_controlled_state = {
							limit = {
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
							}
							set_demilitarized_zone = no
						}
					}
				}
				if = {
					limit = { country_exists = CRE }
					CRE = {
						every_controlled_state = {
							limit = {
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
							}
							set_demilitarized_zone = no
						}
					}
				}
				if = {
					limit = { country_exists = HEL }
					HEL = {
						every_controlled_state = {
							limit = {
								any_neighbor_state = {
									is_controlled_by = ROOT
								}
							}
							set_demilitarized_zone = no
						}
					}
				}
			}
		}
		
		### TUR
		effect = {
			if = {
				limit = {
					original_tag = TUR
					has_civil_war = no
					NOT = { has_war_with = KRD }
					has_template = "Turkish Militia"
				}
				delete_unit_template_and_units = {
					division_template = "Turkish Militia"
					disband = yes
				}
			}
		}
		
		### ROM
		effect = {
			if = {
				limit = {
					original_tag = ROM
					has_government = fascism
					has_country_leader = { character = ROM_horia_sima ruling_only = yes }
					has_global_flag = ROM_civil_war
				}
				country_event = { id = NWgermany.10 days = 1 }
			}
		}
		
		### SOV
		effect = {
			if = {
				limit = {
					original_tag = SOV
					NOT = { has_global_flag = SOV_soviet_civil_war_over }
				}
				set_global_flag = SOV_soviet_civil_war_over
			}
		}
		
		#ROOT is winner #FROM gets annexed - This will also fire on_annex
	}
	
	
#	on_monthly_FRF = {
#		effect = {
#			if = {
#				limit = {
#					has_game_rule = {
#						rule = trade_weapons
#						option = DEFAULT
#					}
#					check_variable = { global.total_infantry_weapons > 0 }
#					has_idea = FRF_use_global_market_idea
#				}
#				set_temp_variable = { inflation_rifles_for_fra = inflation_rifles }
#				divide_temp_variable = { inflation_rifles_for_fra = 10 }
#				round_temp_variable = inflation_rifles_for_fra
#				add_equipment_to_stockpile = {
#					type = infantry_equipment
#					amount = inflation_rifles_for_fra
#				}
#				log = "[GetDateText]: [This.GetName] ([This.GetTag]): ПОЛУЧИЛ ПЕХОТКИ С ЧЕРНОГО РЫНКА: [?inflation_rifles_for_fra]"
#			}
#		}
#	}

	#HOL#
	on_weekly_HOL = {
		effect = {
			if = {
				limit = {
					NOT = { has_country_flag = HOL_strike_flag_TOTAL }
					set_temp_variable = { temp1 = party_popularity@communism }
					set_temp_variable = { temp2 = party_popularity@trozkism }
					set_temp_variable = { temp3 = party_popularity@anarchism }
					add_to_temp_variable = { temp1 = temp2 }
					add_to_temp_variable = { temp1 = temp3 }
					check_variable = { temp1 > 0.49 }
				}
				country_event = { id = NW_HOL.26 }
			}
			if = {
				limit = {
					has_government = fascism
					has_completed_focus = HOL_national_priorities
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_united_nation }
						fascism > 0.99
					}
					add_ideas = HOL_united_nation
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_disciplined_nation }
						has_war_support > 0.99
					}
					add_ideas = HOL_disciplined_nation
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_cohesive_nation }
						num_divisions > 47
					}
					add_ideas = HOL_cohesive_nation
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_Great_Netherlands_idea }
						controls_state = 1037
						controls_state = 1038
						controls_state = 29
						controls_state = 1165
					}
					add_ideas = HOL_Great_Netherlands_idea
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_Ditland_idea }
						controls_state = 51
						controls_state = 42
						controls_state = 56
						controls_state = 801
					}
					add_ideas = HOL_Ditland_idea
				}
				if = {
					limit = {
						NOT = { has_idea = HOL_dutch_colonial_empire }
						controls_state = 357
						controls_state = 358
						controls_state = 359
						controls_state = 361
						controls_state = 694
						controls_state = 308
						controls_state = 1142
						controls_state = 692
						controls_state = 691
						controls_state = 916
						controls_state = 310
						controls_state = 918
						controls_state = 919
						controls_state = 687
						controls_state = 920
						controls_state = 274
						controls_state = 1093
						controls_state = 1092
						controls_state = 1094
						controls_state = 422
					}
					add_ideas = HOL_dutch_colonial_empire
				}
			}
		}
	}
	
	#AFG#
	on_weekly_AFG = {
		effect = {
			if = {
				limit = { has_idea = AFG_constitution_based_on_Pashtunvalai_idea }
				add_to_variable = { var = AFG_Pashtun_tension value = -2 }
				add_to_variable = { var = AFG_Tajiks_tension value = 2 }
				add_to_variable = { var = AFG_Hoz_tension value = 2 }
				AFG_Pashtun_tension_check_effect = yes
				AFG_Tajiks_tension_check_effect = yes
				AFG_Hoz_tension_check_effect = yes
			}
			else_if = {
				limit = { has_idea = AFG_constitution_based_on_Pashtunvalai_idea1 }
				add_to_variable = { var = AFG_Pashtun_tension value = -1 }
				add_to_variable = { var = AFG_Tajiks_tension value = 2 }
				AFG_Pashtun_tension_check_effect = yes
				AFG_Tajiks_tension_check_effect = yes
			}
			else_if = {
				limit = { has_idea = AFG_constitution_based_on_Pashtunvalai_idea2 }
				add_to_variable = { var = AFG_Pashtun_tension value = -1 }
				add_to_variable = { var = AFG_Hoz_tension value = 2 }
				AFG_Pashtun_tension_check_effect = yes
				AFG_Hoz_tension_check_effect = yes
			}
			if = {
				limit = { has_idea = AFG_promotion_of_Islamic_Education_idea }
				add_to_variable = { var = AFG_unity_var value = 2 }
				AFG_unity_var_check_effect = yes
			}
		}
	}
	
	#BRW#
	on_weekly_BRW = {
		effect = {
			if = {
				limit = { has_idea = BRW_The_King_sitting_on_an_anthill }
				add_to_variable = { BRW_rwanda_mwami_authority_total = -10 }
				check_loyalty_of_mwami = yes
			}
		}
	}
	
	on_weekly_OMA = {
		effect = {
			if = {
				limit = {
					has_dynamic_modifier = { modifier = OMA_pakistani_mercenaries_dyn }
				}
				if = {
					limit = {
						OR = {
							owns_state = 936
							controls_state = 936
						}
						936 = { infrastructure > 1 }
					}
					set_temp_variable = { temp1 = 936.building_level@infrastructure }
					add_to_temp_variable = { temp1 = -1 }
					multiply_temp_variable = { temp1 = 100 }
					set_variable = { OMA_pakistani_mercenaries_dyn_weekly_manpower = temp1 }
					force_update_dynamic_modifier = yes
				}
				else = { set_variable = { OMA_pakistani_mercenaries_dyn_weekly_manpower = 0 } }
				log = "[GetDateText]: [This.GetName] ([This.GetTag]): ЕЖЕНЕДЕЛЬНЫЙ ПРИРОСТ МЕНПАВЕРА ИЗ ПАКИСТАНА: [?OMA_pakistani_mercenaries_dyn_weekly_manpower]"
			}
		}
	}
	
	on_weekly_CYP = {
		effect = { #Изменение поддержки
			if = {
				limit = {
					check_variable = { modifier@weekly_greek_support > 0 }
				}
				add_to_variable = { greek_support_total = modifier@weekly_greek_support }
				subtract_from_variable = { turkish_support_total = modifier@weekly_greek_support }
				clamp_variable = { var = turkish_support_total min = 0 max = 100 }
				clamp_variable = { var = greek_support_total min = 0 max = 100 }
			}
			if = {
				limit = {
					check_variable = { modifier@weekly_turkish_support > 0 }
				}
				add_to_variable = { turkish_support_total = modifier@weekly_turkish_support }
				subtract_from_variable = { greek_support_total = modifier@weekly_turkish_support }
				clamp_variable = { var = turkish_support_total min = 0 max = 100 }
				clamp_variable = { var = greek_support_total min = 0 max = 100 }
			}
			set_variable = { weekly_greek_support_total = modifier@weekly_greek_support }
			subtract_from_variable = { weekly_greek_support_total = modifier@weekly_turkish_support }
			
			set_variable = { weekly_turkish_support_total = modifier@weekly_turkish_support }
			subtract_from_variable = { weekly_turkish_support_total = modifier@weekly_greek_support }
		}
	}
	
	on_weekly_SAU = {
		effect = {
			if = {
				limit = {
					check_variable = { opinion_with_tribes_var = 0 }
					is_subject = no
					has_government = monarchy
					NOT = { has_global_flag = sau_uprising }
				}
				country_event = NWsaudi.1
			}
			if = {
				limit = {
					check_variable = { opinion_with_ulema_var = 0 }
					is_subject = no
					has_government = monarchy
					NOT = { has_global_flag = sau_uprising }
				}
				country_event = NWsaudi.3
			}
			if = {
				limit = {
					has_variable = concession_owner
				}
				if = {
					limit = {
						any_enemy_country = {
							has_country_flag = concession_owner_flag
						}	
					}			
					country_event = NWsaudi.34
				}
			}
			if = {
				limit = {
					has_variable = rashidi_posralis_var
					check_variable = { opinion_with_tribes_var < 50 }
					check_variable = { rashidi_posralis_var < 3 }
					has_country_flag = rashidi_posralis
				}
				country_event = NWsaudi.61
			}
			if = {
				limit = {
					has_variable = rashidi_posralis_var
					check_variable = { opinion_with_tribes_var < 50 }
					check_variable = { rashidi_posralis_var > 2 }
					has_country_flag = rashidi_posralis
				}
				country_event = NWsaudi.62
			}
			if = {
				limit = {
					check_variable = { opinion_with_tribes_var = 0 }
					is_subject = no
					has_government = monarchy
					SAU_ruled_by_rashids = yes
					NOT = { has_global_flag = sau_saud_uprising }
				}
				country_event = NWsaudi.68
			}
		}
	}
	
	on_weekly_FIN = {
		effect = {
			if = {
				limit = {
					surrender_progress > 0.27
					has_war_with = SOV
				}
				country_event = NWzatyk.4
			}
		}
	}

	on_weekly_ALB = {
		effect = {
			## паранойя
			if = {
				limit = {
					OR = {
						has_idea = ALB_paranoia_of_secretary
						has_idea = ALB_paranoia_of_secretary_2
					}
				}
				add_to_variable = { 
					var = alb_paranoia_var
					value = 1
				}
			}
			if = {
				limit = {
					OR = {
						has_idea = ALB_paranoia_of_secretary_3
						has_idea = ALB_paranoia_of_secretary_4
					}
				}
				add_to_variable = { 
					var = alb_paranoia_var
					value = 2
				}
			}
		}
	}


	on_daily_KRD = {
		effect = {
			#KRD_colonization_neighboring_territories_kurds_category // Ежедневная численность населения в регионе
			if = {
				limit = {
					any_controlled_state = { check_variable = { state_manpower_coefficient_var > 0 } }
				}
				every_controlled_state = {
					limit = { check_variable = { state_manpower_coefficient_var > 0 } }
					add_manpower = var:state_manpower_var
				}
			}
			if = {
				limit = {
					has_variable = level_kurdish_westernization_var
				}
				add_to_variable = { level_kurdish_westernization_var = daily_level_kurdish_westernization_var }
				clamp_variable = { var = level_kurdish_westernization_var min = 0 max = 100 }
				if = {
					limit = {
						check_variable = { level_kurdish_westernization_var = 100 }
						NOT = { has_country_flag = kurdish_westernization_completed_flag }
					}
					set_country_flag = kurdish_westernization_completed_flag
					clear_variable = level_kurdish_westernization_var
				}
			}
		}
	}
	
	on_daily_SOV = {
		effect = {
			#Армянские спецслужбы // Решения PER
			if = {
				limit = { has_idea = PER_armenian_special_services }
				subtract_from_variable = { level_integration_south_azerbaijan = 0.01 }
			}
		}
	}
	
	on_daily_PER = {
		effect = {
			#PER_growth_of_suspicion_among_officers
			if = {
				limit = {
					has_idea = PER_growth_of_suspicion_among_officers
				}
				add_to_variable = { PER_army_tension_var = 0.1 }
				clamp_variable = { var = PER_army_tension_var min = 0 max = 100 }
			}
			#PER_dissatisfaction_due_decrease_in_salary
			if = {
				limit = {
					has_idea = PER_dissatisfaction_due_decrease_in_salary
				}
				add_to_variable = { PER_army_tension_var = 0.1 }
				clamp_variable = { var = PER_army_tension_var min = 0 max = 100 }
			}
			#ЧЕК 100% НАПРЯГИ ГЕНЕРАЛИТЕТА PER
			if = {
				limit = {
					tag = PER
					has_variable = PER_army_tension_var
					check_variable = { PER_army_tension_var = 100 }
					NOT = { has_country_flag = PER_army_tension_var_end_flag }
				}
				set_country_flag = PER_army_tension_var_end_flag
				country_event = { id = NWpersian.90 }
			}
			#PER_organize_an_uprising_in_tajikistan // PER
			if = {
				limit = {
					has_country_flag = PER_organize_an_uprising_in_tajikistan_flag
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -10
				}
			}
			#PER_organize_an_uprising_in_azerbaijan // PER
			if = {
				limit = {
					has_country_flag = PER_organize_an_uprising_in_azerbaijan_flag
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -10
				}
			}
		}
	}
	
	on_daily_BPL = {
		effect = {
			#СБРОС ПРИРОСТА НАПРЯГИ
			if = {
				limit = { has_variable = BPL_arab_tensions_total }
				set_variable = { BPL_arab_tensions_chance = modifier@arab_tensions_bonus }
			}
			if = {
				limit = { has_variable = BPL_jews_tensions_total }
				set_variable = { BPL_jews_tensions_chance = modifier@jews_tensions_bonus }
			}
			
			#Стремление к компромиссу // BPL
			if = {
				limit = {
					OR = {
						has_variable = BPL_arab_tensions_total
						has_variable = BPL_jews_tensions_total
					}
					has_idea = BPL_striving_for_compromise
				}
				if = {
					limit = {
						has_variable = BPL_arab_tensions_total
						check_variable = { BPL_arab_tensions_chance > 0 }
					}
					divide_variable = { BPL_arab_tensions_chance = 2 }
				}
				if = {
					limit = {
						has_variable = BPL_jews_tensions_total
						check_variable = { BPL_jews_tensions_chance > 0 }
					}
					divide_variable = { BPL_jews_tensions_chance = 2 }
				}
			}
			if = {
				limit = { has_variable = BPL_arab_tensions_total }
				add_to_variable = { BPL_arab_tensions_total = BPL_arab_tensions_chance }
				clamp_variable = { var = BPL_arab_tensions_total min = 0 max = 100 }
			}
			if = {
				limit = { has_variable = BPL_jews_tensions_total }
				add_to_variable = { BPL_jews_tensions_total = BPL_jews_tensions_chance }
				clamp_variable = { var = BPL_jews_tensions_total min = 0 max = 100 }
			}
			
			#BPL_legalize_arms_supplies_from_europe_idea // BPL
			if = {
				limit = {
					has_idea = BPL_legalize_arms_supplies_from_europe_idea
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2
				}
			}
		}
	}
	
	on_daily_TUR = {
		effect = {
			#TUR_send_kurds_from_region // Ежедневная численность населения в регионе: §R-300§!
			if = {
				limit = {
					any_owned_state = { has_state_flag = TUR_send_kurds_from_region_flag }
				}
				every_owned_state = {
					limit = { has_state_flag = TUR_send_kurds_from_region_flag }
					add_manpower = -300
				}
			}
			if = {
				limit = { #если другой тег ?
					is_in_array = { coalition_array = token:democratic }
					NOT = { has_country_leader = { ruling_only = yes character = TUR_mustafa_kemal_ataturk } }
				}
				remove_from_array = { coalition_array = token:democratic }
			}
			if = {
				limit = { #если другой тег ?
					is_in_array = { coalition_array = token:communism }
					NOT = { has_country_leader = { ruling_only = yes character = TUR_mustafa_kemal_ataturk } }
				}
				remove_from_array = { coalition_array = token:communism }
			}
			if = {
				limit = { #если другой тег ?
					is_in_array = { coalition_array = token:fascism }
					NOT = { has_country_leader = { ruling_only = yes character = TUR_mustafa_kemal_ataturk } }
				}
				remove_from_array = { coalition_array = token:fascism }
			}
			if = {
				limit = { #если другой тег ?
					is_in_array = { coalition_array = token:trozkism }
					NOT = { has_country_leader = { ruling_only = yes character = TUR_mustafa_kemal_ataturk } }
				}
				remove_from_array = { coalition_array = token:trozkism }
			}
			if = {
				limit = { #если другой тег ?
					is_in_array = { coalition_array = token:anarchism }
					NOT = { has_country_leader = { ruling_only = yes character = TUR_mustafa_kemal_ataturk } }
				}
				remove_from_array = { coalition_array = token:anarchism }
			}
		}
	}
	
	on_daily_SPR = {
		effect = {
			#Многоукладная экономика // Правый уклон SPR
			if = {
				limit = { has_variable = formation_of_multi_layered_economy_var }
				if = {
					limit = { check_variable = { formation_of_multi_layered_economy_var > 0 } }
					subtract_from_variable = { formation_of_multi_layered_economy_var = 1 }
				}
				else = {
				}
			}
		}
	}
	
	on_daily_SAU = {
		effect = {
			if = {
				limit = {
					has_tech = motorised_infantry
					has_idea = SAU_haji_husein_alireza
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 2
					producer = ROOT
				}
			}
		}
	}
	
	
	
	#ROOT is the nation being liberated, FROM is the leader of the liberators. 
	on_liberate = {
		effect = {
			ROOT = { country_event = { id = TRpolitical.106 } }
			if = {
				limit = {
					tag = KAS
					has_cosmetic_tag = KAS_SIK
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = KUM
					has_cosmetic_tag = KUM_SIK
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = DZH
					has_cosmetic_tag = DZH_SIK
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SYR
					has_cosmetic_tag = SYR_FRA
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = LEB
					has_cosmetic_tag = LEB_FR
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = SRL
					has_cosmetic_tag = SRL_ENG
					FROM = { original_tag = ENG }
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = BPL
					has_cosmetic_tag = BPL_ENG
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					tag = NFL
					has_cosmetic_tag = NFL_ENG
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = BPL_technat_subject
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = FIC_FRA
				}
				drop_cosmetic_tag = yes
			}
			if = {
				limit = {
					has_cosmetic_tag = CYP_UK
				}
				drop_cosmetic_tag = yes
			}
		}
	}
	
	# called when a country send volunteers to another
	# ROOT is sender, FROM is receiver
	on_send_volunteers = {
		effect = {
			#Чек FRF добровольцев в Испании
			if = {
				limit = {
					SPR_scw_in_progress = yes
					ROOT = {
						tag = FRF
						NOT = { has_country_flag = FRF_demand_balearic_islands_flag }
					}
					FROM = {
						OR = {
							tag = SPA
							tag = SPR
						}
					}
				}
				set_country_flag = FRF_demand_balearic_islands_flag
			}
			#Чек SOV добровольцев в Курдистане
			if = {
				limit = {
					KRD = { has_war_with = TUR }
					ROOT = {
						tag = SOV
						NOT = { has_country_flag = SOV_send_volunteers_kurds_flag }
					}
					FROM = { tag = KRD }
				}
				set_country_flag = SOV_send_volunteers_kurds_flag
			}
		}
	}
	
	#FROM is the nuked state. 
	on_nuke_drop = {
		#аннигиляция войск
		effect = {
			if = {
				limit = {
					NOT = {
						has_game_rule = {
							rule = nuclear_bomb_kill_army_status
							option = NUCLEAR_BOMB_KILL_ARMY_STATUS_OFF
						}
					}
				}
				every_country = { delete_unit = { state = FROM } }
				if = {
					limit = {
						has_game_rule = {
							rule = nuclear_bomb_kill_army_status
							option = NUCLEAR_BOMB_KILL_ARMY_STATUS_ON_HARD
						}
					}
					FROM = {
						every_neighbor_state = {
							every_country = { delete_unit = { state = PREV } }
						}
					}
				}
			}
		}
	}
	
	# scope is operative
	# FROM scope is the country 
	on_operative_created = {
		effect = {
			log = "[GetDateText]: ROOT: [Root.GetName] FROM: [From.GetName] on_operative_created"
			add_operative_nationalities = yes
		}
	}
	
	
	# FROM scope is the country // ROOT is unit leader
	on_unit_leader_created = {
		effect = {
			if = {
				limit = {
					FROM = { has_country_flag = guerrilla_war_flag }
				}
				add_unit_leader_trait = guerrilla_war_trait
			}
			if = {
				limit = {
					FROM = { has_country_flag = national_war_flag }
				}
				add_unit_leader_trait = national_war_trait
			}
		}
	}
	
	## Локоть
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					NOT = { country_exists = LKT }
					ROOT = { tag = GER has_government = fascism }
					FROM = { tag = SOV has_government = communism }
					FROM.FROM = { state = 1096 } 
				}
				ROOT = {
					country_event = { id = NWgermany.1999 days = 10 }
				}
			}
		}
	}
	on_capitulation_immediate = {
		effect = { 
			if = {
				limit = {
					country_exists = LKT
					NOT = { 1096 = { is_core_of = LKT } }
					ROOT = { tag = SOV }
				}
				1096 = { add_core_of = LKT }
				LKT = { remove_ideas = LKT_colonial_things }
			}
		}
	}
}