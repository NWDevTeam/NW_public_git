### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_TFV_AUTONOMY}


focus_tree = {
	id = nw_portugal_focus
	country = {
		factor = 0
		modifier = {
			add = 15
			tag = POR
		}
	}
	default = no
	
	continuous_focus_position = { x = 4200 y = 1350 } 
	
	initial_show_position = {
		focus = POR_strengthening_regime_pvde
		offset = {
			x = -39
			y = 0
			trigger = {
				has_completed_focus = POR_revolt_against_salazar_regime
			}
		}
		offset = {
			x = -15
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		offset = {
			x = -5
			y = 0
			trigger = {
				OR = {
					has_completed_focus = POR_restoration_of_monarchy
					has_completed_focus = POR_victory_of_portuguese_communist_party
					AND = {
						has_completed_focus = POR_maintain_neutrality_in_spanish_war
						has_completed_focus = POR_formation_of_popular_front
					}
				}
			}
		}
		offset = {
			x = -39
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
	}


###########################
##### FASCISM SECTION #####
###########################

	focus = {
		id = POR_revolt_against_salazar_regime
		icon = GFX_z_goal_revolt_against_salazar_regime
		
		mutually_exclusive = {
			focus = POR_formation_of_popular_front
			focus = POR_strengthening_regime_pvde
			focus = POR_murder_of_salazar
		}
		
		x = 7
		y = 0
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_murder_of_salazar
			}
		}
		available = {
			has_idea = POR_francisco_rolao_preto
			has_country_flag = POR_formation_of_popular_front_bad_flag
			fascism > 0.25
			NOT = {
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_murder_of_salazar
			}
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_revolt_against_salazar_regime"
			ENG = { remove_opinion_modifier = { target = POR modifier = POR_anglo_portuguese_alliance } }
			remove_opinion_modifier = { target = ENG modifier = POR_anglo_portuguese_alliance }
			custom_effect_tooltip = POR_revolt_against_salazar_regime_tt
			hidden_effect = {
				country_event = { id = NWportugal.670 days = 180 }
			}
			unlock_decision_category_tooltip = POR_between_god_and_the_anvil_category
			activate_mission = POR_workers_requirements
			activate_mission = POR_requirements_of_the_church
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_blue_shirts
		icon = GFX_z_goal_blue_shirts
		prerequisite = { focus = POR_revolt_against_salazar_regime }
		x = -4
		y = 1
		relative_position_id = POR_revolt_against_salazar_regime
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_blue_shirts"
			add_ideas = POR_blue_shirts
			hidden_effect = {
				division_template = {
					name = "Blueshirts"
					template_counter = 68
					is_locked = yes
					force_allow_recruiting = yes
					division_cap = 12
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Blueshirts\" division_template = \"Blueshirts\" start_experience_factor = 0.3"
					owner = PREV
					count = 4
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_creation_of_the_fascist_militia
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = POR_blue_shirts }
		x = -1
		y = 1
		relative_position_id = POR_blue_shirts
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creation_of_the_fascist_militia"
			swap_ideas = {
				remove_idea = POR_blue_shirts
				add_idea = POR_fascist_militia
			}
			add_units_to_division_template = {
				template_name = "Blueshirts"
				regiments = {
					militia = 2
					militia = 2
				}
				support = {
					engineer = 0
				}
			}
			set_division_template_cap = { division_template = "Blueshirts" division_cap = 18 }
		}
	}
	
	focus = {
		id = POR_national_defense_army
		icon = GFX_z_goal_POR_national_defense_army
		prerequisite = { focus = POR_creation_of_the_fascist_militia }
		x = 0
		y = 1
		relative_position_id = POR_creation_of_the_fascist_militia
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_national_defense_army"
			swap_ideas = {
				remove_idea = POR_fascist_militia
				add_idea = POR_national_defense_army
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_units_to_division_template = {
				template_name = "Blueshirts"
				regiments = {
					militia = 3
					militia = 3
				}
				support = {
					recon = 0
				}
			}
			set_division_template_cap = { division_template = "Blueshirts" division_cap = 24 }
		}
	}
	
	focus = {
		id = POR_cult_of_the_leader
		icon = GFX_z_goal_POR_cult_of_the_leader
		prerequisite = { focus = POR_blue_shirts }
		x = 0
		y = 3
		relative_position_id = POR_blue_shirts
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_cult_of_the_leader"
			add_political_power = 100
			POR_leader_trait_up_effect = yes
			custom_effect_tooltip = POR_cult_of_the_leader_tt
		}
	}
	
	focus = {
		id = POR_portuguese_scout_corps
		icon = GFX_z_goal_POR_portuguese_scout_corps
		prerequisite = { focus = POR_blue_shirts }
		x = 1
		y = 1
		relative_position_id = POR_blue_shirts
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_scout_corps"
			add_ideas = POR_portuguese_scout_corps
			custom_effect_tooltip = jaeger_forest_and_mountain_warfare_tt
			hidden_effect = { set_technology = { jaeger_forest_and_mountain_warfare = 1 popup = no } }
		}
	}
	
	focus = {
		id = POR_lusitanian_integralism
		icon = GFX_z_goal_lusitanian_integralism
		prerequisite = { focus = POR_revolt_against_salazar_regime }
		x = 0
		y = 1
		relative_position_id = POR_revolt_against_salazar_regime
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_lusitanian_integralism"
			add_ideas = POR_lusitanian_integralism
		}
	}
	
	focus = {
		id = POR_give_independence_corporations
		icon = GFX_z_goal_principles_of_corporatism
		prerequisite = { focus = POR_revolt_against_salazar_regime }
		x = -6
		y = 4
		relative_position_id = POR_revolt_against_salazar_regime
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_give_independence_corporations"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_duarte_jose_pacheco
			if = {
				limit = { has_idea = POR_workers_strikes_idea }
				remove_ideas = POR_workers_strikes_idea
			}
			if = {
				limit = { has_active_mission = POR_workers_requirements }
				hidden_effect = {
					remove_mission = POR_workers_requirements
					activate_mission = POR_workers_requirements
				}
				custom_effect_tooltip = POR_workers_requirements_mission_restart_tt
			}
			else = { activate_mission = POR_workers_requirements }
			
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_introduce_state_regulation
		icon = GFX_z_goal_POR_portuguese_scout_corps
		prerequisite = { focus = POR_give_independence_corporations }
		x = 0
		y = 1
		relative_position_id = POR_give_independence_corporations
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_introduce_state_regulation"
			add_ideas = POR_state_regulation_idea
			unlock_decision_category_tooltip = POR_regulation_of_the_economy_category
		}
	}
	
	focus = {
		id = POR_stimulating_industrial_growth
		icon = GFX_z_goal_industry_work
		prerequisite = { focus = POR_give_independence_corporations }
		x = 2
		y = 1
		relative_position_id = POR_give_independence_corporations
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_stimulating_industrial_growth"
			if = {
				limit = { has_idea = POR_workers_strikes_idea }
				remove_ideas = POR_workers_strikes_idea
			}
			if = {
				limit = { has_active_mission = POR_workers_requirements }
				hidden_effect = {
					remove_mission = POR_workers_requirements
					activate_mission = POR_workers_requirements
				}
				custom_effect_tooltip = POR_workers_requirements_mission_restart_tt
			}
			else = { activate_mission = POR_workers_requirements }
			add_timed_idea = { idea = POR_stimulating_industrial_growth days = 730 }
		}
	}
	
	focus = {
		id = POR_expanding_role_of_workers
		icon = GFX_focus_ITA_generic_fascist_workers
		prerequisite = { focus = POR_give_independence_corporations }
		x = 4
		y = 1
		relative_position_id = POR_give_independence_corporations
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expanding_role_of_workers"
			if = {
				limit = { has_idea = POR_workers_strikes_idea }
				remove_ideas = POR_workers_strikes_idea
			}
			if = {
				limit = { has_active_mission = POR_workers_requirements }
				hidden_effect = {
					remove_mission = POR_workers_requirements
					activate_mission = POR_workers_requirements
				}
				custom_effect_tooltip = POR_workers_requirements_mission_restart_tt
			}
			else = { activate_mission = POR_workers_requirements }
			if = {
				limit = { has_idea = POR_syndicalism_idea_2 }
				swap_ideas = {
					remove_idea = POR_syndicalism_idea_2
					add_idea = POR_syndicalism_idea_1_2
				}
			}
			else = { add_ideas = POR_syndicalism_idea_1 }
		}
	}
	
	focus = {
		id = POR_apply_the_principles_of_industrial_production
		icon = GFX_z_goal_principles_of_industrial_production
		prerequisite = { focus = POR_introduce_state_regulation }
		prerequisite = { focus = POR_stimulating_industrial_growth }
		x = 1
		y = 2
		relative_position_id = POR_introduce_state_regulation
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_apply_the_principles_of_industrial_production"
			add_ideas = POR_apply_the_principles_of_industrial_production_idea
		}
	}
	
	focus = {
		id = POR_society_of_small_owners
		icon = GFX_focus_DEN_no_regulations
		prerequisite = { focus = POR_apply_the_principles_of_industrial_production }
		x = 0
		y = 1
		relative_position_id = POR_apply_the_principles_of_industrial_production
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_society_of_small_owners"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_support_for_trade_unions
		icon = GFX_focus_ICE_state_corporatism
		prerequisite = { focus = POR_stimulating_industrial_growth }
		x = 0
		y = 1
		relative_position_id = POR_stimulating_industrial_growth
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_for_trade_unions"
			if = {
				limit = { has_idea = POR_workers_strikes_idea }
				remove_ideas = POR_workers_strikes_idea
			}
			if = {
				limit = { has_active_mission = POR_workers_requirements }
				hidden_effect = {
					remove_mission = POR_workers_requirements
					activate_mission = POR_workers_requirements
				}
				custom_effect_tooltip = POR_workers_requirements_mission_restart_tt
			}
			else = { activate_mission = POR_workers_requirements }
			if = {
				limit = { has_idea = POR_syndicalism_idea_1 }
				swap_ideas = {
					remove_idea = POR_syndicalism_idea_1
					add_idea = POR_syndicalism_idea_1_2
				}
			}
			else = { add_ideas = POR_syndicalism_idea_2 }
		}
	}
	
	focus = {
		id = POR_workers_courts
		icon = GFX_z_goal_involve_partisans_in_reconstruction_of_country
		prerequisite = { focus = POR_support_for_trade_unions }
		prerequisite = { focus = POR_expanding_role_of_workers }
		
		x = 1
		y = 1
		relative_position_id = POR_support_for_trade_unions
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_workers_courts"
			if = {
				limit = { has_idea = POR_workers_strikes_idea }
				remove_ideas = POR_workers_strikes_idea
			}
			swap_ideas = {
				remove_idea = POR_syndicalism_idea_1_2
				add_idea = POR_syndicalism_idea_2_2
			}
		}
	}
	
	focus = {
		id = POR_social_policy_for_workers
		icon = GFX_z_goal_red_socialization_of_all_means_of_production
		prerequisite = { focus = POR_expanding_role_of_workers }
		x = 0
		y = 1
		relative_position_id = POR_expanding_role_of_workers
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_apply_the_principles_of_industrial_production"
			add_ideas = POR_social_policy_idea
		}
	}
	
	
	
	focus = {
		id = POR_greater_portugal
		icon = GFX_z_goal_great_portugal
		prerequisite = { focus = POR_lusitanian_integralism }
		mutually_exclusive = { focus = POR_support_for_spanish_falangists }
		x = -1
		y = 1
		relative_position_id = POR_lusitanian_integralism
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 100
		}
		available = {
			SPR_scw_in_progress = yes
		}
		bypass = {
			has_global_flag = scw_over
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_greater_portugal"
			hidden_effect = {
				every_other_country = {
					limit = { is_literally_spain = yes }
					add_ai_strategy = {
						type = antagonize
						id = ROOT
						value = 100
					}
					add_ai_strategy = {
						type = conquer
						id = ROOT
						value = 100
					}
				}
			}
			transfer_state = 171
			set_cosmetic_tag = POR_great
			every_other_country = {
				limit = { OR = { original_tag = SPR original_tag = SPA } }
				country_event = NWportugal.70
			}
			custom_effect_tooltip = POR_greater_portugal_tt
		}
	}
	
	focus = {
		id = POR_recognize_second_official_language_of_galicia
		icon = GFX_z_goal_POR_recognize_second_official_language_of_galicia
		prerequisite = { focus = POR_greater_portugal }
		x = -2
		y = 1
		relative_position_id = POR_greater_portugal
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 100
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_recognize_second_official_language_of_galicia"
			add_state_core = 171
		}
	}
	
	focus = {
		id = POR_support_for_spanish_falangists
		icon = GFX_z_goal_support_for_spanish_falangists
		prerequisite = { focus = POR_lusitanian_integralism }
		mutually_exclusive = { focus = POR_greater_portugal }
		x = 1
		y = 1
		relative_position_id = POR_lusitanian_integralism
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 50
		}
		available = {
			SPR_scw_in_progress = yes
			OR = {
			    any_country_with_original_tag = {
				    original_tag_to_check = SPA
				    exists = yes
				    has_completed_focus = SPA_the_phalanx_ascendant
				}
		        country_exists = CAS
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_for_spanish_falangists"
			add_ideas = POR_support_for_spanish_falangists_idea
		}
	}
	
	focus = {
		id = POR_alliance_with_brazilian_integralists
		icon = GFX_z_goal_alliance_with_brazilian_integralists
		prerequisite = {
			focus = POR_greater_portugal
			focus = POR_support_for_spanish_falangists
		}
		mutually_exclusive = {
#			focus = POR_join_italy
			focus = POR_your_way
#			focus = POR_alliance_with_spanish_falange
		}
		x = 0
		y = 1
		relative_position_id = POR_greater_portugal
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 50
		}
		available = {
			is_subject = no
			BRA = {
				is_subject = no
				is_in_faction = no
				has_government = fascism
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = BRA
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_brazilian_integralists"
			set_rule = { can_create_factions = yes }
			create_faction = POR_portuguese_brazilian_integralist_union
			BRA = { country_event = generic.5 }
		}
	}
	
	focus = {
		id = POR_your_way
		icon = GFX_z_goal_portugalicia
		prerequisite = {
			focus = POR_greater_portugal
			focus = POR_support_for_spanish_falangists
		}
		mutually_exclusive = {
			focus = POR_alliance_with_brazilian_integralists
#			focus = POR_join_italy
#			focus = POR_alliance_with_spanish_falange
		}
		x = 2
		y = 1
		relative_position_id = POR_greater_portugal
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_your_way"
			set_rule = { can_create_factions = yes }
			create_faction = POR_latin_world
			every_other_country = {
				limit = {
					OR = {
						original_tag = SPR
						original_tag = SPA
						original_tag = FRA
						original_tag = FRC
						original_tag = FRR
						original_tag = ITA
						original_tag = GRE
						original_tag = HEL
						original_tag = CRE
					}
				}
				add_opinion_modifier = { target = ROOT modifier = POR_latin_community_op }
				ROOT = { add_opinion_modifier = { target = PREV modifier = POR_latin_community_op } }
			}
			unlock_decision_category_tooltip = POR_unification_of_the_latin_world_category
		}
	}
	
#	focus = {
#		id = POR_join_italy
#		icon = GFX_focus_befriend_italy
#		prerequisite = { focus = POR_support_for_spanish_falangists }
#		mutually_exclusive = {
#			focus = POR_alliance_with_brazilian_integralists
#			focus = POR_your_way
#			focus = POR_alliance_with_spanish_falange
#		}
#		x = 0
#		y = 1
#		relative_position_id = POR_support_for_spanish_falangists
#		
#		cost = 5
#		
#		cancel_if_invalid = no
#		continue_if_invalid = yes
#		available_if_capitulated = no

#		ai_will_do = {
#			factor = 50
#		}
#		available = {
#			is_in_faction = no
#			is_subject = no
#			country_exists = ITA
#			ITA = {
#				has_capitulated = no
#				is_faction_leader = yes
#				has_government = fascism
#				NOT = { has_war_with = ROOT }
#			}
#		}
#		bypass = {
#			is_in_faction_with = ITA
#		}
#		
#		completion_reward = {
#			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_join_italy"
#			ITA = { country_event = { id = generic.2 hours = 3 } }
#		}
#	}
	
#	focus = {
#		id = POR_alliance_with_spanish_falange
#		icon = GFX_z_goal_alliance_with_spanish_falange
#		prerequisite = {
#			focus = POR_greater_portugal
#			focus = POR_support_for_spanish_falangists
#		}
#		mutually_exclusive = {
#			focus = POR_alliance_with_brazilian_integralists
#			focus = POR_join_italy
#			focus = POR_your_way
#		}
#		x = 2
#		y = 1
#		relative_position_id = POR_support_for_spanish_falangists
#		
#		cost = 5
#		
#		cancel_if_invalid = no
#		continue_if_invalid = yes
#		available_if_capitulated = no

#		ai_will_do = {
#			factor = 50
#		}
#		available = {
#			is_subject = no
#			any_country_with_original_tag = {
#				original_tag_to_check = SPA
#				has_completed_focus = SPA_the_phalanx_ascendant
#				
#				is_subject = no
#				is_in_faction = no
#				NOT = { has_war_with = ROOT }
#			}
#		}
#		bypass = {
#			is_in_faction_with = SPF
#		}
#		
#		completion_reward = {
#			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_spanish_falange"
#			set_rule = { can_create_factions = yes }
#			create_faction = POR_portuguese_spanish_national_union
#			SPF = { country_event = generic.5 }
#		}
#	}
	
	focus = {
		id = POR_unite_iberia
		icon = GFX_focus_spa_strengthen_the_supreme_reality_of_spain
		prerequisite = {
			focus = POR_alliance_with_brazilian_integralists
#			focus = POR_join_italy
			focus = POR_your_way
		}
		x = 0
		y = 1
		relative_position_id = POR_alliance_with_brazilian_integralists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					SPR_scw_in_progress = yes
					41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio < 1 } } } }
				}
			}
			modifier = {
				add = 40
				41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio > 1 } } } }
				num_divisions > 80
			}
		}
		available = {
			is_subject = no
		}
		bypass = {
			all_of_scopes = {
				array = global.spain_cores
				tooltip = all_of_core_states_SPAIN_tt
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
						is_in_faction_with = ROOT
						has_war_with = ROOT
					}
				}
			}
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_unite_iberia"
			if = {
				limit = {
					any_of_scopes = {
						array = global.is_literally_spain
						is_literally_spain = yes
						exists = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
				every_other_country = {
					limit = {
						is_literally_spain = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
						ROOT = { NOT = { has_war_with_wargoal_against = { target = PREV } } }
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						hidden_effect = {
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
							add_ai_strategy = {
								type = declare_war
								id = PREV
								value = 100
							}
						}
					}
				}
			}
			else = {
				every_state = {
					limit = {
						is_in_array = { global.spain_cores = THIS }
						owner = {
							NOT = {
								tag = ROOT
								is_in_faction_with = ROOT
							}
						}
					}
					owner = {
						ROOT = {
							create_wargoal = {
								target = PREV
								type = annex_everything
								expire = 0
							}
							hidden_effect = {
								add_ai_strategy = {
									type = antagonize
									id = PREV
									value = 200
								}
								add_ai_strategy = {
									type = declare_war
									id = PREV
									value = 100
								}
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_return_brazil
		icon = GFX_focus_por_recover_brazil
		prerequisite = {
#			focus = POR_join_italy
			focus = POR_your_way
#			focus = POR_alliance_with_spanish_falange
		}
		x = 0
		y = 1
		relative_position_id = POR_your_way
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					naval_strength_ratio = { tag = BRA	ratio < 0.7 }
					num_divisions < 24
				}
			}
		}
		available = {
			is_subject = no
			BRA = {
				exists = yes
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			BRA = {
				OR = {
					exists = no
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_war_with = ROOT
				}
			}
		}
		
		will_lead_to_war_with = BRA
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_brazil"
			create_wargoal = {
				target = BRA
				type = annex_everything
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = BRA
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = BRA
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_elimination_of_the_communist_threat
		icon = GFX_z_goal_broken_red_star
		prerequisite = {
			focus = POR_unite_iberia
			focus = POR_return_brazil
		}
		x = 1
		y = 1
		relative_position_id = POR_unite_iberia
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_elimination_of_the_communist_threat"
			unlock_decision_category_tooltip = POR_preemptive_strike_against_the_communists_category
		}
	}
	
	focus = {
		id = POR_imperial_revival
		icon = GFX_z_goal_all_portugal
		prerequisite = {
			focus = POR_unite_iberia
			focus = POR_return_brazil
		}
		x = 3
		y = 1
		relative_position_id = POR_return_brazil
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_imperial_revival"
			unlock_decision_category_tooltip = POR_revival_of_the_portuguese_empire_category
		}
	}
	
	focus = {
		id = POR_give_church_central_importance
		icon = GFX_z_goal_give_church_central_importance
		prerequisite = { focus = POR_lusitanian_integralism }
		x = 3
		y = 1
		relative_position_id = POR_lusitanian_integralism
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_give_church_central_importance"
			if = {
				limit = { has_idea = POR_disagreement_of_church_idea }
				remove_ideas = POR_disagreement_of_church_idea
			}
			if = {
				limit = { has_active_mission = POR_requirements_of_the_church }
				hidden_effect = {
					remove_mission = POR_requirements_of_the_church
					activate_mission = POR_requirements_of_the_church
				}
				custom_effect_tooltip = POR_requirements_of_the_church_mission_restart_tt
			}
			else = { activate_mission = POR_requirements_of_the_church }
			POR_influence_of_church_in_central_importance = yes
			POR_influence_of_church_up = yes
			hidden_effect = {
				if = {
					limit = { NOT = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal } }
					random_other_country = {
						limit = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal }
						POR_joao_francisco_de_barbosa_azevedo_joao_ameal = { set_nationality = ROOT }
					}
				}
				if = {
					limit = { NOT = { has_character = POR_joao_de_azevedo_coutinho } }
					random_other_country = {
						limit = { has_character = POR_joao_de_azevedo_coutinho }
						POR_joao_de_azevedo_coutinho = { set_nationality = ROOT }
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_joao_francisco_de_barbosa_azevedo_joao_ameal
			show_ideas_tooltip = POR_joao_de_azevedo_coutinho
		}
	}
	
	focus = {
		id = POR_social_doctrine_of_church
		icon = GFX_z_goal_follow_to_social_doctrine_of_catholic_church
		prerequisite = { focus = POR_give_church_central_importance }
		x = 0
		y = 1
		relative_position_id = POR_give_church_central_importance
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_social_doctrine_of_church"
			add_war_support = 0.1
			if = {
				limit = { has_idea = POR_disagreement_of_church_idea }
				remove_ideas = POR_disagreement_of_church_idea
			}
			if = {
				limit = { has_active_mission = POR_requirements_of_the_church }
				hidden_effect = {
					remove_mission = POR_requirements_of_the_church
					activate_mission = POR_requirements_of_the_church
				}
				custom_effect_tooltip = POR_requirements_of_the_church_mission_restart_tt
			}
			else = { activate_mission = POR_requirements_of_the_church }
			POR_influence_of_church_up = yes
		}
	}
	

#######################################################
##### COMMUNISM / MONARCHISM / DEMOCRATIC SECTION #####
#######################################################

	focus = {
		id = POR_formation_of_popular_front
		icon = GFX_focus_focus_fra_revolution_utmost
		
		mutually_exclusive = {
			focus = POR_revolt_against_salazar_regime
			focus = POR_strengthening_regime_pvde
			focus = POR_murder_of_salazar
		}
		x = 16
		y = 0
		offset = {
			x = -11
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		offset = {
			x = -5
			y = 0
			trigger = {
				has_completed_focus = POR_restoration_of_monarchy
			}
		}
		offset = {
			x = -6
			y = 0
			trigger = {
				has_completed_focus = POR_victory_of_portuguese_communist_party
			}
		}
		offset = {
			x = -8
			y = 0
			trigger = {
				has_completed_focus = POR_maintain_neutrality_in_spanish_war
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		relative_position_id = POR_revolt_against_salazar_regime
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_murder_of_salazar
			}
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_formation_of_popular_front"
			activate_mission = POR_preparation_of_an_assassination_attempt_on_the_president
			custom_effect_tooltip = POR_formation_of_popular_front_tt
			mark_focus_tree_layout_dirty = yes
		}
	}


##############################
##### MONARCHISM SECTION #####
##############################

	focus = {
		id = POR_restoration_of_monarchy
		icon = GFX_z_goal_restoration_of_monarchy
		prerequisite = { focus = POR_formation_of_popular_front }
		mutually_exclusive = { focus = POR_victory_of_portuguese_communist_party }
		x = -6
		y = 1
		offset = {
			x = 6
			y = 0
			trigger = {
				has_completed_focus = POR_restoration_of_monarchy
			}
		}
		relative_position_id = POR_formation_of_popular_front
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_victory_of_portuguese_communist_party
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_murder_of_salazar
				has_completed_focus = POR_maintain_neutrality_in_spanish_war
			}
		}
		available = {
			has_country_flag = POR_carmona_is_killed_flag
			is_left_ideology = no
			NOT = { has_government = democratic }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_restoration_of_monarchy"
			add_timed_idea = { idea = POR_restoration_of_monarchy days = 365 }
			hidden_effect = {
				country_event = { id = NWportugal.72 hours = 3 }
				if = {
					limit = {
						has_global_flag = pcw_is_start
					}
					country_event = { id = NWportugal.73 days = 10 }
				}
			}
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_invite_duarte_to_throne
		icon = GFX_z_goal_invite_duarte_to_throne
		prerequisite = {
			focus = POR_lusitanian_integralism
			focus = POR_restoration_of_monarchy
		}
		x = -5
		y = 1
		relative_position_id = POR_restoration_of_monarchy
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				has_civil_war = yes
				has_country_leader = { character = POR_henrique_de_paiva_couceiro ruling_only = yes }
			}
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invite_duarte_to_throne"
			if = {
				limit = { has_idea = POR_refusal_of_assistance_among_monarchists_idea }
				remove_ideas = POR_refusal_of_assistance_among_monarchists_idea
			}
			if = {
				limit = { has_government = fascism }
				add_ideas = POR_ideas_duarte_idea
				custom_effect_tooltip = POR_invite_duarte_to_throne_fascism_tt
				country_event = { id = NWportugal.97 hours = 3 }
				add_to_array = { coalition_array = token:monarchy }
				custom_effect_tooltip = add_mon_in_coalition
			}
			if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				add_popularity = { ideology = monarchy popularity = 0.2 }
			}
			add_country_leader_role = {
				character = POR_duarte_nuno
				country_leader = {
					desc = "POLITICS_DUARTE_NUNO_DESC"
					expire = "1965.1.1"
					ideology = absolute_monarchy
					traits = {
						heir_to_the_miguelist_line
					}
				}
				promote_leader = yes
			}
			if = {
				limit = { has_government = monarchy }
				custom_effect_tooltip = POR_invite_duarte_to_throne_monarchy_tt
				set_variable = { POR_legitimacy_of_crown_var = 30 }
				POR_legitimacy_of_crown_icon_frame_set_effect = yes
			}
		}
	}
	
	focus = {
		id = POR_appoint_kings_advisors
		icon = GFX_z_goal_POR_appoint_kings_advisors
		prerequisite = { focus = POR_restoration_of_monarchy }
		x = -3
		y = 1
		relative_position_id = POR_restoration_of_monarchy
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_completed_focus = POR_invite_duarte_to_throne }
			}
		}
		available = {
			has_country_leader = { character = POR_duarte_nuno ruling_only = yes }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_appoint_kings_advisors"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_antonio_de_oliveira_salazar
			show_ideas_tooltip = POR_henrique_de_paiva_couceiro
#			show_ideas_tooltip = POR_francisco_rolao_preto
			POR_francisco_rolao_preto = {
				remove_trait = { slot = political_advisor trait = promoter_of_integralism }
				add_trait = { slot = political_advisor trait = right_trade_unionist }
				set_character_flag = available_as_advisor_role
			}
			if = {
				limit = {  has_completed_focus = POR_invite_duarte_to_throne }
				add_to_variable = { POR_legitimacy_of_crown_var = 5 tooltip = POR_legitimacy_of_crown_tt }
				POR_legitimacy_of_crown_check_effect = yes
			}
		}
	}
	
	focus = {
		id = POR_restore_noble_titles
		icon = GFX_z_goal_POR_restore_noble_titles_2
		prerequisite = { focus = POR_restoration_of_monarchy }
		x = -1
		y = 1
		relative_position_id = POR_restoration_of_monarchy
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_restore_noble_titles"
			add_political_power = 100
			hidden_effect = {
				if = {
					limit = { NOT = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal } }
					random_other_country = {
						limit = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal }
						POR_joao_francisco_de_barbosa_azevedo_joao_ameal = { set_nationality = ROOT }
					}
				}
				if = {
					limit = { NOT = { has_character = POR_joao_de_azevedo_coutinho } }
					random_other_country = {
						limit = { has_character = POR_joao_de_azevedo_coutinho }
						POR_joao_de_azevedo_coutinho = { set_nationality = ROOT }
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_joao_francisco_de_barbosa_azevedo_joao_ameal
			show_ideas_tooltip = POR_joao_de_azevedo_coutinho
			custom_effect_tooltip = POR_restore_noble_titles_tt
			if = {
				limit = { has_character = POR_henrique_de_paiva_couceiro }
				POR_henrique_de_paiva_couceiro = { add_unit_leader_trait = trait_graf }
			}
			if = {
				limit = { check_variable = { POR_legitimacy_of_crown_var > 79.99 } NOT = { has_country_flag = trait_flag } }
				set_country_flag = trait_flag
				if = {
					limit = { has_character = POR_joao_de_almeida }
					POR_joao_de_almeida = { add_unit_leader_trait = trait_graf }
				}
				if = {
					limit = { has_character = POR_tomas_da_camara }
					POR_tomas_da_camara = { add_unit_leader_trait = trait_marques }
				}
				if = {
					limit = { has_character = POR_jose_maria_do_espirito_santo_de_almeida_correia }
					POR_jose_maria_do_espirito_santo_de_almeida_correia = { add_unit_leader_trait = trait_marques }
				}
			}
		}
	}
	
	focus = {
		id = POR_merge_both_branches_of_braganza
		icon = GFX_focus_generic_royal_wedding
		prerequisite = { focus = POR_invite_duarte_to_throne }
		prerequisite = { focus = POR_restore_noble_titles }
		x = -2
		y = 1
		relative_position_id = POR_restore_noble_titles
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			has_country_leader = { character = POR_maria_pia_de_braganca ruling_only = yes }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_merge_both_branches_of_braganza"
			country_event = NWportugal.74
			hidden_effect = {
				news_event = { id = trworldnews.191 hours = 6 }
				country_event = { id = NWportugal.87 days = 1095 }
			}
		}
	}
	
	focus = {
		id = POR_church_is_spiritual_partner_of_crown
		icon = GFX_z_goal_church_is_spiritual_partner_of_crown
		prerequisite = { focus = POR_invite_duarte_to_throne }
		prerequisite = { focus = POR_restore_noble_titles }
		x = 0
		y = 1
		relative_position_id = POR_invite_duarte_to_throne
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_church_is_spiritual_partner_of_crown"
			POR_influence_of_church_partner_of_crown = yes
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_catholic_university_of_portugal
		icon = GFX_z_goal_catholic_university
		prerequisite = {
			focus = POR_social_doctrine_of_church
			focus = POR_church_is_spiritual_partner_of_crown
		}
		x = 1
		y = 1
		offset = {
			x = -1
			y = 0
			trigger = {
				has_completed_focus = POR_revolt_against_salazar_regime
			}
		}
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		offset = {
			x = 1
			y = 0
			trigger = {
				has_completed_focus = POR_restoration_of_monarchy
			}
		}
		relative_position_id = POR_social_doctrine_of_church
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_catholic_university_of_portugal"
			if = {
				limit = { has_idea = POR_disagreement_of_church_idea }
				remove_ideas = POR_disagreement_of_church_idea
			}
			add_ideas = POR_catholic_university_of_portugal
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_support_for_brazilian_monarchists
		icon = GFX_focus_por_reclaim_crown_jewel
		prerequisite = { focus = POR_merge_both_branches_of_braganza }
		x = 0
		y = 1
		relative_position_id = POR_merge_both_branches_of_braganza
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			NOT = { country_exists = BRA }
			BRA = { has_capitulated = yes }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_for_brazilian_monarchists"
			BRA = {
				country_event = lar_portugal_promote_monarchist_cause.7
				hidden_effect = {
					add_timed_idea = { idea = POR_monarchists_on_the_rise days = 730 }
					set_party_name = {
					    ideology = fascism
					    long_name = BRA_antimonarchist_coalition_long
					    name = BRA_antimonarchist_coalition
					}
					if = {
						limit = {
							OR = {
								has_government = monarchy
								has_government = neutrality
								has_government = democratic
								has_government = communism
							} 
						}
						set_politics = {
							ruling_party = fascism
						}
					}
					set_popularities = {
						democratic = 0
						monarchy = 20
						fascism = 80
						communism = 0
					}
					hidden_effect = {
						retire_country_leader = yes
					}

					BRA_getulio_vargas = {
						remove_country_leader_role = {
							ideology = despotism
						}
						add_country_leader_role = {
							country_leader = {
								expire = "1954.8.24"
								ideology = integralism_ideology
								traits = {
									anti_communist
								}
							}
							promote_leader = yes
						}
					}
					promote_character = BRA_arlindo_veiga_dos_santos
				}
			}
		}
	}
	
	focus = {
		id = POR_introduction_of_brazilian_industry
		icon = GFX_z_goal_introduction_of_brazilian_industry
		prerequisite = { focus = POR_support_for_brazilian_monarchists }
		x = 0
		y = 1
		relative_position_id = POR_support_for_brazilian_monarchists
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_completed_focus = POR_unification_of_kingdoms
			BRA = { has_civil_war = no NOT = { has_war_with = ROOT } }
			OR = {
				BRA = {
					OR = {
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
				}
				all_of_scopes = {
					array = BRA.core_states
					tooltip = all_of_core_states_BRA_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_introduction_of_brazilian_industry"
			random_owned_controlled_state = {
				limit = {
					is_core_of = BRA
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_core_of = BRA }
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_association_of_metallurgical_industries
		icon = GFX_z_goal_association_of_metallurgical_industries
		prerequisite = { focus = POR_introduction_of_brazilian_industry }
		x = 0
		y = 1
		offset = {
			x = -1
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		relative_position_id = POR_introduction_of_brazilian_industry
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_association_of_metallurgical_industries"
			random_owned_controlled_state = {
				limit = {
					is_core_of = BRA
				}
				add_resource = {
					type = steel
					amount = 20
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { is_core_of = BRA }
				}
				add_resource = {
					type = tungsten
					amount = 20
				}
			}
		}
	}
	
	focus = {
		id = POR_continue_exporting_brazilian_coffee_and_sugar
		icon = GFX_z_goal_continue_exporting_brazilian_coffee_and_sugar
		prerequisite = { focus = POR_introduction_of_brazilian_industry }
		x = 2
		y = 1
		offset = {
			x = -1
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		relative_position_id = POR_introduction_of_brazilian_industry
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_exporting_brazilian_coffee_and_sugar"
			add_ideas = POR_continue_exporting_brazilian_coffee_and_sugar_idea
		}
	}
	
	focus = {
		id = POR_unification_of_kingdoms
		icon = GFX_focus_por_the_kingdom_reunited
		prerequisite = { focus = POR_support_for_brazilian_monarchists }
		x = 2
		y = 1
		relative_position_id = POR_support_for_brazilian_monarchists
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					naval_strength_ratio = { tag = BRA	ratio < 0.7 }
					num_divisions < 24
				}
			}
		}
		available = {
			is_subject = no
		}
		bypass = {
			NOT = { country_exists = BRA }
			BRA = { has_capitulated = yes }	
		}
		select_effect = {
			if = {
				limit = {
					has_war = no
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = BRA
					value = 100
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_unification_of_kingdoms"
			if = {
				limit = {
					BRA = {
						OR = {
							has_country_flag = POR_brazil_supports_fascist_coalition_flag
							AND = {
								NOT = { has_government = monarchy }
								OR = {
									has_stability < 0.5
									monarchy < 0.7
								}
							}
						}
					}
				}
				BRA = { country_event = lar_portugal_promote_monarchist_cause.3 }
			}
			else = {
				BRA = { country_event = lar_portugal_promote_monarchist_cause.4 }
			}
			custom_effect_tooltip = POR_unification_of_kingdoms_potential_civil_war_tt

			hidden_effect = {
				every_country = {
					limit = {
						original_tag = BRA
						has_government = monarchy
					}
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
					ROOT = {
						add_ai_strategy = {
							type = befriend
							id = PREV
							value = 100
						}
					}
				}
			}
			unlock_decision_tooltip = POR_unification_of_kingdoms_dec
		}
	}
	
	focus = {
		id = POR_royal_scouts
		icon = GFX_z_goal_POR_royal_scouts
		prerequisite = { focus = POR_invite_duarte_to_throne }
		prerequisite = { focus = POR_restore_noble_titles }
		x = 0
		y = 1
		relative_position_id = POR_restore_noble_titles
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_royal_scouts"
			add_ideas = POR_royal_scouts
		}
	}
	
	focus = {
		id = POR_creation_of_royal_guard
		icon = GFX_z_goal_POR_creation_of_royal_guard
		prerequisite = { focus = POR_royal_scouts }
		x = 0
		y = 1
		relative_position_id = POR_royal_scouts
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creation_of_royal_guard"
			hidden_effect = {
				if = {
					limit = { NOT = { has_template = "Royal Guard" } }
					division_template = {
						name = "Royal Guard"
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
						}
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Royal Guard\" division_template = \"Royal Guard\" start_experience_factor = 1.0"
					owner = PREV
					count = 2
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_refuse_the_naval_blockade
		icon = GFX_z_goal_ENG_refuse_the_naval_blockade
		prerequisite = { focus = POR_restoration_of_monarchy }
		x = 1
		y = 1
		relative_position_id = POR_restoration_of_monarchy
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_equipment = {
			  convoy > 150
			}
			ENG = { has_war = yes }
			NOT = {
				is_in_faction_with = ENG
			}
		}
		bypass = {	
			ENG = {
				OR = {	
					exists = no
					has_capitulated = yes
					has_war_with = ROOT
				}
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_refuse_the_naval_blockade"
			every_other_country = {
				limit = {
					has_war_with = ENG
				}
				country_event = { 
					id = lar_portugal_naval_blockade.1
				}
			}
			ENG = {
				country_event = { 
					id = lar_portugal_naval_blockade.3
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_anglo_portuguese_alliance
				}
			}
			remove_opinion_modifier = {
				target = ENG
				modifier = POR_anglo_portuguese_alliance
			}	
		}
	}
	
	focus = {
		id = POR_sea_empire
		icon = GFX_z_goal_sea_empire
		prerequisite = { focus = POR_refuse_the_naval_blockade }
		x = 0
		y = 1
		relative_position_id = POR_refuse_the_naval_blockade
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_sea_empire"
			add_ideas = POR_revival_of_the_maritime_empire_idea
			add_doctrine_cost_reduction = {
				name = POR_sea_empire
				cost_reduction = 0.9
				uses = 1
				category = naval_doctrine
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			add_ai_strategy = {
                type = building_target
                id = dockyard
                value = 15
            }
		}
	}
	
	focus = {
		id = POR_restoration_of_royal_armada
		icon = GFX_z_goal_restoration_of_royal_armada
		prerequisite = { focus = POR_sea_empire }
		x = 0
		y = 1
		relative_position_id = POR_sea_empire
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_restoration_of_royal_armada"
			navy_experience = 10
			add_tech_bonus = {
				name = POR_restoration_of_royal_armada
			    bonus = 1.0
			    uses = 2
			    category = naval_equipment
			}
			swap_ideas = {
				remove_idea = POR_revival_of_the_maritime_empire_idea
				add_idea = POR_revival_of_the_maritime_empire_idea_2
			}
		}
	}
	
	focus = {
		id = POR_empire_over_which_the_sun_will_set
		icon = GFX_z_goal_ENG_empire_over_which_the_sun_will_set
		prerequisite = { focus = POR_restoration_of_royal_armada }
		x = 0
		y = 1
		relative_position_id = POR_restoration_of_royal_armada
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				NOT = { has_completed_focus = POR_the_fifth_empire }
			}
			modifier = {
				factor = 0.1
				OR = {
					naval_strength_ratio = { tag = ENG	ratio < 0.7 }
					num_divisions < 42
				}
			}
		}
		available = {
			is_subject = no
			ENG = {
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = ENG
		}
		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = ENG
				value = 100
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_empire_over_which_the_sun_will_set"
			if = {
				limit = { is_in_faction_with = ENG }
				leave_faction = yes
				add_ai_strategy = {
					type = alliance
					id = ENG
					value = -600
				}
			}
			create_wargoal = {
				target = ENG
				type = puppet_wargoal_focus
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = ENG
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = ENG
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_support_a_spanish_monarchy_in_the_war
		icon = GFX_focus_spa_supremacy_of_the_communion
		prerequisite = { focus = POR_restoration_of_monarchy }
		x = 4
		y = 1
		relative_position_id = POR_restoration_of_monarchy
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SPR_scw_in_progress = yes
			country_exists = SPB
			NOT = { has_war_with = SPB }
		}
		bypass = {
			has_global_flag = scw_over
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_a_spanish_monarchy_in_the_war"
			SPB = {
				add_opinion_modifier = { target = ROOT modifier = POR_helped_in_civil_war }
				add_manpower = 10000
			}			
			add_ideas = POR_volunteers_in_the_war_carlist
			add_manpower = -10000
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
				}
			}
			send_equipment = {
			    equipment = infantry_equipment
			    amount = 2000
			    target = SPB
			}
			set_rule = { can_send_volunteers = yes }
		}
	}
	
	focus = {
		id = POR_assist_the_requetes
		icon = GFX_focus_spa_no_compromise_on_carlist_ideals
		prerequisite = { focus = POR_support_a_spanish_monarchy_in_the_war }
		x = 0
		y = 1
		relative_position_id = POR_support_a_spanish_monarchy_in_the_war
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SPR_scw_in_progress = yes
			country_exists = SPB
			NOT = { has_war_with = SPB }	
		}
		bypass = {
			has_global_flag = scw_over
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_assist_the_requetes"
			add_tech_bonus = {
				name = POR_assist_the_requetes
			    bonus = 1.0
			    uses = 1
			    category = mountaineers_tech
			}
			add_doctrine_cost_reduction = {
				name = POR_assist_the_requetes
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
			add_doctrine_cost_reduction = {
				name = POR_assist_the_requetes
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			army_experience = 15
			air_experience = 15
			
			SPB = {
				add_tech_bonus = {
					name = POR_assist_the_requetes
					bonus = 1.0
					uses = 1
					category = mountaineers_tech
				}
				add_doctrine_cost_reduction = {
					name = POR_assist_the_requetes
					cost_reduction = 0.5
					uses = 1
					category = air_doctrine
				}
				add_doctrine_cost_reduction = {
					name = POR_assist_the_requetes
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
				army_experience = 15
				air_experience = 15
				hidden_effect = {
					if = {
						limit = { NOT = { has_template = "Portuguese Volunteers" } }
						division_template = {
							name = "Portuguese Volunteers"
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
							}
						}
					}
				}
				capital_scope = {
					create_unit = {
						division = "name = \"Portuguese Volunteers\" division_template = \"Portuguese Volunteers\" start_experience_factor = 0.1"
						owner = PREV
						count = 3
						allow_spawning_on_enemy_provs = yes
					}
				}
			}

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPB
					value = 100
				}
				SPB = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_remember_olivenca
		icon = GFX_focus_por_remember_olivenca
		prerequisite = { focus = POR_assist_the_requetes }
		mutually_exclusive = { focus = POR_the_royal_iberian_alliance }
		x = -1
		y = 1
		relative_position_id = POR_assist_the_requetes
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 10
				has_opinion = { target = SPB value < 0 }
			}
			modifier = {
				factor = 2
				has_government = monarchy
				SPB = { NOT = { has_government = monarchy } }
			}
			modifier = {
				factor = 0.1
				OR = {
					SPR_scw_in_progress = yes
					41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio < 1 } } } }
				}
			}
			modifier = {
				add = 40
				SPB = { NOT = { has_government = monarchy } }
				41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio > 1 } } } }
				num_divisions > 80
			}
		}
		available = {
		}
		bypass = {
			owns_state = 170
			owns_state = 169
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_remember_olivenca"
			add_state_claim = 170
			add_state_claim = 169
			hidden_effect = {
				170 = {
					controller = {
						ROOT = {
							add_ai_strategy = {
								type = prepare_for_war
								id = PREV
								value = 100
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_united_iberian_kingdom
		icon = GFX_focus_generic_free_iberia
		prerequisite = { focus = POR_remember_olivenca }
		x = 0
		y = 1
		relative_position_id = POR_remember_olivenca
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 100
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = form_spqr_spain_required_states_tt
				all_of_scopes = {
					array = global.spain_cores
					is_controlled_by = ROOT
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_united_iberian_kingdom"
			set_global_flag = form_iberia_flag
			custom_effect_tooltip = form_country_spain_coring_states_tt
			every_state = {
				limit = {
					is_in_array = { global.spain_cores = THIS }
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			if = {
				limit = { has_completed_focus = POR_unification_of_kingdoms }
				set_cosmetic_tag = IBR_BRA_UNIFIED
			}
			else = {
				set_cosmetic_tag = IBR_UNIFIED
			}
			add_to_variable = { POR_legitimacy_of_crown_var = 10 tooltip = POR_legitimacy_of_crown_tt }
			POR_legitimacy_of_crown_check_effect = yes
		}
	}
	
	focus = {
		id = POR_the_fifth_empire
		icon = GFX_focus_por_the_fifth_empire
		prerequisite = { focus = POR_unification_of_kingdoms }
		prerequisite = { focus = POR_united_iberian_kingdom }
		x = -1
		y = 1
		relative_position_id = POR_united_iberian_kingdom
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 100
		}
		available = {
			has_government = monarchy
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_the_fifth_empire"
			add_ideas = POR_the_fifth_empire
			if = {
				limit = { has_idea = POR_unstable_republic }
				remove_ideas = POR_unstable_republic
			}
			if = {
				limit = { is_in_faction = yes }
				leave_faction = yes
			}
			set_rule = { can_create_factions = yes }
			set_rule = { can_join_factions = no }
			every_other_country = {
				limit = {
					NOT = { is_puppet_of = ROOT }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_the_fifth_empire_has_threatening_ambitions
				}
			}
			set_cosmetic_tag = POR_empire
		}
	}
	
	focus = {
		id = POR_the_royal_iberian_alliance
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		prerequisite = { focus = POR_assist_the_requetes }
		mutually_exclusive = { focus = POR_remember_olivenca }
		x = 1
		y = 1
		relative_position_id = POR_assist_the_requetes
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 10
				has_idea = POR_volunteers_in_the_war_carlist
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = SPB
					value > 30
				}
			}
		}
		available = {
			is_in_faction = no
			has_government = monarchy
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				has_global_flag = scw_over
			}
			country_exists = SPB
			NOT = { has_war_with = SPB }
			SPB = { has_government = monarchy }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_the_royal_iberian_alliance"
			SPB = { 
				country_event = { id = lar_portugal_royal_iberian_alliance.1 hours = 6 }
			}
			custom_effect_tooltip = if_they_accept_tt
			create_faction = POR_royal_iberian_alliance
			if = {
				limit = { SPR_scw_in_progress = yes }
				unlock_decision_tooltip = POR_fight_alongside_the_carlists
				if = { 
					limit = { country_exists = SPA }
					SPA = {
						country_event = { id = lar_portugal_spanish_civil_war.3 }
					}
				}
				if = { 
					limit = { country_exists = SPD }
					SPD = {
						country_event = { id = lar_portugal_spanish_civil_war.3 }
					}
				}
				if = { 
					limit = { country_exists = SPC }
					SPC = {
						country_event = { id = lar_portugal_spanish_civil_war.3 }
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_iberian_science_group
		icon = GFX_goal_tfv_generic_tech_sharing
		prerequisite = { focus = POR_the_royal_iberian_alliance }
		x = 0
		y = 1
		relative_position_id = POR_the_royal_iberian_alliance
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = yes
			num_faction_members > 1
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_iberian_science_group"
			add_to_tech_sharing_group = POR_iberian_science_group
			every_other_country = {
				limit = { is_in_faction_with = ROOT }
				add_to_tech_sharing_group = POR_iberian_science_group
			}
		}
	}
	

############################
##### PINK MAP SECTION #####
############################

	focus = {
		id = POR_mapa_cor_de_rosa
		text = POR_mapa_cor_de_rosa_nw
		icon = GFX_focus_por_the_pink_map
		prerequisite = {
			focus = POR_imperial_revival
			focus = POR_unification_of_kingdoms
		}
		x = 0
		y = 1
		offset = {
			x = -1
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		offset = {
			x = 1
			y = 0
			trigger = {
				has_completed_focus = POR_restoration_of_monarchy
			}
		}
		relative_position_id = POR_imperial_revival
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					naval_strength_ratio = { tag = ENG	ratio < 0.5 }
					num_divisions < 50
				}
			}
		}
		available = {
			is_subject = no
			has_army_manpower = { size > 549999 } #ca 60 div
		}
		bypass = {
			controls_state = 922
			controls_state = 931
			controls_state = 1004
			controls_state = 1110
			controls_state = 545
			controls_state = 871
			controls_state = 1003
		}
		select_effect = {
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 922
						controls_state = 931
						controls_state = 1004
						controls_state = 1110
						controls_state = 545
						controls_state = 871
						controls_state = 1003
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_mapa_cor_de_rosa"
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 922
						controls_state = 931
						controls_state = 1004
						controls_state = 1110
						controls_state = 545
						controls_state = 871
						controls_state = 1003
					}
				}
				every_controlled_state = {
					limit = {
						OR = {
							state = 922
							state = 931
							state = 1004
							state = 1110
							state = 545
							state = 871
							state = 1003
						}
					}
					add_claim_by = ROOT
				}
				ROOT = {
					if = {
						limit = {
							NOT = { has_wargoal_against = PREV }
						}
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 200
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_return_to_portuguese_morocco
		icon = GFX_z_goal_POR_return_to_portuguese_morocco
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		x = -4
		y = 1
		relative_position_id = POR_mapa_cor_de_rosa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
			controls_state = 461
			controls_state = 462
		}
		select_effect = {
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 461
						controls_state = 462
					}
				}
				ROOT = {
					add_state_claim = PREV
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_to_portuguese_morocco"
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 461
						controls_state = 462
					}
				}
				ROOT = {
					if = {
						limit = {
							NOT = { has_wargoal_against = PREV }
						}
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 200
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_make_india_your_own
		icon = GFX_z_goal_make_india_your_own
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		x = -2
		y = 1
		relative_position_id = POR_mapa_cor_de_rosa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			RAJ = {
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = RAJ
		}
		select_effect = {
		}
		
		will_lead_to_war_with = RAJ
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_make_india_your_own"
			create_wargoal = {
				target = RAJ
				type = puppet_wargoal_focus
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = RAJ
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = RAJ
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_regain_ownership_of_tea_plantations
		icon = GFX_z_goal_regain_ownership_of_tea_plantations_SRL
		prerequisite = { focus = POR_make_india_your_own }
		x = 0
		y = 1
		relative_position_id = POR_make_india_your_own
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
			owns_state = 1094
			owns_state = 1093
			owns_state = 1092
			owns_state = 422
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_regain_ownership_of_tea_plantations"
			every_state = { 
				limit = {
					OR = {
						state = 1094
						state = 1093
						state = 1092
						state = 422
					}
					owner = {
						NOT = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_claim_by = ROOT
				owner = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						hidden_effect = {
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
							add_ai_strategy = {
								type = declare_war
								id = PREV
								value = 100
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_recover_the_east_indies
		icon = GFX_z_goal_chain_fro_ost-india
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		x = 0
		y = 1
		relative_position_id = POR_mapa_cor_de_rosa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
			owns_state = 336
			owns_state = 667
		}
		select_effect = {
			random_other_country = {
				limit = { controls_state = 336 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
			random_other_country = {
				limit = { controls_state = 667 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_recover_the_east_indies"
			add_state_claim = 336 # Singapore
			add_state_claim = 667 # Lesser Sunda
			hidden_effect = {
				random_other_country = {
					limit = { controls_state = 336 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
				random_other_country = {
					limit = { controls_state = 667 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_expand_the_chinese_territories
		icon = GFX_focus_usa_focus_on_asia
		prerequisite = { focus = POR_recover_the_east_indies }
		x = 0
		y = 1
		relative_position_id = POR_recover_the_east_indies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			owns_state = 729
		}
		bypass = {
		}
		select_effect = {
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 592
						controls_state = 594
						controls_state = 325
						controls_state = 613
						controls_state = 622
						controls_state = 604
						controls_state = 615
						controls_state = 611
						controls_state = 328
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_the_chinese_territories"
			hidden_effect = {
				592 = {
					owner = {
						ROOT = {
							create_wargoal = {
							  	target = PREV
							    type = annex_everything
							}						
						}
					}				
				}

				594 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}	
							}					
						}
					}				
				}

				325 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}	
							}					
						}
					}				
				}

				613 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}	
							}					
						}
					}				
				}

				622 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}
							}						
						}
					}				
				}

				604 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}	
							}			
						}
					}				
				}

				615 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}
							}					
						}
					}				
				}

				611 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}	
							}					
						}
					}				
				}

				328 = {
					owner = {
						ROOT = {
							if = {
								limit = {
									NOT = {
										has_wargoal_against = PREV
										owns_state = PREV.PREV
									}
								}
								create_wargoal = {
								  	target = PREV
								    type = annex_everything
								}
							}					
						}
					}				
				}
			}
			custom_effect_tooltip = POR_expand_the_chinese_territories_tt

			hidden_effect = {
				random_other_country = {
					limit = { controls_state = 592 }
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_deal_with_the_japanese_threat
		icon = GFX_focus_attack_japan
		prerequisite = { focus = POR_expand_the_chinese_territories }
		x = 0
		y = 1
		relative_position_id = POR_expand_the_chinese_territories
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			JAP = {
				exists = yes
				NOT = { is_in_faction_with = ROOT }
			}
		}
		bypass = {
			has_war_with = JAP
		}
		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = JAP
				value = 100
			}
		}
		
		will_lead_to_war_with = JAP
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_deal_with_the_japanese_threat"
			create_wargoal = {
				target = JAP
				type = annex_everything
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = JAP
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = JAP
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_return_uruguay
		icon = GFX_z_goal_return_uruguay
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		x = 2
		y = 1
		relative_position_id = POR_mapa_cor_de_rosa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			URG = {
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = URG
		}
		select_effect = {
		}
		
		will_lead_to_war_with = URG
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_uruguay"
			create_wargoal = {
				target = URG
				type = annex_everything
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = URG
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = URG
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_return_paraguay
		icon = GFX_z_goal_return_paraguay
		prerequisite = { focus = POR_return_uruguay }
		x = 0
		y = 1
		relative_position_id = POR_return_uruguay
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			PAR = {
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = PAR
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_paraguay"
			create_wargoal = {
				target = PAR
				type = annex_everything
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = PAR
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = PAR
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_bring_back_omans_date_gardens
		icon = GFX_z_goal_POR_bring_back_omans_date_gardens
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		x = 4
		y = 1
		relative_position_id = POR_mapa_cor_de_rosa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			OR = {
				OMA = {
					exists = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
				IOM = {
					exists = yes
					NOT = {
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		bypass = {
			OR = {
				has_war_with = OMA
				NOT = { country_exists = OMA }
			}
			OR = {
				has_war_with = IOM
				NOT = { country_exists = IOM }
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_bring_back_omans_date_gardens"
			if = {
				limit = {
					OMA = {
						exists = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
				create_wargoal = {
					target = OMA
					type = annex_everything
					expire = 0
				}
				hidden_effect = {
					add_ai_strategy = {
						type = antagonize
						id = OMA
						value = 200
					}
					add_ai_strategy = {
						type = declare_war
						id = OMA
						value = 100
					}
				}
			}
			if = {
				limit = {
					IOM = {
						exists = yes
						NOT = {
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
				create_wargoal = {
					target = IOM
					type = annex_everything
					expire = 0
				}
				hidden_effect = {
					add_ai_strategy = {
						type = antagonize
						id = IOM
						value = 200
					}
					add_ai_strategy = {
						type = declare_war
						id = IOM
						value = 100
					}
				}
			}
		}
	}
	

#############################
##### COMMUNISM SECTION #####
#############################

	focus = {
		id = POR_victory_of_portuguese_communist_party
		icon = GFX_z_goal_red_victory_of_communist_party
		prerequisite = { focus = POR_formation_of_popular_front }
		mutually_exclusive = { focus = POR_restoration_of_monarchy }
		x = 5
		y = 1
		offset = {
			x = -5
			y = 0
			trigger = {
				has_completed_focus = POR_victory_of_portuguese_communist_party
			}
		}
		relative_position_id = POR_formation_of_popular_front
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_restoration_of_monarchy
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_murder_of_salazar
				has_completed_focus = POR_maintain_neutrality_in_spanish_war
			}
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_victory_of_portuguese_communist_party"
			ENG = { remove_opinion_modifier = { target = POR modifier = POR_anglo_portuguese_alliance } }
			remove_opinion_modifier = { target = ENG modifier = POR_anglo_portuguese_alliance }
			add_popularity = { ideology = communism popularity = 0.1 }
			if = {
				limit = { NOT = { has_government = communism } }
				set_politics = { ruling_party = communism elections_allowed = no }
			}
			set_cosmetic_tag = POR_REDCOL
			if = {
				limit = { has_global_flag = POR_helped_nazi_in_SCW_flag }
				clr_global_flag = POR_helped_nazi_in_SCW_flag
				every_other_country = {
					limit = {
						has_opinion_modifier = POR_helped_nazi_in_SCW
					}
					diplomatic_relation = {
						country = ROOT
						relation = docking_rights
						active = no
					}
					remove_opinion_modifier = { target = ROOT modifier = POR_helped_nazi_in_SCW }
				}
			}
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_establishment_of_portuguese_union_republics_in_africa
		icon = GFX_z_goal_red_establishment_of_portuguese_union_republics_in_africa
		prerequisite = { focus = POR_victory_of_portuguese_communist_party }
		x = -4
		y = 1
		relative_position_id = POR_victory_of_portuguese_communist_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				any_of_scopes = {
					array = ANG.core_states
					tooltip = any_of_core_states_ANG_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
				any_of_scopes = {
					array = MZB.core_states
					tooltip = any_of_core_states_MZB_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_establishment_of_portuguese_union_republics_in_africa"
			if = {
				limit = {
					any_of_scopes = {
						array = ANG.core_states
						tooltip = any_of_core_states_ANG_tt
						controller = { OR = { tag = ROOT is_subject_of = ROOT } }
					}
				}
				release_puppet = ANG
				set_temp_variable = { ANG_colony_stability_total_temp = ANG_colony_stability_total }
				divide_temp_variable = { ANG_colony_stability_total_temp = 100 }
				ANG = {
					set_stability = ANG_colony_stability_total_temp
					if = {
						limit = { NOT = { has_focus_tree = nw_portugal_redcol } }
						load_focus_tree = { tree = nw_portugal_redcol keep_completed = no }
						set_cosmetic_POR_REDCOL_subject = yes
						set_POR_REDCOL_start_effect = yes
					}
				}
				clear_variable = ANG_colony_stability_total
			}
			if = {
				limit = {
					any_of_scopes = {
						array = MZB.core_states
						tooltip = any_of_core_states_MZB_tt
						controller = { OR = { tag = ROOT is_subject_of = ROOT } }
					}
				}
				release_puppet = MZB
				set_temp_variable = { MZB_colony_stability_total_temp = MZB_colony_stability_total }
				divide_temp_variable = { MZB_colony_stability_total_temp = 100 }
				MZB = {
					set_stability = MZB_colony_stability_total_temp
					if = {
						limit = { NOT = { has_focus_tree = nw_portugal_redcol } }
						load_focus_tree = { tree = nw_portugal_redcol keep_completed = no }
						set_cosmetic_POR_REDCOL_subject = yes
						set_POR_REDCOL_start_effect = yes
					}
				}
				clear_variable = MZB_colony_stability_total
			}
			custom_effect_tooltip = POR_establishment_of_portuguese_union_republics_in_africa_tt
		}
	}
	
	focus = {
		id = POR_liberate_africa
		icon = GFX_z_goal_red_liberate_africa
		prerequisite = { focus = POR_establishment_of_portuguese_union_republics_in_africa }
		x = -1
		y = 4
		relative_position_id = POR_establishment_of_portuguese_union_republics_in_africa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				OR = {
					AND = {
						naval_strength_ratio = { tag = ENG								ratio < 0.7 }
						naval_strength_ratio = { tag = event_target:NW_france_scope		ratio < 0.7 }
					}
					num_divisions < 90
				}
			}
		}
		available = {
			is_subject = no
			has_army_manpower = { size > 699999 } #ca 70 div
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_liberate_africa"
			unlock_decision_category_tooltip = POR_liberate_africa_category
			hidden_effect = {
				for_each_loop = {		#      
					array = global.country_in_africa
					if = {
						limit = { exists = no }
						set_politics = { ruling_party = communism }
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_forcing_communism_in_brazil
		icon = GFX_z_goal_red_forcing_communism_in_brazil
		prerequisite = { focus = POR_establishment_of_portuguese_union_republics_in_africa }
		x = 0
		y = 1
		relative_position_id = POR_establishment_of_portuguese_union_republics_in_africa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			country_exists = BRA
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_forcing_communism_in_brazil"
			if = {
				limit = { BRA = { has_government = communism } }
				BRA = { add_opinion_modifier = { target = ROOT modifier = POR_iberian_communism } }
			}
			else = {
				BRA = {
					add_popularity = {
						ideology = communism
						popularity = 0.05
					}
					add_timed_idea = {
						idea = communist_influence
						days = 730
					}
				}
			}
			if = {
				limit = { has_dlc = "La Resistance" }
				add_ideas = POR_spread_communism_overseas
			}
		}
	}
	
	focus = {
		id = POR_support_uprising_in_brazil
		icon = GFX_z_goal_red_support_uprising_in_brazil
		prerequisite = { focus = POR_forcing_communism_in_brazil }
		x = 0
		y = 1
		relative_position_id = POR_forcing_communism_in_brazil
		
		cost = 1
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			BRA = {
				has_civil_war = yes
				any_enemy_country = {
					original_tag = BRA
					has_government = communism
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_uprising_in_brazil"
			add_ideas = POR_support_of_brazilian_comrades_idea
		}
	}
	
	focus = {
		id = POR_culture_stronges_in_goa
		icon = GFX_z_goal_red_culture_stronges_in_goa
		prerequisite = { focus = POR_victory_of_portuguese_communist_party }
		x = -3
		y = 4
		relative_position_id = POR_victory_of_portuguese_communist_party
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_culture_stronges_in_goa"
			add_political_power = 25
			add_state_core = 321
		}
	}
	
	focus = {
		id = POR_liberate_india
		icon = GFX_z_goal_red_liberate_india
		prerequisite = { focus = POR_culture_stronges_in_goa }
		x = 0
		y = 1
		relative_position_id = POR_culture_stronges_in_goa
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.01
				OR = {
					naval_strength_ratio = { tag = RAJ	ratio < 1.5 }
					num_divisions < 75
				}
			}
		}
		available = {
			is_subject = no
			RAJ = {
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = RAJ
		}
		select_effect = {
		}
		
		will_lead_to_war_with = RAJ
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_liberate_india"
			create_wargoal = {
				target = RAJ
				type = puppet_wargoal_focus
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = RAJ
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = RAJ
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_support_the_spanish_republic
		icon = GFX_focus_spr_no_pasaran
		prerequisite = { focus = POR_victory_of_portuguese_communist_party }
		x = 0
		y = 1
		relative_position_id = POR_victory_of_portuguese_communist_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SPR_scw_in_progress = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_country_exist_tt
				    country_exists = SPR
			    }
			    custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_at_peace_tt
					NOT = { has_war_with = SPR }
			    }
			}
		}
		bypass = {
			OR = {
				has_global_flag = scw_over
				if = { 
					limit = { NOT = { has_global_flag = spanish_civil_war } }
					NOT = { country_exists = SPR }
				}
				else = {
					NOT = { country_exists = SPD }
				}
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_the_spanish_republic"
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = fma
				
			add_ideas = POR_volunteers_in_the_war_republican
			add_manpower = -10000
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
				}
				send_equipment = {
				    equipment = infantry_equipment
				    amount = 2000
				    target = SPD
				}
			}
			custom_effect_tooltip = POR_support_the_spanish_republic_effect_tooltip_tt
			set_rule = { can_send_volunteers = yes }
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_effect_tooltip = n4_tt
				custom_effect_tooltip = POR_spanish_republic_tt
			} 
			SPD = {
				add_opinion_modifier = {
				    target = ROOT
				    modifier = POR_helped_in_civil_war
				}
				add_manpower = 10000
			}
		}
	}
	
	focus = {
		id = POR_join_to_comintern
		icon = GFX_z_goal_joining_the_comintern_red
		prerequisite = { focus = POR_support_the_spanish_republic }
		mutually_exclusive = {
			focus = POR_workers_of_iberia_unite
		}
		x = -2
		y = 1
		relative_position_id = POR_support_the_spanish_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			NOT = { has_country_flag = POR_delegation_in_moscow_cancel_flag }
			has_government = communism
			country_exists = event_target:NW_comintern_leader_scope
			event_target:NW_comintern_leader_scope = {
				has_government = communism
				is_faction_leader = yes
			}
			NOT = { has_war_with = event_target:NW_comintern_leader_scope }
			is_in_faction = no
		}
		bypass = {
			is_in_faction_with = event_target:NW_comintern_leader_scope
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_join_to_comintern"
			event_target:NW_comintern_leader_scope = { country_event = { id = NW_portugal.11 } }
		}
	}
	
	focus = {
		id = POR_soviet_technologies
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = POR_join_to_comintern }
		x = 0
		y = 1
		relative_position_id = POR_join_to_comintern
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction_with = SOV
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_soviet_technologies"
			add_to_tech_sharing_group = USSR_research
			SOV = { add_to_tech_sharing_group = USSR_research }
		}
	}
	
	focus = {
		id = POR_workers_of_iberia_unite
		icon = GFX_focus_por_workers_of_iberia
		prerequisite = { focus = POR_support_the_spanish_republic }
		mutually_exclusive = {
			focus = POR_join_to_comintern
			focus = POR_invasion_of_spain
		}
		x = 0
		y = 1
		relative_position_id = POR_support_the_spanish_republic
		
		cost = 15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SPR_scw_in_progress = yes
#			if = {
#				limit = {
#					NOT = { has_global_flag = spanish_civil_war }
#				}
#				custom_trigger_tooltip = {
#				    tooltip = POR_spr_tooltip_country_exist_tt
#				    country_exists = SPR
#			    }
#			    custom_trigger_tooltip = {
#				    tooltip = POR_spr_tooltip_at_peace_tt
#					NOT = { has_war_with = SPR }
#			    }
#			}
#			else = {
#				country_exists = SPD
#				NOT = { has_war_with = SPD }
#			}
			country_exists = SPR
			NOT = { has_war_with = SPR }
			SPR = { is_left_ideology = yes }
			is_puppet = no
		}
		bypass = {
			SPR_scw_in_progress = no
			SPR = {
				NOT = { has_war_with = SPA }
				has_civil_war = no
				is_left_ideology = yes
			}
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_workers_of_iberia_unite"
			# Event that add NS to POR and SPD
			hidden_effect = {				
				country_event = { id = lar_portugal_iberian_workers_united.1 hours = 6 }
				SPR = { country_event = { id = lar_portugal_iberian_workers_united.1 hours = 6 } }
			}
			custom_effect_tooltip = POR_iberian_workers_effect_tooltip_tt
			#Trigger civil war
#			if = {
#				limit = {
#					NOT = { has_government = communism }
#				}
#				set_politics = {
#					ruling_party = communism
#				}
#			}
#			if = {
#				limit = {
#					has_civil_war = no
#				}
#				set_temp_variable = { POR_communist_cw_opposition = party_popularity@democratic }
#				multiply_temp_variable = { POR_communist_cw_opposition = 0.8 }
#				add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@neutrality }
#				add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@fascism }
#				hidden_effect = {
#					start_civil_war = {
#						ideology = neutrality
#						size = POR_communist_cw_opposition
#						capital = 180
#						states = { 181 }
#					}
#				}
#				custom_effect_tooltip = POR_workers_of_iberia_unite_civil_war_tt				
#			}
#			else = {
#				add_stability = -0.2
#			}
			hidden_effect = {
				set_country_flag = supports_SPD_flag
			}
			#Communist Portugal joins SPD
			SPR = {
				every_enemy_country = {
					PREV = {
						add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join }
					}
				}
				set_country_flag = POR_workers_of_iberia_unite_TARGET_flag
			}
			hidden_effect = {
				#Grant military access
				diplomatic_relation = {
					country = SPR
					relation = military_access
					active = yes
				}
				SPR = {
					diplomatic_relation = {
						country = ROOT
						relation = military_access
						active = yes
					}
				}
			}
			#Non-Aligned Portugal joins SPA
#			hidden_effect = {
#				random_other_country = {
#					limit = {
#						original_tag = ROOT
#						has_government = neutrality
#					}
#					set_country_flag = POR_non_aligned_portugal_supports_SPA_flag
#					if = {
#						limit = { country_exists = SPA }
#						add_to_war = { targeted_alliance = SPA enemy = SPR hostility_reason = asked_to_join }
#						if = {
#							limit = { country_exists = SPC }
#							add_to_war = { targeted_alliance = SPA enemy = SPC hostility_reason = asked_to_join }
#						}
#						if = {
#							limit = { country_exists = SPB }
#							add_to_war = { targeted_alliance = SPA enemy = SPB hostility_reason = asked_to_join }
#						}
#					}
#				}
#			}
#			custom_effect_tooltip = POR_fascist_portugal_joins_scw_tt

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPR
					value = 100
				}
				SPR = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
			custom_effect_tooltip = POR_workers_of_iberia_unite_tt
		}
	}
	
	focus = {
		id = POR_union_with_republicans
		icon = GFX_focus_generic_befriend_communist_spain_focus
		prerequisite = { focus = POR_workers_of_iberia_unite }
		x = 0
		y = 1
		relative_position_id = POR_workers_of_iberia_unite
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_in_faction = no
			has_government = communism
			country_exists = SPR
			NOT = { has_war_with = SPR }
			SPR = {
				has_government = communism
				is_subject = no
				is_in_faction = no
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_union_with_republicans"
			SPR = { country_event = NW_portugal.8 }
		}
	}
	
	focus = {
		id = POR_invasion_of_spain
		icon = GFX_z_goal_red_invasion_of_spain
		prerequisite = { focus = POR_support_the_spanish_republic }
		mutually_exclusive = {
			focus = POR_workers_of_iberia_unite
		}
		x = 2
		y = 1
		relative_position_id = POR_support_the_spanish_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 15
			modifier = {
				factor = 0.1
				OR = {
					SPR_scw_in_progress = yes
					41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio < 1 } } } }
				}
			}
			modifier = {
				add = 45
				41 = { controller = { ROOT = { strength_ratio = { tag = PREV ratio > 1 } } } }
				num_divisions > 50
			}
		}
		available = {
			is_subject = no
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				has_global_flag = scw_over
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
			if = {
				limit = { country_exists = SPA }
				SPA = {
					NOT = { has_government = ROOT }
					NOT = { is_in_faction_with = ROOT }
				}
			}
			else = {
				41 = {
					owner = {
						OR = {
							has_government = monarchy
							has_government = fascism
							has_government = neutrality
						}
						NOT = { is_in_faction_with = ROOT }
					}
				}
			}
		}
		bypass = {
			all_of_scopes = {
				array = global.spain_cores
				tooltip = all_of_core_states_SPAIN_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		select_effect = {
			if = {
				limit = { country_exists = SPA }
				add_ai_strategy = {
					type = befriend
					id = "SPA"
					value = -100
				}
				add_ai_strategy = {
					type = alliance
					id = "SPA"
					value = -100
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = "SPA"
					value = 100
				}
			}
			else = {
				41 = {
					owner = {
						ROOT = {
							add_ai_strategy = {
								type = befriend
								id = PREV
								value = -100
							}
							add_ai_strategy = {
								type = alliance
								id = PREV
								value = -100
							}
							add_ai_strategy = {
								type = prepare_for_war
								id = PREV
								value = 100
							}
						}
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invasion_of_spain"
			hidden_effect = {
				if = {
					limit = { country_exists = SPA }
					create_wargoal = {
						target = SPA
						type = topple_government
					}
				}
				else = {
					41 = {
						owner = {
							ROOT = {
								create_wargoal = {
									target = PREV
									type = topple_government
								}
							}
						}
					}
				}
			}
			custom_effect_tooltip = POR_intervention_in_spain_tt

			hidden_effect = {
				if = {
					limit = { country_exists = SPA }
					add_ai_strategy = {
						type = declare_war
						id = SPA
						value = 100
					}
				}
				else = {
					41 = {
						owner = {
							ROOT = {
								add_ai_strategy = {
									type = declare_war
									id = PREV
									value = 100
								}
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_union_of_republics_of_iberian_soviets
		icon = GFX_focus_ger_great_red_menace
		prerequisite = { focus = POR_invasion_of_spain }
		x = 0
		y = 1
		relative_position_id = POR_invasion_of_spain
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			all_of_scopes = {
				array = global.spain_cores
				tooltip = all_of_core_states_SPAIN_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_union_of_republics_of_iberian_soviets"
			every_controlled_state = {
				limit = {
					is_in_array = { global.spain_cores = THIS }
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			every_subject_country = {
				every_controlled_state = {
					limit = {
						is_in_array = { global.spain_cores = THIS }
						NOT = { is_core_of = PREV }
					}
					add_core_of = PREV
				}
				every_state = {
					limit = {
						is_in_array = { global.spain_cores = THIS }
						NOT = { is_controlled_by = PREV }
						is_core_of = PREV
					}
					remove_core_of = PREV
				}
				every_state = {
					limit = {
						is_in_array = { global.spain_cores = THIS }
						NOT = { is_controlled_by = PREV }
						is_claimed_by = PREV
					}
					remove_claim_by = PREV
				}
			}
			set_cosmetic_tag = UNION_of_republics_of_iberian_soviets
		}
	}
	
	focus = {
		id = POR_introduction_of_one_party_system
		icon = GFX_z_goal_one_party_system
		prerequisite = { focus = POR_victory_of_portuguese_communist_party }
		x = 3
		y = 1
		relative_position_id = POR_victory_of_portuguese_communist_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_introduction_of_one_party_system"
			add_political_power = 75
			add_ideas = POR_introduction_of_one_party_system
		}
	}
	
	focus = {
		id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		icon = {
			trigger = {
				has_completed_focus = POR_strengthening_regime_pvde
			}
			value = GFX_z_goal_direct_economy_to_domestic_problems
		}
		icon = {
			trigger = {
				NOT = { has_completed_focus = POR_strengthening_regime_pvde }
			}
			value = GFX_z_goal_POR_start_fight_against_bourgeoisie_in_country
		}
		dynamic = yes
		prerequisite = {
			focus = POR_introduction_of_one_party_system
			focus = POR_national_unity_program
		}
		x = 0
		y = 4
		offset = {
			x = 0
			y = -1
			trigger = {
				has_completed_focus = POR_victory_of_portuguese_communist_party
			}
		}
		offset = {
			x = -27
			y = 0
			trigger = {
				has_completed_focus = POR_strengthening_regime_pvde
			}
		}
		relative_position_id = POR_introduction_of_one_party_system
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems"
			if = {
				limit = { has_completed_focus = POR_strengthening_regime_pvde }
				add_timed_idea = { idea = POR_rebuilding_the_country days = 180 }
				if = {
					limit = { has_idea = POR_workers_discontent_idea }
					remove_ideas = POR_workers_discontent_idea
				}
				
				custom_effect_tooltip = on_half_year_tt
				add_ideas = civilian_economy
				add_to_variable = { POR_progress_of_national_unity_program_var = 10 tooltip = POR_progress_of_national_unity_program_tt }
				POR_progress_of_national_unity_program_dyn_calculate = yes
#				custom_effect_tooltip = POR_direct_economy_to_domestic_problems_tt
			}
			else = {
				custom_effect_tooltip = POR_unlock_new_propaganda_tt
				set_variable = { POR_radical_republicanism_var = 20 }
				POR_radical_republicanism_icon_frame_set_effect = yes
			}
		}
	}
	
	focus = {
		id = POR_move_radio_party_to_lisbon
		icon = GFX_goal_generic_radar
		prerequisite = { focus = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems }
		x = -4
		y = 3
		relative_position_id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			has_tech = advanced_centimetric_radar
			has_tech = radioupgrade4
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_move_radio_party_to_lisbon"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_carolina_loff_da_fonseca
			if = {
				limit = { NOT = { has_tech = radio } }
				set_technology = { radio = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = radio_detection } }
				set_technology = { radio_detection = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = decimetric_radar } }
				set_technology = { decimetric_radar = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = improved_decimetric_radar } }
				set_technology = { improved_decimetric_radar = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = centimetric_radar } }
				set_technology = { centimetric_radar = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = improved_centimetric_radar } }
				set_technology = { improved_centimetric_radar = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = advanced_centimetric_radar } }
				set_technology = { advanced_centimetric_radar = 1 }
			}
			
			if = {
				limit = { NOT = { has_tech = radioupgrade } }
				set_technology = { radioupgrade = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = radioupgrade2 } }
				set_technology = { radioupgrade2 = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = radioupgrade3 } }
				set_technology = { radioupgrade3 = 1 }
			}
			else_if = {
				limit = { NOT = { has_tech = radioupgrade4 } }
				set_technology = { radioupgrade4 = 1 }
			}
		}
	}
	
	focus = {
		id = POR_socialization_of_all_means_of_production
		icon = GFX_z_goal_red_socialization_of_all_means_of_production
		prerequisite = { focus = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems }
		x = -3
		y = 1
		relative_position_id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_socialization_of_all_means_of_production"
			if = {
				limit = { has_completed_focus = POR_strengthening_regime_pvde }
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt2
			}
			else = {
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt
			}
		}
	}
	
	focus = {
		id = POR_continuous_production_concept
		icon = GFX_z_goal_red_continuous_production_concept
		prerequisite = { focus = POR_socialization_of_all_means_of_production }
		x = 0
		y = 1
		relative_position_id = POR_socialization_of_all_means_of_production
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continuous_production_concept"
			add_tech_bonus = {
				name = POR_continuous_production_concept
				bonus = 1
				ahead_reduction = 1
				uses = 1
				category = industry
			}
			if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				unlock_decision_category_tooltip = POR_continuous_production_concept_category
			}
		}
	}
	
	focus = {
		id = POR_collectivization_of_private_property
		icon = GFX_z_goal_red_collectivization_of_private_property
		prerequisite = { focus = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems }
		x = -1
		y = 1
		relative_position_id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = communism
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_collectivization_of_private_property"
			if = {
				limit = { has_completed_focus = POR_strengthening_regime_pvde }
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt2
			}
			else = {
				add_political_power = 50
				every_owned_state = {
					limit = {
						is_on_continent = europe
					}
					add_extra_state_shared_building_slots = 1
				}
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt
			}
		}
	}
	
	focus = {
		id = POR_nationalisation_crunch_lands
		icon = GFX_z_goal_nationalisation_crunch_lands
		prerequisite = { focus = POR_collectivization_of_private_property }
		x = 0
		y = 1
		relative_position_id = POR_collectivization_of_private_property
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = communism
		}
		bypass = {
		}
		select_effect = {
			country_event = { id = NWportugal.77 days = 7 }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_nationalisation_crunch_lands"
			add_political_power = 50
			if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				custom_effect_tooltip = POR_unlock_new_propaganda_tt
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_town_reforms
		icon = GFX_z_goal_new_agrarian_reform
		prerequisite = { focus = POR_nationalisation_crunch_lands }
		x = -1
		y = 1
		relative_position_id = POR_nationalisation_crunch_lands
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = communism
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_town_reforms"
			if = {
				limit = { has_completed_focus = POR_strengthening_regime_pvde }
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt2
			}
			else = {
				custom_effect_tooltip = POR_unlock_new_propaganda_tt
				custom_effect_tooltip = POR_unlock_elimination_of_bourgeois_elements_tt
				every_owned_state = {
					limit = {
						is_on_continent = europe
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_use_avante_as_an_ideological_guide
		icon = GFX_z_goal_POR_use_avante_as_an_ideological_guide
		prerequisite = { focus = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems }
		x = 0
		y = 3
		relative_position_id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_use_avante_as_an_ideological_guide"
			add_ideas = POR_use_avante_as_an_ideological_guide_idea
			if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
				POR_unlock_propaganda_campaign_slot_effect = yes
			}
		}
	}
	
	focus = {
		id = POR_first_5_year_plan
		icon = GFX_z_goal_Start_the_first_five_year_plan
		prerequisite = { focus = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems }
		x = 1
		y = 1
		relative_position_id = POR_start_fight_against_bourgeoisie_in_country_or_POR_direct_economy_to_domestic_problems
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = communism
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_first_5_year_plan"
			add_ideas = POR_i_five_year_plan_idea
			if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				custom_effect_tooltip = POR_unlock_new_propaganda_tt
			}
		}
	}
	
	focus = {
		id = POR_unify_leftist_youth_wings
		icon = GFX_focus_SOV_builder_of_the_red_army
		prerequisite = { focus = POR_victory_of_portuguese_communist_party }
		x = -2
		y = 1
		relative_position_id = POR_victory_of_portuguese_communist_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_unify_leftist_youth_wings"
			add_popularity = { ideology = communism popularity = 0.05 }
			add_ideas = POR_unified_youth_wings
		}
	}
	
	

##############################
##### NEUTRALITY SECTION #####
##############################

	focus = {
		id = POR_strengthening_regime_pvde
		icon = GFX_focus_por_estado_novo
		
		mutually_exclusive = {
			focus = POR_revolt_against_salazar_regime
			focus = POR_formation_of_popular_front
			focus = POR_murder_of_salazar
		}
		
		x = 16
		y = 0
		offset = {
			x = -27
			y = 0
			trigger = {
				has_completed_focus = POR_strengthening_regime_pvde
			}
		}
		relative_position_id = POR_formation_of_popular_front
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_murder_of_salazar
			}
		}
		available = {
			OR = {
				has_country_flag = POR_formation_of_popular_front_bad_flag
				AND = {
					has_global_flag = pcw_is_start
					NOT = { has_global_flag = POR_carmona_is_killed_flag }
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_strengthening_regime_pvde"
			add_political_power = 50
			hidden_effect = {
#				news_event = { id = trworldnews.188 hours = 6 }
				if = {
					limit = { has_character = POR_francisco_rolao_preto }
					POR_francisco_rolao_preto = { unit_leader_event = { id = NWportugal.96 hours = 6 } }
				}
			}
			mark_focus_tree_layout_dirty = yes
		}
	}

	focus = {
		id = POR_political_restoration_of_portuguese_church
		icon = GFX_z_goal_political_restoration_of_portuguese_church
		prerequisite = { focus = POR_strengthening_regime_pvde }
		mutually_exclusive = { focus = POR_sign_concordat_with_vatican }
		x = -6
		y = 1
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			OR = {
				has_idea = POR_influence_of_church_4
				has_idea = POR_influence_of_church_5
				has_idea = POR_influence_of_church_6
				has_idea = POR_influence_of_church_7
				hidden_trigger = {
					OR = {
						has_idea = POR_influence_of_church_central_4
						has_idea = POR_influence_of_church_central_5
						has_idea = POR_influence_of_church_central_6
						has_idea = POR_influence_of_church_central_7
					}
				}
			}
			NOT = { has_completed_focus = POR_maintain_neutrality_in_spanish_war }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_political_restoration_of_portuguese_church"
			add_political_power = 100
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_catholic_university_of_portugal_pvde
		text = POR_catholic_university_of_portugal
		icon = GFX_z_goal_catholic_university
		prerequisite = { focus = POR_political_restoration_of_portuguese_church }
		x = 0
		y = 1
		relative_position_id = POR_political_restoration_of_portuguese_church
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_catholic_university_of_portugal_pvde"
			add_ideas = POR_catholic_university_of_portugal
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_return_of_catholic_center_to_political_activity
		icon = GFX_z_goal_return_of_catholic_center_to_political_activity
		prerequisite = { focus = POR_political_restoration_of_portuguese_church }
		x = 2
		y = 1
		relative_position_id = POR_political_restoration_of_portuguese_church
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_of_catholic_center_to_political_activity"
			add_ideas = POR_catholic_center_idea
			POR_influence_of_church_up = yes
			country_event = { id = NWportugal.71 hours = 6 }
			hidden_effect = {
				if = {
					limit = { NOT = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal } }
					random_other_country = {
						limit = { has_character = POR_joao_francisco_de_barbosa_azevedo_joao_ameal }
						POR_joao_francisco_de_barbosa_azevedo_joao_ameal = { set_nationality = ROOT }
					}
				}
				if = {
					limit = { NOT = { has_character = POR_joao_de_azevedo_coutinho } }
					random_other_country = {
						limit = { has_character = POR_joao_de_azevedo_coutinho }
						POR_joao_de_azevedo_coutinho = { set_nationality = ROOT }
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_joao_francisco_de_barbosa_azevedo_joao_ameal
			show_ideas_tooltip = POR_joao_de_azevedo_coutinho
		}
	}
	
	focus = {
		id = POR_catholic_student_movement
		icon = GFX_z_goal_catholic_student_movement
		prerequisite = { focus = POR_catholic_university_of_portugal_pvde }
		x = -1
		y = 2
		relative_position_id = POR_catholic_university_of_portugal_pvde
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_catholic_student_movement"
			add_ideas = POR_catholic_student_movement
		}
	}
	
	focus = {
		id = POR_christianization_of_state_and_colonies
		icon = GFX_z_goal_christianization_of_state_and_colonies_africa
		prerequisite = { focus = POR_catholic_university_of_portugal_pvde }
		prerequisite = { focus = POR_return_of_catholic_center_to_political_activity }
		x = 0
		y = 1
		relative_position_id = POR_catholic_university_of_portugal_pvde
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_christianization_of_state_and_colonies"
			add_country_leader_role = {
				character = POR_manuel_goncalves_cerejeira
				country_leader = {
					desc = "POLITICS_MANUEL_GONCALVES_CEREJEIRA_DESC"
					expire = "1965.1.1"
					ideology = clerical_autocracy
					traits = {
						patriarch_of_lisbon
					}
				}
				promote_leader = yes
			}
			custom_effect_tooltip = POR_strip_church_of_all_influence_tt
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_antonio_de_oliveira_salazar
			POR_jose_fernando_de_sousa = {
				add_corps_commander_role = {
					traits={ engineer }
					skill = 2
					attack_skill = 1
					defense_skill = 3
					planning_skill = 1
					logistics_skill = 2
				}
			}
			
			if = {
				limit = { has_idea = POR_influence_of_church_1 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_1
					add_idea = POR_influence_of_church_7
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_2 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_2
					add_idea = POR_influence_of_church_7
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_3 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_3
					add_idea = POR_influence_of_church_7
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_4 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_4
					add_idea = POR_influence_of_church_7
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_5 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_5
					add_idea = POR_influence_of_church_7
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_6 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_6
					add_idea = POR_influence_of_church_7
				}
			}
			hidden_effect = {
				news_event = { id = trworldnews.189 hours = 6 }
			}
		}
	}
	
	focus = {
		id = POR_follow_to_social_doctrine_of_catholic_church
		icon = GFX_z_goal_follow_to_social_doctrine_of_catholic_church
		prerequisite = { focus = POR_return_of_catholic_center_to_political_activity }
		x = 0
		y = 1
		relative_position_id = POR_return_of_catholic_center_to_political_activity
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_follow_to_social_doctrine_of_catholic_church"
			add_stability = 0.1
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_union_with_pope
		icon = GFX_z_goal_union_with_pope
		prerequisite = { focus = POR_christianization_of_state_and_colonies }
		prerequisite = { focus = POR_follow_to_social_doctrine_of_catholic_church }
		mutually_exclusive = {
			focus = POR_anti_fascist_uprising
			focus = POR_support_axis_powers
			focus = POR_maintain_neutrality
			focus = POR_confirm_windsor_pact
		}
		x = 1
		y = 1
		relative_position_id = POR_christianization_of_state_and_colonies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_union_with_pope"
			remove_opinion_modifier = { target = VAT modifier = POR_ignoring_popes_decree_op }
			VAT = { remove_opinion_modifier = { target = ROOT modifier = POR_ignoring_popes_decree_op } }
			set_rule = { can_create_factions = yes }
			create_faction = POR_catholic_union
			if = {
				limit = {
					country_exists = VAT
					VAT = {
						is_left_ideology = no
						NOT = {
							has_war_with = ROOT
							is_subject = no
							is_in_faction = no
						}
					}
				}
				VAT = { country_event = generic.5 }
			}
		}
	}
	

#####################################
##### PORTUGUESE CHURCH SECTION #####
#####################################

	focus = {
		id = POR_sign_concordat_with_vatican
		icon = GFX_z_goal_sign_concordat_with_vatican
		prerequisite = { focus = POR_strengthening_regime_pvde }
		mutually_exclusive = { focus = POR_political_restoration_of_portuguese_church }
		x = -1
		y = 1
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			country_exists = VAT
			NOT = { has_war_with = VAT }
			VAT = { is_left_ideology = no }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_sign_concordat_with_vatican"
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_manuel_goncalves_cerejeira
			diplomatic_relation = {
				country = VAT
				relation = non_aggression_pact
				active = no
			}
			add_opinion_modifier = { target = VAT modifier = POR_sign_concordat_with_vatican_op }
			VAT = { add_opinion_modifier = { target = ROOT modifier = POR_sign_concordat_with_vatican_op } }
			if = {
				limit = { has_idea = POR_influence_of_church_7 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_7
					add_idea = POR_influence_of_church_5
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_6 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_6
					add_idea = POR_influence_of_church_5
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_central_7 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_central_7
					add_idea = POR_influence_of_church_central_5
				}
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_central_6 }
				swap_ideas = {
					remove_idea = POR_influence_of_church_central_6
					add_idea = POR_influence_of_church_central_5
				}
			}
			else = {
				POR_influence_of_church_down = yes
			}
			custom_effect_tooltip = POR_sign_concordat_with_vatican_tt
		}
	}
	
	focus = {
		id = POR_gremiou
		icon = GFX_focus_por_salazar
		prerequisite = { focus = POR_sign_concordat_with_vatican }
		x = -1
		y = 1
		relative_position_id = POR_sign_concordat_with_vatican
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			set_temp_variable = { temp_var = 60 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_gremiou"
			add_ideas = POR_gremiou
		}
	}
	
	focus = {
		id = POR_trade_european_countries
		icon = GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = POR_sign_concordat_with_vatican }
		x = 1
		y = 1
		relative_position_id = POR_sign_concordat_with_vatican
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { temp_var = 50 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_trade_european_countries"
			add_ideas = POR_trade_european_countries_idea
		}
	}
	
	focus = {
		id = POR_national_gold_reserves
		icon = GFX_focus_usa_reestablish_the_gold_standard
		prerequisite = { focus = POR_gremiou }
		prerequisite = { focus = POR_trade_european_countries }
		x = 0
		y = 1
		relative_position_id = POR_gremiou
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_war = no
			OR = {
				ENG = { 
					exists = yes
					NOT = { has_war_with = ROOT }
					any_enemy_country = {
						is_major = yes
					}
				}
				GER = { 
					exists = yes
					NOT = { has_war_with = ROOT }
					any_enemy_country = {
						is_major = yes
					}
				}
			}
			set_temp_variable = { temp_var = 70 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_national_gold_reserves"
			add_ideas = POR_national_gold_reserves
			ENG = {
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_portuguese_trade
				}
			}
			GER = {
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_portuguese_trade
				}
			}
			every_other_country = {
				limit = {
					NOT = { tag = GER }
					NOT = { tag = ENG }
					OR = {
						is_in_faction_with = ENG
						is_in_faction_with = GER
					}
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_portuguese_trade_minor
				}
			}
		}
	}
	
	focus = {
		id = POR_the_capital_of_espionage
		icon = GFX_z_goal_spy_training
		prerequisite = { focus = POR_trade_european_countries }
		x = 0
		y = 1
		relative_position_id = POR_trade_european_countries
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			owns_state = 112
			has_war = no
			OR = {
				AND = {
					ENG = { 
						exists = yes
						NOT = { has_war_with = ROOT }
					}
					any_of_scopes = {
						array = global.is_major
						tooltip = is_major_tt
						exists = yes
						has_war_with = ENG
					}
				}
				AND = {
					GER = { 
						exists = yes
						NOT = { has_war_with = ROOT }
					}
					any_of_scopes = {
						array = global.is_major
						tooltip = is_major_tt
						exists = yes
						has_war_with = GER
					}
				}
			}
			set_temp_variable = { temp_var = 60 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_the_capital_of_espionage"
			add_ideas = POR_the_capital_of_espionage
		}
	}
	

##############################################
##### MAIN NEUTRALITY HISTORICAL SECTION #####
##############################################

	focus = {
		id = POR_viriatos
		icon = GFX_z_goal_POR_viriatos
		prerequisite = { focus = POR_strengthening_regime_pvde }
		mutually_exclusive = {
			focus = POR_maintain_neutrality_in_spanish_war
		}
		x = 3
		y = 1
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_completed_focus = POR_creation_of_portuguese_legion
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_viriatos"
			add_ideas = POR_viriatos
		}
	}
	
	focus = {
		id = POR_observation_mission
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = POR_viriatos }
		x = 0
		y = 1
		relative_position_id = POR_viriatos
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SPR_scw_in_progress = yes
			OR = {
			    AND = {
				    country_exists = SPA
				    NOT = { has_war_with = SPA }
				}
			    AND = {
				    country_exists = SEU
				    NOT = { has_war_with = SEU }	
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_observation_mission"
			add_doctrine_cost_reduction = {
				name = POR_observation_mission
				cost_reduction = 0.9
				uses = 1
				category = air_doctrine
			}
			add_tech_bonus = {
				name = POR_observation_mission
			    bonus = 0.5
			    uses = 1
			    category = light_air
			}
			add_tech_bonus = {
				name = POR_observation_mission
			    bonus = 0.5
			    uses = 1
			    category = cat_light_armor
			}
			army_experience = 10
			air_experience = 20
			hidden_effect = {
				if = {
					limit = { country_exists = SPA }
		            add_ai_strategy = {
					    type = befriend
					    id = SPA
					    value = 100
				    }
					SPA = {
						add_ai_strategy = {
							type = befriend
							id = POR
							value = 100
						}
					}
					else_if = {
						limit = { country_exists = SEU }
		           		add_ai_strategy = {
					  	   type = befriend
					 	   id = SEU
					 	   value = 100
				    	}
						SEU = {
							add_ai_strategy = {
								type = befriend
								id = POR
								value = 100
							}	
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_iberian_neutrality_pact
		icon = GFX_focus_por_iberian_summit
		prerequisite = { focus = POR_observation_mission }
		mutually_exclusive = { focus = POR_invasion_of_spain_pvde }
		x = -1
		y = 1
		relative_position_id = POR_observation_mission
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				has_global_flag = scw_over
			}
			has_war = no
			is_in_faction = no
			is_left_ideology = no
			OR = {
				AND = {
					country_exists = SPR
					SPR = {
						has_war = no 
						is_in_faction = no
						NOT = {
							has_government = fascism
							has_government = communism
							has_government = trozkism
							has_government = anarchism
						}
					}
				}
				AND = {
					country_exists = SPA
					SPA = {
						has_war = no 
						is_in_faction = no
						OR = {
							has_completed_focus = SPA_the_phalanx_ascendant
							AND = {
								has_completed_focus = SPA_unify_the_nationalist_front
								NOT = { has_completed_focus = SPA_the_iberian_pact }
							}
						}
					}
				}
				AND = {
					country_exists = SEU
					SPA = {
						has_war = no 
						is_in_faction = no
					}
				}
			}
			OR = {
				country_exists = GER
				country_exists = ENG
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_iberian_neutrality_pact"
			unlock_decision_tooltip = POR_iberian_summit_pro_axis
			unlock_decision_tooltip = POR_iberian_summit_pro_allies
		}
	}
	
	focus = {
		id = POR_invasion_of_spain_pvde
		text = POR_invasion_of_spain
		icon = GFX_focus_generic_attack_republican_spain_focus
		prerequisite = { focus = POR_observation_mission }
		mutually_exclusive = { focus = POR_iberian_neutrality_pact }
		x = 1
		y = 1
		relative_position_id = POR_observation_mission
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				has_global_flag = scw_over
			}
			OR = {
				has_government = democratic
				has_government = communism
			}
			NOT = { country_exists = SEU }
			NOT = { country_exists = SPA }
			any_of_scopes = {
				array = global.is_literally_spain
				hidden_trigger = { is_literally_spain = yes }
				tooltip = is_literally_spain_tt
				exists = yes
				NOT = {
					has_government = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
		}
		select_effect = {
			every_other_country = {
				limit = {
					is_literally_spain = yes
					NOT = {
						has_government = ROOT
						is_in_faction_with = ROOT
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = befriend
						id = PREV
						value = -100
					}
					add_ai_strategy = {
						type = alliance
						id = PREV
						value = -100
					}
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invasion_of_spain_pvde"
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = fma
			hidden_effect = {
				every_other_country = {
					limit = {
						is_literally_spain = yes
						NOT = {
							has_government = ROOT
							is_in_faction_with = ROOT
						}
					}
					ROOT = {
						create_wargoal = {
						  	target = PREV
						    type = topple_government
						}
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
			custom_effect_tooltip = POR_intervention_in_spain_tt
		}
	}
	

#########################################
##### ANTI FASCIST UPRISING SECTION #####
#########################################
	
	focus = {
		id = POR_anti_fascist_uprising
		icon = GFX_z_goal_anti_fascist_uprising
		prerequisite = {
			focus = POR_follow_to_social_doctrine_of_catholic_church
			focus = POR_iberian_neutrality_pact
			focus = POR_invasion_of_spain_pvde
		}
		mutually_exclusive = {
			focus = POR_union_with_pope
			focus = POR_support_axis_powers
			focus = POR_maintain_neutrality
			focus = POR_confirm_windsor_pact
		}
		x = 1
		y = 1
		relative_position_id = POR_follow_to_social_doctrine_of_catholic_church
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_anti_fascist_uprising"
			custom_effect_tooltip = POR_anti_fascist_uprising_tt
			if = {
				limit = { has_global_flag = POR_helped_nazi_in_SCW_flag }
				clr_global_flag = POR_helped_nazi_in_SCW_flag
				every_other_country = {
					limit = {
						has_opinion_modifier = POR_helped_nazi_in_SCW
					}
					diplomatic_relation = {
						country = ROOT
						relation = docking_rights
						active = no
					}
					remove_opinion_modifier = { target = ROOT modifier = POR_helped_nazi_in_SCW }
				}
			}
		}
	}
	
	focus = {
		id = POR_creation_of_anti_fascist_combat_groups
		icon = GFX_z_goal_red_army3
		prerequisite = { focus = POR_anti_fascist_uprising }
		x = -2
		y = 1
		relative_position_id = POR_anti_fascist_uprising
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creation_of_anti_fascist_combat_groups"
			set_rule = { can_send_volunteers = yes }
			add_ideas = POR_anti_fascist_international_brigades_idea
		}
	}
	
	focus = {
		id = POR_national_unity_program
		icon = GFX_z_goal_union_of_peasants_and_workers_red
		prerequisite = { focus = POR_anti_fascist_uprising }
		x = -4
		y = 1
		relative_position_id = POR_anti_fascist_uprising
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_national_unity_program"
			unlock_decision_category_tooltip = POR_implementation_of_national_unity_program_category
			set_variable = { POR_progress_of_national_unity_program_var = 0 }
		}
	}
	
	focus = {
		id = POR_free_gubernatorial_elections
		icon = GFX_z_goal_communist_discourse
		prerequisite = { focus = POR_national_unity_program }
		x = 1
		y = 1
		relative_position_id = POR_national_unity_program
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_idea = POR_new_constitution_idea
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_free_gubernatorial_elections"
			add_political_power = 100
			add_stability = 0.05
			add_to_variable = { POR_progress_of_national_unity_program_var = 5 tooltip = POR_progress_of_national_unity_program_tt }
			POR_progress_of_national_unity_program_dyn_calculate = yes
		}
	}
	
	focus = {
		id = POR_complete_reorganization_of_party
		icon = GFX_z_goal_POR_complete_reorganization_of_party
		prerequisite = { focus = POR_anti_fascist_uprising }
		x = 0
		y = 1
		relative_position_id = POR_anti_fascist_uprising
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_idea = POR_voting_in_central_committee_idea
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_complete_reorganization_of_party"
			add_political_power = 50
			add_stability = -0.05
			add_popularity = { ideology = communism popularity = 0.2 }
			add_to_variable = { POR_progress_of_national_unity_program_var = 5 tooltip = POR_progress_of_national_unity_program_tt }
			POR_progress_of_national_unity_program_dyn_calculate = yes
		}
	}
	
	focus = {
		id = POR_independent_course
		icon = GFX_z_goal_communist_pride
		prerequisite = { focus = POR_complete_reorganization_of_party }
		mutually_exclusive = { focus = POR_continue_course_of_moscow }
		x = -1
		y = 1
		relative_position_id = POR_complete_reorganization_of_party
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_independent_course"
			if = {
				limit = { is_in_faction = yes }
				leave_faction = yes
			}
			if = {
				limit = {
					country_exists = SOV
					SOV = { OR = { has_government = communism has_government = trozkism } }
				}
				add_opinion_modifier = { target = SOV modifier = POR_independent_course_op }
				add_ai_strategy = {
					type = befriend
					id = SOV
					value = -200
				}
				add_ai_strategy = {
					type = alliance
					id = SOV
					value = -200
				}
				SOV = {
					add_opinion_modifier = { target = ROOT modifier = POR_independent_course_op }
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = -200
					}
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = -200
					}
				}
			}
			set_rule = { can_create_factions = yes }
			create_faction = FRA_orleanist_faction
		}
	}
	
	focus = {
		id = POR_continue_course_of_moscow
		icon = GFX_focus_chi_mission_to_the_soviet_union
		prerequisite = { focus = POR_complete_reorganization_of_party }
		mutually_exclusive = { focus = POR_independent_course }
		x = 1
		y = 1
		relative_position_id = POR_complete_reorganization_of_party
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = no
			is_subject = no
			country_exists = SOV
			SOV = {
				has_capitulated = no
				is_faction_leader = yes
				OR = { has_government = communism has_government = trozkism }
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = SOV
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_course_of_moscow"
			SOV = { country_event = { id = generic.2 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_allies_in_iberia
		icon = GFX_focus_generic_befriend_communist_spain_focus
		prerequisite = { focus = POR_independent_course }
		mutually_exclusive = { focus = POR_overthrow_dictatorship_in_spain }
		x = -1
		y = 1
		relative_position_id = POR_independent_course
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_faction_leader = yes
			41 = { owner = { is_subject = no is_in_faction = no has_government = ROOT } }
		}
		bypass = {
			41 = { owner = { is_in_faction_with = ROOT } }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_allies_in_iberia"
			41 = { owner = { country_event = { id = generic.5 hours = 3 } } }
		}
	}
	
	focus = {
		id = POR_declare_war_on_fascism
		icon = GFX_z_goal_fascist_coup_lost
		prerequisite = { focus = POR_independent_course }
		x = 0
		y = 2
		relative_position_id = POR_independent_course
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			any_of_scopes = {
				array = global.is_fascism
				tooltip = is_fascism_tt
				exists = yes
				is_subject = no
				NOT = { is_in_faction_with = ROOT }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_declare_war_on_fascism"
			every_country = {
                limit = {
					has_government = fascism
					NOT = {
						is_in_faction_with = ROOT
					}
				}
                ROOT = {
					create_wargoal = {
						target = PREV
						type = topple_government
						expire = 0
					}
				}
            }
			unlock_decision_category_tooltip = POR_anti_fascist_agitation_category
		}
	}
	
	focus = {
		id = POR_overthrow_dictatorship_in_spain
		icon = GFX_z_goal_anti_fascists_of_spain
		prerequisite = {
			focus = POR_independent_course
			focus = POR_continue_course_of_moscow
		}
		mutually_exclusive = { focus = POR_allies_in_iberia }
		x = 1
		y = 1
		relative_position_id = POR_independent_course
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			41 = {
				owner = {
					OR = {
						has_government = neutrality
						has_government = monarchy
						has_government = fascism
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_overthrow_dictatorship_in_spain"
			41 = {
				owner = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 200
						}
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 200
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_joint_economic_development
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = POR_first_5_year_plan focus = POR_allies_in_iberia }
		x = 1
		y = 1
		relative_position_id = POR_first_5_year_plan
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			num_faction_members > 1
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_joint_economic_development"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = POR_joint_economic_development
				bonus = 1
				uses = 1
				category = industry
			}
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
				}
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = POR_joint_economic_development
					bonus = 1
					uses = 1
					category = industry
				}
				hidden_effect = {
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								is_core_of = ROOT
								free_building_slots = {
									building = industrial_complex
									size > 0
									include_locked = yes
								}
							}
							add_extra_state_shared_building_slots = 1
							add_building_construction = {
								type = industrial_complex
								level = 1
								instant_build = yes
							}
						}
					}
				}
			}
			custom_effect_tooltip = faction_members_give_more_industrial_complex_tt
		}
	}
	
	focus = {
		id = POR_invite_brazil
		icon = GFX_z_goal_red_support_uprising_in_brazil
		prerequisite = {
			focus = POR_allies_in_iberia
			focus = POR_overthrow_dictatorship_in_spain
		}
		mutually_exclusive = { focus = POR_overthrow_dictatorship_in_brazil }
		x = 0
		y = 2
		relative_position_id = POR_allies_in_iberia
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_faction_leader = yes
			BRA = { is_subject = no is_in_faction = no has_government = ROOT }
		}
		bypass = {
			BRA = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invite_brazil"
			BRA = { country_event = { id = generic.5 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_overthrow_dictatorship_in_brazil
		icon = GFX_z_goal_red_forcing_communism_in_brazil
		prerequisite = {
			focus = POR_allies_in_iberia
			focus = POR_overthrow_dictatorship_in_spain
		}
		mutually_exclusive = { focus = POR_invite_brazil }
		x = 0
		y = 2
		relative_position_id = POR_overthrow_dictatorship_in_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			BRA = {
				OR = {
					has_government = neutrality
					has_government = monarchy
					has_government = fascism
				}
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = BRA
		}
		select_effect = {
		}
		
		will_lead_to_war_with = BRA
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invite_brazil"
			create_wargoal = {
				target = BRA
				type = puppet_wargoal_focus
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = "BRA"
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = "BRA"
					value = 200
				}
			}
		}
	}
	
	focus = {
		id = POR_catch_up_with_science_of_socialist_bloc
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = POR_continue_course_of_moscow }
		x = 0
		y = 2
		relative_position_id = POR_continue_course_of_moscow
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SOV = {
				has_capitulated = no
				is_in_faction_with = ROOT
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_catch_up_with_science_of_socialist_bloc"
			add_to_tech_sharing_group = USSR_research
			SOV = { add_to_tech_sharing_group = USSR_research }
		}
	}
	
	focus = {
		id = POR_investments_from_ussr
		icon = GFX_z_goal_socialist_industry
		prerequisite = { focus = POR_continue_course_of_moscow }
		x = 1
		y = 1
		relative_position_id = POR_continue_course_of_moscow
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			SOV = {
				has_capitulated = no
				is_in_faction_with = ROOT
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_investments_from_ussr"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_grant_independence_to_african_colonies
		icon = GFX_z_goal_red_establishment_of_portuguese_union_republics_in_africa
		prerequisite = { focus = POR_complete_reorganization_of_party }
		x = 3
		y = 1
		relative_position_id = POR_complete_reorganization_of_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				any_of_scopes = {
					array = ANG.core_states
					tooltip = any_of_core_states_ANG_tt
					is_controlled_by = ROOT
				}
				any_of_scopes = {
					array = MZB.core_states
					tooltip = any_of_core_states_MZB_tt
					is_controlled_by = ROOT
				}
			}
		}
		bypass = {
			
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_grant_independence_to_african_colonies"
			add_political_power = 100
			add_manpower = 300000
			if = {
				limit = {
					any_of_scopes = {
						array = ANG.core_states
						is_controlled_by = ROOT
					}
				}
				release = ANG
				ANG = {
					if = {
						limit = { NOT = { has_focus_tree = nw_portugal_redcol } }
						load_focus_tree = { tree = nw_portugal_redcol keep_completed = no }
						set_cosmetic_POR_REDCOL_subject = yes
						set_POR_REDCOL_start_effect = yes
					}
				}
			}
			if = {
				limit = {
					any_of_scopes = {
						array = MZB.core_states
						is_controlled_by = ROOT
					}
				}
				release = MZB
				MZB = {
					if = {
						limit = { NOT = { has_focus_tree = nw_portugal_redcol } }
						load_focus_tree = { tree = nw_portugal_redcol keep_completed = no }
						set_cosmetic_POR_REDCOL_subject = yes
						set_POR_REDCOL_start_effect = yes
					}
				}
			}
			add_to_variable = { POR_progress_of_national_unity_program_var = 5 tooltip = POR_progress_of_national_unity_program_tt }
			POR_progress_of_national_unity_program_dyn_calculate = yes
		}
	}
	
	focus = {
		id = POR_transfer_colony_cities_to_their_owners
		icon = GFX_z_goal_unite_against_colonialism
		prerequisite = { focus = POR_grant_independence_to_african_colonies }
		x = 1
		y = 1
		relative_position_id = POR_grant_independence_to_african_colonies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
				729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
				321 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_transfer_colony_cities_to_their_owners"
			add_political_power = 100
			capital_scope = { add_manpower = 50000 }
			add_to_variable = { POR_progress_of_national_unity_program_var = 5 tooltip = POR_progress_of_national_unity_program_tt }
			POR_progress_of_national_unity_program_dyn_calculate = yes
			
			729 = {
				if = {
					limit = { is_controlled_by = ROOT }
					random_neighbor_state = {
						limit = { owner = { is_literally_china = yes NOT = { has_war_with = ROOT } } }
						owner = { country_event = { id = NWportugal.116 hours = 6 } }
					}
				}
			}
			721 = {
				if = {
					limit = { is_controlled_by = ROOT }
					1163 = {
						owner = {
							if = {
								limit = { NOT = { has_war_with = ROOT } }
								country_event = { id = NWportugal.117 hours = 6 }
							}
						}
					}
				}
			}
			321 = {
				if = {
					limit = { is_controlled_by = ROOT }
					random_neighbor_state = {
						limit = { owner = { NOT = { has_war_with = ROOT } } }
						owner = { country_event = { id = NWportugal.118 hours = 6 } }
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_creation_of_youth_organizations
		icon = GFX_z_goal_POR_creation_of_youth_organizations
		prerequisite = { focus = POR_complete_reorganization_of_party }
		x = 5
		y = 1
		relative_position_id = POR_complete_reorganization_of_party
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creation_of_youth_organizations"
			add_ideas = POR_creation_of_youth_organizations_idea
		}
	}
	
	focus = {
		id = POR_equalize_rights_of_women_with_men
		icon = GFX_focus_generic_women_in_military
		prerequisite = { focus = POR_creation_of_youth_organizations }
		x = 1
		y = 1
		relative_position_id = POR_creation_of_youth_organizations
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_equalize_rights_of_women_with_men"
			add_stability = 0.05
			add_popularity = { ideology = communism popularity = 0.05 }
			add_ideas = POR_womens_voluntary_service_idea
		}
	}
	
	
	
	
	focus = {
		id = POR_support_axis_powers
		icon = GFX_focus_chi_mission_to_germany
		prerequisite = {
			focus = POR_iberian_neutrality_pact
			focus = POR_invasion_of_spain_pvde
		}
		mutually_exclusive = {
			focus = POR_union_with_pope
			focus = POR_anti_fascist_uprising
			focus = POR_maintain_neutrality
			focus = POR_confirm_windsor_pact
		}
		x = -3
		y = 1
		relative_position_id = POR_iberian_neutrality_pact
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = no
			is_subject = no
			country_exists = GER
			GER = {
				is_faction_leader = yes
				OR = {
					has_government = fascism
					has_government = monarchy
					has_government = neutrality
				}
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = GER
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_support_axis_powers"
			ENG = { remove_opinion_modifier = { target = POR modifier = POR_anglo_portuguese_alliance } }
			remove_opinion_modifier = { target = ENG modifier = POR_anglo_portuguese_alliance }
			GER = { country_event = { id = generic.2 hours = 3 } }
			custom_effect_tooltip = POR_workers_strike_warning_tt
		}
	}
	
	focus = {
		id = POR_betray_windsor_pact
		icon = GFX_z_goal_tower_burn
		prerequisite = { focus = POR_support_axis_powers }
		x = 0
		y = 1
		relative_position_id = POR_support_axis_powers
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			ENG = {
				NOT = {
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			has_war_with = ENG
		}
		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = ENG
				value = 100
			}
		}
		
		will_lead_to_war_with = ENG
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_betray_windsor_pact"
			if = {
				limit = { is_in_faction_with = ENG }
				leave_faction = yes
				add_ai_strategy = {
					type = alliance
					id = ENG
					value = -600
				}
			}
			create_wargoal = {
				target = ENG
				type = puppet_wargoal_focus
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = antagonize
					id = ENG
					value = 200
				}
				add_ai_strategy = {
					type = declare_war
					id = ENG
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_maintain_neutrality
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = {
			focus = POR_iberian_neutrality_pact
			focus = POR_invasion_of_spain_pvde
		}
		mutually_exclusive = {
			focus = POR_union_with_pope
			focus = POR_anti_fascist_uprising
			focus = POR_support_axis_powers
			focus = POR_confirm_windsor_pact
		}
		x = -1
		y = 1
		relative_position_id = POR_iberian_neutrality_pact
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_war = no
		}
		bypass = {
			has_idea = neutrality_idea
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_maintain_neutrality"
			add_ideas = neutrality_idea
		}
	}
	
	focus = {
		id = POR_confirm_windsor_pact
		icon = GFX_z_goal_POR_confirm_windsor_pact
		prerequisite = {
			focus = POR_iberian_neutrality_pact
			focus = POR_invasion_of_spain_pvde
		}
		mutually_exclusive = {
			focus = POR_union_with_pope
			focus = POR_anti_fascist_uprising
			focus = POR_support_axis_powers
			focus = POR_maintain_neutrality
		}
		x = 1
		y = 1
		relative_position_id = POR_iberian_neutrality_pact
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = no
			is_subject = no
			country_exists = ENG
			ENG = {	
				has_capitulated = no
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = ENG
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_confirm_windsor_pact"
			ENG = { country_event = { id = generic.2 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_eliminate_eastern_threat
		icon = GFX_focus_AST_war_japan
		prerequisite = { focus = POR_confirm_windsor_pact }
		x = -2
		y = 1
		relative_position_id = POR_confirm_windsor_pact
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			country_exists = JAP
			JAP = {
				has_capitulated = no
				has_added_tension_amount > 20
			}		
		}
		bypass = {
			has_war_with = JAP
		}
		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = JAP
				value = 100
			}
		}
		
		will_lead_to_war_with = JAP
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_eliminate_eastern_threat"
			create_wargoal = {
				target = JAP
				type = topple_government
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = JAP
					value = 100
				}
			}
		}
	}
	
	focus = {
		id = POR_oppose_to_germany
		icon = GFX_focus_ger_oppose_hitler
		prerequisite = { focus = POR_confirm_windsor_pact }
		x = 0
		y = 1
		relative_position_id = POR_confirm_windsor_pact
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			country_exists = GER
			GER = {
				has_capitulated = no
				has_added_tension_amount > 20
			}		
		}
		bypass = {
			has_war_with = GER
		}
		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = GER
				value = 100
			}
		}
		
		will_lead_to_war_with = GER
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_oppose_to_germany"
			create_wargoal = {
				target = GER
				type = topple_government
				expire = 0
			}
			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = GER
					value = 100
				}
			}
		}
	}
	

##############################
##### IGNORE SCW SECTION #####
##############################

	focus = {
		id = POR_maintain_neutrality_in_spanish_war
		icon = GFX_z_goal_POR_maintain_neutrality_in_spanish_war
		prerequisite = {
			focus = POR_formation_of_popular_front
			focus = POR_strengthening_regime_pvde
		}
		mutually_exclusive = {
			focus = POR_viriatos
			focus = POR_creation_of_portuguese_legion
		}
		x = 8
		y = 1
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		offset = {
			x = -14
			y = 0
			trigger = {
				has_completed_focus = POR_maintain_neutrality_in_spanish_war
				has_completed_focus = POR_formation_of_popular_front
			}
		}
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_restoration_of_monarchy
				has_completed_focus = POR_victory_of_portuguese_communist_party
				has_completed_focus = POR_murder_of_salazar
			}
		}
		available = {
			NOT = {
				has_completed_focus = POR_restoration_of_monarchy
				has_completed_focus = POR_victory_of_portuguese_communist_party
			}
			set_temp_variable = { more_republican_temp_var = 1 }
			custom_trigger_tooltip = {
				tooltip = has_more_republican_trait_trigger_tt
				check_variable = { modifier@republican_trait_modifier > more_republican_temp_var }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_maintain_neutrality_in_spanish_war"
			add_popularity = { ideology = democratic popularity = 0.1 }
			every_other_country = {
				limit = { has_government = democratic }
				add_opinion_modifier = { target = ROOT modifier = POR_maintain_neutrality_in_spanish_war_op }
				ROOT = { add_opinion_modifier = { target = PREV modifier = POR_maintain_neutrality_in_spanish_war_op } }
			}
			if = {
				limit = { has_global_flag = POR_helped_nazi_in_SCW_flag }
				clr_global_flag = POR_helped_nazi_in_SCW_flag
				every_other_country = {
					limit = {
						has_opinion_modifier = POR_helped_nazi_in_SCW
					}
					diplomatic_relation = {
						country = ROOT
						relation = docking_rights
						active = no
					}
					remove_opinion_modifier = { target = ROOT modifier = POR_helped_nazi_in_SCW }
				}
			}
			if = {
				limit = { has_completed_focus = POR_political_restoration_of_portuguese_church }
				uncomplete_national_focus = { focus = POR_political_restoration_of_portuguese_church	uncomplete_children = yes }
			}
			if = {
				limit = { OR = { has_character = POR_domingos_mauricio_gomes_dos_santos has_character = POR_antonio_lino_neto } }
				custom_effect_tooltip = remove_political_advisor
				if = {
					limit = {  has_character = POR_domingos_mauricio_gomes_dos_santos }
					show_ideas_tooltip = POR_domingos_mauricio_gomes_dos_santos
				}
				if = {
					limit = {  has_character = POR_antonio_lino_neto }
					show_ideas_tooltip = POR_antonio_lino_neto
				}
			}
#			custom_effect_tooltip = legitimacy_not_CW_effect_tt
#			set_country_flag = legitimacy_not_CW_flag
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_reallow_secret_organizations
		icon = GFX_z_goal_reallow_secret_organizations
		prerequisite = { focus = POR_maintain_neutrality_in_spanish_war }
		x = -3
		y = 1
		relative_position_id = POR_maintain_neutrality_in_spanish_war
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { more_republican_temp_var = 2 }
			custom_trigger_tooltip = {
				tooltip = has_more_republican_trait_trigger_tt
				check_variable = { modifier@republican_trait_modifier > more_republican_temp_var }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_reallow_secret_organizations"
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_ideas = POR_support_for_secret_organizations
		}
	}
	
	focus = {
		id = POR_allow_freedom_of_propaganda
		icon = GFX_z_goal_democratic_propaganda
		prerequisite = { focus = POR_maintain_neutrality_in_spanish_war }
		x = -1
		y = 1
		relative_position_id = POR_maintain_neutrality_in_spanish_war
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { more_republican_temp_var = 2 }
			custom_trigger_tooltip = {
				tooltip = has_more_republican_trait_trigger_tt
				check_variable = { modifier@republican_trait_modifier > more_republican_temp_var }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_allow_freedom_of_propaganda"
			add_popularity = { ideology = democratic popularity = 0.1 }
			if = {
				limit = { has_idea = POR_preliminary_censorship_idea }
				remove_ideas = POR_preliminary_censorship_idea
			}
			if = {
				limit = { NOT = { has_government = democratic } }
				add_ideas = POR_allow_freedom_of_propaganda_idea
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_maria_lamas
		}
	}
	
	focus = {
		id = POR_expand_voting_rights
		icon = GFX_z_goal_spend_population_census
		prerequisite = { focus = POR_maintain_neutrality_in_spanish_war }
		x = 1
		y = 1
		relative_position_id = POR_maintain_neutrality_in_spanish_war
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { more_republican_temp_var = 2 }
			custom_trigger_tooltip = {
				tooltip = has_more_republican_trait_trigger_tt
				check_variable = { modifier@republican_trait_modifier > more_republican_temp_var }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_voting_rights"
			add_ideas = POR_expansion_of_voting_rights_idea
		}
	}
	
	focus = {
		id = POR_weaken_foreign_investment_controls
		icon = GFX_focus_generic_the_giant_wakes
		prerequisite = { focus = POR_maintain_neutrality_in_spanish_war }
		x = 3
		y = 1
		relative_position_id = POR_maintain_neutrality_in_spanish_war
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = democratic
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_weaken_foreign_investment_controls"
			add_popularity = { ideology = democratic popularity = 0.05 }
			add_ideas = POR_weaken_foreign_investment_controls_idea
			add_to_variable = { generic_democratic_international_authority_var = 10 tooltip = generic_democratic_international_authority_effect_tt }
			generic_democratic_international_authority_effect = yes
			custom_effect_tooltip = generic_democratic_international_authority_effect_tt1
		}
	}
	
	focus = {
		id = POR_amnesty_for_political_prisoners
		icon = GFX_z_goal_release_the_prisoners
		prerequisite = { focus = POR_reallow_secret_organizations }
		prerequisite = { focus = POR_allow_freedom_of_propaganda }
		x = 1
		y = 1
		relative_position_id = POR_reallow_secret_organizations
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_amnesty_for_political_prisoners"
			add_popularity = { ideology = neutrality popularity = -0.2 }
		}
	}
	
	focus = {
		id = POR_holding_free_elections
		icon = GFX_z_goal_holding_free_elections
		prerequisite = { focus = POR_reallow_secret_organizations }
		prerequisite = { focus = POR_allow_freedom_of_propaganda }
		prerequisite = { focus = POR_expand_voting_rights }
		x = 1
		y = 1
		relative_position_id = POR_allow_freedom_of_propaganda
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			democratic > 0.5
			set_temp_variable = { more_republican_temp_var = 2 }
			custom_trigger_tooltip = {
				tooltip = has_more_republican_trait_trigger_tt
				check_variable = { modifier@republican_trait_modifier > more_republican_temp_var }
			}
		}
		bypass = {
		}
		select_effect = {
			if = {
				limit = { has_completed_focus = POR_strengthening_regime_pvde }
				country_event = { id = NWportugal.29 days = 1 }
			}
			else_if = {
				limit = { has_completed_focus = POR_formation_of_popular_front }
				country_event = { id = NWportugal.100 days = 1 }
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_holding_free_elections"
			custom_effect_tooltip = POR_holding_free_elections_tt
			hidden_effect = {
				news_event = { id = trworldnews.182 hours = 6 }
				if = {
					limit = { has_completed_focus = POR_strengthening_regime_pvde }
					country_event = { id = NWportugal.30 hours = 3 }
				}
				else_if = {
					limit = { has_country_flag = NWportugal_100_a_flag }
					country_event = { id = NWportugal.101 hours = 3 }
				}
				else_if = {
					limit = { has_country_flag = NWportugal_100_b_flag }
					country_event = { id = NWportugal.102 hours = 3 }
				}
				country_event = { id = NWportugal.103 days = 10 }
				country_event = { id = NWportugal.104 days = 20 }
				country_event = { id = NWportugal.105 days = 30 }
				country_event = { id = NWportugal.106 days = 40 }
				country_event = { id = NWportugal.107 days = 50 }
			}
		}
	}
	
	focus = {
		id = POR_womens_crusade
		icon = GFX_z_goal_POR_womens_crusade
		prerequisite = { focus = POR_holding_free_elections }
		x = -2
		y = 1
		relative_position_id = POR_holding_free_elections
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_womens_crusade"
			add_tech_bonus = {
				name = POR_womens_crusade
			    bonus = 1.0
			    uses = 1
			    category = hospital_tech
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			add_ideas = POR_womens_crusade
		}
	}
	
	focus = {
		id = POR_adopt_republican_constitution
		icon = GFX_z_goal_Sign_advisory_agreement
		prerequisite = { focus = POR_holding_free_elections }
		x = 0
		y = 1
		relative_position_id = POR_holding_free_elections
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_adopt_republican_constitution"
			remove_ideas = POR_expansion_of_voting_rights_idea
			if = {
				limit = { has_idea = POR_allow_freedom_of_propaganda_idea }
				remove_ideas = POR_allow_freedom_of_propaganda_idea
			}
			add_ideas = POR_republican_freedoms_idea
			unlock_decision_tooltip = POR_amend_constitution_against_dictatorship
		}
	}
	
	focus = {
		id = POR_legalize_smuggling_channels
		icon = GFX_z_goal_take_control_of_the_arms_smuggling_trade
		prerequisite = { focus = POR_adopt_republican_constitution }
		x = -3
		y = 1
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_republican_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_legalize_smuggling_channels"
			add_ideas = POR_smuggling_channels_idea
			hidden_effect = { country_event = { id = NWportugal.110 days = 10 } }
		}
	}
	
	focus = {
		id = POR_additional_fleet_financing
		icon = GFX_focus_generic_merchant_fleet
		prerequisite = { focus = POR_legalize_smuggling_channels }
		x = 0
		y = 1
		relative_position_id = POR_legalize_smuggling_channels
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_republican_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_additional_fleet_financing"
			add_timed_idea = { idea = POR_additional_fleet_financing_idea days = 730 }
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			hidden_effect = {
				country_event = { id = NWportugal.111 days = 10 }
				add_ai_strategy = { type = building_target		id = dockyard		value = 30 }
			}
		}
	}
	
	focus = {
		id = POR_cruising_program
		icon = GFX_z_goal_generic_coastal_navy
		prerequisite = { focus = POR_additional_fleet_financing }
		x = 0
		y = 1
		relative_position_id = POR_additional_fleet_financing
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_republican_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_cruising_program"
			add_tech_bonus = {
				name = POR_cruising_program
			    bonus = 1.0
			    ahead_reduction = 2
			    uses = 2
			    category = ca_tech
			    category = cl_tech
			}
			navy_experience = 50
		}
	}
	
	focus = {
		id = POR_third_portuguese_republic
		icon = GFX_z_goal_POR_third_portuguese_republic
		prerequisite = { focus = POR_adopt_republican_constitution }
		x = 0
		y = 1
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_third_portuguese_republic"
			add_to_variable = { generic_democratic_international_authority_var = 10 tooltip = generic_democratic_international_authority_effect_tt }
			generic_democratic_international_authority_effect = yes
			swap_ideas = {
				remove_idea = POR_republican_freedoms_idea
				add_idea = POR_third_portuguese_republic
			}
		}
	}
	
	focus = {
		id = POR_strip_church_of_all_influence
		icon = GFX_z_goal_strip_church_of_all_influence_2
		prerequisite = { focus = POR_third_portuguese_republic }
		x = 0
		y = 1
		relative_position_id = POR_third_portuguese_republic
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_strip_church_of_all_influence"
			POR_influence_of_church_down = yes
			add_opinion_modifier = { target = VAT modifier = POR_strip_church_of_all_influence }
			VAT = { add_opinion_modifier = { target = ROOT modifier = POR_strip_church_of_all_influence } }
		}
	}
	
	focus = {
		id = POR_privatize_property_of_catholic_churches
		icon = GFX_z_goal_strip_church_of_all_influence
		prerequisite = { focus = POR_strip_church_of_all_influence }
		x = -1
		y = 1
		relative_position_id = POR_strip_church_of_all_influence
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_privatize_property_of_catholic_churches"
			POR_influence_of_church_down = yes
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				set_state_flag = POR_privatize_property_of_catholic_churches_target_flag
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				set_state_flag = POR_privatize_property_of_catholic_churches_target_flag
			}
			if = {
				limit = { has_completed_focus = POR_legalization_of_non_catholic_religious_communities }
				unlock_decision_tooltip = POR_deprive_church_of_all_influence
			}
			hidden_effect = { country_event = { id = NWportugal.112 days = 10 } }
		}
	}
	
	focus = {
		id = POR_legalization_of_non_catholic_religious_communities
		icon = GFX_z_goal_catholic_university2
		prerequisite = { focus = POR_strip_church_of_all_influence }
		x = 1
		y = 1
		relative_position_id = POR_strip_church_of_all_influence
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_legalization_of_non_catholic_religious_communities"
			add_political_power = 50
			POR_influence_of_church_down = yes
			if = {
				limit = { has_completed_focus = POR_privatize_property_of_catholic_churches }
				unlock_decision_tooltip = POR_deprive_church_of_all_influence
			}
		}
	}
	
	focus = {
		id = POR_protecting_interests_of_entrepreneurs
		icon = GFX_z_goal_opening_of_underground_enterprises
		prerequisite = { focus = POR_adopt_republican_constitution }
		mutually_exclusive = { focus = POR_eliminate_monopolies_and_divisions_of_latifundia }
		x = 2
		y = 1
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_protecting_interests_of_entrepreneurs"
			add_ideas = POR_protecting_interests_of_entrepreneurs
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_include_corporate_representation_in_senate
		icon = GFX_z_goal_support_businessmen
		prerequisite = { focus = POR_protecting_interests_of_entrepreneurs }
		x = 0
		y = 1
		relative_position_id = POR_protecting_interests_of_entrepreneurs
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_include_corporate_representation_in_senate"
			swap_ideas = {
				remove_idea = POR_protecting_interests_of_entrepreneurs
				add_idea = POR_protecting_interests_of_entrepreneurs_2
			}
		}
	}
	
	focus = {
		id = POR_eliminate_monopolies_and_divisions_of_latifundia
		icon = GFX_z_goal_economic_reforms
		prerequisite = { focus = POR_adopt_republican_constitution }
		mutually_exclusive = { focus = POR_protecting_interests_of_entrepreneurs }
		x = 4
		y = 1
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_left_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_eliminate_monopolies_and_divisions_of_latifundia"
			add_ideas = POR_eliminate_monopolies_and_divisions_of_latifundia_idea
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_use_the_tribune_as_propaganda_mouthpiece
		icon = GFX_z_goal_big_news
		prerequisite = { focus = POR_eliminate_monopolies_and_divisions_of_latifundia }
		x = 0
		y = 1
		relative_position_id = POR_eliminate_monopolies_and_divisions_of_latifundia
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_left_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_use_the_tribune_as_propaganda_mouthpiece"
			add_stability = 0.05
			add_ideas = POR_use_the_tribune_as_propaganda_mouthpiece_idea
		}
	}
	
	focus = {
		id = POR_introduce_compulsory_general_education
		icon = GFX_z_goal_POR_introduce_compulsory_general_education
		prerequisite = {
			focus = POR_include_corporate_representation_in_senate
			focus = POR_use_the_tribune_as_propaganda_mouthpiece
		}
		x = 1
		y = 1
		relative_position_id = POR_include_corporate_representation_in_senate
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_introduce_compulsory_general_education"
			add_research_slot = 1
			if = {
				limit = { has_completed_focus = POR_development_of_agriculture_in_colonies }
				unlock_decision_tooltip = POR_finish_industrialization_of_country
			}
		}
	}
	
	focus = {
		id = POR_land_reforms
		icon = GFX_z_goal_SH_ref
		prerequisite = { focus = POR_weaken_foreign_investment_controls }
		x = -1
		y = 1
		relative_position_id = POR_weaken_foreign_investment_controls
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_land_reforms"
			add_ideas = POR_land_reforms
		}
	}
	
	focus = {
		id = POR_restore_supreme_council_of_colonies
		icon = GFX_z_goal_POR_restore_supreme_council_of_colonies
		prerequisite = { focus = POR_weaken_foreign_investment_controls }
		x = 1
		y = 1
		relative_position_id = POR_weaken_foreign_investment_controls
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_republican_party_flag
			has_completed_focus = POR_colonial_administration_of_angola
			has_completed_focus = POR_colonial_administration_of_mozambique
			has_completed_focus = POR_colonial_administration_of_timor
			has_completed_focus = POR_colonial_administration_of_macau
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_restore_supreme_council_of_colonies"
			if = {
				limit = { has_idea = POR_ANG_colonial_administration_idea }
				swap_ideas = {
					remove_idea = POR_ANG_colonial_administration_idea
					add_idea = POR_ANG_colonial_administration_idea_2
				}
			}
			if = {
				limit = { has_idea = POR_MZB_colonial_administration_idea }
				swap_ideas = {
					remove_idea = POR_MZB_colonial_administration_idea
					add_idea = POR_MZB_colonial_administration_idea_2
				}
			}
			if = {
				limit = { has_idea = POR_TIM_colonial_administration_idea }
				swap_ideas = {
					remove_idea = POR_TIM_colonial_administration_idea
					add_idea = POR_TIM_colonial_administration_idea_2
				}
				else_if = {
					limit = { has_idea = POR_TIM_colonial_administration_idea_2 }
					swap_ideas = {
						remove_idea = POR_TIM_colonial_administration_idea_2
						add_idea = POR_TIM_colonial_administration_idea_3
					}
				}
			}
			if = {
				limit = { has_idea = POR_MKO_colonial_administration_idea }
				swap_ideas = {
					remove_idea = POR_MKO_colonial_administration_idea
					add_idea = POR_MKO_colonial_administration_idea_2
				}
			}
		}
	}
	
	focus = {
		id = POR_own_farms_for_africans
		icon = GFX_z_goal_own_farms_for_africans
		prerequisite = { focus = POR_land_reforms }
		prerequisite = { focus = POR_restore_supreme_council_of_colonies }
		x = 0
		y = 1
		relative_position_id = POR_land_reforms
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_own_farms_for_africans"
			swap_ideas = {
				remove_idea = POR_land_reforms
				add_idea = POR_land_reforms_2
			}
		}
	}
	
	focus = {
		id = POR_development_of_agriculture_in_colonies
		icon = GFX_z_goal_stimulating_development_of_farms
		prerequisite = { focus = POR_restore_supreme_council_of_colonies }
		x = 0
		y = 1
		relative_position_id = POR_restore_supreme_council_of_colonies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_republican_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_development_of_agriculture_in_colonies"
			if = {
				limit = { has_completed_focus = POR_introduce_compulsory_general_education }
				unlock_decision_tooltip = POR_finish_industrialization_of_country
			}
			random_controlled_state = {
				limit = { is_core_of = ANG }
				add_extra_state_shared_building_slots = 1
			}
			random_controlled_state = {
				limit = { is_core_of = MZB }
				add_extra_state_shared_building_slots = 1
			}
			random_controlled_state = {
				limit = { is_core_of = TIM }
				add_extra_state_shared_building_slots = 1
			}
			random_controlled_state = {
				limit = { is_core_of = MKO }
				add_extra_state_shared_building_slots = 1
			}
			hidden_effect = { country_event = { id = NWportugal.109 days = 10 } }
		}
	}
	
	focus = {
		id = POR_sugar_exports_from_madeira
		icon = GFX_z_goal_POR_sugar_exports_from_madeira
		prerequisite = { focus = POR_restore_supreme_council_of_colonies }
		x = 2
		y = 1
		relative_position_id = POR_restore_supreme_council_of_colonies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_available_cabinet_of_left_democratic_party_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_sugar_exports_from_madeira"
			add_political_power = -100
			add_ideas = POR_sugar_exports_from_madeira_idea
		}
	}
	

#####################################
##### PORTUGUESE LEGION SECTION #####
#####################################

	focus = {
		id = POR_creation_of_portuguese_legion
		icon = GFX_z_goal_POR_creation_of_portuguese_legion
		prerequisite = {
			focus = POR_strengthening_regime_pvde
			focus = POR_murder_of_salazar
		}
		mutually_exclusive = {
			focus = POR_maintain_neutrality_in_spanish_war
		}
		x = 16
		y = 1
		offset = {
			x = -53
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_peniche_prison_escape
			}
		}
		available = {
			has_government = neutrality
			OR = {
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_involve_military_to_maintain_order
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creation_of_portuguese_legion"
			add_ideas = POR_portuguese_legion_idea
		}
	}
	
	focus = {
		id = POR_portuguese_youth
		icon = GFX_z_goal_lessons_of_italian_ethiopian_war
		prerequisite = { focus = POR_creation_of_portuguese_legion }
		x = -1
		y = 1
		relative_position_id = POR_creation_of_portuguese_legion
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			OR = {
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_involve_military_to_maintain_order
			}
			set_temp_variable = { temp_var = 40 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_youth"
			add_ideas = POR_portuguese_youth
		}
	}
	
	focus = {
		id = POR_new_state
		icon = GFX_z_goal_new_country
		prerequisite = { focus = POR_portuguese_youth }
		x = 0
		y = 1
		relative_position_id = POR_portuguese_youth
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			OR = {
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_involve_military_to_maintain_order
			}
			set_temp_variable = { temp_var = 90 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_new_state"
			add_ideas = POR_estado_novo_idea
		}
	}
	
	focus = {
		id = POR_naval_brigade
		icon = GFX_z_goal_POR_naval_brigade
		prerequisite = { focus = POR_creation_of_portuguese_legion }
		x = 1
		y = 1
		relative_position_id = POR_creation_of_portuguese_legion
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = neutrality
			OR = {
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_involve_military_to_maintain_order
			}
			set_temp_variable = { temp_var = 50 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_naval_brigade"
			swap_ideas = {
				remove_idea = POR_portuguese_legion_idea
				add_idea = POR_portuguese_legion_idea_2
			}
		}
	}
	
	

########################################
##### MILITARY / ANARCHISM SECTION #####
########################################

	focus = {
		id = POR_murder_of_salazar
		icon = GFX_z_goal_murder_of_salazar
		
		mutually_exclusive = {
			focus = POR_revolt_against_salazar_regime
			focus = POR_formation_of_popular_front
			focus = POR_strengthening_regime_pvde
		}
		
		x = 26
		y = 0
		offset = {
			x = -5
			y = 0
			trigger = {
				has_completed_focus = POR_involve_military_to_maintain_order
			}
		}
		offset = {
			x = -53
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
		relative_position_id = POR_strengthening_regime_pvde
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_strengthening_regime_pvde
			}
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_murder_of_salazar"
			add_popularity = { ideology = anarchism popularity = 0.1 }
			add_country_leader_role = {
				character = POR_antonio_oscar_de_fragoso_carmona
				country_leader = {
					desc = "POLITICS_ANTONIO_OSCAR_DE_FRAGOSO_CARMONA_DESC"
					expire = "1965.1.1"
					ideology = despotism
					traits = {
					}
				}
				promote_leader = yes
			}
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_involve_military_to_maintain_order
		icon = GFX_z_goal_POR_involve_military_to_maintain_order
		prerequisite = { focus = POR_murder_of_salazar }
		mutually_exclusive = { focus = POR_peniche_prison_escape }
		x = -5
		y = 1
		offset = {
			x = 5
			y = 0
			trigger = {
				has_completed_focus = POR_involve_military_to_maintain_order
			}
		}
		relative_position_id = POR_murder_of_salazar
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_peniche_prison_escape
			}
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_involve_military_to_maintain_order"
			add_war_support = 0.1
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_enric_galvaos_soft_politics
		icon = GFX_z_goal_POR_enric_galvaos_soft_politics
		prerequisite = { focus = POR_involve_military_to_maintain_order }
		x = 0
		y = 1
		relative_position_id = POR_involve_military_to_maintain_order
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_idea = POR_riots_in_colonies
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_enric_galvaos_soft_politics"
			add_country_leader_role = {
				character = POR_henrique_galvao
				country_leader = {
					desc = "POLITICS_HENRIQUE_GALVAO_DESC"
					expire = "1965.1.1"
					ideology = moderatism
					traits = {
						proponent_of_lusotropicalism
					}
				}
				promote_leader = yes
			}
			hidden_effect = {
				news_event = { id = trworldnews.183 hours = 6 }
			}
		}
	}
	
	focus = {
		id = POR_unify_timor
		icon = GFX_z_goal_unify_timor
		prerequisite = { focus = POR_naval_brigade }
		prerequisite = { focus = POR_enric_galvaos_soft_politics }
		x = -4
		y = 1
		relative_position_id = POR_enric_galvaos_soft_politics
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
			1163 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_unify_timor"
			1163 = {
				add_claim_by = ROOT
				owner = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_defending_timor_from_japan
		icon = GFX_z_goal_defending_timor_from_japan
		prerequisite = { focus = POR_naval_brigade }
		prerequisite = { focus = POR_enric_galvaos_soft_politics }
		x = -2
		y = 1
		relative_position_id = POR_enric_galvaos_soft_politics
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_defending_timor_from_japan"
			721 = {
				add_building_construction = {
					type = bunker
					province = { id = 12190 id = 12206 }
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_save_conglolese
		icon = GFX_z_goal_congo_save_conglolese
		prerequisite = { focus = POR_enric_galvaos_soft_politics }
		x = 0
		y = 1
		relative_position_id = POR_enric_galvaos_soft_politics
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				num_divisions < 24
			}
		}
		available = {
			is_subject = no
		}
		bypass = {
			COG = {
				all_core_state = {
					owner = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_save_conglolese"
			every_state = {
				limit = {
					is_core_of = COG
					owner = { NOT = { tag = ROOT is_subject_of = ROOT } }
				}
				add_claim_by = ROOT
				owner = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_take_french_congo
		icon = GFX_z_goal_take_french_congo
		prerequisite = { focus = POR_save_conglolese }
		x = -4
		y = 1
		relative_position_id = POR_save_conglolese
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				num_divisions < 50
			}
		}
		available = {
			is_subject = no
		}
		bypass = {
			1005 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_take_french_congo"
			1005 = {
				add_claim_by = ROOT
				owner = {
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_nationalization_of_mining_factory
		icon = GFX_z_goal_mountain_prom_2
		prerequisite = { focus = POR_save_conglolese }
		x = -2
		y = 1
		relative_position_id = POR_save_conglolese
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			COG = {
				all_core_state = {
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
			}
			set_temp_variable = { temp_var = 60 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_nationalization_of_mining_factory"
			random_owned_controlled_state = {
				limit = {
					is_core_of = COG
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = COG
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_resource = {
				type = steel
				amount = 8
				state = 295
			}
		}
	}
	
	focus = {
		id = POR_uranium_mining_in_congo
		icon = GFX_z_goal_uranium_mining_in_congo
		prerequisite = { focus = POR_save_conglolese }
		x = 0
		y = 1
		relative_position_id = POR_save_conglolese
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			COG = {
				all_core_state = {
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
			}
			set_temp_variable = { temp_var = 90 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_uranium_mining_in_congo"
			add_ideas = POR_uranium_mining_in_congo
			random_owned_controlled_state = {
				limit = {
					is_core_of = COG
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_oblige_foreigners_to_comply_with_labor_standards_of_angolan_workers
		icon = GFX_goal_generic_production
		prerequisite = { focus = POR_enric_galvaos_soft_politics }
		x = 2
		y = 1
		relative_position_id = POR_enric_galvaos_soft_politics
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				any_of_scopes = {
					array = ANG.core_states
					tooltip = any_of_core_states_ANG_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
				any_of_scopes = {
					array = MZB.core_states
					tooltip = any_of_core_states_MZB_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
				721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
				729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			}
			set_temp_variable = { temp_var = 50 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_save_conglolese"
			set_temp_variable = { colony_stability_temp = 10 }
			if = {
				limit = {
					any_of_scopes = {
						array = ANG.core_states
						controller = { OR = { tag = ROOT is_subject_of = ROOT } }
					}
					has_variable = ANG_colony_stability_total
				}
				add_to_variable = { ANG_colony_stability_total = colony_stability_temp tooltip = ANG_colony_stability_tt }
				clamp_variable = { var = ANG_colony_stability_total min = 0.0 max = 100.00 }
			}
			if = {
				limit = {
					any_of_scopes = {
						array = MZB.core_states
						controller = { OR = { tag = ROOT is_subject_of = ROOT } }
					}
					has_variable = MZB_colony_stability_total
				}
				add_to_variable = { MZB_colony_stability_total = colony_stability_temp tooltip = MZB_colony_stability_tt }
				clamp_variable = { var = MZB_colony_stability_total min = 0.0 max = 100.00 }
			}
			if = {
				limit = {
					721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					has_variable = TIM_colony_stability_total
				}
				add_to_variable = { TIM_colony_stability_total = colony_stability_temp tooltip = TIM_colony_stability_tt }
				clamp_variable = { var = TIM_colony_stability_total min = 0.0 max = 100.00 }
			}
			if = {
				limit = {
					729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					has_variable = MKO_colony_stability_total
				}
				add_to_variable = { MKO_colony_stability_total = colony_stability_temp tooltip = MKO_colony_stability_tt }
				clamp_variable = { var = MKO_colony_stability_total min = 0.0 max = 100.00 }
			}
			
		}
	}
	
	focus = {
		id = POR_concept_of_increase_living_standards_and_incomes
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = POR_oblige_foreigners_to_comply_with_labor_standards_of_angolan_workers }
		x = 0
		y = 1
		relative_position_id = POR_oblige_foreigners_to_comply_with_labor_standards_of_angolan_workers
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { temp_var = 60 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_concept_of_increase_living_standards_and_incomes"
			remove_ideas = POR_riots_in_colonies
		}
	}
	

#####################################
##### MILITARY OUT MINI SECTION #####
#####################################

	focus = {
		id = POR_realize_dream_of_pink_map
		icon = GFX_focus_por_the_pink_map
		prerequisite = {
			focus = POR_adopt_republican_constitution
			focus = POR_concept_of_increase_living_standards_and_incomes
		}
		mutually_exclusive = { focus = POR_confirm_union_with_united_kingdom }
		x = 9
		y = 1
		offset = {
			x = -53
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
		}
		bypass = {
			controls_state = 922
			controls_state = 931
			controls_state = 1004
			controls_state = 1110
			controls_state = 545
			controls_state = 871
			controls_state = 1003
		}
		select_effect = {
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 922
						controls_state = 931
						controls_state = 1004
						controls_state = 1110
						controls_state = 545
						controls_state = 871
						controls_state = 1003
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_realize_dream_of_pink_map"
			ENG = { remove_opinion_modifier = { target = POR modifier = POR_anglo_portuguese_alliance } }
			remove_opinion_modifier = { target = ENG modifier = POR_anglo_portuguese_alliance }
			every_other_country = {
				limit = {
					NOT = { is_subject_of = ROOT }
					OR = {
						controls_state = 922
						controls_state = 931
						controls_state = 1004
						controls_state = 1110
						controls_state = 545
						controls_state = 871
						controls_state = 1003
					}
				}
				every_controlled_state = {
					limit = {
						OR = {
							state = 922
							state = 931
							state = 1004
							state = 1110
							state = 545
							state = 871
							state = 1003
						}
					}
					add_claim_by = ROOT
				}
				ROOT = {
					if = {
						limit = {
							NOT = { has_wargoal_against = PREV }
						}
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						add_ai_strategy = {
							type = antagonize
							id = PREV
							value = 200
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_union_with_germany
		icon = {
			trigger = {
				country_exists = GFA
			}
			value = GFX_z_goal_nazi_germany
		}
		icon = {
			trigger = {
				NOT = { country_exists = GFA }
			}
			value = GFX_z_goal_germany
		}
		dynamic = yes
		prerequisite = { focus = POR_realize_dream_of_pink_map }
		mutually_exclusive = { focus = POR_creating_sato }
		x = -1
		y = 1
		relative_position_id = POR_realize_dream_of_pink_map
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = no
			is_subject = no
			country_exists = GER
			GER = {
				has_civil_war = no
				is_faction_leader = yes
				NOT = {
					has_government = democratic
					has_government = communism
				}
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = GER
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_union_with_germany"
			GER = { country_event = { id = generic.2 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_divide_colonies_of_south_africa
		icon = GFX_z_goal_africa_flames
		prerequisite = { focus = POR_union_with_germany }
		x = 0
		y = 2
		relative_position_id = POR_union_with_germany
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_in_faction_with = GER
		}
		bypass = {
		}
		select_effect = {
			GER = {
				add_ai_strategy = {
					type = prepare_for_war
					id = NMB
					value = 100
				}
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = SAF
				value = 100
			}
		}
		
		will_lead_to_war_with = NMB
		will_lead_to_war_with = SAF
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_divide_colonies_of_south_africa"
			GER = {
				create_wargoal = {
					target = NMB
					type = annex_everything
					expire = 0
				}
				add_ai_strategy = {
					type = antagonize
					id = NMB
					value = 100
				}
			}
			every_state = {
				limit = { is_core_of = NMB }
				add_claim_by = GER
			}
			create_wargoal = {
				target = SAF
				type = annex_everything
				expire = 0
			}
			add_ai_strategy = {
				type = antagonize
				id = SAF
				value = 100
			}
			every_state = {
				limit = { is_core_of = SAF }
				add_claim_by = ROOT
			}
		}
	}
	
	focus = {
		id = POR_creating_sato
		icon = GFX_goal_generic_alliance
		prerequisite = { focus = POR_realize_dream_of_pink_map }
		mutually_exclusive = { focus = POR_union_with_germany }
		x = 1
		y = 1
		relative_position_id = POR_realize_dream_of_pink_map
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creating_sato"
			set_rule = { can_create_factions = yes }
			create_faction = POR_SATO
		}
	}
	
	focus = {
		id = POR_make_peace_with_muscat
		icon = GFX_z_goal_OMA_fall_of_muscat
		prerequisite = { focus = POR_creating_sato }
		x = -1
		y = 1
		relative_position_id = POR_creating_sato
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_faction_leader = yes
			OR = {
				AND = {
					country_exists = OMA
					OMA = {
						is_subject = no
						is_in_faction = no
					}
					NOT = { has_war_with = OMA }
					any_allied_country = { NOT = { has_war_with = OMA } }
				}
				AND = {
					country_exists = IOM
					IOM = {
						is_subject = no
						is_in_faction = no
					}
					NOT = { has_war_with = IOM }
					any_allied_country = { NOT = { has_war_with = IOM } }
				}
			}
		}
		bypass = {
			is_in_faction_with = OMA
			is_in_faction_with = IOM
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_make_peace_with_muscat"
			if = {
				limit = {
					country_exists = OMA
					OMA = {
						is_subject = no
						is_in_faction = no
						NOT = { has_war_with = ROOT }
					}
				}
				OMA = { country_event = { id = generic.5 hours = 3 } }
			}
			if = {
				limit = {
					country_exists = IOM
					IOM = {
						is_subject = no
						is_in_faction = no
						NOT = { has_war_with = ROOT }
					}
				}
				IOM = { country_event = { id = generic.5 hours = 3 } }
			}
		}
	}
	
	focus = {
		id = POR_recognize_ceylon
		icon = GFX_z_goal_SRL_VMS
		prerequisite = { focus = POR_creating_sato }
		x = 0
		y = 2
		relative_position_id = POR_creating_sato
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_faction_leader = yes
			country_exists = SRL
			SRL = {
				is_subject = no
				is_in_faction = no
			}
			NOT = { has_war_with = SRL }
			any_allied_country = { NOT = { has_war_with = SRL } }
		}
		bypass = {
			is_in_faction_with = SRL
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_recognize_ceylon"
			SRL = { country_event = { id = generic.5 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_renew_ties_with_brazil
		icon = GFX_z_goal_alliance_with_brazilian_integralists
		prerequisite = { focus = POR_creating_sato }
		x = 1
		y = 1
		relative_position_id = POR_creating_sato
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_faction_leader = yes
			country_exists = BRA
			BRA = {
				OR = {
					has_government = neutrality
					has_government = fascism
				}
				is_subject = no
				is_in_faction = no
			}
			NOT = { has_war_with = BRA }
			any_allied_country = { NOT = { has_war_with = BRA } }
		}
		bypass = {
			is_in_faction_with = BRA
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_renew_ties_with_brazil"
			BRA = { country_event = { id = generic.5 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_confirm_union_with_united_kingdom
		icon = GFX_z_goal_ally_with_eng
		prerequisite = {
			focus = POR_adopt_republican_constitution
			focus = POR_concept_of_increase_living_standards_and_incomes
		}
		mutually_exclusive = { focus = POR_realize_dream_of_pink_map }
		x = 6
		y = 1
		offset = {
			x = -53
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction = no
			is_subject = no
			country_exists = ENG
			ENG = {
				has_capitulated = no
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			is_in_faction_with = ENG
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_confirm_union_with_united_kingdom"
			ENG = { country_event = { id = generic.2 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_british_investment_in_tungsten_mining
		icon = GFX_focus_generic_tungsten
		prerequisite = { focus = POR_confirm_union_with_united_kingdom }
		x = 0
		y = 1
		relative_position_id = POR_confirm_union_with_united_kingdom
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction_with = ENG
			112 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_british_investment_in_tungsten_mining"
			add_resource = {
				type = tungsten
				amount = 40
				state = 112
			}
		}
	}
	
	focus = {
		id = POR_british_industrial_investment
		icon = GFX_z_goal_union_with_great_britain
		prerequisite = { focus = POR_british_investment_in_tungsten_mining }
		x = 0
		y = 1
		relative_position_id = POR_british_investment_in_tungsten_mining
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_in_faction_with = ENG
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_british_industrial_investment"
			add_opinion_modifier = { target = ENG modifier = POR_british_industrial_investment }
			ENG = { add_opinion_modifier = { target = ROOT modifier = POR_british_industrial_investment } }
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_deepening_policy_of_lusotropicalism
		icon = GFX_focus_por_luso_tropicalism
		prerequisite = {
			focus = POR_adopt_republican_constitution
			focus = POR_concept_of_increase_living_standards_and_incomes
		}
		x = 13
		y = 1
		offset = {
			x = -53
			y = 0
			trigger = {
				has_completed_focus = POR_murder_of_salazar
			}
		}
		relative_position_id = POR_adopt_republican_constitution
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_deepening_policy_of_lusotropicalism"
			custom_effect_tooltip = POR_deepening_policy_of_lusotropicalism_tt
			POR_ANG_number_of_assimilators_idea_up = yes
			POR_MZB_number_of_assimilators_idea_up = yes
			unlock_decision_category_tooltip = POR_colonial_policy_of_lusotropicalism_category
		}
	}
	
	focus = {
		id = POR_create_jobs_for_blacks
		icon = GFX_z_goal_black_workers
		prerequisite = { focus = POR_deepening_policy_of_lusotropicalism }
		x = -1
		y = 1
		relative_position_id = POR_deepening_policy_of_lusotropicalism
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { temp_var = 70 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_create_jobs_for_blacks"
			unlock_decision_tooltip = POR_create_jobs_for_congolese
			unlock_decision_tooltip = POR_create_jobs_for_rhodesians
			POR_ANG_number_of_assimilators_idea_up = yes
			POR_MZB_number_of_assimilators_idea_up = yes
			random_owned_controlled_state = {
				limit = {
					is_core_of = ANG
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = MZB
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_reduce_requirements_for_assimilados
		icon = GFX_z_goal_trade_unions_for_black
		prerequisite = { focus = POR_deepening_policy_of_lusotropicalism }
		x = 1
		y = 1
		relative_position_id = POR_deepening_policy_of_lusotropicalism
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_reduce_requirements_for_assimilados"
			unlock_decision_tooltip = POR_reduce_requirements_for_congolese
			unlock_decision_tooltip = POR_reduce_requirements_for_rhodesians
			POR_ANG_number_of_assimilators_idea_double_up = yes
			POR_MZB_number_of_assimilators_idea_double_up = yes
		}
	}
	
	focus = {
		id = POR_erase_borders_between_portuguese_and_assimilados
		icon = GFX_z_goal_erase_borders_between_portuguese_and_assimilados
		prerequisite = { focus = POR_create_jobs_for_blacks }
		prerequisite = { focus = POR_reduce_requirements_for_assimilados }
		x = 1
		y = 1
		relative_position_id = POR_create_jobs_for_blacks
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			set_temp_variable = { temp_var = 80 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_erase_borders_between_portuguese_and_assimilados"
			unlock_decision_tooltip = POR_assimilate_congolese
			unlock_decision_tooltip = POR_assimilate_rhodesians
			effect_tooltip = {
				ANG = { remove_ideas = POR_ANG_number_of_assimilators_idea_1 }
				MZB = { remove_ideas = POR_MZB_number_of_assimilators_idea_1 }
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = ANG
						is_core_of = MZB
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			swap_ideas = {
				remove_idea = POR_fragile_empire
				add_idea = POR_unprofitable_colonies_in_india
			}
			hidden_effect = {
				remove_ideas = {
					POR_ANG_number_of_assimilators_idea_1
					POR_ANG_number_of_assimilators_idea_2
					POR_ANG_number_of_assimilators_idea_3
					POR_ANG_number_of_assimilators_idea_4
					POR_ANG_number_of_assimilators_idea_5
					POR_ANG_number_of_assimilators_idea_6
					
					POR_MZB_number_of_assimilators_idea_1
					POR_MZB_number_of_assimilators_idea_2
					POR_MZB_number_of_assimilators_idea_3
					POR_MZB_number_of_assimilators_idea_4
					POR_MZB_number_of_assimilators_idea_5
					POR_MZB_number_of_assimilators_idea_6
				}
			}
		}
	}
	
	focus = {
		id = POR_first_university_of_angola
		icon = GFX_z_goal_first_university_of_angola
		prerequisite = { focus = POR_concept_of_increase_living_standards_and_incomes }
		x = 0
		y = 1
		relative_position_id = POR_concept_of_increase_living_standards_and_incomes
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_first_university_of_angola"
			add_ideas = POR_ANG_university_of_angola_idea
		}
	}
	
	focus = {
		id = POR_new_development_plan_for_angola
		icon = GFX_z_goal_POR_new_development_plan_for_angola
		prerequisite = { focus = POR_enric_galvaos_soft_politics }
		x = 3
		y = 4
		relative_position_id = POR_enric_galvaos_soft_politics
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
			set_temp_variable = { temp_var = 60 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_new_development_plan_for_angola"
			add_ideas = POR_ANG_new_development_plan_for_angola_idea
		}
	}
	
	focus = {
		id = POR_hydropower_development
		icon = GFX_focus_generic_hydroelectric_energy
		prerequisite = { focus = POR_new_development_plan_for_angola }
		x = -1
		y = 1
		relative_position_id = POR_new_development_plan_for_angola
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
			set_temp_variable = { temp_var = 70 }
			custom_trigger_tooltip = {
				tooltip = POR_building_corporate_state_more_trigger_tt
				check_variable = { POR_building_corporate_state = temp_var compare = greater_than_or_equals }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_hydropower_development"
			swap_ideas = {
				remove_idea = POR_ANG_new_development_plan_for_angola_idea
				add_idea = POR_ANG_new_development_plan_for_angola_idea_2
			}
		}
	}
	
	focus = {
		id = POR_development_of_transport_infrastructure
		icon = GFX_z_goal_deserted_road
		prerequisite = { focus = POR_new_development_plan_for_angola }
		x = 1
		y = 1
		relative_position_id = POR_new_development_plan_for_angola
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_development_of_transport_infrastructure"
			every_state = {
				limit = { is_owned_by = ANG }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_portuguese_investments_in_industry
		icon = GFX_focus_generic_africa_factory
		prerequisite = { focus = POR_hydropower_development }
		x = 0
		y = 1
		relative_position_id = POR_hydropower_development
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_investments_in_industry"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_port_of_mosamedish
		icon = GFX_focus_generic_africa_naval
		prerequisite = { focus = POR_hydropower_development }
		prerequisite = { focus = POR_development_of_transport_infrastructure }
		x = 0
		y = 1
		relative_position_id = POR_development_of_transport_infrastructure
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1045 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_port_of_mosamedish"
			1045 = {
				add_building_construction = {
					type = naval_base
					level = 2
					province = 12985
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_mosamedish_cannery
		icon = GFX_focus_generic_africa_production
		prerequisite = { focus = POR_portuguese_investments_in_industry }
		prerequisite = { focus = POR_port_of_mosamedish }
		x = 1
		y = 1
		relative_position_id = POR_portuguese_investments_in_industry
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1045 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_mosamedish_cannery"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	

#############################
##### ANARCHISM SECTION #####
#############################

	focus = {
		id = POR_peniche_prison_escape
		icon = GFX_z_goal_liberation
		prerequisite = { focus = POR_murder_of_salazar }
		mutually_exclusive = { focus = POR_involve_military_to_maintain_order }
		x = 6
		y = 1
		offset = {
			x = -6
			y = 0
			trigger = {
				has_completed_focus = POR_peniche_prison_escape
			}
		}
		relative_position_id = POR_murder_of_salazar
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			NOT = {
				has_completed_focus = POR_revolt_against_salazar_regime
				has_completed_focus = POR_formation_of_popular_front
				has_completed_focus = POR_strengthening_regime_pvde
				has_completed_focus = POR_involve_military_to_maintain_order
			}
		}
		available = {
			custom_trigger_tooltip = {
				always = no
				tooltip = TUR_focus_autocomplete_tt
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_peniche_prison_escape"
			ENG = { remove_opinion_modifier = { target = POR modifier = POR_anglo_portuguese_alliance } }
			remove_opinion_modifier = { target = ENG modifier = POR_anglo_portuguese_alliance }
			if = {
				limit = { has_global_flag = POR_helped_nazi_in_SCW_flag }
				clr_global_flag = POR_helped_nazi_in_SCW_flag
				every_other_country = {
					limit = {
						has_opinion_modifier = POR_helped_nazi_in_SCW
					}
					diplomatic_relation = {
						country = ROOT
						relation = docking_rights
						active = no
					}
					remove_opinion_modifier = { target = ROOT modifier = POR_helped_nazi_in_SCW }
				}
			}
			custom_effect_tooltip = available_theorist
			show_ideas_tooltip = POR_emidio_santana
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_alexandre_vieira
			show_ideas_tooltip = POR_jose_da_silva_santos_scratch
			show_ideas_tooltip = POR_aurelio_quintanilla
			NW_generate_all_anarchism_generic_character = yes
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = POR_anarchist_rallies
		icon = GFX_z_goal_POR_anarchist_rallies
		prerequisite = { focus = POR_peniche_prison_escape }
		x = 0
		y = 1
		relative_position_id = POR_peniche_prison_escape
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			has_government = anarchism
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_anarchist_rallies"
			unlock_decision_category_tooltip = POR_anarchy_in_portugal_category
			if = {
				limit = { anarchism < 0.4 }
				custom_effect_tooltip = POR_anarchist_rallies_tt
				effect_tooltip = { country_event = NWportugal.32 }
			}
			else = { country_event = { id = NWportugal.32 hours = 3 } }
		}
	}
	
	focus = {
		id = POR_abolition_of_discrimination_in_colonies
		icon = GFX_z_goal_mutual_aid
		prerequisite = { focus = POR_anarchist_rallies }
		mutually_exclusive = { focus = POR_emancipation_of_the_colonies }
		x = -6
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_abolition_of_discrimination_in_colonies"
			add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			add_ideas = POR_abolition_of_discrimination_in_colonies_idea
			unlock_decision_category_tooltip = POR_unification_with_colonies_category
		}
	}
	
	focus = {
		id = POR_emancipation_of_the_colonies
		icon = GFX_z_goal_stop_east_politic
		prerequisite = { focus = POR_anarchist_rallies }
		mutually_exclusive = { focus = POR_abolition_of_discrimination_in_colonies }
		x = -4
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				any_of_scopes = {
					array = ANG.core_states
					tooltip = any_of_core_states_ANG_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
				any_of_scopes = {
					array = MZB.core_states
					tooltip = any_of_core_states_MZB_tt
					controller = { OR = { tag = ROOT is_subject_of = ROOT } }
				}
				721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
				729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_emancipation_of_the_colonies"
			set_temp_variable = { temp2 = -200000 }
			every_controlled_state = {
				limit = { is_core_of = ANG }
				custom_effect_tooltip = minus_200k_manpower
				hidden_effect = {
					add_to_temp_variable = { temp1 = 1 }
					divide_temp_variable = { temp2 = temp1 }
					round_temp_variable = temp2
					add_manpower = temp2
					multiply_temp_variable = { temp2 = -1 }
					add_to_temp_variable = { temp_manpower = temp2 }
				}
			}
			if = {
				limit = { check_variable = { temp1 > 0 } }
				if = {
					limit = { NOT = { country_exists = ANG } }
					release = ANG
				}
				else = {
					every_controlled_state = {
						limit = { is_core_of = ANG }
						transfer_state_to = ANG
					}
					if = {
						limit = { ANG = { is_subject_of = ROOT } }
						set_autonomy = { target = ANG autonomy_state = autonomy_free end_wars = yes }
					}
				}
			}
			set_temp_variable = { temp4 = -200000 }
			every_controlled_state = {
				limit = { is_core_of = MZB }
				custom_effect_tooltip = minus_200k_manpower
				hidden_effect = {
					add_to_temp_variable = { temp3 = 1 }
					divide_temp_variable = { temp4 = temp3 }
					round_temp_variable = temp4
					add_manpower = temp4
					multiply_temp_variable = { temp4 = -1 }
					add_to_temp_variable = { temp_manpower = temp4 }
				}
			}
			if = {
				limit = { check_variable = { temp3 > 0 } }
				if = {
					limit = { NOT = { country_exists = MZB } }
					release = MZB
				}
				else = {
					every_controlled_state = {
						limit = { is_core_of = MZB }
						transfer_state_to = MZB
					}
					if = {
						limit = { MZB = { is_subject_of = ROOT } }
						set_autonomy = { target = MZB autonomy_state = autonomy_free end_wars = yes }
					}
				}
			}
			721 = { if = { limit = { is_controlled_by = ROOT } add_manpower = -40000	add_to_temp_variable = { temp_manpower = 40000 }	ROOT = { release = TIM } } }
			729 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_manpower = -5000	add_to_temp_variable = { temp_manpower = 5000 }
					random_neighbor_state = {
						limit = { owner = { is_literally_china = yes } }
						owner = { country_event = { id = NWportugal.114 hours = 6 } }
					}
				}
			}
			capital_scope = { add_manpower = temp_manpower }
			if = {
				limit = { has_country_flag = POR_colonies_ui_flag }
				clr_country_flag = POR_colonies_ui_flag
			}
			set_country_flag = POR_colonies_ideas_ui_block_flag
		}
	}
	
	focus = {
		id = POR_improving_working_conditions_in_colonies
		icon = GFX_z_goal_artisanal_production_of_weapons2
		prerequisite = {
			focus = POR_enric_galvaos_soft_politics
			focus = POR_abolition_of_discrimination_in_colonies
		}
		x = -1
		y = 1
		offset = {
			x = 5
			y = 0
			trigger = {
				has_completed_focus = POR_involve_military_to_maintain_order
			}
		}
		offset = {
			x = 1
			y = 0
			trigger = {
				has_completed_focus = POR_peniche_prison_escape
			}
		}
		relative_position_id = POR_abolition_of_discrimination_in_colonies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				AND = {
					has_government = anarchism
					has_civil_war = no
				}
				has_completed_focus = POR_enric_galvaos_soft_politics
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_improving_working_conditions_in_colonies"
			if = {
				limit = { has_government = anarchism }
				add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
				clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			}
			add_ideas = POR_improving_working_conditions_in_colonies_idea
			if = {
				limit = { NOT = { has_completed_focus = POR_involve_military_to_maintain_order } }
				swap_ideas = {
					remove_idea = POR_abolition_of_discrimination_in_colonies_idea
					add_idea = POR_abolition_of_discrimination_in_colonies_idea_2
				}
			}
			if = {
				limit = { has_government = anarchism }
				effect_tooltip = {
					ANG = { remove_ideas = POR_ANG_number_of_assimilators_idea_1 }
					MZB = { remove_ideas = POR_MZB_number_of_assimilators_idea_1 }
				}
				hidden_effect = {
					remove_ideas = {
						POR_ANG_number_of_assimilators_idea_1
						POR_ANG_number_of_assimilators_idea_2
						POR_ANG_number_of_assimilators_idea_3
						POR_ANG_number_of_assimilators_idea_4
						POR_ANG_number_of_assimilators_idea_5
						POR_ANG_number_of_assimilators_idea_6
						
						POR_MZB_number_of_assimilators_idea_1
						POR_MZB_number_of_assimilators_idea_2
						POR_MZB_number_of_assimilators_idea_3
						POR_MZB_number_of_assimilators_idea_4
						POR_MZB_number_of_assimilators_idea_5
						POR_MZB_number_of_assimilators_idea_6
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_open_schools_for_blacks
		icon = GFX_z_goal_Opening_of_the_school_of_Princes
		prerequisite = { focus = POR_improving_working_conditions_in_colonies }
		x = 0
		y = 1
		relative_position_id = POR_improving_working_conditions_in_colonies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_completed_focus = POR_expansion_of_catholic_and_protestant_schools
			has_completed_focus = POR_transfer_education_of_timorese_to_church
			has_completed_focus = POR_expand_access_to_education
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_open_schools_for_blacks"
			if = {
				limit = { has_government = anarchism }
				add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
				clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			}
			if = {
				limit = { NOT = { has_completed_focus = POR_involve_military_to_maintain_order } }
				swap_ideas = {
					remove_idea = POR_abolition_of_discrimination_in_colonies_idea_2
					add_idea = POR_abolition_of_discrimination_in_colonies_idea_3
				}
			}
			unlock_decision_tooltip = POR_open_schools_in_congo
			unlock_decision_tooltip = POR_open_schools_in_british_colonies
			custom_effect_tooltip = POR_in_all_colony_tt
			effect_tooltip = {
				remove_ideas = { POR_ANG_level_of_education_idea_3 }
			}
			hidden_effect = {
				remove_ideas = {
					POR_ANG_level_of_education_idea_3
					POR_MZB_level_of_education_idea_3
					POR_TIM_level_of_education_idea_3
				}
			}
			if = {
				limit = { has_completed_focus = POR_abolition_of_discrimination_in_colonies }
				unlock_decision_tooltip = POR_establish_equality
			}
		}
	}
	
	focus = {
		id = POR_journal_batalha
		icon = GFX_z_goal_POR_journal_batalha
		prerequisite = { focus = POR_anarchist_rallies }
		x = -1
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = anarchism
			has_civil_war = no
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_journal_batalha"
			add_ideas = POR_journal_batalha
			if = {
				limit = { has_completed_focus = POR_fight_against_remnants_of_corporatism has_completed_focus = POR_collectivization_of_factorys }
				unlock_decision_tooltip = POR_illuminate_workers_from_law_and_freedom
			}
		}
	}
	
	focus = {
		id = POR_help_spanish_anarchists
		icon = GFX_focus_spr_regional_defense_council_of_aragon
		prerequisite = { focus = POR_journal_batalha }
		x = -3
		y = 1
		relative_position_id = POR_journal_batalha
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				SPA = {
					any_enemy_country = {
						is_literally_spain = yes
						has_government = anarchism
					}
				}
				SPR = {
					any_enemy_country = {
						is_literally_spain = yes
						has_government = anarchism
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_spanish_anarchists"
			add_ideas = POR_volunteer_brigades
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = fma
			hidden_effect = {
				SPA = {
					every_enemy_country = {
						limit = {
							is_literally_spain = yes
							has_government = anarchism
						}
						ROOT = {
							add_ai_strategy = {
								type = send_volunteers_desire
								id = PREV
								value = 75
							}
							add_ai_strategy = {
								type = support
								id = PREV
								value = 50
							}
						}
					}
				}
				SPR = {
					every_enemy_country = {
						limit = {
							is_literally_spain = yes
							has_government = anarchism
						}
						ROOT = {
							add_ai_strategy = {
								type = send_volunteers_desire
								id = PREV
								value = 75
							}
							add_ai_strategy = {
								type = support
								id = PREV
								value = 50
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_recreate_iberian_anarchist_society
		icon = GFX_z_goal_struggle_for_anarchist_ideal
		prerequisite = { focus = POR_help_spanish_anarchists }
		x = 0
		y = 1
		relative_position_id = POR_help_spanish_anarchists
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				has_global_flag = scw_over
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_recreate_iberian_anarchist_society"
			if = {
				limit = {
					any_of_scopes = {
						array = global.is_literally_spain
						is_literally_spain = yes
						has_government = anarchism
						exists = yes
						is_subject = no
					}
				}
				every_other_country = {
					limit = {
						is_literally_spain = yes
						has_government = anarchism
						is_subject = no
						NOT = { has_war_with = ROOT }
					}
					country_event = { id = NWportugal.35 hours = 6 }
				}
			}
			else = {
				every_other_country = {
					limit = {
						is_literally_spain = yes
						NOT = {
							has_government = anarchism
							has_war_with = ROOT
						}
						ROOT = { NOT = { has_war_with_wargoal_against = { target = PREV } } }
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
						hidden_effect = {
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
							add_ai_strategy = {
								type = declare_war
								id = PREV
								value = 100
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_syndicalist_youth
		icon = GFX_z_goal_rely_on_your_own_strength
		prerequisite = { focus = POR_journal_batalha }
		x = -1
		y = 1
		relative_position_id = POR_journal_batalha
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_syndicalist_youth"
			add_ideas = POR_syndicalist_youth
		}
	}
	
	
	
	focus = {
		id = POR_election_of_new_cgt_chairman
		icon = GFX_z_goal_election_of_new_cgt_chairman
		prerequisite = { focus = POR_anarchist_rallies }
		x = 0
		y = 2
		relative_position_id = POR_anarchist_rallies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = anarchism
			has_civil_war = no
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_election_of_new_cgt_chairman"
			set_rule = { can_create_factions = yes }
			create_faction = POR_GCL
			custom_effect_tooltip = POR_election_of_new_cgt_chairman_tt
			
			set_temp_variable = { POR_working_spirit_temp_var = 1 }
			add_to_temp_variable = { POR_working_spirit_temp_var = num_faction_members }
			divide_temp_variable = { POR_working_spirit_temp_var = 100 }
			set_variable = { POR_working_spirit_var = POR_working_spirit_temp_var }
			add_dynamic_modifier = { modifier = POR_working_spirit_dyn }
			force_update_dynamic_modifier = yes
			
			country_event = { id = NWportugal.33 hours = 3 }
			hidden_effect = {
				country_event = { id = NWportugal.34 days = 70 }
			}
			
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_manuel_juaquim_de_sousa
			show_ideas_tooltip = POR_mario_castelhano
		}
	}
	
	focus = {
		id = POR_elimination_of_wage_and_patronage_system
		icon = GFX_z_goal_elimination_of_wage_money_and_patronage_system
		prerequisite = { focus = POR_anarchist_rallies }
		x = 1
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = anarchism
			has_civil_war = no
			has_completed_focus = POR_abolition_of_taxes_and_public_debt
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_elimination_of_wage_and_patronage_system"
			add_ideas = POR_lack_of_wages_idea
		}
	}
	
	focus = {
		id = POR_assistance_to_anarchist_trade_unions
		icon = GFX_z_goal_council_anarchism
		prerequisite = { focus = POR_elimination_of_wage_and_patronage_system }
		x = 1
		y = 1
		relative_position_id = POR_elimination_of_wage_and_patronage_system
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_assistance_to_anarchist_trade_unions"
			add_to_variable = { anarchism_unity_var = 10 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			
			unlock_decision_category_tooltip = POR_trade_union_assistance_category
		}
	}
	
	focus = {
		id = POR_foreign_propaganda
		icon = GFX_z_focus_propaganda_anarchist
		prerequisite = { focus = POR_syndicalist_youth }
		prerequisite = { focus = POR_election_of_new_cgt_chairman }
		mutually_exclusive = {
			focus = POR_training_of_anarchist_militants
			focus = POR_liga_operaria_de_expropriacao_economica
		}
		x = -2
		y = 1
		relative_position_id = POR_election_of_new_cgt_chairman
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_leader = { character = POR_mario_castelhano ruling_only = yes }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_foreign_propaganda"
			if = {
				limit = { has_dlc = "La Resistance" }
				add_ideas = POR_foreign_propaganda_LAR_idea
			}
			else = { add_ideas = POR_foreign_propaganda_vanila_idea }
		}
	}
	
	focus = {
		id = POR_training_of_anarchist_militants
		icon = GFX_z_goal_peoples_army_anarch
		prerequisite = { focus = POR_election_of_new_cgt_chairman }
		mutually_exclusive = {
			focus = POR_foreign_propaganda
			focus = POR_liga_operaria_de_expropriacao_economica
		}
		x = 0
		y = 1
		relative_position_id = POR_election_of_new_cgt_chairman
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_leader = { character = POR_emidio_santana ruling_only = yes }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_training_of_anarchist_militants"
			add_war_support = 0.1
			add_ideas = POR_training_of_anarchist_militants_idea
		}
	}
	
	focus = {
		id = POR_liga_operaria_de_expropriacao_economica
		icon = GFX_z_goal_prom_fabric
		prerequisite = { focus = POR_election_of_new_cgt_chairman }
		prerequisite = { focus = POR_assistance_to_anarchist_trade_unions }
		mutually_exclusive = {
			focus = POR_foreign_propaganda
			focus = POR_training_of_anarchist_militants
		}
		x = 2
		y = 1
		relative_position_id = POR_election_of_new_cgt_chairman
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_leader = { character = POR_manuel_juaquim_de_sousa ruling_only = yes }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_liga_operaria_de_expropriacao_economica"
			add_ideas = POR_liga_operaria_de_expropriacao_economica
		}
	}
	
	focus = {
		id = POR_establish_solidary_relations_with_working_centers_of_world
		icon = GFX_z_goal_HOL_the_emancipation_of_the_workers_is_the_work_of_the_workers_themselves
		prerequisite = {
			focus = POR_foreign_propaganda
			focus = POR_training_of_anarchist_militants
			focus = POR_liga_operaria_de_expropriacao_economica
		}
		x = 0
		y = 1
		relative_position_id = POR_training_of_anarchist_militants
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_establish_solidary_relations_with_working_centers_of_world"
			every_other_country = {
				limit = {
					is_left_ideology = yes
					NOT = { has_war_with = ROOT }
				}
				add_opinion_modifier = { target = ROOT modifier = POR_establish_solidary_relations_with_working_centers_of_world_op }
				ROOT = { add_opinion_modifier = { target = PREV modifier = POR_establish_solidary_relations_with_working_centers_of_world_op } }
			}
		}
	}
	
	focus = {
		id = POR_help_french_confederation_of_labor
		icon = GFX_z_goal_help_french_confederation_of_labor
		prerequisite = { focus = POR_recreate_iberian_anarchist_society }
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_alliance_with_brothers_from_france
		}
		x = -5
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			event_target:NW_france_scope = { NOT = { has_government = anarchism } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_french_confederation_of_labor"
			unlock_decision_category_tooltip = POR_help_french_confederation_of_labor_category
		}
	}
	
	focus = {
		id = POR_alliance_with_brothers_from_france
		icon = GFX_z_goal_alliance_with_anarchism_france
		prerequisite = { focus = POR_recreate_iberian_anarchist_society }
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_help_french_confederation_of_labor
		}
		x = -3
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_faction_leader = yes
			event_target:NW_france_scope = {
				has_government = anarchism
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			event_target:NW_france_scope = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_brothers_from_france"
			event_target:NW_france_scope = {
				set_country_flag = POR_alliance_with_brothers_flag
				country_event = { id = generic.5 hours = 3 }
			}
		}
	}
	
	focus = {
		id = POR_united_confederation_of_labor
		icon = GFX_z_goal_ITA_transformation_of_parliamentarism
		prerequisite = {
			focus = POR_help_french_confederation_of_labor
			focus = POR_alliance_with_brothers_from_france
		}
		x = 1
		y = 1
		relative_position_id = POR_help_french_confederation_of_labor
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				event_target:NW_france_scope = { is_subject_of = ROOT }
				all_of_scopes = {
					array = event_target:NW_france_scope.core_states
					tooltip = all_of_core_states_FRANCE_tt
					is_controlled_by = ROOT
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_united_confederation_of_labor"
			custom_effect_tooltip = POR_united_confederation_of_labor_tt
			hidden_effect = {
				event_target:NW_france_scope = {
					if = {
						limit = { is_subject_of = ROOT }
						ROOT = {
							annex_country = {
								target = PREV
								transfer_troops = yes
							}
						}
					}
					every_army_leader = {
						limit = { NOT = { has_trait = old_guard } }
						set_nationality = ROOT
					}
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = FRA
							is_core_of = FRC
							is_core_of = FRF
						}
						is_controlled_by = ROOT NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
					remove_core_of = FRA
					remove_core_of = FRC
					remove_core_of = FRF
				}
				set_cosmetic_tag = general_labor_confederation_cosmetic
			}
		}
	}
	
	focus = {
		id = POR_help_italian_federation_of_anarchists
		icon = GFX_z_goal_ITA_justice_and_freedom
		prerequisite = { focus = POR_united_confederation_of_labor }
		mutually_exclusive = {
			focus = POR_alliance_with_brothers_from_italy
		}
		x = -1
		y = 1
		relative_position_id = POR_united_confederation_of_labor
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			ITA = { NOT = { has_government = anarchism } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_italian_federation_of_anarchists"
			unlock_decision_category_tooltip = POR_help_italian_federation_of_anarchists_category
		}
	}
	
	focus = {
		id = POR_alliance_with_brothers_from_italy
		icon = GFX_z_focus_ITA_create_federation_of_anarchists_in_italy
		prerequisite = { focus = POR_united_confederation_of_labor }
		mutually_exclusive = {
			focus = POR_help_italian_federation_of_anarchists
		}
		x = 1
		y = 1
		relative_position_id = POR_united_confederation_of_labor
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_faction_leader = yes
			ITA = {
				has_government = anarchism
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			ITA = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_brothers_from_italy"
			ITA = {
				set_country_flag = POR_alliance_with_brothers_flag
				country_event = { id = generic.5 hours = 3 }
			}
		}
	}
	
	focus = {
		id = POR_help_alianca_libertaria
		icon = GFX_z_goal_help_alianca_libertaria_brazil
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_alliance_with_brothers_from_brazil
		}
		x = -1
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			BRA = { NOT = { has_government = anarchism } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_alianca_libertaria"
			unlock_decision_category_tooltip = POR_support_for_anarchists_in_brazil_category
		}
	}
	
	focus = {
		id = POR_alliance_with_brothers_from_brazil
		icon = GFX_z_goal_alliance_with_anarchism_brazil
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_help_alianca_libertaria
		}
		x = 1
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_faction_leader = yes
			BRA = {
				has_government = anarchism
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			BRA = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_brothers_from_brazil"
			BRA = {
				set_country_flag = POR_alliance_with_brothers_flag
				country_event = { id = generic.5 hours = 3 }
			}
		}
	}
	
	focus = {
		id = POR_help_argentine_federation_of_labor
		icon = GFX_z_goal_help_argentine_federation_of_labor_ARG
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_alliance_with_brothers_from_argentina
		}
		x = 3
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_argentine_federation_of_labor"
			unlock_decision_category_tooltip = POR_help_argentine_federation_of_labor_category
		}
	}
	
	focus = {
		id = POR_alliance_with_brothers_from_argentina
		icon = GFX_z_goal_alliance_with_anarchism_argentina
		prerequisite = { focus = POR_establish_solidary_relations_with_working_centers_of_world }
		mutually_exclusive = {
			focus = POR_help_argentine_federation_of_labor
		}
		x = 5
		y = 1
		relative_position_id = POR_establish_solidary_relations_with_working_centers_of_world
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_faction_leader = yes
			ARG = {
				has_government = anarchism
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			ARG = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_alliance_with_brothers_from_argentina"
			ARG = {
				set_country_flag = POR_alliance_with_brothers_flag
				country_event = { id = generic.5 hours = 3 }
			}
		}
	}
	
	focus = {
		id = POR_help_workers_federation
		icon = GFX_z_goal_help_workers_federation_BOL
		prerequisite = {
			focus = POR_help_alianca_libertaria
			focus = POR_alliance_with_brothers_from_brazil
			focus = POR_help_argentine_federation_of_labor
			focus = POR_alliance_with_brothers_from_argentina
		}
		mutually_exclusive = {
			focus = POR_form_an_alliance_with_sisters_and_brothers_from_bolivia
		}
		x = 0
		y = 1
		relative_position_id = POR_alliance_with_brothers_from_brazil
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			BOL = { NOT = { has_government = anarchism } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_help_workers_federation"
			unlock_decision_category_tooltip = POR_help_workers_federation_category
		}
	}
	
	focus = {
		id = POR_form_an_alliance_with_sisters_and_brothers_from_bolivia
		icon = GFX_z_goal_alliance_with_anarchism_bolivia
		prerequisite = {
			focus = POR_help_alianca_libertaria
			focus = POR_alliance_with_brothers_from_brazil
			focus = POR_help_argentine_federation_of_labor
			focus = POR_alliance_with_brothers_from_argentina
		}
		mutually_exclusive = {
			focus = POR_help_workers_federation
		}
		x = 0
		y = 1
		relative_position_id = POR_help_argentine_federation_of_labor
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			is_subject = no
			is_faction_leader = yes
			BOL = {
				has_government = anarchism
				is_subject = no
				is_in_faction = no
				NOT = { has_war_with = ROOT }
			}
		}
		bypass = {
			BOL = { is_in_faction_with = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_form_an_alliance_with_sisters_and_brothers_from_bolivia"
			BOL = {
				set_country_flag = POR_alliance_with_brothers_flag
				country_event = { id = generic.5 hours = 3 }
			}
		}
	}
	
	
	
	focus = {
		id = POR_declaration_of_religious_freedoms
		icon = GFX_z_goal_religious_consensus
		prerequisite = { focus = POR_anarchist_rallies }
		x = 4
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_declaration_of_religious_freedoms"
			add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			if = {
				limit = { has_idea = POR_influence_of_church_1 }
				remove_ideas = POR_influence_of_church_1
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_2 }
				remove_ideas = POR_influence_of_church_2
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_3 }
				remove_ideas = POR_influence_of_church_3
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_4 }
				remove_ideas = POR_influence_of_church_4
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_5 }
				remove_ideas = POR_influence_of_church_5
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_6 }
				remove_ideas = POR_influence_of_church_6
			}
			else_if = {
				limit = { has_idea = POR_influence_of_church_7 }
				remove_ideas = POR_influence_of_church_7
			}
		}
	}
	
	focus = {
		id = POR_fight_against_remnants_of_corporatism
		icon = GFX_z_goal_start_fight_with_the_mulatto_elite
		prerequisite = { focus = POR_anarchist_rallies }
		x = 7
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_civil_war = no
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_fight_against_remnants_of_corporatism"
			unlock_decision_category_tooltip = POR_fight_against_remnants_of_corporatism_category
		}
	}
	
	focus = {
		id = POR_social_reorganization_program
		icon = GFX_z_goal_social_laws_2
		prerequisite = { focus = POR_anarchist_rallies }
		x = 9
		y = 1
		relative_position_id = POR_anarchist_rallies
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
			country_event = { id = NWportugal.115 hours = 5 }
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_social_reorganization_program"
			custom_effect_tooltip = on_select_focus_tt
			effect_tooltip = { country_event = { id = NWportugal.115 hours = 5 } }
			custom_effect_tooltip = n3_tt
			custom_effect_tooltip = on_completion_focus_tt
			add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
		}
	}
	
	
	
	focus = {
		id = POR_general_workers_union_of_northern_region
		icon = GFX_z_goal_voluntary_creation_of_collective
		prerequisite = { focus = POR_elimination_of_wage_and_patronage_system }
		x = 3
		y = 1
		relative_position_id = POR_elimination_of_wage_and_patronage_system
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = NWportugal_34_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_general_workers_union_of_northern_region"
			add_to_variable = { anarchism_unity_var = 10 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			
			if = {
				limit = { 180 = { has_dynamic_modifier = { modifier = POR_dissenting_unions_dyn } }  }
				180 = { remove_dynamic_modifier = { modifier = POR_dissenting_unions_dyn } }
			}
			
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_serafim_cardoso_lucena
		}
	}
	
	focus = {
		id = POR_industrialize_artisanal_production_of_shoes_in_port
		icon = GFX_z_goal_prom_country
		prerequisite = { focus = POR_general_workers_union_of_northern_region }
		x = -1
		y = 2
		relative_position_id = POR_general_workers_union_of_northern_region
		
		cost = 7.2
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			controls_state = 180
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_industrialize_artisanal_production_of_shoes_in_port"
			180 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_grant_asylum_and_citizenship_to_jewish_refugees
		icon = GFX_z_goal_cooperation_with_jews
		prerequisite = { focus = POR_general_workers_union_of_northern_region }
		x = 0
		y = 1
		relative_position_id = POR_general_workers_union_of_northern_region
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_grant_asylum_and_citizenship_to_jewish_refugees"
			random_owned_controlled_state = {
				prioritize = { 180 }
				add_manpower = 5000
			}
			add_ideas = POR_refugees_from_fascism_idea
		}
	}
	
	focus = {
		id = POR_collectivization_of_factorys
		icon = GFX_z_goal_federation_anarchists
		prerequisite = { focus = POR_elimination_of_wage_and_patronage_system }
		prerequisite = { focus = POR_social_reorganization_program }
		x = 5
		y = 1
		relative_position_id = POR_elimination_of_wage_and_patronage_system
		
		cost = 20
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_collectivization_of_factorys"
			if = {
				limit = { has_completed_focus = POR_fight_against_remnants_of_corporatism has_completed_focus = POR_journal_batalha }
				unlock_decision_tooltip = POR_illuminate_workers_from_law_and_freedom
			}
			if = {
				limit = { has_completed_focus = POR_fight_against_remnants_of_corporatism }
				unlock_decision_tooltip = POR_select_directors_from_workers
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_industrialization_of_society
		icon = GFX_z_goal_industry_work
		prerequisite = { focus = POR_collectivization_of_factorys }
		x = 0
		y = 1
		relative_position_id = POR_collectivization_of_factorys
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_industrialization_of_society"
			if = {
				limit = { has_idea = POR_semi_agrarian_society }
				remove_ideas = POR_semi_agrarian_society
			}
			add_ideas = POR_carrying_out_industrialization_idea
		}
	}
	
	focus = {
		id = POR_abolition_of_taxes_and_public_debt
		icon = GFX_z_goal_war_tax
		prerequisite = { focus = POR_fight_against_remnants_of_corporatism }
		prerequisite = { focus = POR_social_reorganization_program }
		x = 1
		y = 1
		relative_position_id = POR_fight_against_remnants_of_corporatism
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_abolition_of_taxes_and_public_debt"
			add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			swap_ideas = {
				remove_idea = POR_social_reorganization_program
				add_idea = POR_social_reorganization_program_2
			}
		}
	}
	
	focus = {
		id = POR_abolition_of_private_property
		icon = GFX_z_goal_abolition_of_private_property
		prerequisite = { focus = POR_collectivization_of_factorys }
		prerequisite = { focus = POR_abolition_of_taxes_and_public_debt }
		x = 2
		y = 1
		relative_position_id = POR_collectivization_of_factorys
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_abolition_of_private_property"
			add_to_variable = { anarchism_unity_var = 5 tooltip = anarchism_unity_add_effect }
			clamp_variable = { var = anarchism_unity_var min = 0 max = 100 }
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			swap_ideas = {
				remove_idea = POR_social_reorganization_program_2
				add_idea = POR_social_reorganization_program_3
			}
			if = {
				limit = { has_completed_focus = POR_fight_against_remnants_of_corporatism }
				unlock_decision_tooltip = POR_abolish_objectionable_enterprises
			}
		}
	}
	
	focus = {
		id = POR_free_medical_care
		icon = GFX_z_goal_med
		prerequisite = { focus = POR_social_reorganization_program }
		x = 0
		y = 3
		relative_position_id = POR_social_reorganization_program
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_free_medical_care"
			add_ideas = POR_free_medical_care
			every_core_state = {
				limit = { is_controlled_by = ROOT }
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_prohibition_of_alcohol
		icon = GFX_z_goal_anti_alcohol
		prerequisite = { focus = POR_free_medical_care }
		x = 0
		y = 1
		relative_position_id = POR_free_medical_care
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_prohibition_of_alcohol"
			swap_ideas = {
				remove_idea = POR_free_medical_care
				add_idea = POR_free_medical_care_2
			}
		}
	}
	
	focus = {
		id = POR_achieving_mutualism
		icon = GFX_z_goal_mutualism
		prerequisite = { focus = POR_industrialization_of_society }
		prerequisite = { focus = POR_abolition_of_private_property }
		prerequisite = { focus = POR_prohibition_of_alcohol }
		x = -2
		y = 1
		relative_position_id = POR_prohibition_of_alcohol
		
		cost = 10
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_achieving_mutualism"
			add_ideas = POR_achieving_mutualism_idea
			unlock_decision_category_tooltip = generic_peoples_bank_category
			capital_scope = {
				custom_effect_tooltip = generic_create_peoples_bank_in_region_tt2
				set_state_flag = has_peoples_bank_flag
			}
			effect_tooltip = {
				add_ideas = peoples_bank_idea_1
			}
			hidden_effect = {
				set_actual_peoples_bank_idea = yes
			}
		}
	}
	

#######################################
##### COLONIAL MOZAMBIQUE SECTION #####
#######################################

	focus = {
		id = POR_colonial_administration_of_mozambique
		icon = GFX_z_goal_colonial_administration_of_mozambique
		x = -7
		y = 1
		relative_position_id = POR_deal_with_the_japanese_threat
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = MZB.core_states
				tooltip = any_of_core_states_MZB_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_colonial_administration_of_mozambique"
			add_political_power = 25
			add_ideas = POR_MZB_colonial_administration_idea
			unlock_decision_tooltip = POR_round_up_discontented_in_mozambique
		}
	}
	
	focus = {
		id = POR_coal_mining_in_mozambique
		icon = GFX_z_goal_copper_and_coal
		prerequisite = { focus = POR_colonial_administration_of_mozambique }
		x = -2
		y = 1
		relative_position_id = POR_colonial_administration_of_mozambique
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				owns_state = 544
				544 = { controller = { is_subject_of = ROOT } }
			}
		}
		bypass = {
			544 = {
				has_state_flag = mosambic_infrastructure_developed
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_coal_mining_in_mozambique"
			unlock_decision_category_tooltip = POR_mosambic_colonies_desicions_category
			544 = {
				set_state_flag = mosambic_infrastructure_developed
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_continue_salazars_planned_economy
		icon = GFX_z_goal_POR_continue_salazars_planned_economy
		prerequisite = { focus = POR_colonial_administration_of_mozambique }
		x = 0
		y = 1
		relative_position_id = POR_colonial_administration_of_mozambique
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			NOT = {
				has_government = neutrality
				has_government = monarchy
			}
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_salazars_planned_economy"
			add_ideas = POR_MZB_mozambiques_planned_economy_idea
		}
	}
	
	
	focus = {
		id = POR_modernizing_mozambiques_cities
		icon = GFX_z_goal_modernizing_mozambiques_cities
		prerequisite = { focus = POR_colonial_administration_of_mozambique }
		x = 2
		y = 1
		relative_position_id = POR_colonial_administration_of_mozambique
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_modernizing_mozambiques_cities"
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_manpower = 50000
				set_state_category = city
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_increase_cotton_production
		icon = GFX_z_goal_hlop_prom
		prerequisite = { focus = POR_continue_salazars_planned_economy }
		x = -2
		y = 1
		relative_position_id = POR_continue_salazars_planned_economy
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_increase_cotton_production"
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_pick_up_territories_of_mozambique_company
		icon = GFX_z_goal_pick_up_territories_of_mozambique_company
		prerequisite = { focus = POR_continue_salazars_planned_economy }
		x = 2
		y = 1
		relative_position_id = POR_continue_salazars_planned_economy
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
			has_government = monarchy
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_pick_up_territories_of_mozambique_company"
			set_global_flag = POR_pick_up_territories_of_mozambique_company_flag
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	
	focus = {
		id = POR_expand_access_to_education
		icon = GFX_z_goal_islamic_education
		prerequisite = { focus = POR_pick_up_territories_of_mozambique_company }
		x = 0
		y = 1
		relative_position_id = POR_pick_up_territories_of_mozambique_company
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_access_to_education"
			swap_ideas = {
				remove_idea = POR_MZB_level_of_education_idea_1
				add_idea = POR_MZB_level_of_education_idea_3
			}
		}
	}
	
	focus = {
		id = POR_return_control_of_mozambique_to_companies
		icon = GFX_z_goal_contacts_with_foreign_companies_2
		prerequisite = { focus = POR_pick_up_territories_of_mozambique_company }
		x = 2
		y = 1
		relative_position_id = POR_pick_up_territories_of_mozambique_company
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = monarchy
			any_of_scopes = {
				array = MZB.core_states
				tooltip = any_of_core_states_MZB_tt
				is_controlled_by = ROOT
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_control_of_mozambique_to_companies"
			add_to_variable = { MZB_colony_stability_total = 10 tooltip = MZB_colony_stability_tt }
			clamp_variable = { var = MZB_colony_stability_total min = 0.0 max = 100.00 }
		}
	}
	
	focus = {
		id = POR_return_territories_to_mozambique_company
		icon = GFX_z_goal_return_territories_to_mozambique_company
		prerequisite = { focus = POR_expand_access_to_education }
		prerequisite = { focus = POR_return_control_of_mozambique_to_companies }
		x = 0
		y = 1
		relative_position_id = POR_expand_access_to_education
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = monarchy
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
			hidden_trigger = { NOT = { has_global_flag = POR_pick_up_territories_of_mozambique_company_flag } }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_return_territories_to_mozambique_company"
			add_political_power = 150
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				hidden_effect = { add_state_modifier = { modifier = { local_building_slots = -1 } } }
				effect_tooltip = { add_extra_state_shared_building_slots = -1 }
			}
		}
	}
	
	focus = {
		id = POR_restore_niassa_company
		icon = GFX_z_goal_european_colonial_company
		prerequisite = { focus = POR_expand_access_to_education }
		prerequisite = { focus = POR_return_control_of_mozambique_to_companies }
		x = 0
		y = 1
		relative_position_id = POR_return_control_of_mozambique_to_companies
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = monarchy
			any_of_scopes = {
				array = MZB.core_states
				tooltip = any_of_core_states_MZB_tt
				is_controlled_by = ROOT
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_restore_niassa_company"
			add_to_variable = { MZB_colony_stability_total = 10 tooltip = MZB_colony_stability_tt }
			clamp_variable = { var = MZB_colony_stability_total min = 0.0 max = 100.00 }
		}
	}
	
	focus = {
		id = POR_invest_in_mozambiques_royal_campaigns
		icon = GFX_z_goal_restaurate_monarchy
		prerequisite = { focus = POR_return_territories_to_mozambique_company }
		prerequisite = { focus = POR_restore_niassa_company }
		x = 0
		y = 1
		relative_position_id = POR_return_territories_to_mozambique_company
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_government = monarchy
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_invest_in_mozambiques_royal_campaigns"
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_amelia_nyasa_railway
		icon = GFX_focus_generic_africa_infrastructure
		prerequisite = { focus = POR_restore_niassa_company }
		x = 0
		y = 1
		relative_position_id = POR_restore_niassa_company
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			544 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_amelia_nyasa_railway"
			add_political_power = -200
			add_resource = {
				type = steel
				amount = 12
				state = 544
			}
			build_railway = {
				path = {
					2123 2217 10972
				}
				level = 1
			}
		}
	}
	
	focus = {
		id = POR_integration_of_traditional_authorities
		icon = GFX_z_goal_POR_integration_of_traditional_authorities
		prerequisite = { focus = POR_continue_salazars_planned_economy }
		x = 0
		y = 1
		relative_position_id = POR_continue_salazars_planned_economy
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = MZB.core_states
				tooltip = any_of_core_states_MZB_tt
				is_controlled_by = ROOT
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_integration_of_traditional_authorities"
			unlock_decision_tooltip = POR_recruit_regulars_from_ordinary_residents_of_northern_mozambique
			unlock_decision_tooltip = POR_recruit_regulars_from_ordinary_residents_of_southern_mozambique
			unlock_decision_tooltip = POR_bribe_the_leaders_of_northern_mozambique
			unlock_decision_tooltip = POR_bribe_the_leaders_of_southern_mozambique
		}
	}
	
	focus = {
		id = POR_resume_semiannual_testing
		icon = GFX_z_goal_black_workers
		prerequisite = { focus = POR_integration_of_traditional_authorities }
		x = -2
		y = 1
		relative_position_id = POR_integration_of_traditional_authorities
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_bribe_the_leaders_of_northern_mozambique_completed_flag
			has_country_flag = POR_bribe_the_leaders_of_southern_mozambique_completed_flag
			any_of_scopes = {
				array = MZB.core_states
				tooltip = any_of_core_states_MZB_tt
				controller = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_resume_semiannual_testing"
			add_to_variable = { MZB_colony_stability_total = -10 tooltip = MZB_colony_stability_tt }
			clamp_variable = { var = MZB_colony_stability_total min = 0.0 max = 100.00 }
			
			remove_ideas = POR_MZB_lack_of_labor_idea
		}
	}
	
	focus = {
		id = POR_export_of_cashews_to_metropolis
		icon = GFX_z_goal_export_of_cashews_to_metropolis
		prerequisite = { focus = POR_resume_semiannual_testing }
		x = -1
		y = 2
		relative_position_id = POR_resume_semiannual_testing
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_cashews_to_metropolis"
			POR_MZB_export_of_goods_from_mozambique_idea_up = yes
		}
	}
	
	focus = {
		id = POR_export_of_tea_to_metropolis
		icon = GFX_z_goal_export_of_tea_to_metropolis
		prerequisite = { focus = POR_resume_semiannual_testing }
		x = 0
		y = 1
		relative_position_id = POR_resume_semiannual_testing
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_tea_to_metropolis"
			POR_MZB_export_of_goods_from_mozambique_idea_up = yes
		}
	}
	
	focus = {
		id = POR_export_of_rice_to_metropolis
		icon = GFX_z_goal_export_of_rice_to_metropolis
		prerequisite = { focus = POR_resume_semiannual_testing }
		x = 2
		y = 1
		relative_position_id = POR_resume_semiannual_testing
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_rice_to_metropolis"
			POR_MZB_export_of_goods_from_mozambique_idea_up = yes
		}
	}
	
	
	focus = {
		id = POR_provincial_decree_of_portugal
		icon = GFX_z_goal_provincial_decree
		prerequisite = { focus = POR_integration_of_traditional_authorities }
		x = 0
		y = 1
		relative_position_id = POR_integration_of_traditional_authorities
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_flag = POR_recruit_regulars_from_ordinary_residents_of_northern_mozambique_completed_flag
			has_country_flag = POR_recruit_regulars_from_ordinary_residents_of_southern_mozambique_completed_flag
			has_country_flag = POR_bribe_the_leaders_of_northern_mozambique_completed_flag
			has_country_flag = POR_bribe_the_leaders_of_southern_mozambique_completed_flag
			OR = {
				544 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				983 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_provincial_decree_of_portugal"
			add_to_variable = { MZB_colony_stability_total = 5 tooltip = MZB_colony_stability_tt }
			clamp_variable = { var = MZB_colony_stability_total min = 0.0 max = 100.00 }
			
			add_ideas = POR_MZB_control_of_agriculture_idea
			every_state = {
				limit = {
					OR = {
						state = 544
						state = 983
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	
	
##################################
##### COLONIAL TIMOR SECTION #####
##################################
	
	focus = {
		id = POR_colonial_administration_of_timor
		icon = GFX_z_goal_colonial_administration_of_timor
		x = 8
		y = 0
		relative_position_id = POR_colonial_administration_of_mozambique
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_colonial_administration_of_timor"
			add_political_power = 25
			add_ideas = POR_TIM_colonial_administration_idea
			unlock_decision_tooltip = POR_round_up_discontented_in_timor
		}
	}
	
	focus = {
		id = POR_timor_coffee_exports
		icon = GFX_z_goal_timor_coffee_exports
		prerequisite = { focus = POR_colonial_administration_of_timor }
		x = -4
		y = 1
		relative_position_id = POR_colonial_administration_of_timor
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_timor_coffee_exports"
			add_ideas = POR_TIM_export_of_goods_from_timor_idea_1
		}
	}
	
	focus = {
		id = POR_sandalwood_exports
		icon = GFX_z_goal_sandalwood_exports
		prerequisite = { focus = POR_timor_coffee_exports }
		x = 0
		y = 1
		relative_position_id = POR_timor_coffee_exports
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_timor_coffee_exports"
			swap_ideas = {
				remove_idea = POR_TIM_export_of_goods_from_timor_idea_1
				add_idea = POR_TIM_export_of_goods_from_timor_idea_2
			}
		}
	}
	
	focus = {
		id = POR_sale_of_sapt_shares_in_japan
		icon = GFX_z_goal_sale_of_sapt_shares_in_japan
		prerequisite = { focus = POR_colonial_administration_of_timor }
		x = -2
		y = 1
		relative_position_id = POR_colonial_administration_of_timor
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_sale_of_sapt_shares_in_japan"
			POR_TIM_economic_decline_idea_down = yes
		}
	}
	
	focus = {
		id = POR_sapt_rubber_cultivation
		icon = GFX_z_goal_sapt_rubber_cultivation
		prerequisite = { focus = POR_sale_of_sapt_shares_in_japan }
		prerequisite = { focus = POR_force_local_workers_to_work }
		x = 0
		y = 1
		relative_position_id = POR_sale_of_sapt_shares_in_japan
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_sapt_rubber_cultivation"
			add_resource = {
				type = rubber
				amount = 15
				state = 721
			}
		}
	}
	
	focus = {
		id = POR_force_local_workers_to_work
		icon = GFX_z_goal_handicraft_workshops
		prerequisite = { focus = POR_colonial_administration_of_timor }
		x = 0
		y = 1
		relative_position_id = POR_colonial_administration_of_timor
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_force_local_workers_to_work"
			add_to_variable = { TIM_colony_stability_total = -10 tooltip = TIM_colony_stability_tt }
			clamp_variable = { var = TIM_colony_stability_total min = 0.0 max = 100.00 }
			POR_TIM_economic_decline_idea_down = yes
			remove_ideas = POR_TIM_lack_of_labor_idea
			hidden_effect = {
				country_event = { id = NWportugal.18 days = 30 }
			}
		}
	}
	
	focus = {
		id = POR_continue_creating_native_villages
		icon = GFX_z_goal_Cupe_nalog
		prerequisite = { focus = POR_sale_of_sapt_shares_in_japan }
		prerequisite = { focus = POR_force_local_workers_to_work }
		x = 0
		y = 1
		relative_position_id = POR_force_local_workers_to_work
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_creating_native_villages"
			unlock_decision_tooltip = POR_resettlement_on_the_island_of_maluku
			unlock_decision_tooltip = POR_resettlement_in_the_province_of_lauten
			unlock_decision_tooltip = POR_resettlement_in_the_province_of_manatuto
			unlock_decision_tooltip = POR_resettlement_in_the_province_of_dili
			unlock_decision_tooltip = POR_resettlement_in_the_province_of_manufahi
			unlock_decision_tooltip = POR_resettlement_in_the_province_of_oekussa
		}
	}
	
	focus = {
		id = POR_transfer_education_of_timorese_to_church
		icon = GFX_z_goal_education_of_timorese_to_church
		prerequisite = { focus = POR_continue_creating_native_villages }
		x = -2
		y = 1
		relative_position_id = POR_continue_creating_native_villages
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
			has_country_flag = POR_resettlement_on_the_island_of_maluku_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_lauten_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manatuto_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_dili_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manufahi_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_oekussa_completed_flag
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_transfer_education_of_timorese_to_church"
			swap_ideas = {
				remove_idea = POR_TIM_level_of_education_idea_2
				add_idea = POR_TIM_level_of_education_idea_3
			}
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_establish_agricultural_production
		icon = GFX_z_goal_agrarian_reform
		prerequisite = { focus = POR_continue_creating_native_villages }
		x = 0
		y = 1
		relative_position_id = POR_continue_creating_native_villages
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
			has_country_flag = POR_resettlement_on_the_island_of_maluku_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_lauten_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manatuto_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_dili_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manufahi_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_oekussa_completed_flag
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_establish_agricultural_production"
			721 = {
				add_manpower = 500
				add_extra_state_shared_building_slots = 1
			}
			POR_TIM_economic_decline_idea_down = yes
		}
	}
	
	focus = {
		id = POR_start_restoring_agriculture
		icon = GFX_z_goal_agriculture
		prerequisite = { focus = POR_establish_agricultural_production }
		x = 0
		y = 1
		relative_position_id = POR_establish_agricultural_production
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			has_idea = POR_TIM_level_of_agriculture_idea_2
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_start_restoring_agriculture"
			add_to_variable = { TIM_colony_stability_total = 10 tooltip = TIM_colony_stability_tt }
			clamp_variable = { var = TIM_colony_stability_total min = 0.0 max = 100.00 }
		
			remove_ideas = POR_TIM_level_of_agriculture_idea_2
		}
	}
	
	focus = {
		id = POR_strengthen_administrative_control
		icon = GFX_z_goal_arab_control_over_the_tribes
		prerequisite = { focus = POR_continue_creating_native_villages }
		x = 2
		y = 1
		relative_position_id = POR_continue_creating_native_villages
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
			has_country_flag = POR_resettlement_on_the_island_of_maluku_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_lauten_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manatuto_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_dili_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_manufahi_completed_flag
			has_country_flag = POR_resettlement_in_the_province_of_oekussa_completed_flag
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_strengthen_administrative_control"
			POR_TIM_economic_decline_idea_down = yes
			if = {
				limit = { has_idea = POR_TIM_colonial_administration_idea }
				swap_ideas = {
					remove_idea = POR_TIM_colonial_administration_idea
					add_idea = POR_TIM_colonial_administration_idea_2
				}
				else_if = {
					limit = { has_idea = POR_TIM_colonial_administration_idea_2 }
					swap_ideas = {
						remove_idea = POR_TIM_colonial_administration_idea_2
						add_idea = POR_TIM_colonial_administration_idea_3
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_timor_volunteer_units
		icon = GFX_z_goal_chinese_soldiers
		prerequisite = { focus = POR_force_local_workers_to_work }
		prerequisite = { focus = POR_white_officers_and_sergeants }
		x = 3
		y = 1
		relative_position_id = POR_force_local_workers_to_work
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			JAP = { has_war = yes }
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_timor_volunteer_units"
			add_to_variable = { TIM_colony_stability_total = -10 tooltip = TIM_colony_stability_tt }
			clamp_variable = { var = TIM_colony_stability_total min = 0.0 max = 100.00 }
			hidden_effect = {
				if = {
					limit = { NOT = { has_template = "Colonial Division" } }
					division_template = {
						name = "Colonial Division"
						regiments = {
							infantry = { x = 0 y = 0 }
						}
					}
				}
			}
			721 = {
				create_unit = {
					division = "name = \"Colonial Division\" division_template = \"Colonial Division\" start_experience_factor = 0.2"
					owner = PREV
					count = 1
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_summon_timorese_garrison
		icon = GFX_z_goal_recruiting_stations
		prerequisite = { focus = POR_timor_volunteer_units }
		prerequisite = { focus = POR_equipment_for_colonial_army }
		x = 1
		y = 1
		relative_position_id = POR_timor_volunteer_units
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			JAP = { has_war = yes }
			721 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_summon_timorese_garrison"
			add_to_variable = { TIM_colony_stability_total = -10 tooltip = TIM_colony_stability_tt }
			clamp_variable = { var = TIM_colony_stability_total min = 0.0 max = 100.00 }
			hidden_effect = {
				if = {
					limit = { NOT = { has_template = "Colonial Division" } }
					division_template = {
						name = "Colonial Division"
						regiments = {
							infantry = { x = 0 y = 0 }
						}
					}
				}
			}
			721 = {
				create_unit = {
					division = "name = \"Colonial Division\" division_template = \"Colonial Division\" start_experience_factor = 0.2"
					owner = PREV
					count = 1
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	

############################################
##### PORTUGUESE COLONIAL ARMY SECTION #####
############################################

	focus = {
		id = POR_portuguese_colonial_army
		icon = GFX_z_goal_colonial_army
		x = 5
		y = 0
		relative_position_id = POR_colonial_administration_of_timor
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_colonial_army"
			army_experience = 10
			hidden_effect = {
				if = {
					limit = { NOT = { has_character = POR_francisco_craveiro_lopes } }
					random_other_country = {
						limit = { has_character = POR_francisco_craveiro_lopes }
						POR_francisco_craveiro_lopes = { set_nationality = ROOT }
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_francisco_craveiro_lopes
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = POR_francisco_craveiro_lopes_high_command
		}
	}
	
	focus = {
		id = POR_white_officers_and_sergeants
		icon = GFX_z_goal_white_officers_and_sergeants
		prerequisite = { focus = POR_portuguese_colonial_army }
		x = -2
		y = 1
		relative_position_id = POR_portuguese_colonial_army
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_white_officers_and_sergeants"
			add_ideas = POR_white_officers_and_sergeants_idea
		}
	}
	
	focus = {
		id = POR_black_population_recruitment
		icon = GFX_z_goal_black_population_recruitment
		prerequisite = { focus = POR_portuguese_colonial_army }
		x = 0
		y = 1
		relative_position_id = POR_portuguese_colonial_army
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_black_population_recruitment"
			add_ideas = POR_black_population_recruitment_idea
		}
	}
	
	focus = {
		id = POR_equipment_for_colonial_army
		icon = GFX_z_goal_from_spears_to_rifles
		prerequisite = { focus = POR_white_officers_and_sergeants }
		prerequisite = { focus = POR_black_population_recruitment }
		x = 0
		y = 1
		relative_position_id = POR_black_population_recruitment
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_equipment_for_colonial_army"
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_strengthening_of_island_garrisons
		icon = GFX_goal_generic_defence
		prerequisite = { focus = POR_equipment_for_colonial_army }
		x = 1
		y = 1
		relative_position_id = POR_equipment_for_colonial_army
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_strengthening_of_island_garrisons"
			705 = {
				add_building_construction = {
					type = bunker
					province = { id = 13015 }
					level = 1
					instant_build = yes
				}
			}
			702 = {
				add_building_construction = {
					type = bunker
					province = { id = 13014 }
					level = 1
					instant_build = yes
				}
			}
			698 = {
				add_building_construction = {
					type = bunker
					province = { id = 1751 }
					level = 1
					instant_build = yes
				}
			}
			697 = {
				add_building_construction = {
					type = bunker
					province = { id = 3118 }
					level = 1
					instant_build = yes
				}
			}
			721 = {
				add_building_construction = {
					type = bunker
					province = { id = 12206 id = 12190 }
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_border_control
		icon = GFX_z_goal_border_control
		prerequisite = { focus = POR_portuguese_colonial_army }
		x = 2
		y = 1
		relative_position_id = POR_portuguese_colonial_army
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_border_control"
			add_ideas = POR_border_control
		}
	}
	
	focus = {
		id = POR_integrate_cabinda
		icon = GFX_z_goal_integrate_cabinda
		prerequisite = { focus = POR_border_control }
		x = 0
		y = 1
		relative_position_id = POR_border_control
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1056 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
			1056 = { is_core_of = ROOT }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_integrate_cabinda"
			add_state_core = 1056
		}
	}
	
	focus = {
		id = POR_oil_in_cabindu
		icon = GFX_z_goal_oil_in_cabindu
		prerequisite = { focus = POR_integrate_cabinda }
		prerequisite = { focus = POR_create_dta_airline }
		x = 1
		y = 1
		relative_position_id = POR_integrate_cabinda
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1056 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_oil_in_cabindu"
			add_resource = {
				type = oil
				amount = 14
				state = 1056
			}
		}
	}
	
	focus = {
		id = POR_expand_alcohol_factories
		icon = GFX_z_goal_Armored_control
		prerequisite = { focus = POR_oil_in_cabindu }
		x = 0
		y = 1
		relative_position_id = POR_oil_in_cabindu
		
		cost = 3
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			540 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_alcohol_factories"
			540 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	

###################################
##### COLONIAL ANGOLA SECTION #####
###################################

	focus = {
		id = POR_colonial_administration_of_angola
		icon = GFX_z_goal_colonial_administration_of_angola
		x = 8
		y = 0
		relative_position_id = POR_portuguese_colonial_army
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_colonial_administration_of_angola"
			add_political_power = 25
			add_ideas = POR_ANG_colonial_administration_idea
			unlock_decision_tooltip = POR_round_up_discontented_in_angola
		}
	}
	
	focus = {
		id = POR_west_african_transport_administration
		icon = GFX_focus_generic_africa_production
		prerequisite = { focus = POR_colonial_administration_of_angola }
		x = -3
		y = 1
		relative_position_id = POR_colonial_administration_of_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_west_african_transport_administration"
			if = {
				limit = {
					1045 = {
						owner = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				1045 = {
					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 1
						province = 12958
						instant_build = yes
					}
				}
			}
			every_state = {
				limit = {
					is_core_of = ANG
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_create_dta_airline
		icon = GFX_z_goal_POR_create_dta_airline
		prerequisite = { focus = POR_west_african_transport_administration }
		x = -1
		y = 1
		relative_position_id = POR_west_african_transport_administration
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			540 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_create_dta_airline"
			540 = {
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_expand_seaports
		icon = GFX_z_goal_generic_naval
		prerequisite = { focus = POR_west_african_transport_administration }
		prerequisite = { focus = POR_luanda_railway }
		x = 0
		y = 3
		relative_position_id = POR_west_african_transport_administration
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				540 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
				1045 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_seaports"
			every_state = {
				limit = {
					OR = {
						state = 540
						state = 1045
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_building_construction = {
					type = naval_base
					level = 2
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_export_of_sisal
		icon = GFX_z_goal_export_of_sisal
		prerequisite = { focus = POR_expand_seaports }
		x = -2
		y = 1
		relative_position_id = POR_expand_seaports
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_sisal"
			POR_ANG_export_of_angolan_goods_idea_up = yes
		}
	}
	
	focus = {
		id = POR_export_of_coffe
		icon = GFX_z_goal_export_of_coffe
		prerequisite = { focus = POR_expand_seaports }
		x = 0
		y = 1
		relative_position_id = POR_expand_seaports
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_coffe"
			POR_ANG_export_of_angolan_goods_idea_up = yes
		}
	}
	
	focus = {
		id = POR_export_of_sugar
		icon = GFX_z_goal_export_of_sugar
		prerequisite = { focus = POR_expand_seaports }
		x = 2
		y = 1
		relative_position_id = POR_expand_seaports
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_sugar"
			POR_ANG_export_of_angolan_goods_idea_up = yes
		}
	}
	
	focus = {
		id = POR_export_of_cotton
		icon = GFX_z_goal_export_of_cotton
		prerequisite = { focus = POR_expand_seaports }
		x = 4
		y = 1
		relative_position_id = POR_expand_seaports
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_export_of_cotton"
			POR_ANG_export_of_angolan_goods_idea_up = yes
		}
	}
	
	focus = {
		id = POR_angola_portuguese_goods_market
		icon = GFX_z_goal_POR_angola_portuguese_goods_market
		prerequisite = { focus = POR_export_of_sisal }
		prerequisite = { focus = POR_export_of_coffe }
		prerequisite = { focus = POR_export_of_sugar }
		prerequisite = { focus = POR_export_of_cotton }
		x = 1
		y = 1
		relative_position_id = POR_export_of_coffe
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_country_leader = { character = POR_henrique_galvao ruling_only = yes }
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_angola_portuguese_goods_market"
			POR_ANG_export_of_angolan_goods_idea_up = yes
		}
	}
	
	focus = {
		id = POR_continue_mosamedes_railway_to_mines
		icon = GFX_z_goal_railway_green
		prerequisite = { focus = POR_west_african_transport_administration }
		x = 1
		y = 1
		relative_position_id = POR_west_african_transport_administration
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1045 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_mosamedes_railway_to_mines"
			build_railway = {
				path = {
					12958 12985 8202 12391
				}
				level = 1
			}
		}
	}
	
	focus = {
		id = POR_luanda_railway
		icon = GFX_z_goal_four_track_railway
		prerequisite = { focus = POR_continue_mosamedes_railway_to_mines }
		x = 0
		y = 1
		relative_position_id = POR_continue_mosamedes_railway_to_mines
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			540 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_luanda_railway"
			build_railway = {
				path = {
					8248 14510 12981
				}
				level = 1
			}
		}
	}
	
	focus = {
		id = POR_expand_ore_production_in_central_provinces
		icon = GFX_z_goal_gold_mines
		prerequisite = { focus = POR_continue_mosamedes_railway_to_mines }
		x = 2
		y = 1
		relative_position_id = POR_continue_mosamedes_railway_to_mines
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1045 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_ore_production_in_central_provinces"
			add_resource = {
				type = steel
				amount = 8
				state = 1045
			}
		}
	}
	
	focus = {
		id = POR_expand_rubber_farms
		icon = GFX_z_goal_cotton_ceilon
		prerequisite = { focus = POR_luanda_railway }
		prerequisite = { focus = POR_expand_ore_production_in_central_provinces }
		x = 1
		y = 1
		relative_position_id = POR_luanda_railway
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			1044 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_rubber_farms"
			add_resource = {
				type = rubber
				amount = 12
				state = 1044
			}
		}
	}
	
	focus = {
		id = POR_angolan_manganese_mining
		icon = GFX_z_goal_mountain_industry
		prerequisite = { focus = POR_expand_ore_production_in_central_provinces }
		x = 1
		y = 1
		relative_position_id = POR_expand_ore_production_in_central_provinces
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			540 = { owner = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_angolan_manganese_mining"
			540 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			unlock_decision_category_tooltip = POR_angola_colonies_desicions_category
		}
	}
	
	focus = {
		id = POR_issue_of_new_denominations_of_angolan_banknotes
		icon = GFX_z_goal_issue_of_new_denominations_of_angolan_banknotes
		prerequisite = { focus = POR_colonial_administration_of_angola }
		x = 0
		y = 1
		relative_position_id = POR_colonial_administration_of_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_issue_of_new_denominations_of_angolan_banknotes"
			add_political_power = 50
		}
	}
	
	focus = {
		id = POR_urban_expansion_in_angola
		icon = GFX_z_goal_soviet_civil_city1
		prerequisite = { focus = POR_colonial_administration_of_angola }
		x = 3
		y = 1
		relative_position_id = POR_colonial_administration_of_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				540 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				1045 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_urban_expansion_in_angola"
			every_state = {
				limit = {
					OR = {
						state = 540
						state = 1045
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_manpower = 50000
				set_state_category = city
			}
		}
	}
	
	focus = {
		id = POR_establishment_of_national_parks_in_angola
		icon = GFX_z_goal_agrar_country
		prerequisite = { focus = POR_urban_expansion_in_angola }
		x = -2
		y = 1
		relative_position_id = POR_urban_expansion_in_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_establishment_of_national_parks_in_angola"
			add_to_variable = { ANG_colony_stability_total = 5 tooltip = ANG_colony_stability_tt }
			clamp_variable = { var = ANG_colony_stability_total min = 0.0 max = 100.00 }
			
			every_state = {
				limit = {
					is_core_of = ANG
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	
	focus = {
		id = POR_modernization_and_industrialization_of_angolan_cities
		icon = GFX_z_goal_modernizing_mozambiques_cities
		prerequisite = { focus = POR_urban_expansion_in_angola }
		x = 0
		y = 1
		relative_position_id = POR_urban_expansion_in_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				540 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				1045 = {
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_modernization_and_industrialization_of_angolan_cities"
			every_state = {
				limit = {
					OR = {
						state = 540
						state = 1045
					}
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			POR_ANG_debts_of_local_residents_idea_down = yes
		}
	}
	
	focus = {
		id = POR_creating_sports_facilities_in_angola
		icon = GFX_focus_ETH_the_state_bank_of_ethiopia
		prerequisite = { focus = POR_establishment_of_national_parks_in_angola }
		prerequisite = { focus = POR_modernization_and_industrialization_of_angolan_cities }
		x = 1
		y = 1
		relative_position_id = POR_establishment_of_national_parks_in_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creating_sports_facilities_in_angola"
			add_to_variable = { ANG_colony_stability_total = 5 tooltip = ANG_colony_stability_tt }
			clamp_variable = { var = ANG_colony_stability_total min = 0.0 max = 100.00 }
			
			swap_ideas = {
				remove_idea = POR_ANG_number_of_assimilators_idea_2
				add_idea = POR_ANG_number_of_assimilators_idea_3
			}
		}
	}
	
	focus = {
		id = POR_baptist_settlements
		icon = GFX_z_goal_OMA_call_to_citizens
		prerequisite = { focus = POR_urban_expansion_in_angola }
		x = 2
		y = 1
		relative_position_id = POR_urban_expansion_in_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_baptist_settlements"
			every_state = {
				limit = {
					is_core_of = ANG
					owner = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
				add_manpower = 20000
			}
			POR_influence_of_church_up = yes
		}
	}
	
	
	focus = {
		id = POR_expansion_of_catholic_and_protestant_schools
		icon = GFX_z_goal_school_neutral
		prerequisite = { focus = POR_modernization_and_industrialization_of_angolan_cities }
		prerequisite = { focus = POR_baptist_settlements }
		x = -1
		y = 1
		relative_position_id = POR_baptist_settlements
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expansion_of_catholic_and_protestant_schools"
			swap_ideas = {
				remove_idea = POR_ANG_level_of_education_idea_2
				add_idea = POR_ANG_level_of_education_idea_3
			}
			POR_influence_of_church_up = yes
		}
	}
	
	focus = {
		id = POR_introduction_of_labor_reforms
		icon = GFX_z_goal_social_laws_2
		prerequisite = { focus = POR_creating_sports_facilities_in_angola }
		prerequisite = { focus = POR_expansion_of_catholic_and_protestant_schools }
		x = 1
		y = 1
		relative_position_id = POR_creating_sports_facilities_in_angola
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			any_of_scopes = {
				array = ANG.core_states
				tooltip = any_of_core_states_ANG_tt
				owner = { OR = { tag = ROOT is_subject_of = ROOT } }
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_introduction_of_labor_reforms"
			POR_ANG_debts_of_local_residents_idea_down = yes
		}
	}
	
	

##############################################
##### INFRASTRUCTURE DEVELOPMENT SECTION #####
##############################################

	focus = {
		id = POR_continue_infrastructure_development
		text = POR_continue_the_public_works
		icon = GFX_z_goal_POR_continue_infrastructure_development
		x = 13
		y = 0
		relative_position_id = POR_colonial_administration_of_angola
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				has_full_control_of_state = 180 #PORTO
				has_full_control_of_state = 181 #GUARDA
				has_full_control_of_state = 795 #SANTAREM
				has_full_control_of_state = 179 #BEJA
				has_full_control_of_state = 112 #LISBON
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_continue_infrastructure_development"
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}	
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				795 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}	
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}

					add_building_construction = {
						type = naval_base
						level = 2
						province = 11805					
						instant_build = yes
					}				
				}
			}
			add_ideas = POR_improved_production
		}
	}
	
	focus = {
		id = POR_widespread_construction_of_primary_schools
		icon = GFX_z_goal_school_neutral
		prerequisite = { focus = POR_continue_infrastructure_development }
		x = -2
		y = 1
		relative_position_id = POR_continue_infrastructure_development
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			NOT = { has_idea = POR_lack_of_education_of_portuguese }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_widespread_construction_of_primary_schools"
			remove_ideas = POR_lack_of_education_of_portuguese
		}
	}
	
	focus = {
		id = POR_instituto_superior_tecnico
		icon = GFX_z_goal_POR_instituto_superior_tecnico
		prerequisite = { focus = POR_widespread_construction_of_primary_schools }
		x = -3
		y = 1
		relative_position_id = POR_widespread_construction_of_primary_schools
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_instituto_superior_tecnico"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = POR_ogme
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = POR_instituto_superior_tecnico }
		x = -1
		y = 1
		relative_position_id = POR_instituto_superior_tecnico
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_ogme"
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = ogme
		}
	}
	
	focus = {
		id = POR_portuguese_artillery
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = POR_ogme }
		x = -2
		y = 1
		relative_position_id = POR_ogme
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_artillery"
			add_tech_bonus = {
				name = POR_portuguese_artillery
			    bonus = 1.0
			    uses = 1
			    category = artillery
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}			
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = fma
		}
	}
	
	focus = {
		id = POR_advanced_artillery
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = POR_portuguese_artillery }
		x = 0
		y = 1
		relative_position_id = POR_portuguese_artillery
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_advanced_artillery"
			add_tech_bonus = {
				name = POR_advanced_artillery
			    bonus = 1.0
			    uses = 2
			    category = artillery
			}
			add_doctrine_cost_reduction = {
				name = POR_advanced_artillery
				cost_reduction = 0.9
				uses = 1
				category = land_doctrine
				category = naval_doctrine
			}
		}
	}
	
	focus = {
		id = POR_military_equipment
		text = POR_military_vehicles
		icon = GFX_z_goal_motorization_of_army
		prerequisite = { focus = POR_ogme }
		x = 0
		y = 1
		relative_position_id = POR_ogme
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_military_equipment"
			add_tech_bonus = {
				name = POR_military_vehicles
			    bonus = 1.0
			    uses = 1
			    category = motorized_equipment
			}
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_bet_for_armored_vehicles
		text = POR_armor_focus
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = POR_military_equipment }
		x = 0
		y = 1
		relative_position_id = POR_military_equipment
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_bet_for_armored_vehicles"
			if = {
				limit = { has_full_control_of_state = 112 }	
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory		
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_armor_focus
			    bonus = 1.0
			    uses = 1
			    category = armor
			}
		}
	}
	
	focus = {
		id = POR_bet_on_combat_vehicles
		text = POR_mechanized_focus
		icon = GFX_goal_generic_build_tank
		prerequisite = { focus = POR_bet_for_armored_vehicles }
		x = 0
		y = 1
		relative_position_id = POR_bet_for_armored_vehicles
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_bet_on_combat_vehicles"
			add_tech_bonus = {
				name = POR_mechanized_focus
			    bonus = 1.0
			    uses = 1
			    category = cat_mechanized_equipment
			}
		}
	}
	
	focus = {
		id = POR_ogma
		icon = GFX_z_goal_POR_ogma
		prerequisite = { focus = POR_instituto_superior_tecnico }
		x = 1
		y = 1
		relative_position_id = POR_instituto_superior_tecnico
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_ogma"
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = ogma
		}
	}
	
	focus = {
		id = POR_bet_on_light_aviation
		text = POR_light_aircraft_focus
		icon = GFX_goal_generic_air_fighter2
		prerequisite = { focus = POR_ogma }
		x = 0
		y = 1
		relative_position_id = POR_ogma
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_bet_on_light_aviation"
			add_tech_bonus = {
				name = POR_light_aircraft_focus
			    bonus = 1.0
			    uses = 1
			    category = light_air
			}
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory		
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			air_experience = 25
		}
	}
	
	focus = {
		id = POR_advanced_light_aircraft
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = POR_bet_on_light_aviation }
		x = 0
		y = 1
		relative_position_id = POR_bet_on_light_aviation
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_advanced_light_aircraft"
			add_tech_bonus = {
				name = POR_advanced_light_aircraft
			    bonus = 1.0
			    uses = 1
			    category = light_air
			}
			air_experience = 50
			add_ideas = POR_advanced_light_aircraft
		}
	}
	
	focus = {
		id = POR_jet_research
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = POR_advanced_light_aircraft }
		x = 0
		y = 1
		relative_position_id = POR_advanced_light_aircraft
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_jet_research"
			add_tech_bonus = {
				name = POR_jet_research
			    bonus = 1.0
			    uses = 1
			    category = jet_technology
			}
		}
	}
	
	focus = {
		id = POR_air_base_no_4
		icon = GFX_z_goal_reforming_aviation_division
		prerequisite = { focus = POR_ogma }
		x = 2
		y = 1
		relative_position_id = POR_ogma
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			controls_state = 698
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_air_base_no_4"
			698 = {
				add_building_construction = {
					type = air_base		
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_textile_industry
		icon = GFX_goal_generic_trade
		prerequisite = { focus = POR_widespread_construction_of_primary_schools }
		x = 0
		y = 1
		relative_position_id = POR_widespread_construction_of_primary_schools
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				has_full_control_of_state = 179
				has_full_control_of_state = 112
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_textile_industry"
			if = {
				limit = { has_full_control_of_state = 179 }	
				179 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex		
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex		
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				795 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex		
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_construction_of_new_bridges
		icon = GFX_z_goal_new_brigdes
		prerequisite = { focus = POR_textile_industry }
		x = 1
		y = 1
		relative_position_id = POR_textile_industry
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_construction_of_new_bridges"
			if = {
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
						is_on_continent = europe
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
				}
				every_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						is_on_continent = europe
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				every_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = infrastructure
							size > 0
						}
					}
					random_select_amount = 5
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_food_industries
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = POR_continue_infrastructure_development }
		x = 0
		y = 1
		relative_position_id = POR_continue_infrastructure_development
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				has_full_control_of_state = 180
				has_full_control_of_state = 181
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_food_industries"
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex		
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex		
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_mining_industry
		text = POR_extraction_industries
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = POR_food_industries }
		x = 0
		y = 1
		relative_position_id = POR_food_industries
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			OR = {
				has_full_control_of_state = 112
				has_full_control_of_state = 795
			}
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_mining_industry"
			if = {
				limit = { has_full_control_of_state = 112 }	
				unlock_decision_tooltip = POR_develop_lisbon_tungsten_deposits
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				unlock_decision_tooltip = POR_develop_santarem_chromium_deposits
			}
		}
	}
	
	focus = {
		id = POR_creating_an_hcesar_keyboard
		icon = GFX_z_goal_develop_keyboard
		prerequisite = { focus = POR_continue_infrastructure_development }
		x = 2
		y = 1
		relative_position_id = POR_continue_infrastructure_development
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_creating_an_hcesar_keyboard"
			add_tech_bonus = {
				name = POR_claviature
				bonus = 1.0
				uses = 1
				category = electronics
			}
		}
	}
	
	focus = {
		id = POR_university_lisbon
		icon = GFX_z_goal_university_lisbon
		prerequisite = { focus = POR_creating_an_hcesar_keyboard }
		x = 0
		y = 1
		relative_position_id = POR_creating_an_hcesar_keyboard
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			num_of_factories > 30
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_university_lisbon"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = POR_law_on_electrification
		icon = GFX_z_goal_law_on_electrification
		prerequisite = { focus = POR_creating_an_hcesar_keyboard }
		prerequisite = { focus = POR_university_lisbon }
		x = -1
		y = 1
		relative_position_id = POR_university_lisbon
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_law_on_electrification"
			add_tech_bonus = {
				name = POR_law_on_electrification
				bonus = 0.75
				uses = 2
				category = electronics
			}
		}
	}
	
	focus = {
		id = POR_law_on_reorganization_and_development_of_industry
		icon = GFX_z_goal_industrial_soviet
		prerequisite = { focus = POR_construction_of_new_bridges }
		prerequisite = { focus = POR_law_on_electrification }
		x = 0
		y = 1
		relative_position_id = POR_law_on_electrification
		
		cost = 7.15
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_law_on_reorganization_and_development_of_industry"
			add_tech_bonus = {
				name = POR_law_on_electrification
				bonus = 1
				ahead_reduction = 1
				uses = 2
				category = industry
			}
		}
	}
	

########################
##### ARMY SECTION #####
########################

	focus = {
		id = POR_army_reorganization
		text = POR_army_reorganization_NW
		available = {
		}

		bypass = {
			NOT = { has_idea = POR_an_unreliable_army }
		}
		prerequisite = {
		}
		icon = GFX_z_goal_POR_army_reorganization
		x = -3	
		y = 0

		relative_position_id = POR_invest_in_mozambiques_royal_campaigns
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_army_reorganization"
			remove_ideas = POR_an_unreliable_army
			army_experience	= 15
			add_stability = -0.05
		}
	}
	
	focus = {
		id = POR_standardization
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_army_reorganization }
		icon = GFX_z_goal_support_artisanal_fishing_weapons
		x = -1		
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_standardization"
			add_ideas = POR_standardization
			if = {
				limit = { has_tech = advanced_infantry_weapons }
				create_equipment_variant = {
					type = infantry_equipment_3
					parent_version = 1
					upgrades = {
						inf_prom_upgrade = 5
					}
				}
			}
			else_if = {
				limit = { has_tech = improved_infantry_weapons }
				create_equipment_variant = {
					type = infantry_equipment_2
					parent_version = 1
					upgrades = {
						inf_prom_upgrade = 5
					}
				}
			}
			else_if = {
				limit = { has_tech = infantry_weapons1 }
				create_equipment_variant = {
					type = infantry_equipment_1
					parent_version = 1
					upgrades = {
						inf_prom_upgrade = 5
					}
				}
			}
			else = {
				create_equipment_variant = {
					type = infantry_equipment_0
					parent_version = 1
					upgrades = {
						inf_prom_upgrade = 5
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_defend_the_borders
		available = {
			OR = {
				has_full_control_of_state = 112
				has_full_control_of_state = 180
				has_full_control_of_state = 179
			}			
		}

		bypass = {
		}
		prerequisite = { focus = POR_standardization }
		mutually_exclusive = { focus = POR_rebuild_the_lines_of_torres_vedras }
		icon = GFX_focus_generic_provoke_border_clashes
		x = -1		
		y = 1

		relative_position_id = POR_standardization
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_defend_the_borders"
			#Add coastal fort to each port
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 1
						instant_build = yes
					}
					add_building_construction = {
					    type = bunker
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					    level = 1
					    instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 1
						instant_build = yes
					}
					add_building_construction = {
					    type = bunker
					    level = 1
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 1
						instant_build = yes
					}
					add_building_construction = {
					    type = bunker
					    level = 1
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_rebuild_the_lines_of_torres_vedras
		available = {
			has_full_control_of_state = 112		
		}

		bypass = {
		}
		prerequisite = { focus = POR_standardization }
		mutually_exclusive = { focus = POR_defend_the_borders }
		icon = GFX_goal_generic_defence
		x = 1		
		y = 1

		relative_position_id = POR_standardization
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_rebuild_the_lines_of_torres_vedras"
			112 = { #Lisbon
				add_building_construction = {
				    type = bunker
				    level = 3
				    instant_build = yes
				    province = {
				        all_provinces = yes
				        limit_to_border = yes
				    }
				}

				add_building_construction = {
				    type = coastal_bunker
				    level = 2
				    instant_build = yes	
				    province = 11805			    
				}
			}
		}
	}
	
	focus = {
		id = POR_regimento_de_comandos
		available = {
		}

		bypass = {
		}
		prerequisite = { focus = POR_standardization }
		prerequisite = { focus = POR_staff_wargames }
		icon = GFX_z_goal_POR_regimento_de_comandos
		x = 0
		y = 2

		relative_position_id = POR_standardization
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_regimento_de_comandos"
			add_ideas = special_forces
			add_tech_bonus = {
				name = POR_regimento_de_comandos
				bonus = 1.0
				uses = 2
				technology = paratroopers
				technology = paratroopers2
				technology = marines
				technology = marines2
				technology = tech_mountaineers
				technology = tech_mountaineers2
			}
		}
	}
	
	focus = {
		id = POR_tropas_paraquedistas
		available = {
		}

		bypass = {
		}
		prerequisite = { focus = POR_regimento_de_comandos }

		icon = GFX_z_goal_POR_tropas_paraquedistas
		x = -1
		y = 1

		relative_position_id = POR_regimento_de_comandos
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_tropas_paraquedistas"
			add_tech_bonus = {
				name = POR_tropas_paraquedistas
				bonus = 2.0
				uses = 1
				category = para_tech
			}
		}
	}
	
	focus = {
		id = POR_expand_number_of_casadors
		icon = GFX_z_goal_forest_warfare
		prerequisite = { focus = POR_regimento_de_comandos }
		x = 1
		y = 1
		relative_position_id = POR_regimento_de_comandos
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_expand_number_of_casadors"
			add_ideas = POR_expand_number_of_casadors_idea
			custom_effect_tooltip = jaeger_infantry_tech_tt
			hidden_effect = {
				set_technology = { jaeger_infantry_tech = 1 popup = no }
			}
			capital_scope = {
				create_unit = {
					division = "division_template = \"Jaeger-Division\" start_experience_factor = 0.6"
					owner = ROOT
					count = 2
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_corpo_do_estado_maior
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_army_reorganization }
		icon = GFX_goal_generic_army_doctrines
		x = 2		
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 3
		
		ai_will_do = {
			factor = 10
		}
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_corpo_do_estado_maior"
			add_ideas = POR_corpo_do_estado_maior	
			army_experience = 20
		}
	}
	
	focus = {
		id = POR_staff_wargames
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_corpo_do_estado_maior }
		icon = GFX_focus_generic_license_production
		x = 0		
		y = 1

		relative_position_id = POR_corpo_do_estado_maior
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_staff_wargames"
			add_doctrine_cost_reduction = {
				name = POR_staff_wargames
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = POR_field_maneuvers
		available = {	
		}

		bypass = {
		}
		prerequisite = { focus = POR_staff_wargames }	
		icon = GFX_focus_generic_manpower
		x = 0
		y = 1

		relative_position_id = POR_staff_wargames
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_field_maneuvers"
			army_experience = 15
			add_doctrine_cost_reduction = {
				name = POR_field_maneuvers
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
	

########################
##### NAVY SECTION #####
########################

	focus = {
		id = POR_implementation_of_1930_shipbuilding_plan
		icon = GFX_z_goal_POR_implementation_of_1930_shipbuilding_plan
		x = 2
		y = 0
		relative_position_id = POR_restore_niassa_company
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			date > 1941.1.1
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_implementation_of_1930_shipbuilding_plan"
			add_ideas = POR_implementation_of_1930_shipbuilding_plan_idea
		}
	}
	
	focus = {
		id = POR_second_navy_reequipment
		available = {			
		}
		bypass = {
		}
		prerequisite = {
			focus = POR_implementation_of_1930_shipbuilding_plan
		}			
		icon = GFX_z_goal_experimental_large_tonnage_ships
		x = 0
		y = 1

		relative_position_id = POR_implementation_of_1930_shipbuilding_plan
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_second_navy_reequipment"
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard		
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			unlock_decision_tooltip = POR_buy_ships_britain
			unlock_decision_tooltip = POR_buy_ships_italy	
		}
	}
	
	focus = {
		id = POR_submarine_effort
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_second_navy_reequipment }			
		icon = GFX_goal_generic_navy_submarine
		x = -3		
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_submarine_effort"
			add_tech_bonus = {
				name = POR_submarine_effort
			    bonus = 1.0
			    uses = 1
			    category = cat_trade_interdiction			   
			}

			add_tech_bonus = {
				name = POR_submarine_effort
			    bonus = 1.0
			    uses = 2
			    category = ss_tech			   
			}
		}
	}
	
	focus = {
		id = POR_a_powerful_merchant_marine
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_second_navy_reequipment }			
		icon = GFX_z_goal_merchant_ship
		x = -1
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_a_powerful_merchant_marine"
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard		
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard		
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_a_powerful_merchant_marine
			    bonus = 1.0
			    uses = 1
			    category = dd_tech			   
			}
			add_ideas = POR_convoy_build_efficiency
		}
	}
	
	focus = {
		id = POR_merchant_marine_protection
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_a_powerful_merchant_marine }			
		icon = GFX_goal_generic_amphibious_assault
		x = 0
		y = 1

		relative_position_id = POR_a_powerful_merchant_marine
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_merchant_marine_protection"
			add_tech_bonus = {
				name = POR_merchant_marine_protection
			    bonus = 1.0
			    uses = 2
			    category = dd_tech			   
			}

			if = {
		    	limit = {
		    		has_dlc = "Man the Guns"		    		
		    	}
		    	add_tech_bonus = {
		    		name = POR_merchant_marine_protection
				    bonus = 1.0
				    uses = 2
				    category = asw_tech		   
				}
		    }						
		}
	}
	
	focus = {
		id = POR_fuzileiros
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_submarine_effort}
		prerequisite = { focus = POR_merchant_marine_protection }
		icon = GFX_goal_generic_occupy_states_coastal
		x = 0
		y = 2

		relative_position_id = POR_submarine_effort
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_fuzileiros"
			add_tech_bonus = {
				name = POR_fuzileiros
			    bonus = 1.0
			    uses = 2
			    category = marine_tech			   
			}

			add_tech_bonus = {
				name = POR_fuzileiros
			    bonus = 1.0
			    uses = 2
			    category = tp_tech			   
			}
			# AI will build the required docks for the next focus
			add_ai_strategy = {
				type = building_target
				id = dockyard
				value = 15
			}
		}
	}
	
	focus = {
		id = POR_naval_research_institute
		available = {	
			num_of_naval_factories > 15		
		}

		bypass = {
		}
		prerequisite = { focus = POR_fuzileiros }
		icon = GFX_focus_research
		x = 0
		y = 1

		relative_position_id = POR_fuzileiros 
		cost = 5
		
		ai_will_do = {
			factor = 20
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_naval_research_institute"
			navy_experience = 50
			add_research_slot = 1
		}
	}
	
	focus = {
		id = POR_arsenal_do_alfeite
		available = {
			has_full_control_of_state = 112		
		}

		bypass = {
		}
		prerequisite = { focus = POR_second_navy_reequipment }			
		icon = GFX_z_goal_generic_big_naval_power
		x = 1		
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 14.3
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_arsenal_do_alfeite"
			add_tech_bonus = {
				name = POR_arsenal_do_alfeite
			    bonus = 1.0
			    uses = 1
			    category = ca_tech	   
			}
			add_tech_bonus = {
				name = POR_arsenal_do_alfeite
			    bonus = 1.0
			    uses = 1
			    category = cl_tech	   
			}

			112 = { #Lisbon
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard		
					level = 3
					instant_build = yes
				}

				add_building_construction = {
					type = naval_base		
					level = 2
					instant_build = yes
					province = 11805
				}
			}
		}
	}

	focus = {
		id = POR_national_cruiser_production
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_arsenal_do_alfeite }			
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 0		
		y = 1

		relative_position_id = POR_arsenal_do_alfeite
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_national_cruiser_production"
			add_tech_bonus = {
				name = POR_national_cruiser_production
			    bonus = 1.0
			    uses = 1
			    category = ca_tech	   
			}
			add_tech_bonus = {
				name = POR_national_cruiser_production
			    bonus = 1.0
			    uses = 1
			    category = cl_tech	   
			}

			navy_experience = 50
		}
	}

	focus = {
		id = POR_battleship_effort
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_national_cruiser_production }			
		icon = GFX_focus_generic_navy_battleship2
		x = -1		
		y = 1

		relative_position_id = POR_national_cruiser_production
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_battleship_effort"
			add_tech_bonus = {
				name = POR_battleship_effort
			    bonus = 1.0
			    uses = 2
			    category = bb_tech	   
			}
			add_tech_bonus = {
				name = POR_battleship_effort
			    bonus = 1.0
			    uses = 1
			    category = cat_fleet_in_being	   
			}
		}
	}

	focus = {
		id = POR_carrier_effort
		available = {			
		}

		bypass = {
		}
		prerequisite = { focus = POR_national_cruiser_production }			
		icon = GFX_goal_generic_navy_carrier
		x = 1		
		y = 1

		relative_position_id = POR_national_cruiser_production
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_carrier_effort"
			add_tech_bonus = {
				name = POR_carrier_effort
			    bonus = 1.0
			    uses = 2
			    category = cv_tech	   
			}

			add_tech_bonus = {
				name = POR_carrier_effort
			    bonus = 1.0
			    uses = 1
			    category = base_strike_main   
			}
		}
	}

	focus = {
		id = POR_endless_sea
		available = {
			OR = {
				has_full_control_of_state = 321
				has_full_control_of_state = 729
				has_full_control_of_state = 721
			}
		}

		bypass = {
		}
		prerequisite = { focus = POR_national_cruiser_production }
		icon = GFX_focus_generic_coastal_fort
		x = 0
		y = 2

		relative_position_id = POR_national_cruiser_production
		cost = 14.3
		
		ai_will_do = {
			factor = 10
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_endless_sea"
			add_ideas = POR_endless_sea
 			if = {
				limit = { has_full_control_of_state = 321 }
	 			321 = { #Goa
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 1273
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 1
						province = 1273
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 729 }
				729 = { #Macau
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 4189
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 1
						province = 4189
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 721 }
				721 = { #Portuguese Timor
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 12190
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 1
						province = 12190
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = POR_portuguese_colonial_fleet
		icon = GFX_z_goal_high_seas_fleet
		prerequisite = { focus = POR_implementation_of_1930_shipbuilding_plan }
		x = 2
		y = 1
		relative_position_id = POR_implementation_of_1930_shipbuilding_plan
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_portuguese_colonial_fleet"
			navy_experience = 20
			add_ideas = POR_portuguese_colonial_fleet
		}
	}
	
	focus = {
		id = POR_nrp_joao_de_lisboa
		icon = GFX_z_goal_generic_coastal_navy
		prerequisite = { focus = POR_portuguese_colonial_fleet }
		prerequisite = { focus = POR_occupation_of_adjacent_islands }
		x = 1
		y = 1
		relative_position_id = POR_portuguese_colonial_fleet
		
		cost = 5
		
		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_nrp_joao_de_lisboa"
			custom_effect_tooltip = POR_nrp_joao_de_lisboa_tt
			hidden_effect = {
				if = {
					limit = { has_dlc = "Man the Guns" }
					load_oob = "POR_nrp_joao_de_lisboa_naval_mtg"
					else = {
						load_oob = "POR_nrp_joao_de_lisboa_naval_legacy"
					}
				}
			}
		}
	}
	

##################################
##### COLONIAL MACAU SECTION #####
##################################

	focus = {
		id = POR_colonial_administration_of_macau
		icon = GFX_z_goal_colonial_administration_of_macau
		x = 6
		y = 0
		relative_position_id = POR_implementation_of_1930_shipbuilding_plan
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_colonial_administration_of_macau"
			add_political_power = 25
			add_ideas = POR_MKO_colonial_administration_idea
			unlock_decision_tooltip = POR_round_up_discontented_in_macau
		}
	}
	
	focus = {
		id = POR_occupation_of_adjacent_islands
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = POR_colonial_administration_of_macau }
		x = -2
		y = 1
		relative_position_id = POR_colonial_administration_of_macau
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
			1162 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_occupation_of_adjacent_islands"
			1162 = {
				owner = { country_event = { id = NWportugal.31 hours = 3 } }
			}
			729 = {
				owner = { transfer_state = 1162 }
			}
		}
	}
	
	focus = {
		id = POR_ban_opium_trade
		icon = GFX_z_goal_no_opium
		prerequisite = { focus = POR_colonial_administration_of_macau }
		mutually_exclusive = { focus = POR_chinese_opium_trade }
		x = 0
		y = 1
		relative_position_id = POR_colonial_administration_of_macau
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_ban_opium_trade"
			add_to_variable = { MKO_colony_stability_total = 10 tooltip = MKO_colony_stability_tt }
			clamp_variable = { var = MKO_colony_stability_total min = 0.0 max = 100.00 }
		}
	}
	
	focus = {
		id = POR_chinese_opium_trade
		icon = GFX_z_goal_opium
		prerequisite = { focus = POR_colonial_administration_of_macau }
		mutually_exclusive = { focus = POR_ban_opium_trade }
		x = 2
		y = 1
		relative_position_id = POR_colonial_administration_of_macau
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_chinese_opium_trade"
			add_ideas = POR_MKO_chinese_opium_idea
		}
	}
	
	focus = {
		id = POR_western_line_of_qiguan_highway
		icon = GFX_z_goal_deserted_road
		prerequisite = {
			focus = POR_ban_opium_trade
			focus = POR_chinese_opium_trade
		}
		x = -1
		y = 1
		relative_position_id = POR_ban_opium_trade
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_western_line_of_qiguan_highway"
			729 = {
				add_building_construction = {
					type = infrastructure		
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_red_market
		icon = GFX_z_goal_arab_market
		prerequisite = {
			focus = POR_ban_opium_trade
			focus = POR_chinese_opium_trade
		}
		x = 1
		y = 1
		relative_position_id = POR_ban_opium_trade
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_red_market"
			729 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex		
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = POR_trade_in_chinese_workers
		icon = GFX_z_goal_trade_unions_for_black
		prerequisite = { focus = POR_western_line_of_qiguan_highway }
		x = -1
		y = 1
		relative_position_id = POR_western_line_of_qiguan_highway
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_trade_in_chinese_workers"
			add_to_variable = { MKO_colony_stability_total = -5 tooltip = MKO_colony_stability_tt }
			clamp_variable = { var = MKO_colony_stability_total min = 0.0 max = 100.00 }
			
			add_ideas = POR_MKO_sale_of_workers_from_macau_idea
			hidden_effect = {
				add_dynamic_modifier = { modifier = POR_MKO_sale_of_workers_from_macau_idea }
			}
			every_other_country = {
				limit = {
					OR = {
						capital_scope = { is_on_continent = south_america }
						capital_scope = { region = 34 }
						original_tag = DOM
						original_tag = HAI
						original_tag = CUB
						original_tag = PAN
					}
				}
				country_event = { id = NWportugal.28 }
			}
		}
	}
	
	focus = {
		id = POR_organize_gold_trading_center
		icon = GFX_z_goal_organize_gold_trading_center
		prerequisite = { focus = POR_western_line_of_qiguan_highway }
		prerequisite = { focus = POR_red_market }
		x = 1
		y = 1
		relative_position_id = POR_western_line_of_qiguan_highway
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_organize_gold_trading_center"
			add_ideas = POR_MKO_gold_trading_center_idea
		}
	}
	
	focus = {
		id = POR_disaster_relief_association_in_four_circles
		icon = GFX_z_goal_disaster_relief_association_in_help_money
		prerequisite = { focus = POR_red_market }
		x = 1
		y = 1
		relative_position_id = POR_red_market
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			has_global_flag = marco_polo_bridge_flag
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_disaster_relief_association_in_four_circles"
			add_ideas = POR_MKO_disaster_relief_association_idea
		}
	}
	
	focus = {
		id = POR_nationalization_of_food_products
		icon = GFX_z_goal_nationalization_of_food_products
		prerequisite = { focus = POR_disaster_relief_association_in_four_circles }
		mutually_exclusive = { focus = POR_send_help_from_metropolis }
		x = -1
		y = 1
		relative_position_id = POR_disaster_relief_association_in_four_circles
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			JAP = { has_war_with = CHI }
			NOT = { has_idea = POR_MKO_hunger_in_macau_idea }
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_nationalization_of_food_products"
			add_timed_idea = { idea = POR_MKO_nationalization_of_food_products_idea days = 450 }
		}
	}
	
	focus = {
		id = POR_send_help_from_metropolis
		icon = GFX_z_goal_POR_send_help_from_metropolis
		prerequisite = { focus = POR_disaster_relief_association_in_four_circles }
		mutually_exclusive = { focus = POR_nationalization_of_food_products }
		x = 1
		y = 1
		relative_position_id = POR_disaster_relief_association_in_four_circles
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
			has_idea = POR_MKO_hunger_in_macau_idea
		}
		bypass = {
		}
		select_effect = {
		}
		
		search_filters = {FOCUS_FILTER_TFV_AUTONOMY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_send_help_from_metropolis"
			remove_ideas = POR_MKO_hunger_in_macau_idea
			add_timed_idea = { idea = POR_MKO_hunger_relief_in_macau_idea days = 450 }
		}
	}
	
	focus = {
		id = POR_modernizing_fortresses_for_modern_warfare
		icon = GFX_z_goal_nested_fortifications
		prerequisite = {
			focus = POR_ban_opium_trade
			focus = POR_chinese_opium_trade
		}
		x = 1
		y = 1
		relative_position_id = POR_chinese_opium_trade
		
		cost = 3
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
		}
		available = {
			729 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
		}
		bypass = {
		}
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus POR_modernizing_fortresses_for_modern_warfare"
			729 = {
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_border = yes
					}
					level = 3
					instant_build = yes
				}
			}
		}
	}
}