
	shared_focus = {
		id = ITA_convene_the_grand_council
		icon = GFX_z_goal_power_fascist_council
		prerequisite = { focus = ITA_loseinETH }
		mutually_exclusive = { focus = ITA_culto_del_duce }
		x = -7
		y = 2
		relative_position_id = ITA_loseinETH
		offset = {
			x = 7
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
			}
		}
		
		allow_branch = {
			NOT = { has_global_flag = GFC_global_flag }
		}

		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_stability = -0.05
			add_political_power = 25
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_pietro_d_acquarone
			
			if = {
				limit = {
					has_focus_tree = nw_italian_focus
					NOT = { has_completed_focus = ITA_victoryinETH }
				}
				ITA_bop_low_decrease_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_depose_mussolini
		icon = GFX_focus_ITA_depose_mussolini
		prerequisite = { focus = ITA_convene_the_grand_council }
		relative_position_id = ITA_convene_the_grand_council

		x = 0
		y = 1
		
		cost = 5
		available = {
		}

		bypass = {
			NOT = {
				has_character = ITA_benito_mussolini
			}
		}

		search_filters = {FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 50
			if = {
				limit = {
					has_character = ITA_grand_council
					NOT = { has_country_leader = { character = ITA_grand_council ruling_only = yes } }
				}
				promote_character = ITA_grand_council
			}
			add_ideas = ITA_shadow_of_mussolini
		}
	}
	
	
	
	
	shared_focus = {
		id = ITA_security_militias
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = ITA_culto_del_duce focus = ITA_convene_the_grand_council focus = ITA_convene_the_grand_council_2 }

		x = -16
		y = 1
		relative_position_id = ITA_culto_del_duce
		offset = {
			x = -22
			y = -2
			trigger = {
				tag = GFC
				NOT = { has_global_flag = RDS_global_flag }
			}
		}
		offset = {
			x = -1
			y = -2
			trigger = {
				tag = GFC
				has_global_flag = RDS_global_flag
			}
		}
		offset = {
			x = 8
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = GFC_global_flag
			}
		}

		cost = 5
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = ITA_camicie_nere
			hidden_effect = {
				set_technology = {
					camicie_nere_security_militias = 1
					popup = no
				}
			}
			if = {
				limit = {
					NOT = { has_completed_focus = ITA_disband_the_blackshirts }
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = ITA_renato_ricci
			}
		}
	}

	shared_focus = {
		id = ITA_battaglioni_d_assalto
		icon = GFX_focus_ITA_blackshirts
		prerequisite = { focus = ITA_security_militias }
		mutually_exclusive = { focus = ITA_strengthen_the_blackshirts }
		x = -1
		y = 1
		relative_position_id = ITA_security_militias

		cost = 10
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_battaglioni_d_assalto_tt
			hidden_effect = {
				set_technology = { blackshirt_assault_battalion_tech = 1 popup = no }
			}
		}
	}

	shared_focus = {
		id = ITA_strengthen_the_blackshirts
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = ITA_security_militias }
		mutually_exclusive = { focus = ITA_battaglioni_d_assalto }
		x = 2
		y = 0
		relative_position_id = ITA_battaglioni_d_assalto
		cost = 10
		available = {
			has_government = fascism
			any_owned_state = {
				is_core_of = ROOT
				is_fully_controlled_by = ROOT
			}
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_camicie_nere
				add_idea = ITA_camicie_nere_strengthened
			}

			custom_effect_tooltip = ITA_strengthen_the_blackshirts_template_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 12 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }

				add_units_to_division_template = {
					template_name = "Camicie Nere"
					support = { 
						artillery = 0
					}
				}
			}
			random_controlled_state = { #Create a few more Blackshirt Divs
				limit = {
					is_core_of = ROOT
					is_fully_controlled_by = ROOT
				}
				prioritize = { 2 }
				custom_effect_tooltip = ITA_strengthen_the_blackshirts_spawn_divs_tt
				hidden_effect = {
					create_unit = {
						division = "division_template = \"Camicie Nere\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
						owner = ROOT
						count = 3
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_milizia_coloniale
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = ITA_battaglioni_d_assalto focus = ITA_strengthen_the_blackshirts }

		x = 1
		y = 1
		relative_position_id = ITA_battaglioni_d_assalto
		cost = 10
		available = {
			has_government = fascism
			ITA_has_disbanded_blackshirts = no
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			if = {
				limit = {
					has_idea = ITA_camicie_nere_strengthened
				}
				swap_ideas = {
					remove_idea = ITA_camicie_nere_strengthened
					add_idea = ITA_camicie_nere_milizia_coloniale
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_camicie_nere
					add_idea = ITA_camicie_nere_milizia_coloniale
				}
			}
			custom_effect_tooltip = ITA_blackshirts_div_cap_12_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 12 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}
		}
	}

	
	

	shared_focus = {
		id = ITA_italo_balbo_focus
		icon = GFX_focus_ITA_italo_balbo
		prerequisite = { focus = ITA_depose_mussolini focus = ITA_convene_the_grand_council_2 }
		mutually_exclusive = { focus = ITA_dino_grandi_focus focus = ITA_monarchia_d_italia }
		relative_position_id = ITA_depose_mussolini
		x = -10
		y = 1
		offset = {
			x = 10
			y = -3
			trigger = {
				tag = GFC
			}
		}
		offset = {
			x = 5
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
			}
		}

		cost = 5
		available = {
			has_character = ITA_italo_balbo
			has_government = fascism
			GER = {
				NOT = {
					has_completed_focus = GER_assassinate_mussolini
				}
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			if = {
				limit = { tag = GFC }
				set_power_balance = {
					id = GFC_power_balance
					left_side = ITA_grand_council_side
					right_side = ITA_balbo_side
				}
			}
			else = {
				set_power_balance = {
					id = ITA_power_balance
					left_side = ITA_grand_council_side
					right_side = ITA_balbo_side
				}
			}
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = ITA_deposed_leader_flag
					}
					clr_country_flag = ITA_deposed_leader_flag
				}
			}
			custom_effect_tooltip = ITA_remove_balbo_as_advisor_tt
			add_country_leader_role = {
				character = ITA_italo_balbo
				promote_leader = yes
				country_leader = {
					ideology = fascism_corporatism
					expire = 1965.1.1.1
					traits =  {	aviation_hero }
				}
			}
			hidden_effect = {
				add_ideas = ITA_italo_balbo_traits
			}

			ITA_italo_balbo = {	set_character_flag = ITA_has_new_duce_flag }

			add_political_power = 75
			add_war_support = 0.1
			add_stability = 0.05
			ITA_bop_medium_increase_balbo_side_effect = yes
		}
	}





	shared_focus = {
		id = ITA_dino_grandi_focus
		icon = GFX_focus_ITA_dino_grandi
		prerequisite = { focus = ITA_depose_mussolini focus = ITA_convene_the_grand_council_2 }
		mutually_exclusive = { focus = ITA_italo_balbo_focus focus = ITA_monarchia_d_italia }
		relative_position_id = ITA_depose_mussolini
		x = 0
		y = 1
		offset = {
			x = 10
			y = -3
			trigger = {
				tag = GFC
			}
		}
		offset = {
			x = 5
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
			}
		}

		cost = 5
		available = {
			has_character = ITA_dino_grandi
			has_government = fascism
			GER = {
				NOT = {
					has_completed_focus = GER_assassinate_mussolini
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			hidden_effect = {
				if = {
					limit = {
						has_country_flag = ITA_deposed_leader_flag
					}
					clr_country_flag = ITA_deposed_leader_flag
				}
			}
			if = {
				limit = { tag = GFC }
				set_power_balance = {
					id = GFC_power_balance
					left_side = ITA_grand_council_side
					right_side = ITA_grandi_side
				}
			}
			else = {
				set_power_balance = {
					id = ITA_power_balance
					left_side = ITA_grand_council_side
					right_side = ITA_grandi_side
				}
			}
			custom_effect_tooltip = ITA_remove_grandi_as_advisor_tt
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_country_leader_role = {
					character = ITA_dino_grandi
					promote_leader = yes
					country_leader = {
						ideology = fascism_corporatism
						expire = 1965.1.1.1
						traits =  {
							silver_tongue
						}
					}
				}
			}
			else = {
				add_country_leader_role = {
					character = ITA_dino_grandi
					promote_leader = yes
					country_leader = {
						ideology = fascism_corporatism
						expire = 1965.1.1.1
						traits =  {
							silver_tongue_no_lar
						}
					}
				}
			}

			ITA_dino_grandi = {	set_character_flag = ITA_has_new_duce_flag }

			add_political_power = 75
			add_war_support = 0.05
			add_stability = 0.1
			ITA_bop_medium_increase_grandi_side_effect = yes
		}
	}

	#####################
	# SHARED SUB-BRANCH #
	#####################
	shared_focus = {
		id = ITA_stop_the_squandering
		icon = GFX_focus_mex_privatisation
		prerequisite = { focus = ITA_italo_balbo_focus focus = ITA_dino_grandi_focus }
		relative_position_id = ITA_italo_balbo_focus
		x = 5
		y = 1

		cost = 10
		available = {}
		

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_to_variable = { ITA_iri_production_speed_arms_factory_factor = 0.05 } 
			custom_effect_tooltip = ITA_stop_the_squandering_ricostruzione_industriale_tt
			add_to_variable = { ITA_military_industry_dm_factory_max_efficiency_factor = 0.05 }
			custom_effect_tooltip = ITA_stop_the_squandering_military_industry_tt

			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_balbo_side
					}
				}
				ITA_bop_very_low_increase_balbo_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_grandi_side
					}
				}
				ITA_bop_very_low_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_consolidate_power
		icon = GFX_goal_demand_sudetenland
		prerequisite = { focus = ITA_italo_balbo_focus focus = ITA_dino_grandi_focus }
		relative_position_id = ITA_stop_the_squandering
		x = 2
		y = 0

		cost = 10
		available = {}
		

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_popularity = {
				ideology = fascism 
				popularity = 0.05
			}
			add_war_support = 0.05
			add_stability = 0.05
			add_political_power = 50
			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_balbo_side
					}
				}
				ITA_bop_very_low_increase_balbo_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_grandi_side
					}
				}
				ITA_bop_very_low_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_purge_the_party
		icon = GFX_focus_generic_conspiracy
		prerequisite = { focus = ITA_consolidate_power }
		prerequisite = { focus = ITA_stop_the_squandering}
		relative_position_id = ITA_stop_the_squandering
		x = 1
		y = 1

		cost = 5
		available = {
			has_government = fascism
		}
		

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			ROOT = { 
				country_event = { id = BBA_italy_purge_the_party.1 hours = 8 random_hours = 6 } 
			} 
		}
	}

	shared_focus = {
		id = ITA_the_fate_of_mussolini
		icon = GFX_focus_ger_assassinate_mussolini
		prerequisite = { focus = ITA_purge_the_party }
		relative_position_id = ITA_purge_the_party
		x = 0
		y = 1

		cost = 5
		available = {
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			ROOT = { 
				country_event = { id = BBA_italy_decide_the_fate_of_mussolini.1 hours = 6 random_hours = 2 } 
			}
		}
	}

	shared_focus = {
		id = ITA_divino_duce
		icon = GFX_focus_generic_fascist_propaganda
		prerequisite = { focus = ITA_the_fate_of_mussolini }
		mutually_exclusive = { focus = ITA_a_greater_purpose }
		relative_position_id = ITA_the_fate_of_mussolini
		x = -1
		y = 1

		cost = 10
		available = {
			has_government = fascism
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 100
			add_popularity = {
				ideology = fascism 
				popularity = 0.05
			}
			add_war_support = 0.1
			add_ideas = ITA_divino_duce_1
			if = {
				limit = {
					is_power_balance_side_active = {
						id = GFC_power_balance
						side = ITA_balbo_side
					}
				}
				ITA_bop_medium_increase_balbo_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = GFC_power_balance
						side = ITA_grandi_side
					}
				}
				ITA_bop_medium_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_balbo_side
					}
				}
				ITA_bop_medium_increase_balbo_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_grandi_side
					}
				}
				ITA_bop_medium_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_medium_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_blackshirt_loyalty
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = ITA_divino_duce }
		relative_position_id = ITA_divino_duce
		x = 0
		y = 2

		cost = 10
		available = {}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_divino_duce_1
				add_idea = ITA_divino_duce_2
			}
		}
	}

	shared_focus = {
		id = ITA_a_greater_purpose
		icon = GFX_goal_support_fascism
		prerequisite = { focus = ITA_the_fate_of_mussolini }
		mutually_exclusive = { focus = ITA_divino_duce }
		relative_position_id = ITA_the_fate_of_mussolini
		x = 1
		y = 1

		cost = 10
		available = {
			has_government = fascism
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 100
			add_popularity = {
				ideology = fascism 
				popularity = 0.05
			}
			add_stability = 0.05
			add_war_support = 0.05
			add_ideas = ITA_italian_hegemony_master_1
			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_balbo_side
					}
				}
				ITA_bop_medium_increase_balbo_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_grandi_side
					}
				}
				ITA_bop_medium_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_medium_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_spreading_the_eagles_wings
		icon = GFX_z_goal_generic_eagle
		prerequisite = { focus = ITA_a_greater_purpose }
		relative_position_id = ITA_a_greater_purpose
		x = 0
		y = 1

		cost = 10
		available = {}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			hidden_effect = {
				every_other_country = {
					limit = {
						is_neighbor_of = ROOT
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_guaranteed_by = ROOT }
						NOT = { has_non_aggression_pact_with = ROOT }
						capital_scope = { is_on_continent = europe }
					}
					ROOT = {
						create_wargoal = {
							type = puppet_wargoal_focus
							target = PREV
						}
					}
				}
			}
			custom_effect_tooltip = ITA_spreading_the_eagles_wings_tt
			every_other_country = {
				limit = {
					is_neighbor_of = ROOT
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_guaranteed_by = ROOT }
					NOT = { has_non_aggression_pact_with = ROOT }	
					capital_scope = { is_on_continent = europe }
				}
			}
			swap_ideas = {
				remove_idea = ITA_italian_hegemony_master_1
				add_idea = ITA_italian_hegemony_master_2
			}
		}
	}

	shared_focus = {
		id = ITA_italian_hegemony
		icon = GFX_focus_ITA_italian_hegemony
		prerequisite = { focus = ITA_spreading_the_eagles_wings }
		relative_position_id = ITA_a_greater_purpose
		x = 0
		y = 2

		cost = 10
		available = {
			num_subjects > 0
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER}

		completion_reward = {
			swap_ideas = {
				remove_idea = ITA_italian_hegemony_master_2
				add_idea = ITA_italian_hegemony_master_3
			}
			add_to_tech_sharing_group = ITA_italian_hegemony_program
			custom_effect_tooltip = ITA_italian_hegemony_subjects_tt
			if = {
				limit = {
					num_subjects > 0
				}
				every_other_country = {
					limit = {
						is_subject_of = ROOT
					}
					add_ideas = ITA_italian_hegemony_subjects
					add_to_tech_sharing_group = ITA_italian_hegemony_program
				}
			}
			else = {
				effect_tooltip = {
					add_ideas = ITA_italian_hegemony_subjects
					add_to_tech_sharing_group = ITA_italian_hegemony_program
				}
			}
		}
	}



	###############
	# Italo Balbo #
	###############

	shared_focus = {
		id = ITA_reorganize_regio_esercito
		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = ITA_italo_balbo_focus }
		prerequisite = { focus =  ITA_stop_the_squandering }
		mutually_exclusive = { focus = ITA_reinforce_regia_aeronautica }
		relative_position_id = ITA_italo_balbo_focus
		x = -1
		y = 2

		cost = 10
		available = {
			has_completed_focus = ITA_stop_the_squandering
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			army_experience = 25
			add_timed_idea = { 
				idea = ITA_prioritizing_the_military 
				days = 365 
			}
			add_to_variable = { ITA_re_infantry_attack = 0.05 }
			add_to_variable = { ITA_re_motorized_attack = 0.05 }
			add_to_variable = { ITA_re_mechanized_attack = 0.05 }
			custom_effect_tooltip = ITA_reorganize_regio_esercito_re_tt
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_balbo_side_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_reinforce_regia_aeronautica
		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = ITA_italo_balbo_focus }
		prerequisite = { focus =  ITA_stop_the_squandering }
		mutually_exclusive = { focus = ITA_reorganize_regio_esercito }
		relative_position_id = ITA_italo_balbo_focus
		x = 1
		y = 2		
		relative_position_id = ITA_italo_balbo_focus

		cost = 10
		available = {}		

		search_filters = {FOCUS_FILTER_AIR_XP FOCUS_FILTER_INDUSTRY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			air_experience = 25
			add_timed_idea = { 
				idea = ITA_prioritizing_the_military 
				days = 365 
			}
			add_to_variable = { ITA_ra_air_accidents_factor = -0.1 }
			add_to_variable = { ITA_ra_air_agility_factor = 0.05 }
			add_to_variable = { ITA_ra_air_attack = 0.05 }
			add_to_variable = { ITA_ra_air_superiority_bonus_in_combat = 0.05 }
			custom_effect_tooltip = ITA_reinforce_aeronautica_ra_tt
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_balbo_side_effect = yes
			}
		}
	}

	shared_focus = { 
		id = ITA_compagnie_auto_avio_sahariane
		icon = GFX_focus_generic_armored_air_support
		prerequisite = { focus = ITA_reorganize_regio_esercito focus = ITA_reinforce_regia_aeronautica }
		relative_position_id = ITA_reorganize_regio_esercito
		x = 1
		y = 1

		cost = 10
		available = {}
		
		search_filters = {}

		completion_reward = {
			add_to_variable = { ITA_ra_ground_attack_factor = 0.05 }
			add_to_variable = { ITA_ra_air_interception = 0.05 }
			custom_effect_tooltip = ITA_compagnie_auto_avio_sahariane_ra_tt
			add_to_variable = {  ITA_re_org_loss_when_moving = -0.05 }
			add_to_variable = {  ITA_re_out_of_supply = -0.05 }
			custom_effect_tooltip = ITA_compagnie_auto_avio_sahariane_re_tt
		}
	}

	shared_focus = {
		id = ITA_combined_land_and_air_warfare
		icon = GFX_focus_generic_tank_air_support
		prerequisite = { focus = ITA_compagnie_auto_avio_sahariane }
		relative_position_id = ITA_reorganize_regio_esercito
		x = 1
		y = 2

		cost = 10
		available = {}
		
		search_filters = {FOCUS_FILTER_AIR_XP FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			custom_effect_tooltip = "Longer training?"
			add_country_leader_trait = military_modernizer
			add_to_variable = {  ITA_ra_air_mission_efficiency = 0.05 }
			add_to_variable = {  ITA_ra_air_cas_present_factor = 0.05 }
			custom_effect_tooltip = ITA_combined_land_and_air_warfare_ra_tt
			add_to_variable = {  ITA_re_army_army_org_factor = 0.05 }
			add_to_variable = {  ITA_re_armor_attack = 0.05 }
			custom_effect_tooltip = ITA_combined_land_and_air_warfare_re_tt
		}
	}

	shared_focus = {
		id = ITA_the_fourth_shore
		icon = GFX_focus_generic_develop_libya
		prerequisite = { focus = ITA_italo_balbo_focus }
		prerequisite = { focus = ITA_stop_the_squandering }
		relative_position_id = ITA_italo_balbo_focus
		x = 3
		y = 2

		cost = 10
		available = {
			OR = {
				any_controlled_state = {
					is_core_of = LBA
					is_fully_controlled_by = ROOT
				}
				any_subject_country = { #FOR PUPPETS
					any_controlled_state = {
						is_core_of = LBA
						is_fully_controlled_by = PREV
					}
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					448 = { #TRIPOLI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				448 = { 
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					449 = { #EL AGHEILA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				449 = { 
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					450 = { #BENGHASI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				450 = { 
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					451 = { #DERNA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				451 = { #TRIPOLI
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_oil_in_tripoli
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = ITA_the_fourth_shore }
		mutually_exclusive = { focus = ITA_steel_in_tripoli }
		relative_position_id = ITA_the_fourth_shore
		x = -1
		y = 1

		cost = 5
		available = {}		

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		available = {
			has_tech = excavation3
			448 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		completion_reward = {
			if = {
				limit = {
					448 = { 
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				add_resource = {
			    	type = oil
			    	amount = 8
			    	state = 448   
				}
				448 = { #TRIPOLI
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = fuel_silo
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						has_tech = synth_oil_experiments
					}
					448 = { #TRIPOLI
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = synthetic_refinery
							level = 1
							instant_build = yes
						}
					}
				}
				else = {
					custom_effect_tooltip = ITA_potential_refinery_in_libya_tt
				}
				add_tech_bonus = {
					name = ITA_oil_in_tripoli
    				bonus = 1
   					uses = 1
    				category = synth_resources
				}
				unlock_decision_tooltip = develop_tripoli_oil_fields
			}
		}
	}

	shared_focus = {
		id = ITA_steel_in_tripoli
		icon = GFX_focus_generic_steel
		prerequisite = { focus = ITA_the_fourth_shore }
		mutually_exclusive = { focus = ITA_oil_in_tripoli }
		relative_position_id = ITA_the_fourth_shore
		x = 1
		y = 1

		cost = 5
		available = {}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		available = {
			has_tech = excavation3
			448 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		completion_reward = {
			if = {
				limit = {
					448 = { 
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}	
				add_resource = {
				    type = steel
				    amount = 16
				    state = 448  
				}
				448 = { #TRIPOLI
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = ITA_steel_in_tripoli
    				bonus = 1
   					uses = 1
    				category = excavation_tech
				}
				unlock_decision_tooltip = develop_tripoli_steel_deposits
			}
		}
	}

	shared_focus = {
		id = ITA_novus_ordo
		icon = GFX_focus_ITA_strengthen_ascari_corps #ITA_ministry_of_italian_africa?
		prerequisite = { focus = ITA_steel_in_tripoli focus = ITA_oil_in_tripoli }
		relative_position_id = ITA_the_fourth_shore
		x = 0
		y = 2

		cost = 10
		available = {
			OR = {
				any_controlled_state = {
					is_core_of = LBA
					is_fully_controlled_by = ROOT
				}
				any_subject_country = { #FOR PUPPETS
					any_controlled_state = {
						is_core_of = LBA
						is_fully_controlled_by = PREV
					}
				}
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_to_variable = { ITA_iri_consumer_goods_factor = -0.025 }
			custom_effect_tooltip = ITA_novus_ordo_ricostruzione_industriale_tt
			add_to_variable = { ITA_military_industry_dm_industrial_capacity_factory = 0.05 }
			add_to_variable = { ITA_military_industry_dm_production_factory_efficiency_gain_factor = 0.05 }
			custom_effect_tooltip = ITA_novus_ordo_military_industry_tt
			add_to_variable = { ITA_re_irregular_org = 0.05 }
			custom_effect_tooltip = ITA_novus_ordo_irregulars_tt
			
			if = {
				limit = {
					448 = { #TRIPOLI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				448 = { 
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					449 = { #EL AGHEILA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				449 = { 
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = {
					450 = { #BENGHASI
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				450 = { 
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					451 = { #DERNA
						state_is_fully_controlled_by_ROOT_or_subject = yes
					}
				}
				451 = { #TRIPOLI
					add_extra_state_shared_building_slots = 1
				}
			}

			every_state = { 
				limit = {
					OR = {
						state = 448
						state = 449
						state = 450
						state = 451
					}
					state_is_fully_controlled_by_ROOT_or_subject = yes
				}
				add_dynamic_modifier = {
					modifier = ITA_novus_ordo_modifier
				}
			}

			custom_effect_tooltip = ITA_novus_ordo_forts_tt
			hidden_effect = {
				if = {
					limit = {
						448 = { 
							state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
					448 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 12039
							instant_build = yes
						}
					}
				}
				if = {
					limit = {
						451 = { 
							state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
					451 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 10120
							instant_build = yes
						}
					}
				}
				if = {
					limit = {
						661 = { 
							state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
					661 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 10067
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 7154
							instant_build = yes
						}
					}
				}
				if = {
					limit = {
						663 = { 
							state_is_fully_controlled_by_ROOT_or_subject = yes
						}
					}
					663 = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4060
							instant_build = yes
						}
					}
				}
			}

			custom_effect_tooltip = ITA_novus_ordo_create_units_tt
			hidden_effect = {
				if = {
					limit = {
						NOT = { has_template = "Divisione Ascari Libica" }
					}
					if = {
						limit = {
							NOT = { has_country_flag = ITA_improved_ascari_templates_flag }
						}
						division_template = { 
							name = "Divisione Ascari Libica" 
							division_names_group = ITA_COL_01
							override_model = ITA_infantry_alt_0_entity
							template_counter = 67
							#is_locked = yes
							obsolete = yes

							# Represents lesser-equipped colonial units
							regiments = { 
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
								infantry = { x = 1 y = 0 }
							}

							priority = 0 
						}
					}
					else = {
						division_template = { 
							name = "Divisione Ascari Libica" 
							division_names_group = ITA_COL_01
							override_model = ITA_infantry_alt_0_entity
							template_counter = 67
							#is_locked = yes
							obsolete = yes

							# Represents lesser-equipped colonial units
							regiments = { 
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
								infantry = { x = 1 y = 0 }
							}

							support = {
								armored_car_recon = { x = 0 y = 0 }
								artillery = { x = 0 y = 1 }
							}

							priority = 0 
						}
					}
				}
			}
			if = {
				limit = {
					any_controlled_state = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
				}
				random_controlled_state = {
					limit = {
						is_core_of = LBA
						is_fully_controlled_by = ROOT
					}
					prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
					custom_effect_tooltip = ITA_novus_ordo_irregular_troops_tt
					hidden_effect = {
						create_unit = {
							division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
							owner = ROOT
							count = 5
						}
					}
				}
			}
			else_if = {
				limit = {
					any_subject_country = {
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = PREV
						}
					}
				}
				random_other_country = {
					limit = {
						is_subject_of = ROOT
						any_controlled_state = {
							is_core_of = LBA
							is_fully_controlled_by = PREV
						}
					}
					random_controlled_state = {
						limit = {
							is_core_of = LBA
							is_fully_controlled_by = ROOT
						}
						prioritize = { 448 } #TRIPOLI (In case at some point this gets split or tag gets more cores)
						custom_effect_tooltip = ITA_novus_ordo_irregular_troops_tt
						hidden_effect = {
							create_unit = {
								division = "division_template = \"Divisione Ascari Libica\" start_experience_factor = 0.1 start_equipment_factor = 1.0"
								owner = ROOT
								count = 5
							}
						}
					}
				}
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_low_increase_balbo_side_effect = yes
			}
		}
	}

	###############
	# Dino Grandi #
	###############
	shared_focus = {
		id = ITA_seek_british_military_cooperation
		icon = GFX_goal_generic_scientific_exchange
		prerequisite = { focus = ITA_dino_grandi_focus focus = ITA_monarchia_d_italia }
		mutually_exclusive = { focus = ITA_invite_france_to_military_partnership }
		relative_position_id = ITA_dino_grandi_focus
		x = 2
		y = 1
		offset = {
			x = -1
			y = -2
			trigger = {
				has_focus_tree = nw_italian_royalists_focus
			}
		}

		cost = 10
		available = {
			is_subject = no
			ENG = { 
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
				has_opinion	= {
					target = ROOT
					value > 9
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			ENG = { 
				country_event = { id = BBA_italy_research_agreement.1 hours = 6 random_hours = 2 } 
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { 
				ITA_anglo_italian_cooperation_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_anglo_italian_pact
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = ITA_seek_british_military_cooperation }
		relative_position_id = ITA_seek_british_military_cooperation
		x = 0
		y = 1

		cost = 5
		available = {
			is_subject = no
			ENG = { 
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
				NOT = { has_government = communism }
				has_opinion	= {
					target = ROOT
					value > 49
				}
			}
		}
		Bypass = { is_in_faction_with = ENG }	

		search_filters = {}

		completion_reward = {
			ENG = { 
				country_event = { id = BBA_italy_pact.1 hours = 12 random_hours = 6 } 
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				ITA_non_aggression_pact_effect = yes
			}
		}
	}	

	shared_focus = {
		id = ITA_invite_france_to_military_partnership
		icon = GFX_goal_tfv_generic_tech_sharing
		prerequisite = { focus = ITA_dino_grandi_focus focus = ITA_monarchia_d_italia }
		mutually_exclusive = { focus = ITA_seek_british_military_cooperation }
		relative_position_id = ITA_seek_british_military_cooperation
		x = 2
		y = 0

		cost = 10
		available = {
			is_subject = no
			FRA = { 
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
				has_opinion	= {
					target = ROOT
					value > 9
				}
			}
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			FRA = { 
				country_event = { id = BBA_italy_research_agreement.1 hours = 6 random_hours = 2 } 
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = { 
				ITA_franco_italian_cooperation_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_franco_italian_pact
		icon = GFX_focus_chi_reach_out_to_france
		prerequisite = { focus = ITA_invite_france_to_military_partnership }
		relative_position_id = ITA_seek_british_military_cooperation
		x = 2
		y = 1

		cost = 5
		available = {
			is_subject = no
			FRA = { 
				is_subject = no
				NOT = { has_war_with = ROOT }
				NOT = { is_justifying_wargoal_against = ROOT }
				NOT = { has_government = communism }
				has_opinion	= {
					target = ROOT
					value > 49
				}
			}
		}
		Bypass = { is_in_faction_with = FRA }
		
		search_filters = {}

		completion_reward = {
			FRA = { 
				country_event = { id = BBA_italy_pact.1 hours = 12 random_hours = 6 } 
			}
			custom_effect_tooltip = if_they_accept_tt
			effect_tooltip = {
				ITA_non_aggression_pact_effect = yes
			}
		}
	}	

	shared_focus = {
		id = ITA_proclaim_the_italian_empire
		icon = GFX_focus_generic_italy_propaganda
		prerequisite = { focus = ITA_anglo_italian_pact focus = ITA_franco_italian_pact }
		relative_position_id = ITA_seek_british_military_cooperation
		x = 1
		y = 2

		cost = 10
		available = {
			is_subject = no
			OR = { #ADD A TOOLTIP INSTEAD??
				any_controlled_state = {
					is_core_of = ETH
					is_fully_controlled_by = ROOT
				}
				any_subject_country = { #FOR PUPPETS
					any_controlled_state = {
						is_core_of = ETH
						is_fully_controlled_by = PREV
					}
				}
			}
			OR = {
				any_controlled_state = {
					is_core_of = LBA
					is_fully_controlled_by = ROOT
				}
				any_subject_country = { #FOR PUPPETS
					any_controlled_state = {
						is_core_of = LBA
						is_fully_controlled_by = PREV
					}
				}
			}
			OR = {
				550 = {	is_fully_controlled_by = ROOT }
				any_subject_country = {
					has_full_control_of_state = 550
				}
			}
			OR = {
				559 = { is_fully_controlled_by = ROOT }
				any_subject_country = {
					has_full_control_of_state = 559
				}
			}
			OR = {
				has_non_aggression_pact_with = ENG
				is_in_faction_with = ENG
				has_non_aggression_pact_with = FRA
				is_in_faction_with = FRA
			}
			has_army_manpower = { size > 999999 }
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {

			every_other_country = {
				limit = { is_major = yes }
				country_event = { id = BBA_italy_recognize_the_empire.1 hours = 12 random_hours = 6 } 
			}

			custom_effect_tooltip = ITA_italy_will_guarantee_tt
			effect_tooltip = {
				every_other_country = {
					limit = { 
						AND  = {
							is_major = yes
							has_non_aggression_pact_with = ROOT
						}
					}
					give_guarantee = ROOT
					ROOT = { give_guarantee = PREV }
				}				
			}
			
			add_political_power = 75
			add_war_support = 0.05

			custom_effect_tooltip = ITA_african_conquests_tt #Annex cost reduction TT

			add_ideas = ITA_impero_italiano
			if = {
				limit = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
				add_country_leader_trait = father_of_the_empire
				ITA_bop_low_increase_grandi_side_effect = yes
			}
			else_if = {
				limit = {
					has_country_leader = {
						character = ITA_vittorio_emanuele_iii
						ruling_only = yes
					}
				}
				ITA_bop_low_increase_king_side_effect = yes
			}
			else = {
				custom_effect_tooltip = ITA_bop_will_shift
			}
			
			
			set_cosmetic_tag = ITA_italian_empire
		}
	}	

	shared_focus = {
		id = ITA_reorganize_the_party
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = { focus = ITA_dino_grandi_focus }
		prerequisite = { focus = ITA_consolidate_power }
		relative_position_id = ITA_dino_grandi_focus
		x = -1
		y = 2

		cost = 10
		available = {
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_country_leader_trait = political_reformer_1
			add_political_power = 100
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_grandi_side_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_meritocracy
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = ITA_reorganize_the_party }
		prerequisite = { focus = ITA_purge_the_party }
		relative_position_id = ITA_reorganize_the_party
		x = 0
		y = 2

		cost = 10
		available = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"					
				}
				swap_ruler_traits = {
					remove = political_reformer_1
					add = political_reformer_2
				}
			}
			else = {
				swap_ruler_traits = {
					remove = political_reformer_1
					add = political_reformer_2_no_lar
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_enrico_fermi

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_vittorio_emanuele_orlando

			show_unit_leaders_tooltip = ITA_giovanni_duca
			
			if = {
				limit = {
					has_dlc = "La Resistance"					
				}
				ITA_create_edgardo_sogno_operative = yes
			}
			add_tech_bonus = {
				name = ITA_meritocracy
				bonus = 1
				uses = 1
				category = nuclear
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_grandi_side_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_economic_reforms
		icon = GFX_focus_usa_reestablish_the_gold_standard
		prerequisite = { focus = ITA_reorganize_the_party }

		#icon = 
		relative_position_id = ITA_reorganize_the_party
		x = 2
		y = 1

		cost = 10
		available = {}
		

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_to_variable = { ITA_iri_consumer_goods_factor = -0.025 }
			add_to_variable = { ITA_iri_production_speed_arms_factory_factor = 0.05 }
			add_to_variable = { ITA_iri_production_speed_industrial_complex_factor = 0.05 }
			custom_effect_tooltip = ITA_economic_reforms_ricostruzione_industriale_tt
		}
	}

	shared_focus = {
		id = ITA_improve_the_industries
		icon = GFX_focus_generic_industry_2
		prerequisite = { focus = ITA_economic_reforms }
		relative_position_id = ITA_economic_reforms
		x = 0
		y = 1

		cost = 10
		available = {}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_to_variable = {  ITA_iri_conversion_cost_civ_to_mil_factor = -0.1 }
			custom_effect_tooltip = ITA_improve_the_industries_ricostruzione_industriale_tt
			add_to_variable = {  ITA_military_industry_dm_production_factory_start_efficiency_factor = 0.05 }
			add_to_variable = {  ITA_military_industry_dm_line_change_production_efficiency_factor = 0.05 }
			add_to_variable = { ITA_military_industry_dm_production_factory_efficiency_gain_factor = 0.05 }
			custom_effect_tooltip = ITA_improve_the_industries_military_industry_tt
		}
	}

	shared_focus = {
		id = ITA_expanded_corporatism
		icon = GFX_focus_ITA_generic_fascist_workers
		prerequisite = { focus = ITA_meritocracy }
		prerequisite = { focus = ITA_improve_the_industries }
		relative_position_id = ITA_reorganize_the_party
		x = 1
		y = 3

		cost = 10
		available = {}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_to_variable = { ITA_iri_production_speed_arms_factory_factor = 0.05 }
			add_to_variable = { ITA_iri_production_speed_industrial_complex_factor = 0.05 }
			custom_effect_tooltip = ITA_expanded_corporatism_ricostruzione_industriale_tt

			add_to_variable = { ITA_military_industry_dm_production_lack_of_resource_penalty_factor = -0.05 }
			custom_effect_tooltip = ITA_expanded_corporatism_military_industry_tt

			every_owned_state = {
				limit = {
					NOT = {	is_core_of = ROOT }
					is_fully_controlled_by = ROOT
				}
				add_dynamic_modifier = {
					modifier = ITA_expanded_corporatism_modifier
					scope = ITA
				}
			}
			if = {
				limit = {
					2 = { 
						is_fully_controlled_by = ROOT
						free_building_slots = { #Preventing Lazio state from getting overcrowded
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
				}
				2 = { #LATIUM
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_core_state = {
					limit = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					prioritize = { 157 849 115 } #ABRUZZO as main fallback
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					117 = { 
						is_fully_controlled_by = ROOT
					}
				}
				117 = { #CAMPANIA
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					161 = { 
						is_fully_controlled_by = ROOT
					}
				}
				161 = { #EMILIA ROMAGNA
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					162 = { 
						is_fully_controlled_by = ROOT
					}
				}
				162 = { #TUSCANY
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}



##     ##  #######  ##    ##    ###    ########   ######  ##     ## ####  ######  ######## 
###   ### ##     ## ###   ##   ## ##   ##     ## ##    ## ##     ##  ##  ##    ##    ##    
#### #### ##     ## ####  ##  ##   ##  ##     ## ##       ##     ##  ##  ##          ##    
## ### ## ##     ## ## ## ## ##     ## ########  ##       #########  ##   ######     ##    
##     ## ##     ## ##  #### ######### ##   ##   ##       ##     ##  ##        ##    ##    
##     ## ##     ## ##   ### ##     ## ##    ##  ##    ## ##     ##  ##  ##    ##    ##    
##     ##  #######  ##    ## ##     ## ##     ##  ######  ##     ## ####  ######     ##    



	shared_focus = {
		id = ITA_monarchia_d_italia
		icon = GFX_focus_ITA_imperial_recognition
		prerequisite = { focus = ITA_depose_mussolini focus = ITA_defy_the_duce_royalist focus = ITA_convene_the_grand_council_2 }

		mutually_exclusive = { focus = ITA_dino_grandi_focus focus = ITA_italo_balbo_focus }
		
		allow_branch = {
			if = {
				limit = { has_focus_tree = nw_italian_focus }
				NOT = {
					has_global_flag = RDS_global_flag
					has_global_flag = GFC_global_flag
				}
			}
			else = {
				OR = {
					tag = RDS
					NOT = { has_global_flag = RDS_global_flag }
				}
			}
		}

		x = 9
		y = 1
		relative_position_id = ITA_depose_mussolini
		offset = {
			x = -1
			y = -2
			trigger = {
				has_focus_tree = nw_italian_royalists_focus
			}
		}
		offset = {
			x = 10
			y = -3
			trigger = {
				has_focus_tree = nw_italian_fash_council_focus
			}
		}
		
		cost = 5
		available = {
			OR = {
				monarchy > 0.25
				has_government = monarchy
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			every_owned_state = { #Compensating for ideology swap auto-eating half compliance
				limit = {
					has_resistance = yes
				}
				add_compliance = 10
			}

			hidden_effect = {
				if = {
					limit = {
						has_country_flag = ITA_deposed_leader_flag
					}
					clr_country_flag = ITA_deposed_leader_flag
				}
			}
			add_political_power = 50

			if = {
				limit = { NOT = { has_government = monarchy } }
				set_politics = {
					ruling_party = monarchy
				}
			}

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_vittorio_emanuele_orlando
			
			show_unit_leaders_tooltip = ITA_giuseppe_de_stefanis

			#BoP
			if = {
				limit = { tag = RDS }
				set_power_balance = {
					id = RDS_power_balance
					left_side = ITA_cristian_democratic_side
					right_side = ITA_king_side
					set_value = 0.0
				}
			}
			else = {
				set_power_balance = {
					id = ITA_power_balance
					right_side = ITA_king_side
				}
			}
			ITA_bop_low_increase_king_side_effect = yes
		}
	}
	
	shared_focus = {
		id = ITA_servizio_informazione_militare_royalist
		text = ITA_servizio_informazione_militare
		icon = GFX_focus_generic_secret_service_agency
		prerequisite = { focus = ITA_monarchia_d_italia }

		x = -1
		y = 1
		relative_position_id = ITA_monarchia_d_italia
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_intelligence_agency = no
					}
					create_intelligence_agency = yes
				}
				add_ideas = ITA_servizio_informazione_militare_ns

				ITA_create_rosa_dainelli_operative = yes
			}
			else = {
				add_ideas = ITA_servizio_informazione_militare_ns_vanilla
			}
		}
	}

	shared_focus = {
		id = ITA_extraction_industry
		icon = GFX_z_goal_mountain_industry
		prerequisite = { focus = ITA_monarchia_d_italia }

		x = -3
		y = 1
		relative_position_id = ITA_monarchia_d_italia
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			#IRI
			add_to_variable = { ITA_iri_local_resources_factor = 0.1 }
			custom_effect_tooltip = ITA_extraction_industry_iri_tt

			#MILITARY INDUSTRY
			add_to_variable = { ITA_military_industry_dm_production_lack_of_resource_penalty_factor = -0.15 }
			custom_effect_tooltip = ITA_extraction_industry_military_industry_tt
			
			117 = {
				if = {
					limit = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_resource = {
						type = steel
						amount = 8
					}
				}
			}

			custom_effect_tooltip = ITA_extraction_industry_oil_tt

			if = {
				limit = {
					any_controlled_state = {
						is_fully_controlled_by = ROOT
						has_resources_amount = {
							resource = oil
							amount > 0
						}
					}
				}
				custom_effect_tooltip = generic_current_effects
				every_controlled_state = {
					limit = {
						is_fully_controlled_by = ROOT
						has_resources_amount = {
							resource = oil
							amount > 0
						}
					}
					add_resource = {
						type = oil
						amount = 2
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_new_corporations
		icon = GFX_z_goal_contacts_with_foreign_companies_2
		prerequisite = { focus = ITA_extraction_industry }

		x = 1
		y = 1
		relative_position_id = ITA_extraction_industry
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_to_variable = { ITA_iri_production_speed_industrial_complex_factor = -0.35 }
			add_to_variable = { ITA_iri_conversion_cost_civ_to_mil_factor = 0.15 }
			custom_effect_tooltip = ITA_new_corporations_iri_tt

			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				set_state_flag = ITA_new_corporations_state_flag
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					NOT = { has_state_flag = ITA_new_corporations_state_flag }
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				set_state_flag = ITA_new_corporations_state_flag
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					NOT = { has_state_flag = ITA_new_corporations_state_flag }
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			#Clear stuff thanks
			hidden_effect = {
				every_core_state = {
					limit = {
						has_state_flag = ITA_new_corporations_state_flag
					}
					clr_state_flag = ITA_new_corporations_state_flag
				}
			}
		}
	}

	shared_focus = {
		id = ITA_prepare_for_the_coming_wars
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = ITA_extraction_industry }

		x = 0
		y = 2
		relative_position_id = ITA_extraction_industry
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				set_state_flag = ITA_prepare_for_the_coming_wars
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					NOT = { has_state_flag = ITA_prepare_for_the_coming_wars }
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				set_state_flag = ITA_prepare_for_the_coming_wars
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					NOT = { has_state_flag = ITA_prepare_for_the_coming_wars }
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				set_state_flag = ITA_prepare_for_the_coming_wars
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}

			#Clear stuff thanks
			hidden_effect = {
				every_core_state = {
					limit = {
						has_state_flag = ITA_prepare_for_the_coming_wars
					}
					clr_state_flag = ITA_prepare_for_the_coming_wars
				}
			}
		}
	}

	shared_focus = {
		id = ITA_mobilize_the_railway_guns
		icon = GFX_focus_generic_railway_gun
		prerequisite = { focus = ITA_prepare_for_the_coming_wars }

		x = -1
		y = 1
		relative_position_id = ITA_prepare_for_the_coming_wars
		cost = 5

		allow_branch = {
			has_dlc = "No Step Back"
			if = {
				limit = { has_focus_tree = nw_italian_focus }
				NOT = {
					has_global_flag = RDS_global_flag
					has_global_flag = GFC_global_flag
				}
			}
			else = {
				OR = {
					tag = RDS
					NOT = { has_global_flag = RDS_global_flag }
				}
			}
		}

		available = {
			has_tech = armored_train
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = ITA_mobilize_the_railway_guns_military_industry_dm_tt
			hidden_effect = {
				add_ideas = ITA_hidden_railway_gun_production_ns
			}

			if = {
				limit = {
					NOT = { has_tech = railway_gun }
				}
				set_technology = { railway_gun = 1 }
			}
			ITA_mobilize_railway_guns = yes
		}
	}

	shared_focus = {
		id = ITA_bring_back_old_glories
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = ITA_prepare_for_the_coming_wars }

		x = 1
		y = 1
		relative_position_id = ITA_prepare_for_the_coming_wars
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				set_technology = { coastal_defense_ships = 1 popup = no }
				set_technology = { pre_dreadnoughts = 1 popup = no }

				#QUARTO and LIBIA - Pre-Dreadnoughts
				create_equipment_variant = {
					name = "Vecchio Esploratore Class"
					type = ship_hull_pre_dreadnought
					name_group = ITA_BC_HISTORICAL
					parent_version = 0
					modules = {
						front_1_custom_slot = ship_anti_air_1
						mid_1_custom_slot = ship_secondaries_1
						rear_1_custom_slot = empty
						fixed_ship_battery_slot = ship_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_1
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bb_1
					}
					obsolete = yes
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_pre_dreadnought
						creator = "ITA"
						version_name = "Vecchio Esploratore Class"
					}
					name = "Quarto"
					requested_factories = 1
					progress = 0.8
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_pre_dreadnought
						creator = "ITA"
						version_name = "Vecchio Esploratore Class"
					}
					name = "Libia"
					requested_factories = 1
					progress = 0.6
					amount = 1
				}
				
				#ALESSANDRO POERIO Class - Destroyers
				create_equipment_variant = {
					name = "Alessandro Poerio Class"
					type = ship_hull_light_1
					name_group = ITA_DD_HISTORICAL
					parent_version = 0
					modules = {
						front_1_custom_slot = ship_anti_air_1
						rear_1_custom_slot = ship_mine_layer_1
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_1
						fixed_ship_radar_slot = empty
						fixed_ship_torpedo_slot = ship_torpedo_1
						fixed_ship_engine_slot = light_ship_engine_1
					}
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_light_1
						creator = "ITA"
						version_name = "Alessandro Poerio Class"
					}
					name = "Alessandro Poerio"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_light_1
						creator = "ITA"
						version_name = "Alessandro Poerio Class"
					}
					name = "Guglielmo Pepe"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}
				
				#ERITREA - Coastal Defense Ship
				create_equipment_variant = {
					name = "Eritrea Class"
					type = ship_hull_cruiser_coastal_defense_ship
					name_group = ITA_BC_HISTORICAL
					parent_version = 0
					modules = {
						front_1_custom_slot = ship_anti_air_1
						mid_1_custom_slot = ship_secondaries_1
						rear_1_custom_slot = empty
						fixed_ship_battery_slot = ship_medium_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_cruiser_1
					}
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_cruiser_coastal_defense_ship
						creator = "ITA"
						version_name = "Eritrea Class"
					}
					name = "Eritrea"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}
			}
			else = {
				#VECHIO ESPLORATORE CLASS (Quarto and Libia) - CA
				create_equipment_variant = {
					name = "Vecchio Esploratore Class"
					type = heavy_cruiser_1
					upgrades = {
						ship_reliability_upgrade = 2
						ship_engine_upgrade = 1
						ship_armor_upgrade = 2
						ship_gun_upgrade = 1
					}
				}
				add_equipment_production = {
					equipment = {
						type = heavy_cruiser_1
						creator = "ITA"
						version_name = "Vecchio Esploratore Class"
					}
					name = "Quarto"
					requested_factories = 1
					progress = 0.8
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = heavy_cruiser_1
						creator = "ITA"
						version_name = "Vecchio Esploratore Class"
					}
					name = "Libia"
					requested_factories = 1
					progress = 0.6
					amount = 1
				}

				#ALESSANDRO POERIO CLASS - DD
				create_equipment_variant = {
					name = "Alessandro Poerio Class"
					type = destroyer_1
					upgrades = {
						ship_torpedo_upgrade = 1
						destroyer_engine_upgrade = 1
						ship_ASW_upgrade = 0
						ship_anti_air_upgrade = 1
					}
				}
				add_equipment_production = {
					equipment = {
						type = destroyer_1
						creator = "ITA"
						version_name = "Alessandro Poerio Class"
					}
					name = "Alessandro Poerio"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = destroyer_1
						creator = "ITA"
						version_name = "Alessandro Poerio Class"
					}
					name = "Guglielmo Pepe"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}

				#ERITREA CLASS - DD
				create_equipment_variant = {
					name = "Eritrea Class"
					type = destroyer_1
					upgrades = {
						ship_torpedo_upgrade = 1
						destroyer_engine_upgrade = 2
						ship_ASW_upgrade = 0
						ship_anti_air_upgrade = 1
					}
				}
				add_equipment_production = {
					equipment = {
						type = destroyer_1
						creator = "ITA"
						version_name = "Eritrea Class"
					}
					name = "Eritrea"
					requested_factories = 1
					progress = 0.7
					amount = 1
				}
			}
		}
	}

	shared_focus = {
		id = ITA_new_forms_of_weaponry
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = ITA_prepare_for_the_coming_wars }

		x = 0
		y = 2
		relative_position_id = ITA_prepare_for_the_coming_wars
		cost = 10
		available = {
			has_tech = atomic_research
			if = {
				limit = {
					NOT = { has_country_flag = ITA_late_to_the_atomic_party_flag }
				}
				has_country_flag = ITA_pioneer_in_atomic_research_flag
			}
			else = {
				NOT = { has_country_flag = ITA_late_to_the_atomic_party_flag }
			}
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_timed_idea = {
				idea = ITA_nuclear_research
				days = 1095
			}
			add_tech_bonus = {
				name = ITA_new_forms_of_weaponry
				bonus = 1.5
				uses = 1
				category = nuclear
			}
		}
	}

	shared_focus = {
		id = ITA_revoke_the_acerbo_law
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = ITA_monarchia_d_italia }
		mutually_exclusive = { focus = ITA_power_to_the_king }
		x = 1
		y = 1
		relative_position_id = ITA_monarchia_d_italia
		cost = 5
		available = {
			is_subject = no
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			every_owned_state = { #Compensating for ideology swap auto-eating half compliance
				limit = {
					has_resistance = yes
				}
				add_compliance = 5
			}
			add_political_power = 50
			add_ideas = ITA_political_reforms
			add_popularity = {
				ideology = democratic
				popularity = 0.15
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_alcide_de_gasperi
			show_ideas_tooltip = ITA_luigi_einaudi

			unlock_decision_tooltip = ITA_bop_constitutional_draft
		}
	}

	shared_focus = {
		id = ITA_christian_democracy
		icon = GFX_focus_ITA_alcide_de_gasperi
		prerequisite = { focus = ITA_revoke_the_acerbo_law }
		mutually_exclusive = { focus = ITA_democratic_king }
		x = -1
		y = 1
		relative_position_id = ITA_revoke_the_acerbo_law
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}

		completion_reward = {
			every_owned_state = { #Compensating for ideology swap auto-eating half compliance
				limit = {
					has_resistance = yes
				}
				add_compliance = 10
			}

			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = no
			}
			set_party_name = {
				ideology = democratic
				name = ITA_democrazia_cristiana
				long_name = ITA_democrazia_cristiana_long
			}

			if = {
				limit = {
					has_character = ITA_vittorio_emanuele_iii
				}
				add_ideas = vittorio_emanuele
			}

			if = {
				limit = {
					has_character = ITA_alcide_de_gasperi
				}
				promote_character = ITA_alcide_de_gasperi
			}

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_mario_scelba

			hidden_effect = {
				set_cosmetic_tag = ITA_monarchy
			}
		}
	}

	shared_focus = {
		id = ITA_democratic_king
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		prerequisite = { focus = ITA_revoke_the_acerbo_law }
		mutually_exclusive = { focus = ITA_christian_democracy }
		x = 1
		y = 1
		relative_position_id = ITA_revoke_the_acerbo_law
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_ARMY_XP FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			every_owned_state = { #Compensating for ideology swap auto-eating half compliance
				limit = {
					has_resistance = yes
				}
				add_compliance = 10
			}
			
			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = no
			}
			if = {
				limit = {
					has_character = ITA_vittorio_emanuele_iii
				}
				add_country_leader_role = {
					character = ITA_vittorio_emanuele_iii
					promote_leader = yes
					country_leader = {
						ideology = conservatism
						traits = { the_soldier_king }
						expire = "1965.1.1.1"
						id = -1
					}
				}
			}
			else = {
				ITA_promote_umberto_to_country_leader = yes
			}

			hidden_effect = {
				set_cosmetic_tag = ITA_monarchy
			}
		}
	}

	shared_focus = {
		id = ITA_cooperate_with_moderates
		icon = GFX_goal_generic_improve_relations
		prerequisite = { focus = ITA_christian_democracy focus = ITA_democratic_king }

		x = 0
		y = 1
		relative_position_id = ITA_christian_democracy
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_guido_de_ruggiero
			show_ideas_tooltip = ITA_alberto_de_stefani
			show_ideas_tooltip = ITA_curzio_malaparte
		}
	}

	shared_focus = {
		id = ITA_expand_intelligence_services
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = ITA_democratic_king focus = ITA_christian_democracy }

		x = 0
		y = 1
		relative_position_id = ITA_democratic_king
		cost = 5
		available = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				has_intelligence_agency = yes
			}
		}

		search_filters = {}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				swap_ideas = {
					remove_idea = ITA_political_reforms
					add_idea = ITA_political_reforms_intelligence
				}
				ITA_create_edgardo_sogno_operative = yes
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_political_reforms
					add_idea = ITA_political_reforms_intelligence_no_lar
				}
			}
		}
	}

	shared_focus = {
		id = ITA_crush_opposition
		icon = GFX_focus_eng_move_to_secure_the_dominions
		prerequisite = { focus = ITA_cooperate_with_moderates focus = ITA_expand_intelligence_services }

		x = 1
		y = 1
		relative_position_id = ITA_cooperate_with_moderates
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_completed_focus = ITA_gloria_al_regno_d_italia }
					has_idea = ITA_shadow_of_mussolini
				}
				remove_ideas = ITA_shadow_of_mussolini
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_king_side
					}
				}
				ITA_bop_high_increase_king_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_king_umberto_side
					}
				}
				ITA_bop_high_increase_king_umberto_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_cristian_democratic_side
					}
				}
				ITA_bop_high_increase_democratic_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_high_increase_effect = yes
			}

			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_grand_council_side
					}
				}
				hidden_effect = { #Remove all BoP modifiers from losing states
					ITA_bop_remove_lost_core_modifier = yes
				}
				custom_effect_tooltip = ITA_crush_opposition_bop_tt
			}
		}
	}

	shared_focus = {
		id = ITA_power_to_the_king
		icon = GFX_focus_ITA_king_vittorio
		prerequisite = { focus = ITA_monarchia_d_italia }
		mutually_exclusive = { focus = ITA_revoke_the_acerbo_law }
		x = 5
		y = 0
		relative_position_id = ITA_revoke_the_acerbo_law
		cost = 5
		available = {
			monarchy > 0.5
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 75
			add_ideas = ITA_political_reforms_monarchist
			add_popularity = {
				ideology = monarchy
				popularity = 0.1
			}
			unlock_decision_tooltip = ITA_vittorio_abdicate

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = ITA_alberto_de_stefani

			unlock_decision_tooltip = ITA_bop_privileges_for_the_elites
			unlock_decision_tooltip = ITA_bop_revoke_the_lateran_treaty
		}
	}

	shared_focus = {
		id = ITA_disband_the_blackshirts
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		prerequisite = { focus = ITA_power_to_the_king focus = ITA_revoke_the_acerbo_law }
		mutually_exclusive = { focus = ITA_utilize_the_blackshirts }
		x = -2
		y = 1
		relative_position_id = ITA_power_to_the_king
		cost = 5
		available = {
			NOT = { has_completed_focus = ITA_battaglioni_d_assalto }
		}

		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_popularity = {
				ideology = fascism
				popularity = -0.5
			}
			delete_unit_template_and_units = {
				division_template = "Camicie Nere"
				disband = yes
			}

			if = {
				limit = {
					NOT = { has_completed_focus = ITA_revoke_the_acerbo_law }
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = ITA_alcide_de_gasperi

				custom_effect_tooltip = remove_political_advisor
				show_ideas_tooltip = ITA_renato_ricci
				show_ideas_tooltip = ITA_achille_starace
				show_ideas_tooltip = ITA_adelchi_serena
			}

			if = {
				limit = {
					has_completed_focus = ITA_seek_papal_support
				}
				unlock_decision_tooltip = ITA_bop_condemn_fascism
			}
		}
	}

	shared_focus = {
		id = ITA_utilize_the_blackshirts
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = ITA_power_to_the_king }
		mutually_exclusive = { focus = ITA_disband_the_blackshirts }
		x = 0
		y = 1
		relative_position_id = ITA_power_to_the_king
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_stability = -0.05
			add_popularity = {
				ideology = fascism
				popularity = 0.1
			}
			army_experience = 15
			
			custom_effect_tooltip = ITA_blackshirts_div_cap_8_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 8 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				ITA_create_carmelo_borg_pisani_operative = yes
			}
		}
	}

	shared_focus = {
		id = ITA_expand_the_royal_guard
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = ITA_disband_the_blackshirts focus = ITA_utilize_the_blackshirts }

		x = 1
		y = 1
		relative_position_id = ITA_disband_the_blackshirts
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_ARMY_XP FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER}

		completion_reward = {
			custom_effect_tooltip = ITA_expand_the_royal_guard_re_tt
			add_to_variable = { ITA_re_modifier_army_sub_unit_cavalry_defence_factor = 0.05 }

			add_popularity = {
				ideology = neutrality
				popularity = 0.05
			}

			army_experience = 15

			show_unit_leaders_tooltip = ITA_giuseppe_pieche

			division_template = { 
				name = "Reggimento Corazzieri" 
				division_names_group = ITA_INF_01 #TODO_Manu

				regiments = { 
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
					cavalry = { x = 1 y = 2 }
					mot_artillery_brigade = { x = 2 y = 0 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					artillery = { x = 0 y = 1 }
					anti_air = { x = 0 y = 2 }
				}
			}
			capital_scope = {
				create_unit = {
					division = "division_template = \"Reggimento Corazzieri\" start_experience_factor = 0.5 start_equipment_factor = 1.0"
					owner = ROOT
					count = 3
				}
			}
		}
	}

	shared_focus = {
		id = ITA_gloria_al_regno_d_italia
		icon = GFX_focus_rom_royal_dictatorship
		prerequisite = { focus = ITA_expand_the_royal_guard focus = ITA_democratic_king }

		x = -2
		y = 1
		relative_position_id = ITA_expand_the_royal_guard
		cost = 5
		available = {
			ITA_is_ruled_by_a_monarchy = yes
			44 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
			103 = {
				state_is_fully_controlled_by_ROOT_or_subject = yes
			}
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_political_power = 50
			if = {
				limit = {
					ITA_is_ruled_by_a_monarchy = yes
				}
				add_country_leader_trait = constitutional_monarch
			}
			else = {
				add_country_leader_trait = war_industrialist
			}

			if = {
				limit = {
					has_government = democratic
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.1
				}
			}
			else_if = {
				limit = {
					has_government = monarchy
				}
				add_popularity = {
					ideology = monarchy
					popularity = 0.1
				}
			}

			if = {
				limit = {
					NOT = { has_completed_focus = ITA_crush_opposition }
				}
				remove_ideas = ITA_shadow_of_mussolini
			}

			if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_king_side
					}
				}
				ITA_bop_high_increase_king_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_king_umberto_side
					}
				}
				ITA_bop_high_increase_king_umberto_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_cristian_democratic_side
					}
				}
				ITA_bop_high_increase_democratic_side_effect = yes
			}
			else_if = {
				limit = {
					is_power_balance_side_active = {
						id = ITA_power_balance
						side = ITA_pope_side
					}
				}
				ITA_bop_high_increase_pope_side_effect = yes
			}
			else_if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_high_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_paramilitary_training
		icon = GFX_focus_prc_infiltration
		prerequisite = { focus = ITA_expand_the_royal_guard }
		prerequisite = { focus = ITA_utilize_the_blackshirts }

		x = 1
		y = 1
		relative_position_id = ITA_expand_the_royal_guard
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_paramilitary_training_re_tt
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_defence_factor = 0.05 }
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_attack_factor = 0.05 }

			custom_effect_tooltip = ITA_blackshirts_div_cap_8_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 8 }
				set_division_template_cap = {  division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}
			show_unit_leaders_tooltip = ITA_prince_filiberto
		}
	}

	shared_focus = {
		id = ITA_seek_papal_support
		icon = GFX_focus_por_concordat
		prerequisite = { focus = ITA_power_to_the_king }

		x = 2
		y = 1
		relative_position_id = ITA_power_to_the_king
		cost = 5
		available = {
			NOT = { has_country_flag = ITA_revoked_lateran_treaty_flag }
			NOT = { country_exists = PAP }
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_popularity = {
				ideology = monarchy
				popularity = 0.05
			}
			add_ideas = ITA_papal_support

			#BoP
			if = {
				limit = { tag = RDS }
				set_power_balance = {
					id = RDS_power_balance
					left_side = ITA_pope_side
				}
			}
			else = {
				set_power_balance = {
					id = ITA_power_balance
					left_side = ITA_pope_side
				}
			}
			#If BoP was towards Grand Council, set it to 0
			if = {
				limit = {
					tag = RDS
					power_balance_value = {
						id = RDS_power_balance
						value < 0 # accepts <, > or =
					}
				}
				set_power_balance = {
					id = RDS_power_balance
					set_value = 0
				}
			}
			else_if = {
				limit = {
					has_focus_tree = nw_italian_focus
					power_balance_value = {
						id = ITA_power_balance
						value < 0 # accepts <, > or =
					}
				}
				set_power_balance = {
					id = ITA_power_balance
					set_value = 0
				}
			}
			hidden_effect = { #Remove all BoP modifiers from losing states
				ITA_bop_remove_lost_core_modifier = yes
			}
			unlock_decision_tooltip = ITA_bop_expand_the_lateran_treaty
			if = {
				limit = {
					has_completed_focus = ITA_disband_the_blackshirts
				}
				unlock_decision_tooltip = ITA_bop_condemn_fascism
			}
		}
	}

	shared_focus = {
		id = ITA_agents_of_the_church
		icon = GFX_focus_generic_vatican_agents
		prerequisite = { focus = ITA_seek_papal_support }

		x = 0
		y = 1
		relative_position_id = ITA_seek_papal_support
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				swap_ideas = { 
					remove_idea = ITA_papal_support
					add_idea = ITA_papal_support_agents
				}
				ITA_create_hugh_o_flaherty_operative = yes
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_papal_support
					add_idea = ITA_papal_support_agents_no_lar
				}
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_pope_side_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_strengthen_the_papacy
		icon = GFX_focus_generic_pope
		prerequisite = { focus = ITA_agents_of_the_church }

		x = 0
		y = 1
		relative_position_id = ITA_agents_of_the_church
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				swap_ideas = {
					remove_idea = ITA_papal_support_agents
					add_idea = ITA_papal_support_strengthened
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_papal_support_agents_no_lar
					add_idea = ITA_papal_support_strengthened_no_lar
				}
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_medium_increase_pope_side_effect = yes
			}

			unlock_decision_tooltip = ITA_bop_liturgical_reforms
		}
	}

	shared_focus = {
		id = ITA_setting_course
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = ITA_gloria_al_regno_d_italia focus = ITA_crush_opposition focus = ITA_strengthen_the_papacy }

		x = -1
		y = 2
		relative_position_id = ITA_gloria_al_regno_d_italia
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_ARMY_XP FOCUS_FILTER_AIR_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_STABILITY FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_war_support = 0.05
			army_experience = 25
			air_experience = 25
			navy_experience = 25
			add_timed_idea = {
				idea = ITA_setting_course_ns
				days = 365
			}
			
		}
	}





### FIRST BRANCH

	shared_focus = {
		id = ITA_towards_a_greater_italy
		icon = GFX_focus_ITA_greater_italy
		prerequisite = { focus = ITA_blackshirt_loyalty focus = ITA_setting_course focus = ITA_strengthen_the_regime }
		mutually_exclusive = { focus = ITA_mare_nostrum_bba }

		x = 6
		y = 1
		relative_position_id = ITA_blackshirt_loyalty
		offset = {
			x = 3
			y = -2
			trigger = {
				has_focus_tree = nw_italian_royalists_focus
			}
		}
		offset = {
			x = 3
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
				NOT = { has_global_flag = GFC_global_flag }
			}
		}
		offset = {
			x = 2
			y = -3
			trigger = {
				has_focus_tree = nw_italian_focus
				NOT = { has_global_flag = RDS_global_flag }
				has_global_flag = GFC_global_flag
			}
		}
		offset = {
			x = -12
			y = -3
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
				has_global_flag = GFC_global_flag
			}
		}
		offset = {
			x = -9
			y = 0
			trigger = {
				tag = GFC
				has_global_flag = RDS_global_flag
			}
		}
		cost = 5

		bypass = {
			458 = { is_claimed_by = ROOT }
			665 = { is_claimed_by = ROOT }
			904 = { is_claimed_by = ROOT }
			811 = { is_claimed_by = ROOT }
			905 = { is_claimed_by = ROOT }
			857 = { is_claimed_by = ROOT }
			44 = { is_claimed_by = ROOT }
			856 = { is_claimed_by = ROOT }
		}

		available = {
			is_subject = no
			has_civil_war = no
		}

		search_filters = {}

		completion_reward = {
			#TODO_Manu: Need to do something here because it is super redundant with everything else

			custom_effect_tooltip = form_greater_italy_tt

			#TODO_Manu: What if Italian allies/subjects control these?

			#TODO_Manu: Re-arrange script so that tooltips are clearer
			#CLAIMS IN TUNISIA
			if = {
				limit = {
					458 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 458 #TUNISIA
				if = {
					limit = {
						458 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Tunisian states
						limit = {
							458 = {
								controller = {
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 665 }
						}
					}
					else = { #Each Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 }
						}
					}
				}
			}
			if = {
				limit = {
					665 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 665 #GABS
				if = {
					limit = {
						665 = {
							controller = {
								NOT = { controls_state = 458 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 665.controller
						generator = { 665 }
					}
				}
			}

			#CLAIMS IN DALMATIAN COAST (Yugoslavia)
			if = {
				limit = {
					811 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 811 #DALMATIA
				if = {
					limit = {
						811 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Yugoslavian states
						limit = {
							811 = {
								controller = {
									controls_state = 905
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 811.controller
							generator = { 811 905 }
						}
					}
					else = { #Each Yugoslavian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 811.controller
							generator = { 811 }
						}
					}
					
				}
			}
			if = {
				limit = {
					905 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 905
				if = {
					limit = {
						905 = {
							controller = {
								NOT = { controls_state = 103 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 905.controller
						generator = { 905 }
					}
				}
			}

			#CLAIMS IN ALBANIA
			if = {
				limit = {
					44 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 44 #ALBANIA
				if = {
					limit = {
						44 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Albanian states
						limit = {
							44 = {
								controller = {
									controls_state = 856
									controls_state = 857
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 44.controller
							generator = { 44 856 857 }
						}
					}
					else = { #Each Albanian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 44.controller
							generator = { 44 }
						}
					}
					
				}
			}
			if = {
				limit = {
					856 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 856 #NORTHERN EPIRUS
				if = {
					limit = {
						856 = {
							controller = {
								NOT = { controls_state = 44 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 856.controller
						generator = { 856 }
					}
				}
			}
			if = {
				limit = {
					857 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 857
				if = {
					limit = {
						857 = {
							controller = {
								NOT = { controls_state = 44 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 857.controller
						generator = { 957 }
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_heroes_of_the_nation
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = ITA_towards_a_greater_italy }
		mutually_exclusive = { focus = ITA_capo_supremo }
		x = -2
		y = 1
		relative_position_id = ITA_towards_a_greater_italy
		offset = {
			x = 5
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
				NOT = { has_global_flag = GFC_global_flag }
			}
		}
		offset = {
			x = 5
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
				has_global_flag = GFC_global_flag
			}
		}
		
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_AIR_XP FOCUS_FILTER_ARMY_XP FOCUS_FILTER_NAVY_XP FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_to_variable = { ITA_re_promote_cost_factor = -0.2 }
			add_to_variable = { ITA_re_command_power_gain_mult = 0.15 }
			custom_effect_tooltip = ITA_heroes_of_the_nation_re_tt

			army_experience = 25
			navy_experience = 25
			air_experience = 25
			add_war_support = 0.05

			if = {
				limit = {
					has_country_leader = {
						character = ITA_benito_mussolini
						ruling_only = yes
					}
				}
				swap_ruler_traits = {
					remove = il_duce_devotion
					add =  il_duce_heroes
				}
			}

			custom_effect_tooltip = ITA_heroes_of_the_nation_general_traits_tt
			#Stupid tooltips oh my god I hate this game
			hidden_effect = {
				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}

				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}

				if = {
					limit = {
						any_unit_leader = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
					}
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
							is_leading_army = yes
							skill > 3
						}
						add_unit_leader_trait = war_hero
					}
				}
				else = {
					random_unit_leader = {
						limit = {
							NOT = { has_trait = war_hero }
						}
						add_unit_leader_trait = war_hero
					}	
				}
			}
		}
	}
	
	
	shared_focus = {
		id = ITA_capo_supremo
		icon = GFX_focus_ITA_capo_supremo
		prerequisite = { focus = ITA_towards_a_greater_italy }
		prerequisite = { focus = ITA_devotion }
		mutually_exclusive = { focus = ITA_heroes_of_the_nation }
		x = -2
		y = 0
		relative_position_id = ITA_heroes_of_the_nation
		
		cost = 10
		available = {
			has_country_leader = {
				character = ITA_benito_mussolini
				ruling_only = yes
			}
			if = {
				limit = { has_any_power_balance = yes }
				power_balance_value = {
					id = ITA_power_balance
					value > 0.949
				}
			}
		}
		allow_branch = {
			has_focus_tree = nw_italian_focus
			NOT = { has_completed_focus = ITA_convene_the_grand_council }
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			add_war_support = 0.05
			add_stability = -0.05
			add_political_power = 75
			add_command_power = 50
			add_popularity = {
				ideology = fascism
				popularity = 0.1
			}

			add_country_leader_trait = capo_supremo

			custom_effect_tooltip = ITA_mussolini_becomes_field_marshal_tt #Has to start as unit leader so that you cannot give him traits via unit_leader events (missiolinis)

			hidden_effect = {
				ITA_benito_mussolini = {
					promote_leader = yes
					add_unit_leader_trait = old_guard
					add_unit_leader_trait = politically_connected
					add_unit_leader_trait = media_personality
					add_unit_leader_trait = harsh_leader
				}
			}

			ITA_remove_king_vittorio_emanuele_as_idea = yes

			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				if = {
					limit = {
						has_tech = super_heavy_tank_chassis
					}
					#SH template
					ITA_add_il_duce_sh_tank_template_and_production = yes
				}
				else = {
					add_tech_bonus = {
						name = ITA_capo_supremo
						ahead_reduction = 2
						bonus = 1.0
						uses = 1
						technology = super_heavy_tank_chassis
					}
					custom_effect_tooltip = ITA_focus_sh_tank_template_tt
					effect_tooltip = {
						ITA_add_il_duce_sh_tank_template_and_production = yes
					}
				}
			}
			else = {
				add_tech_bonus = {
					name = ITA_capo_supremo
					ahead_reduction = 2
					bonus = 1.0
					uses = 1
					technology = super_heavy_tank
					technology = super_heavy_td
					technology = super_heavy_art
					technology = super_heavy_spaa
				}
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_very_low_increase_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_bend_the_bars
		icon = GFX_focus_ITA_bend_the_bars
		prerequisite = { focus = ITA_towards_a_greater_italy }

		x = 0
		y = 1
		relative_position_id = ITA_towards_a_greater_italy
		offset = {
			x = -1
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
			}
		}
		
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			#CLAIM IN CORSICA
			if = {
				limit = {
					1 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 1 #CORSICA
				if = {
					limit = {
						1 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for Corsica and Tunisian states
						limit = {
							1 = {
								controller = {
									controls_state = 458
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 1.controller
							generator = { 1 458 }
						}
					}
					else = { #Corsica and Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 1.controller
							generator = { 1 }
						}
					}
				}
			}

			#CLAIMS IN TUNISIA
			if = {
				limit = {
					458 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 458 #TUNISIA
				if = {
					limit = {
						458 = {
							controller = {
								ROOT = { NOT = { has_wargoal_against = PREV } } #Didn't get wargoal from Corsica script above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Tunisian states
						limit = {
							458 = {
								controller = {
									controls_state = 665
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 665 }
						}
					}
					else = { #Each Tunisian states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 458.controller
							generator = { 458 }
						}
					}
				}
			}
			if = {
				limit = {
					665 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 665 #GABS
				if = {
					limit = {
						665 = {
							controller = {
								ROOT = { NOT = { has_wargoal_against = PREV } } #Didn't get wargoal from Corsica script above
								NOT = { controls_state = 458 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 665.controller
						generator = { 665 }
					}
				}
			}

			#CLAIMS IN BRITISH ISLANDS
			if = {
				limit = {
					116 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 116 #MALTA
				if = {
					limit = {
						116 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both Malta and Cyprus
						limit = {
							116 = {
								controller = {
									controls_state = 183
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 116.controller
							generator = { 116 183 }
						}
					}
					else = { #Malta and Cyprus have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 116.controller
							generator = { 116 }
						}
					}
				}
			}
			if = {
				limit = {
					183 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 183 #CYPRUS
				if = {
					limit = {
						183 = {
							controller = {
								NOT = { controls_state = 116 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for trio Cyprus states
						limit = {
							183 = {
								controller = {
									controls_state = 772
									controls_state = 1153
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 183.controller
							generator = { 183 772 1153 }
						}
					}
					else = { #Cyprus states have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 183.controller
							generator = { 183 }
						}
					}
				}
			}
			if = {
				limit = {
					772 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 772 #NORTHERN CYPRUS
				if = {
					limit = {
						772 = {
							controller = {
								NOT = { controls_state = 772 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 772.controller
						generator = { 772 }
					}
				}
			}
			if = {
				limit = {
					1153 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 1153 #AKROTIRI AND DHEKELIA
				if = {
					limit = {
						1153 = {
							controller = {
								NOT = { controls_state = 1153 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 1153.controller
						generator = { 1153 }
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_subdue_the_sentinels
		icon = GFX_focus_ITA_subdue_the_sentinels
		prerequisite = { focus = ITA_bend_the_bars }

		x = 0
		y = 1
		relative_position_id = ITA_bend_the_bars
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			#CLAIMS IN GIBRALTAR AND SUEZ CANAL
			if = {
				limit = {
					118 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 118 #GIBRALTAR
				if = {
					limit = {
						118 = {
							controller = {
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					if = { #Same controller for both states
						limit = {
							118 = {
								controller = {
									controls_state = 1064
								}
							}
						}
						create_wargoal = {
							type = take_state_focus
							target = 118.controller
							generator = { 118 1064 }
						}
					}
					else = { #Each state have different controllers
						create_wargoal = {
							type = take_state_focus
							target = 118.controller
							generator = { 118 }
						}
					}
					
				}
			}
			if = {
				limit = {
					1064 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 1064 #CAIRO (Suez Canal)
				if = {
					limit = {
						1064 = {
							controller = {
								NOT = { controls_state = 118 } #Otherwise already received the wargoal above
								NOT = { has_war_with = ROOT }
								NOT = { is_in_faction_with = ROOT }
								NOT = { has_non_aggression_pact_with = ROOT }
								NOT = { is_guaranteed_by = ROOT }
							}
						}
					}
					create_wargoal = {
						type = take_state_focus
						target = 1064.controller
						generator = { 1064 }
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_a_colonial_empire
		icon = GFX_focus_ITA_a_colonial_empire
		prerequisite = { focus = ITA_subdue_the_sentinels }

		x = 0
		y = 1
		relative_position_id = ITA_subdue_the_sentinels
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_to_variable = { ITA_re_non_core_manpower = 0.15 }
			custom_effect_tooltip = ITA_a_colonial_empire_re_tt

		#TODO_Manu: Really need code support for something like this
#			create_wargoal = {
#				type = take_state_focus
#				target = FRA
#				generator = { FRA.core_states }
#			}
#
#			create_wargoal = {
#				type = take_state_focus
#				target = FRA
#				generator = { ROOT.ITA_array_of_states }
#			}
#
#			create_wargoal = {
#				type = take_state_focus
#				target = FRA
#				generator = {
#					all_states = yes
#					limit_to_claimed_by_root = yes
#					limit_to_cores_by_root = yes
#					limit_to_cored_by_target = yes
#					limit_to_non_cored_by_target = yes
#				}
#			}

			custom_effect_tooltip = ITA_a_colonial_empire_claims_tt
			every_state = {
				limit = {
					OR = {
						is_core_of = EGY
						is_core_of = KEN
						is_core_of = SUD
						is_core_of = SOM
						is_core_of = DJI
						is_core_of = ETH
						is_core_of = ERI
						is_core_of = UGA
					}
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}

	shared_focus = {
		id = ITA_by_blood_alone
		icon = GFX_focus_ITA_by_blood_alone
		prerequisite = { focus = ITA_a_colonial_empire }

		x = 0
		y = 1
		relative_position_id = ITA_a_colonial_empire
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			# REGIO ESERCITO
			add_to_variable = { ITA_re_army_morale_factor = 0.05 }
			add_to_variable = { ITA_re_conscription_factor = 0.05 }
			add_to_variable = { ITA_re_army_attack_factor = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_re_tt

			#REGIA AERONAUTICA
			add_to_variable = { ITA_ra_air_superiority_bonus_in_combat = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_ra_tt

			#REGIA MARINA
			add_to_variable = { ITA_rm_naval_morale_factor = 0.05 }
			custom_effect_tooltip = ITA_by_blood_alone_rm_tt

			add_stability = -0.1
			add_war_support = 0.1
			if = {
				limit = {
					NOT = { has_rule = can_use_kamikaze_pilots }
				}
				set_rule = { can_use_kamikaze_pilots = yes }
			}
		}
	}

	shared_focus = {
		id = ITA_masters_of_the_aegean
		icon = GFX_focus_generic_aegean_sea_focus
		prerequisite = { focus = ITA_bend_the_bars }

		x = 2
		y = 1
		relative_position_id = ITA_bend_the_bars
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_masters_of_the_aegean_claims_tt
			every_state = {
				limit = {
					BUL_state_is_in_the_aegean_sea = yes
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}

	shared_focus = {
		id = ITA_masters_of_the_mediterranean
		icon = GFX_focus_generic_mediterranean_sea_focus
		prerequisite = { focus = ITA_masters_of_the_aegean }

		x = 0
		y = 1
		relative_position_id = ITA_masters_of_the_aegean
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_masters_of_the_mediterranean_claims_tt
			every_state = {
				limit = {
					state_is_in_the_mediterranean_sea = yes
					NOT = { is_owned_by = ROOT }
					NOT = { is_claimed_by = ROOT }
				}
				hidden_effect ={
					ROOT = { add_state_claim = PREV }
				}
				custom_effect_tooltip = generic_ROOT_gains_claim_tt
			}
		}
	}



### SECOND BRANCH

	shared_focus = {
		id = ITA_mare_nostrum_bba
		icon = GFX_focus_ITA_mare_nostrum
		prerequisite = { focus = ITA_setting_course focus = ITA_blackshirt_loyalty  focus = ITA_strengthen_the_regime }
		mutually_exclusive = { focus = ITA_towards_a_greater_italy }
		x = 6
		y = 0
		relative_position_id = ITA_towards_a_greater_italy
		
		offset = {
			x = -13
			y = 0
			trigger = {
				has_focus_tree = nw_italian_focus
				has_global_flag = RDS_global_flag
			}
		}
		
		allow_branch = {
			if = {
				limit = {
					has_focus_tree = nw_italian_focus
				}
				NOT = { has_global_flag = GFC_global_flag }
			}
		}

		cost = 5
		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				dockyard > 0
			}
			is_subject = no
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_rule = can_create_factions }
				}
				set_rule = { can_create_factions = yes }
			}
			if = {
				limit = {
					is_in_faction = no
				}
				create_faction = "italy_empire_faction"
			}

			unlock_decision_tooltip = form_roman_empire

			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}

			add_tech_bonus = { #Changed to require the tech to complete this focus, and give template and production line
				name = ITA_mare_nostrum_bba
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				technology = super_heavy_tank_chassis
			}
			add_tech_bonus = { #Changed to require the tech to complete this focus, and give template and production line
				name = ITA_mare_nostrum_bba
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				category = heavy_air
			}
			add_tech_bonus = { #Changed to require the tech to complete this focus, and give template and production line
				name = ITA_mare_nostrum_bba
				bonus = 1.0
				uses = 1
				technology = ship_hull_super_heavy
			}

			if = {
				limit = {
					has_rule = can_only_justify_war_on_threat_country
				}
				set_rule = { can_only_justify_war_on_threat_country = no }
			}
			if = {
				limit = {
					NOT = { has_rule = can_declare_war_on_same_ideology }
				}
				set_rule = { can_declare_war_on_same_ideology = yes }
			}
			if = {
				limit = {
					NOT = { has_rule = can_send_volunteers }
				}
				set_rule = { can_send_volunteers = yes }
			}
		}
	}

	shared_focus = {
		id = ITA_auxiliaries
		icon = GFX_focus_ETH_peacekeeping_forces
		prerequisite = { focus = ITA_mare_nostrum_bba }

		x = -2
		y = 1
		relative_position_id = ITA_mare_nostrum_bba
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_ITA_auxiliaries_re_tt
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_speed_factor = 0.05 }
			add_to_variable = { ITA_re_modifier_army_sub_unit_militia_attack_factor = 0.03 }

			custom_effect_tooltip = ITA_blackshirts_div_cap_12_tt
			hidden_effect = {
				add_to_variable = { ITA_militias_cap = 12 }
				set_division_template_cap = { division_template = "Camicie Nere" division_cap = ITA_militias_cap }
			}
		}
	}

	shared_focus = {
		id = ITA_the_italian_legions
		icon = GFX_focus_generic_fascist_troops
		prerequisite = { focus = ITA_mare_nostrum_bba }

		x = 0
		y = 1
		relative_position_id = ITA_mare_nostrum_bba
		cost = 10
		available = {
		}

		search_filters = {}

		completion_reward = {
			custom_effect_tooltip = ITA_the_italian_legions_re_tt
			add_to_variable = { ITA_re_army_core_defence_factor = 0.05 }
			add_to_variable = { ITA_re_army_speed_factor = 0.05 }
			add_to_variable = { ITA_re_max_command_power_mult = 0.15 }
		}
	}

	shared_focus = {
		id = ITA_new_roman_citizens
		icon = GFX_focus_ETH_invite_italian_settlers
		prerequisite = { focus = ITA_mare_nostrum_bba }

		x = 2
		y = 1
		relative_position_id = ITA_mare_nostrum_bba
		cost = 5
		available = {
		}

		search_filters = {}

		completion_reward = {
			every_controlled_state = {
				limit = {
					resistance > 0
					is_fully_controlled_by = ROOT
				}
				add_compliance = 5
				add_resistance_target = -10
			}
		}
	}

	shared_focus = {
		id = ITA_all_roads_lead_to_rome
		icon = GFX_focus_generic_spread_fascism
		prerequisite = { focus = ITA_the_italian_legions }

		x = 0
		y = 1
		relative_position_id = ITA_the_italian_legions
		cost = 10
		available = {
			has_full_control_of_state = 2
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = ITA_all_roads_lead_to_rome_iri_tt
			add_to_variable = { ITA_iri_production_speed_infrastructure_factor = 0.1 }

			custom_effect_tooltip = ITA_all_roads_lead_to_rome_re_tt
			add_to_variable = { ITA_re_supply_node_range = 0.1 }

			custom_effect_tooltip = ITA_all_roads_lead_to_rome_wargoals_tt
			if = {
				limit = {
					any_neighbor_country = {
						capital_scope = { is_on_continent = europe }
						NOT = {
							is_in_faction_with = ROOT
							has_guaranteed = ROOT
							is_guaranteed_by = ROOT
							has_non_aggression_pact_with = ROOT
							has_war_with = ROOT
						}
					}
				}
				custom_effect_tooltip = generic_current_effects
				custom_effect_tooltip = generic_ROOT_gains_wargoal_tt
				every_neighbor_country = {
					limit = {
						capital_scope = { is_on_continent = europe }
						NOT = {
							is_in_faction_with = ROOT
							has_guaranteed = ROOT
							is_guaranteed_by = ROOT
							has_non_aggression_pact_with = ROOT
							has_war_with = ROOT
						}
					}
					hidden_effect = {
						ROOT = {
							create_wargoal = {
								type = annex_everything
								target = PREV
							}
						}
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_the_king_of_the_skies
		icon = GFX_focus_generic_long_range_aircraft
		prerequisite = { focus = ITA_all_roads_lead_to_rome }

		x = -2
		y = 1
		relative_position_id = ITA_all_roads_lead_to_rome
		cost = 10
		available = {
			has_full_control_of_state = 2
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				has_tech = advanced_large_airframe
				has_tech = engines_4
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = ITA_the_king_of_the_skies
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				category = heavy_air
			}
			custom_effect_tooltip = ITA_the_king_of_the_skies_military_industry_dm_tt
			hidden_effect = {
				add_ideas = ITA_hidden_super_heavy_aircraft_ns
			}

			ITA_add_the_king_of_the_skies_template_production_and_wing = yes
		}
	}

	shared_focus = {
		id = ITA_modern_musculus
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = ITA_all_roads_lead_to_rome }

		x = 0
		y = 1
		relative_position_id = ITA_all_roads_lead_to_rome
		cost = 10
		available = {
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				has_tech = super_heavy_tank_chassis
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				#add_tech_bonus = { #Changed to require the tech to complete this focus, and give template and production line
				#	name = ITA_modern_musculus
				#	ahead_reduction = 2
				#	bonus = 1.0
				#	uses = 1
				#	technology = super_heavy_tank_chassis
				#}
				custom_effect_tooltip = ITA_modern_musculus_military_industry_dm_tt
				hidden_effect = {
					add_ideas = ITA_hidden_super_heavy_tank_ns
				}
				ITA_add_modern_musculus_sh_tank_template_and_production = yes
			}
			else = {
				add_tech_bonus = {
					name = ITA_modern_musculus
					ahead_reduction = 2
					bonus = 1.0
					uses = 1
					technology = super_heavy_tank
					technology = super_heavy_td
					technology = super_heavy_art
					technology = super_heavy_spaa
				}
			}
		}
	}

	shared_focus = {
		id = ITA_caligulas_pride
		icon = GFX_focus_generic_navy_battleship2
		prerequisite = { focus = ITA_all_roads_lead_to_rome }

		x = 2
		y = 1
		relative_position_id = ITA_all_roads_lead_to_rome
		cost = 5
		available = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = ship_hull_super_heavy
			}
			else = {
				has_tech = heavy_battleship
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			random_core_state = {
				limit = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				add_tech_bonus = {
					name = ITA_caligulas_pride
					ahead_reduction = 2
					bonus = 1.0
					uses = 1
					category = bb_tech
					category = bc_tech
					category = cat_ship_heavy_battery
				}
				custom_effect_tooltip = ITA_caligulas_pride_military_industry_dm_tt
				hidden_effect = {
					add_ideas = ITA_hidden_super_heavy_bb_ns
				}

				create_equipment_variant = {
					name = "Neptunus Class"
					type = ship_hull_super_heavy_1
					name_group = ITA_BB_HISTORICAL #TODO_Manu: Namelist?
					parent_version = 0
					modules = {
						front_1_custom_slot = ship_anti_air_2
						front_2_custom_slot = ship_super_heavy_battery_1
						mid_1_custom_slot = ship_secondaries_2
						mid_2_custom_slot = ship_secondaries_2
						mid_3_custom_slot = ship_anti_air_2
						rear_1_custom_slot = ship_super_heavy_battery_1
						rear_2_custom_slot = ship_airplane_launcher_2
						fixed_ship_battery_slot = ship_super_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_1
						fixed_ship_radar_slot = ship_radar_1
						fixed_ship_engine_slot = heavy_ship_engine_3
						fixed_ship_secondaries_slot = dp_ship_secondaries_2
						fixed_ship_armor_slot = ship_armor_shbb
					}
				}

				#Line Production
				add_equipment_production = {
					equipment = {
						type = ship_hull_super_heavy_1
						creator = "ITA"
						version_name = "Neptunus Class"
					}
					name = "Neptunus"
					requested_factories = 2
					progress = 0.6
					amount = 1
				}
			}
			else = {
				if = {
					limit = {
						NOT = { has_tech = heavy_battleship2 }
					}
					add_tech_bonus = {
						name = ITA_caligulas_pride
						ahead_reduction = 2
						bonus = 1.0
						uses = 1
						category = shbb_tech
					}
				}

				create_equipment_variant = {
					name = "Neptunus Class"
					type = SH_battleship_1
					upgrades = {
						ship_reliability_upgrade = 2
						ship_engine_upgrade = 2
						ship_armor_upgrade = 3
						ship_gun_upgrade = 3
					}
				}

				#Line Production
				add_equipment_production = {
					equipment = {
						type = SH_battleship_1
						creator = "ITA"
						version_name = "Neptunus Class"
					}
					name = "Neptunus"
					requested_factories = 2
					progress = 0.6
					amount = 1
				}
			}
		}
	}

	shared_focus = {
		id = ITA_iberian_protection
		icon = GFX_focus_generic_free_iberia
		prerequisite = { focus = ITA_mare_nostrum_bba focus = ITA_deus_vult }

		x = 4
		y = 2
		relative_position_id = ITA_mare_nostrum_bba
		cost = 5
		
		available = {
			OR = {
				POR = {
					exists = yes
					has_civil_war = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
				SPR = {
					exists = yes
					has_civil_war = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
				SPA = {
					exists = yes
					has_civil_war = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
				ARA = {
					exists = yes
					has_civil_war = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
			}
		}

		search_filters = {}

		completion_reward = {
			every_other_country = {
				limit = {
					OR = {
						original_tag = POR
						original_tag = SPR
						original_tag = SPA
						original_tag = ARA
					}
					has_civil_war = no
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
				country_event = {
				    id = BBA_italy_interaction_events.41
				    days = 2
				    random = 6
				}
			}
			if = {
				limit = {
					has_completed_focus = ITA_deus_vult
					is_faction_leader = no
				}
				create_faction = ITA_papal_faction 
			}
			if = {
				limit = {
					has_completed_focus = ITA_mare_nostrum_bba
					is_faction_leader = no
				}
				create_faction = ITA_roman_faction
			}
		}
	}

	shared_focus = {
		id = ITA_south_american_alliances
		icon = GFX_focus_por_recover_latin_america
		prerequisite = { focus = ITA_iberian_protection }

		x = 0
		y = 1
		relative_position_id = ITA_iberian_protection
		cost = 10
		available = {
			#NOT adding requirements here since it's a final focus and it would really overrcrowd tt
		}

		search_filters = {}

		completion_reward = {
			every_country = {
				limit = {
					exists = yes
					is_latin_american_country = yes
					is_in_faction = no
					NOT = {
						has_war_with = ROOT
						is_justifying_wargoal_against = ROOT
					}
				}
				add_opinion_modifier = {
				    target = ITA
				    modifier = ITA_latin_initiatives
				}
				country_event = { 
				    id = BBA_italy_interaction_events.44
				    days = 2
				    random = 6
				}
			}
		}
	}

	shared_focus = {
		id = ITA_the_papacy_reborn
		icon = GFX_focus_generic_vatican_state
		prerequisite = { focus = ITA_strengthen_the_papacy }
		x = -4
		y = 3
		relative_position_id = ITA_strengthen_the_papacy
		offset = {
			x = 4
			y = 0
			trigger = {
				has_focus_tree = nw_italian_royalists_focus
			}
		}
		
		cost = 5

		available = {
			ITA_is_ruled_by_a_pope = yes
			is_subject = no
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					has_rule = can_create_factions
				}
				set_rule = { can_create_factions = yes }
			}

			add_political_power = 75
			add_popularity = {
				ideology = monarchy
				popularity = 0.15
			}
			2 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = bunker
					level = 3
					province = 9904
					instant_build = yes
				}
				if = {
					limit = {
						anti_air_building < 5
					}
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
				}
			}
			set_cosmetic_tag = papal_states

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				swap_ideas = {
					remove_idea = ITA_papal_support_strengthened
					add_idea = ITA_papal_state
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_papal_support_strengthened_no_lar
					add_idea = ITA_papal_state_no_lar
				}
			}
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_low_increase_pope_side_effect = yes
			}
		}
	}

	shared_focus = {
		id = ITA_deus_vult
		icon = GFX_focus_spr_torchbearers_of_tomorrow
		prerequisite = { focus = ITA_the_papacy_reborn }

		x = 0
		y = 1
		relative_position_id = ITA_the_papacy_reborn
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				swap_ideas = {
					remove_idea = ITA_papal_state
					add_idea = ITA_papal_state_deus_vult
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_papal_state_no_lar
					add_idea = ITA_papal_state_deus_vult_no_lar
				}
			}
		}
	}

	shared_focus = {
		id = ITA_il_vento_aureo
		icon = GFX_focus_generic_air_defense
		prerequisite = { focus = ITA_deus_vult }

		x = 4
		y = 1
		relative_position_id = ITA_deus_vult
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			air_experience = 15

			add_ideas = ITA_vento_aureo
			
			if = {
				limit = {
					has_rule = can_only_justify_war_on_threat_country
				}
				set_rule = { can_use_kamikaze_pilots = yes }
			}
		}
	}

	shared_focus = {
		id = ITA_catholic_action
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = ITA_the_papacy_reborn }

		x = 2
		y = 1
		relative_position_id = ITA_the_papacy_reborn
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			set_variable = { ITA_re_army_morale_factor = 0.05 }
			set_variable = { ITA_re_conscription_factor = 0.1 }
			custom_effect_tooltip = ITA_catholic_action_re_tt
		}
	}

	shared_focus = {
		id = ITA_a_time_for_war
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = ITA_deus_vult }

		x = 0
		y = 1
		relative_position_id = ITA_deus_vult
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = ITA_a_time_for_war_tt
			if = {
				limit = {
					any_of_scopes = {
						array = global.europe
						owner = {
							NOT = { tag = ROOT }
							capital_scope = {
								is_on_continent = europe
							}
							NOT = {
								is_in_faction_with = ROOT
								is_guaranteed_by = ROOT
								has_guaranteed = ROOT
								has_non_aggression_pact_with = ROOT
							}
							ITA_is_protestant_or_orthodox_country_in_europe_for_pope = yes
						}
					}
				}
				custom_effect_tooltip = generic_current_effects
				every_other_country = {
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						NOT = {
							is_in_faction_with = ROOT
							is_guaranteed_by = ROOT
							has_guaranteed = ROOT
							has_non_aggression_pact_with = ROOT
						}
						ITA_is_protestant_or_orthodox_country_in_europe_for_pope = yes
					}
					ROOT = {
						create_wargoal = {
							type = puppet_wargoal_focus
							target = PREV 
						}
					}
				}
			}
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				
				custom_effect_tooltip = ITA_modern_musculus_military_industry_dm_tt
				hidden_effect = {
					add_ideas = ITA_hidden_super_heavy_tank_ns
				}

				if = {
					limit = {
						has_tech = super_heavy_tank_chassis
					}
					#SH template
					ITA_add_hand_of_god_sh_tank_template_and_production = yes
				}
				else = {
					custom_effect_tooltip = ITA_focus_sh_tank_template_tt
					effect_tooltip = {
						ITA_add_hand_of_god_sh_tank_template_and_production = yes
					}
				}
			}
			else = {
				add_tech_bonus = {
					name = ITA_a_time_for_war
					ahead_reduction = 2
					bonus = 1.0
					uses = 1
					technology = super_heavy_tank
					technology = super_heavy_td
					technology = super_heavy_art
					technology = super_heavy_spaa
				}
			}
		}
	}

	shared_focus = {
		id = ITA_the_holy_lands
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = ITA_deus_vult }

		x = 2
		y = 1
		relative_position_id = ITA_deus_vult
		cost = 10
		available = {
			OR = {
				AND = {
					owns_state = 978
					has_full_control_of_state = 978
				}
				AND = {
					owns_state = 980
					has_full_control_of_state = 980
				}
				978 = {
					is_fully_controlled_by = owner
					owner = {
						NOT = {
							has_war_with = ROOT
						}
					}
				}
				980 = {
					is_fully_controlled_by = owner
					owner = {
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
		}

		search_filters = {FOCUS_FILTER_ANNEXATION FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = {
				limit = {
					NOT = { owns_state = 980 }
					980 = {
						is_fully_controlled_by = owner
						owner = {
							NOT = {
								has_war_with = ROOT
							}
						}
					}
				}
				980 = {
					owner = {
						country_event = { id = BBA_italy_interaction_events.666 hours = 6 random_hours = 2 }
					}
				}
				custom_effect_tooltip = if_they_accept_tt
				effect_tooltip = {
					transfer_state = 980 #PALESTINE
					add_war_support = 0.03
					980 = {
						set_state_category = town
						add_extra_state_shared_building_slots = 2
						add_building_construction = {
							type = bunker
							level = 2
							province = 4206
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 1086
							instant_build = yes
						}
						if = {
							limit = {
								anti_air_building < 5
							}
							add_building_construction = {
								type = anti_air_building
								level = 1
								instant_build = yes
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					owns_state = 980
					has_full_control_of_state = 980
				}
				add_war_support = 0.03
				980 = {
					set_state_category = town
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = bunker
						level = 2
						province = 4206
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 1086
						instant_build = yes
					}
					if = {
						limit = {
							anti_air_building < 5
						}
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}
					}
				}
			}
		}
	}

	shared_focus = {
		id = ITA_the_catholic_dominion
		icon = GFX_focus_generic_catholic_dominion
		prerequisite = { focus = ITA_a_time_for_war }
		prerequisite = { focus = ITA_the_holy_lands }

		x = 1
		y = 1
		relative_position_id = ITA_a_time_for_war
		cost = 10
		available = {
		}

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY FOCUS_FILTER_BALANCE_OF_POWER}

		completion_reward = {
			unlock_decision_tooltip = form_roman_empire
			if = {
				limit = {
					has_dlc = "La Resistance"					
				}
				swap_ideas = {
					remove_idea = ITA_papal_state_deus_vult
					add_idea = ITA_papal_state_catholic_dominion
				}
			}
			else = {
				swap_ideas = {
					remove_idea = ITA_papal_state_deus_vult_no_lar
					add_idea = ITA_papal_state_catholic_dominion_no_lar
				}
			}
			custom_effect_tooltip = ITA_papal_state_catholic_dominion_puppet_discount_tt
			if = {
				limit = { has_any_power_balance = yes }
				ITA_bop_medium_increase_pope_side_effect = yes
			}
		}
	}
