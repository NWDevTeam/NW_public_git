focus_tree = {
	id = spain_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = SPR
		}
	}

	default = no
	
	continuous_focus_position = { x = 50 y = 1650 }
	
	shared_focus = SPA_production_british_torpedo_bombers
	shared_focus = SPA_production_german_submarines
	shared_focus = SPA_automatic_mp38


	###########################
	#### POLITICAL SECTION ####
	###########################
	
	
	focus = {
		id = SPR_elections_second_cortes_republic
		icon = GFX_z_goal_elections
		x = 25
		y = 0
		cost = 7.72
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 500
		}
		available = {
		}
		bypass = {
		}
		
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_elections_second_cortes_republic"
			country_event = { id = NWspain.1 }
		}
	}
	
	##POPULAR FRONT##
	focus = {
		id = SPR_victory_popular_front
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_liberal_party focus = SPR_victory_national_block }
		x = -19
		y = 1
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_popular_front"
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.35
			}
			add_ideas = SPR_niceto_torres
			hidden_effect = {
				if = {
					limit = {
						has_idea = SPR_catalon_nationalism
						has_full_control_of_state = 165
						NOT = { country_exists = CAT }
					}
					country_event = { id = NWspain.10 days = 4 random_days = 1 }
				}
				#if = {
				#	limit = {
				#		has_idea = SPR_basks_nationalism
				#		has_full_control_of_state = 791
				#		NOT = { country_exists = BAS }
				#	}
				#	country_event = { id = NWspain.11 days = 6 }
				#}
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_acceleration_agrarian_reform
		icon = GFX_z_goal_agrarian_reform
		prerequisite = { focus = SPR_victory_popular_front }
		x = -4
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_acceleration_agrarian_reform"
			41 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				every_neighbor_state = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				} 
			}
		}
	}
	
	focus = {
		id = SPR_carrying_out_strikes
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_acceleration_agrarian_reform }
		x = -1
		y = 1
		relative_position_id = SPR_acceleration_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_carrying_out_strikes"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_nationalization_business
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SPR_carrying_out_strikes }
		x = 0
		y = 2
		relative_position_id = SPR_carrying_out_strikes
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_nationalization_business"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_distribution_landlords_lands
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SPR_acceleration_agrarian_reform }
		x = 1
		y = 1
		relative_position_id = SPR_acceleration_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_distribution_landlords_lands"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_create_cooperatives
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SPR_distribution_landlords_lands }
		x = -1
		y = 1
		relative_position_id = SPR_distribution_landlords_lands
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_create_cooperatives"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_land_distribution
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = SPR_distribution_landlords_lands }
		x = 0
		y = 2
		relative_position_id = SPR_distribution_landlords_lands
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_land_distribution"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_break_concordat_with_vatican
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_victory_popular_front }
		x = -1
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_break_concordat_with_vatican"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			add_opinion_modifier = { target = VAT modifier = SPR_break_concordat_with_vatican }
			VAT = { add_opinion_modifier = { target = ROOT modifier = SPR_break_concordat_with_vatican } }
		}
	}
	
	focus = {
		id = SPR_secularization_church_lands
		icon = GFX_focus_mex_triumph_over_the_cristeros
		prerequisite = { focus = SPR_break_concordat_with_vatican }
		x = 0
		y = 1
		relative_position_id = SPR_break_concordat_with_vatican
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_secularization_church_lands"
			add_political_power = 100
			add_popularity = {
				ideology = monarchy
				popularity = -0.03
			}
			add_ideas = SPR_secularization_church_lands
		}
	}
	
	focus = {
		id = SPR_amnesty_political_prisoners
		icon = GFX_z_goal_prison
		prerequisite = { focus = SPR_victory_popular_front }
		x = 1
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_amnesty_political_prisoners"
			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.01
			}
			add_popularity = {
				ideology = communism
				popularity = 0.01
			}
			add_popularity = {
				ideology = trozkism
				popularity = 0.01
			}
			add_popularity = {
				ideology = anarchism
				popularity = 0.01
			}
		}
	}
	
	focus = {
		id = SPR_election_new_president
		icon = GFX_z_goal_elections
		prerequisite = { focus = SPR_victory_popular_front }
		x = 4
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_election_new_president"
			add_political_power = 50
			remove_ideas = SPR_niceto_torres
		}
	}
	
	focus = {
		id = SPR_support_caballerito
		icon = GFX_z_goal_democratic_side
		prerequisite = { focus = SPR_amnesty_political_prisoners }
		prerequisite = { focus = SPR_election_new_president }
		mutually_exclusive = { focus = SPR_support_stalinists }
		x = 0
		y = 1
		relative_position_id = SPR_amnesty_political_prisoners
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 2
				ARA = { has_completed_focus = ARA_propaganda_in_spain }
				is_historical_focus_on = no
			}
			modifier = {
				factor = 2
				ARA = { has_completed_focus = ARA_call_to_anarchists_spain }
				is_historical_focus_on = no
			}
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_COMMUNIST
			}
			modifier = {
				add = 500
				has_country_flag = NW_SPR_AI_DEMOCRATIC
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_support_caballerito"
			custom_effect_tooltip = SPR_support_caballerito_tt
			add_popularity = {
				ideology = democratic
				popularity = -0.2
			}
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
		}
	}
	
	focus = {
		id = SPR_repression_agains_stalinists
		icon = GFX_z_goal_generic_political_commissars
		prerequisite = { focus = SPR_support_caballerito }
		x = -2
		y = 1
		relative_position_id = SPR_support_caballerito
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_agains_stalinists"
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
		}
	}
	
	focus = {
		id = SPR_saving_democracy
		icon = GFX_focus_spr_maintain_the_republic
		prerequisite = { focus = SPR_support_caballerito }
		x = 0
		y = 1
		relative_position_id = SPR_support_caballerito
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_saving_democracy"
			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
		}
	}
	
	focus = {
		id = SPR_continued_social_transformation
		icon = GFX_goal_generic_national_unity
		prerequisite = { focus = SPR_support_caballerito }
		x = 2
		y = 1
		relative_position_id = SPR_support_caballerito
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_continued_social_transformation"
			remove_ideas = SPR_social_crisis
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_support_stalinists
		icon = GFX_z_goal_communist_pride
		prerequisite = { focus = SPR_election_new_president }
		mutually_exclusive = { focus = SPR_support_caballerito }
		x = 3
		y = 1
		relative_position_id = SPR_election_new_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_DEMOCRATIC
			}
			modifier = {
				add = 500
				has_country_flag = NW_SPR_AI_COMMUNIST
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_support_stalinists"
			custom_effect_tooltip = SPR_support_stalinists_tt
			add_popularity = {
				ideology = democratic
				popularity = -0.2
			}
			add_popularity = {
				ideology = trozkism
				popularity = 0.15
			}
			add_popularity = {
				ideology = anarchism
				popularity = 0.05
			}
			if = {
				limit = { country_exists = VLA }
				country_event = { id = NWspain.62 }
			}
		}
	}
	
	focus = {
		id = SPR_curtailing_social_change
		icon = GFX_focus_rom_parties_end
		prerequisite = { focus = SPR_support_stalinists }
		x = -1
		y = 1
		relative_position_id = SPR_support_stalinists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_curtailing_social_change"
			add_stability = 0.05
		}
	}
	
	focus = {
		id = SPR_repression_against_trotskyists
		icon = GFX_z_goal_orange_menace
		prerequisite = { focus = SPR_support_stalinists }
		x = 1
		y = 1
		relative_position_id = SPR_support_stalinists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_trotskyists"
			add_popularity = {
				ideology = trozkism
				popularity = -0.06
			}
			add_popularity = {
				ideology = communism
				popularity = 0.06
			}
		}
	}
	
	focus = {
		id = SPR_stand_junta
		icon = GFX_z_goal_government_2
		prerequisite = { focus = SPR_repression_against_trotskyists }
		mutually_exclusive = { focus = SPR_transformation_people_republic }
		x = -2
		y = 1
		relative_position_id = SPR_repression_against_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_stand_junta"
			add_popularity = {
				ideology = neutrality
				popularity = 0.2
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			remove_ideas = SPR_desire_for_decentralization
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			set_cosmetic_tag = SPA_directory
		}
	}
	
	focus = {
		id = SPR_elections_third_cortes_republic
		icon = GFX_z_goal_elections
		prerequisite = { focus = SPR_stand_junta focus = SPR_saving_democracy }
		mutually_exclusive = { focus = SPR_save_state_emergency }
		x = 0
		y = 2
		relative_position_id = SPR_saving_democracy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			has_war = no
			has_civil_war = no
		}
		bypass = {
		}
		
		select_effect = {
			country_event = { id = NWspain.14 days = 20 random_days = 5 }
			country_event = { id = NWspain.15 days = 50 random_days = 5 }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_elections_third_cortes_republic"
			country_event = { id = NWspain.16 }
			remove_ideas = SPR_desire_for_decentralization
		}
	}
	
	focus = {
		id = SPR_anarchists_victory
		icon = GFX_z_goal_generic_support_anarchism
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_trotskyists focus = SPR_victory_socialists }
		x = -3
		y = 1
		relative_position_id = SPR_elections_third_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_anarchists_victory"
			add_popularity = {
				ideology = anarchism
				popularity = 0.15
			}
			set_politics = {
				ruling_party = anarchism
				elections_allowed = no
			}
			set_country_flag = anarchism_left_flag
			if = {
				limit = {
					country_exists = ARA
					has_government = anarchism
				}
				ARA = {
					if = {
						limit = { has_war_with = ROOT }
						white_peace = ROOT
					}
					country_event = { id = NWspain.65 }
				}
				CAT = {
					if = {
						limit = { has_war_with = ROOT }
						white_peace = ROOT
					}
					country_event = { id = NWspain.65 days = 1 }
				}
			}
			if = {
				limit = { ARA = { is_subject_of = ROOT } }
				set_autonomy = {
					target = ARA
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { ASU = { is_subject_of = ROOT } }
				set_autonomy = {
					target = ASU
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { SNT = { is_subject_of = ROOT } }
				set_autonomy = {
					target = SNT
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { CAT = { is_subject_of = ROOT } }
				set_autonomy = {
					target = CAT
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { BAS = { is_subject_of = ROOT } }
				set_autonomy = {
					target = BAS
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { GLC = { is_subject_of = ROOT } }
				set_autonomy = {
					target = GLC
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { VLA = { is_subject_of = ROOT } }
				set_autonomy = {
					target = VLA
					autonomy_state = autonomy_free
				}
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_economy_gift
		icon = GFX_z_goal_economy_gift
		prerequisite = { focus = SPR_anarchists_victory }
		x = -1
		y = 1
		relative_position_id = SPR_anarchists_victory
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_economy_gift"
			add_stability = 0.1
		}
	}
	
	focus = {
		id = SPR_collectivization_business
		icon = GFX_z_goal_nationalization_heavy_industry
		prerequisite = { focus = SPR_economy_gift }
		x = -1
		y = 1
		relative_position_id = SPR_economy_gift
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collectivization_business"
			add_ideas = SPR_collectivization_business
		}
	}
	
	focus = {
		id = SPR_preparing_to_spread_revolution
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = SPR_economy_gift focus = SPR_acceleration_social_change }
		x = 1
		y = 1
		relative_position_id = SPR_economy_gift
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_preparing_to_spread_revolution"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_revolution_portugal
		icon = GFX_z_goal_crush_POR
		prerequisite = { focus = SPR_preparing_to_spread_revolution }
		mutually_exclusive = { focus = SPR_expanding_ties_with_portugal }
		x = 1
		y = 1
		relative_position_id = SPR_preparing_to_spread_revolution
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			OR = {
				NOT = { country_exists = POR }
				POR = { is_subject_of = ROOT }
				has_war_with = POR
				is_in_faction_with = POR
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_revolution_portugal"
			create_wargoal = {
				type = puppet_wargoal_focus
				target = POR
			}
		}
	}
	
	focus = {
		id = SPR_revolution_andorra
		icon = GFX_z_goal_molotov
		prerequisite = { focus = SPR_revolution_portugal }
		x = 0
		y = 1
		relative_position_id = SPR_revolution_portugal
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.1
				ADR = { is_guaranteed_by = event_target:NW_france_scope }
				strength_ratio = {
					tag = event_target:NW_france_scope
					ratio < 1
				}
			}
		}
		available = {
		}
		bypass = {
			OR = {
				NOT = { country_exists = ADR }
				ADR = { is_subject_of = ROOT }
				has_war_with = ADR
				is_in_faction_with = ADR
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_revolution_andorra"
			if = {
				limit = { ADR = { has_government = ROOT } }
				if = {
					limit = { is_faction_leader = yes }
					set_faction_name = ARA_union_anarchists_iberia
				}
				else = {
					set_rule = { can_create_factions = yes }
					create_faction = ARA_union_anarchists_iberia
				}
				ADR = { country_event = { id = generic.5 } }
			}
			else = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ADR
				}
			}
		}
	}
	
	focus = {
		id = SPR_victory_trotskyists
		icon = GFX_z_goal_support_trozkism3
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_anarchists_victory focus = SPR_victory_socialists }
		x = 0
		y = 1
		relative_position_id = SPR_elections_third_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_trotskyists"
			add_popularity = {
				ideology = trozkism
				popularity = 0.15
			}
			set_politics = {
				ruling_party = trozkism
				elections_allowed = no
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			set_cosmetic_tag = SPC_poum
		}
	}
	
	focus = {
		id = SPR_strengthening_marxist_anarchist_friendship
		icon = GFX_z_marxist_anarchist_friendship
		prerequisite = { focus = SPR_victory_trotskyists focus = SPR_anarchists_victory }
		x = -2
		y = 1
		relative_position_id = SPR_victory_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_strengthening_marxist_anarchist_friendship"
			add_ideas = SPR_strengthening_marxist_anarchist_friendship
		}
	}
	
	focus = {
		id = SPR_acceleration_social_change
		icon = GFX_z_focus_revolutionary_council
		prerequisite = { focus = SPR_victory_trotskyists }
		x = 0
		y = 1
		relative_position_id = SPR_victory_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_acceleration_social_change"
			add_stability = 0.05
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = SPR_fourth_international
		text = JAP_join_four_inter
		icon = GFX_z_focus_generic_join_tro
		prerequisite = { focus = SPR_acceleration_social_change }
		mutually_exclusive = { focus = SPR_iberian_union }
		x = -1
		y = 1
		relative_position_id = SPR_acceleration_social_change
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			is_subject = no
			has_government = trozkism
		}
		bypass = {
			any_other_country = {
				is_in_faction_with = ROOT
				has_government = trozkism
				is_faction_leader = yes
				has_country_flag = CURRENT_LEADER_FOUR_INTERNATIONAL_FLAG
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_fourth_international"
			set_rule = { can_create_factions = yes }
			if = {
				limit = { NOT = { has_global_flag = four_international_flag } }
				if = {
					limit = { is_faction_leader = yes }
					set_faction_name = SPR_section_fourth_international
				}
				else = { create_faction = SPR_section_fourth_international }
			}
			else = {
				random_other_country = {
					limit = {
						NOT = { has_war_with = ROOT }
						has_government = trozkism
						is_faction_leader = yes
						has_country_flag = CURRENT_LEADER_FOUR_INTERNATIONAL_FLAG
					}
					country_event = { id = generic.2 }
				}
			}
			set_temp_variable = { troz_threat_temp_var = 2 }
			add_to_variable = { global.troz_threat_var = troz_threat_temp_var }
			custom_effect_tooltip = troz_threat_tt1
			set_var_for_troz_threat_dyn = yes
		}
	}
	
	focus = {
		id = SPR_iberian_union
		icon = GFX_goal_molotov_ribbentrop_pact
		prerequisite = { focus = SPR_acceleration_social_change }
		mutually_exclusive = { focus = SPR_fourth_international }
		x = 1
		y = 1
		relative_position_id = SPR_acceleration_social_change
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 4
			modifier = {
				KMX = {
					exists = yes
					is_faction_leader = yes
				}
				factor = 0.01
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_iberian_union"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_iberian_union
			set_temp_variable = { troz_threat_temp_var = 1.5 }
			add_to_variable = { global.troz_threat_var = troz_threat_temp_var }
			custom_effect_tooltip = troz_threat_tt1
			set_var_for_troz_threat_dyn = yes
		}
	}
	
	focus = {
		id = SPR_victory_socialists
		icon = GFX_goal_support_democracy
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_anarchists_victory focus = SPR_victory_trotskyists }
		x = 3
		y = 1
		relative_position_id = SPR_elections_third_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_socialists"
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			create_country_leader = {
				name = "Indalecio Prieto Tuero"
				desc = "POLITICS_INDALECIO_PRIETO_TUERO_DESC"
				picture = "gfx/leaders/SPR/Portrait_Indalecio_Prieto.dds"
				expire = "1965.1.1"
				ideology = socialism
				traits = {
                    voice_of_restraint				
				}
			}
			set_party_name = { ideology = democratic name = SPR_soc_part long_name = SPR_soc_part_long }
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_ultra_left_support
		icon = GFX_z_goal_communist_revolt
		prerequisite = { focus = SPR_victory_socialists }
		x = -1
		y = 1
		relative_position_id = SPR_victory_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_ultra_left_support"
			add_ideas = SPR_ultra_left_support
		}
	}
	
	focus = {
		id = SPR_nationalization_heavy_industry
		icon = GFX_z_goal_nationalization_heavy_industry
		prerequisite = { focus = SPR_victory_socialists }
		x = 3
		y = 1
		relative_position_id = SPR_victory_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_nationalization_heavy_industry"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_friendship_france
		icon = GFX_focus_chi_reach_out_to_france
		prerequisite = { focus = SPR_victory_socialists }
		x = 1
		y = 1
		relative_position_id = SPR_victory_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			NOT = { country_exists = event_target:NW_france_scope }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_friendship_france"
			add_opinion_modifier = {
				target = event_target:NW_france_scope
				modifier = SPR_friendship_france
			}
			event_target:NW_france_scope = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SPR_friendship_france
				}
			}
		}
	}
	
	focus = {
		id = SPR_friendship_britain
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = SPR_friendship_france }
		x = 0
		y = 1
		relative_position_id = SPR_friendship_france
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			NOT = { country_exists = ENG }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_friendship_britain"
			add_opinion_modifier = {
				target = ENG
				modifier = SPR_friendship_britain
			}
			ENG = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SPR_friendship_britain
				}
			}
		}
	}
	
	focus = {
		id = SPR_expanding_ties_with_portugal
		icon = GFX_z_goal_friend_portugal
		prerequisite = { focus = SPR_friendship_britain }
		mutually_exclusive = { focus = SPR_revolution_portugal }
		x = 0
		y = 1
		relative_position_id = SPR_friendship_britain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			NOT = { country_exists = POR }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expanding_ties_with_portugal"
			add_opinion_modifier = {
				target = POR
				modifier = SPR_expanding_ties_with_portugal
			}
			POR = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SPR_expanding_ties_with_portugal
				}
			}
		}
	}
	
	focus = {
		id = SPR_protection_in_event_of_european_war
		icon = GFX_focus_generic_coastal_fort
		prerequisite = { focus = SPR_expanding_ties_with_portugal }
		x = 0
		y = 1
		relative_position_id = SPR_expanding_ties_with_portugal
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_protection_in_event_of_european_war"
			if = {
				limit = {
					has_full_control_of_state = 165
				}
				165 = {
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6927
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 854
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 9764
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6812
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6966
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 167
				}
				167 = {
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 3873
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6817
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 9896
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6906
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 6959
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 962
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = 4098
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_socialist_science
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SPR_collectivization_business focus = SPR_acceleration_social_change focus = SPR_nationalization_heavy_industry focus = SPR_collapse_capitalist_transformation }
		x = 1
		y = 1
		relative_position_id = SPR_protection_in_event_of_european_war
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_socialist_science"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_save_state_emergency
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = SPR_stand_junta }
		mutually_exclusive = { focus = SPR_elections_third_cortes_republic }
		x = -2
		y = 1
		relative_position_id = SPR_stand_junta
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_save_state_emergency"
			add_ideas = SPR_save_state_emergency
		}
	}
	
	focus = {
		id = SPR_fight_against_communists
		icon = GFX_goal_anti_comintern_pact
		prerequisite = { focus = SPR_stand_junta }
		x = 0
		y = 1
		relative_position_id = SPR_stand_junta
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_fight_against_communists"
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
		}
	}
	
	focus = {
		id = SPR_abolition_autonomy
		icon = GFX_goal_demand_sudetenland
		prerequisite = { focus = SPR_fight_against_communists }
		x = 0
		y = 1
		relative_position_id = SPR_fight_against_communists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_abolition_autonomy"
			add_stability = 0.05
			if = {
				limit = { ARA = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = ARA
				}
			}
			if = {
				limit = { CAT = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = CAT
				}
			}
			if = {
				limit = { BAS = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = BAS
				}
			}
			if = {
				limit = { GLC = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = GLC
				}
			}
			if = {
				limit = { ASU = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = ASU
				}
			}
			if = {
				limit = { SNT = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = SNT
				}
			}
			if = {
				limit = { VLA = { exists = yes } }
				create_wargoal = {
					type = annex_everything
					target = VLA
				}
			}
		}
	}
	
	focus = {
		id = SPR_transformation_people_republic
		icon = GFX_z_focus_revolutionary_government
		prerequisite = { focus = SPR_repression_against_trotskyists }
		mutually_exclusive = { focus = SPR_stand_junta }
		x = 0
		y = 1
		relative_position_id = SPR_repression_against_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				date < 1939.04.01
			}
			modifier = {
				factor = 6
				is_historical_focus_on = yes
				date > 1939.04.01
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_transformation_people_republic"
			add_political_power = 100
			add_war_support = 0.05
			if = {
				limit = { has_idea = SPR_desire_for_decentralization }
				remove_ideas = SPR_desire_for_decentralization
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_anarchists
		icon = GFX_focus_spr_crush_the_revolution
		prerequisite = { focus = SPR_repression_against_trotskyists }
		x = 3
		y = 1
		relative_position_id = SPR_repression_against_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_anarchists"
			add_popularity = {
				ideology = anarchism
				popularity = -0.05
			}
			if = {
				limit = {
					country_exists = ARA
					ARA = { has_government = anarchism }
				}
				country_event = { id = NWspain.17 }
			}
		}
	}
	
	focus = {
		id = SPR_transfer_power_KPI
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SPR_transformation_people_republic }
		prerequisite = { focus = SPR_repression_against_anarchists }
		x = 0
		y = 1
		relative_position_id = SPR_transformation_people_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 5
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_transfer_power_KPI"
			add_popularity = {
				ideology = democratic
				popularity = -0.3
			}
			add_popularity = {
				ideology = communism
				popularity = 0.3
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
			add_ideas = SPR_class_war_1
		}
	}
	
	focus = {
		id = SPR_iberian_union_communists
		icon = GFX_focus_spr_war_of_independence
		prerequisite = { focus = SPR_transfer_power_KPI }
		mutually_exclusive = { focus = SPR_join_comintern }
		x = 0
		y = 1
		relative_position_id = SPR_transfer_power_KPI
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_iberian_union_communists"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_iberian_union_communists
		}
	}
	
	focus = {
		id = SPR_join_comintern
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SPR_transfer_power_KPI }
		mutually_exclusive = { focus = SPR_iberian_union_communists }
		x = 2
		y = 1
		relative_position_id = SPR_transfer_power_KPI
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				date < 1945.01.01
			}
		}
		available = {
			has_global_flag = scw_over
	 		is_puppet = no
	 		has_government = communism
 			SOV = {
 				exists = yes
 				has_government = communism
 				is_faction_leader = yes
 			}
		}
		bypass = {
			is_in_faction_with = SOV
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_join_comintern"
			SOV = { country_event = { id = generic.2 days = 0 } }
			hidden_effect = {
				SOV = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_socialists
		icon = GFX_z_goal_broken_torch
		prerequisite = { focus = SPR_transfer_power_KPI focus = SPR_repression_against_anarchists }
		x = 4
		y = 1
		relative_position_id = SPR_transfer_power_KPI
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_socialists"
			add_popularity = {
				ideology = democratic
				popularity = -0.1
			}
		}
	}
	
	focus = {
		id = SPR_collapse_capitalist_transformation
		icon = GFX_z_goal_socialist_industry
		prerequisite = { focus = SPR_repression_against_socialists }
		x = 0
		y = 1
		relative_position_id = SPR_repression_against_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collapse_capitalist_transformation"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_first_five_year_plan
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SPR_iberian_union_communists focus = SPR_join_comintern }
		x = 1
		y = 1
		relative_position_id = SPR_iberian_union_communists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_first_five_year_plan"
			remove_ideas = SPR_social_crisis
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_return_of_gibraltar
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_first_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SPR_first_five_year_plan
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_of_gibraltar"
			118 = { add_claim_by = ROOT }
		}
	}
	
	
	##LIBERAL PARTY##
	focus = {
		id = SPR_victory_liberal_party
		icon = GFX_z_goal_liberty
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_popular_front focus = SPR_victory_national_block }
		x = 0
		y = 1
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_liberal_party"
			set_politics = {
				ruling_party = neutrality
				elections_allowed = yes
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.25
			}
			hidden_effect = {
				if = {
					limit = { NOT = { country_exists = ASU } }
					country_event = { id = NWspain.53 days = 7 }
				}
				if = {
					limit = { NOT = { country_exists = SNT } }
					country_event = { id = NWspain.54 days = 10 }
				}
				if = {
					limit = { NOT = { country_exists = CAT } }
					country_event = { id = NWspain.55 days = 13 }
				}
				if = {
					limit = { NOT = { country_exists = BAS } }
					country_event = { id = NWspain.56 days = 16 }
				}
				if = {
					limit = { NOT = { country_exists = GLC } }
					country_event = { id = NWspain.57 days = 19 }
				}
				if = {
					limit = { NOT = { country_exists = VLA } }
					country_event = { id = NWspain.59 days = 22 }
				}
				set_variable = { spain_minor = 0 }
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_continuation_agrarian_reform
		icon = GFX_goal_agrarian
		prerequisite = { focus = SPR_victory_liberal_party }
		x = -3
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_continuation_agrarian_reform"
			41 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_modernization_industrial_enterprises
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SPR_continuation_agrarian_reform }
		x = -2
		y = 1
		relative_position_id = SPR_continuation_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_modernization_industrial_enterprises"
			add_ideas = SPR_modernization_industrial_enterprises
		}
	}
	
	focus = {
		id = SPR_getting_rid_feudal_system
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_modernization_industrial_enterprises }
		x = 0
		y = 1
		relative_position_id = SPR_modernization_industrial_enterprises
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_getting_rid_feudal_system"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_give_land_peasants
		icon = GFX_z_goal_agrarian_reform
		prerequisite = { focus = SPR_continuation_agrarian_reform }
		x = 0
		y = 1
		relative_position_id = SPR_continuation_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_give_land_peasants"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_cancellation_state_emergency
		icon = GFX_z_dangerous_laws
		prerequisite = { focus = SPR_give_land_peasants }
		x = 0
		y = 2
		relative_position_id = SPR_give_land_peasants
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_cancellation_state_emergency"
			add_stability = 0.05
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				country_event = { id = NWspain.30 }
			}
		}
	}
	
	focus = {
		id = SPR_overcoming_social_crisis
		icon = GFX_z_goal_pluralism_of_opinions
		prerequisite = { focus = SPR_cancellation_state_emergency }
		prerequisite = { focus = SPR_getting_rid_feudal_system }
		x = 0
		y = 1
		relative_position_id = SPR_cancellation_state_emergency
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_overcoming_social_crisis"
			remove_ideas = SPR_social_crisis
		}
	}
	
	focus = {
		id = SPR_reconciliation_socialists
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = SPR_victory_liberal_party }
		mutually_exclusive = { focus = SPR_reconciliation_conservatives }
		x = -1
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_reconciliation_socialists"
			add_popularity = {
				ideology = democratic
				popularity = -0.05
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = sd_agressive_level_down_tt
				add_to_variable = { sd_agressive_level_var = 1 }
				clamp_variable = {
					var = sd_agressive_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_right
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = SPR_reconciliation_socialists }
		x = 0
		y = 2
		relative_position_id = SPR_reconciliation_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_right"
			add_popularity = {
				ideology = fascism
				popularity = -0.03
			}
			add_popularity = {
				ideology = monarchy
				popularity = -0.03
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = right_agressive_level_up_tt
				subtract_from_variable = { f_agressive_level_var = 1 }
				subtract_from_variable = { karl_agressive_level_var = 1 }
				subtract_from_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = f_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
				
				custom_effect_tooltip = right_influence_level_down_tt
				subtract_from_variable = { f_influence_level_var = 1 }
				subtract_from_variable = { karl_influence_level_var = 1 }
				subtract_from_variable = { nk_influence_level_var = 1 }
				clamp_variable = {
					var = f_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_influence_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_stop_secularization
		icon = GFX_z_goal_monarchism_7
		prerequisite = { focus = SPR_victory_liberal_party }
		x = 0
		y = 2
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_stop_secularization"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			add_ideas = SPR_stop_secularization
		}
	}
	
	focus = {
		id = SPR_reconciliation_conservatives
		icon = GFX_goal_generic_improve_relations
		prerequisite = { focus = SPR_victory_liberal_party }
		mutually_exclusive = { focus = SPR_reconciliation_socialists }
		x = 1
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_reconciliation_conservatives"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = nk_agressive_level_down_tt
				add_to_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_left
		icon = GFX_z_goal_generic_political_commissars
		prerequisite = { focus = SPR_reconciliation_conservatives }
		x = 0
		y = 2
		relative_position_id = SPR_reconciliation_conservatives
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_left"
			add_popularity = {
				ideology = communism
				popularity = -0.03
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.03
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = left_agressive_level_up_tt
				subtract_from_variable = { f_agressive_level_var = 1 }
				subtract_from_variable = { karl_agressive_level_var = 1 }
				subtract_from_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = f_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
				
				custom_effect_tooltip = left_influence_level_down_tt
				subtract_from_variable = { comm_influence_level_var = 1 }
				subtract_from_variable = { sd_influence_level_var = 1 }
				subtract_from_variable = { a_influence_level_var = 1 }
				clamp_variable = {
					var = comm_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = sd_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = a_influence_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_create_powerful_center
		icon = GFX_z_goal_government_2
		prerequisite = { focus = SPR_repression_against_right focus = SPR_repression_against_left }
		x = 1
		y = 1
		relative_position_id = SPR_repression_against_right
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_create_powerful_center"
			add_popularity = {
				ideology = neutrality
				popularity = 0.06
			}
		}
	}
	
	focus = {
		id = SPR_empowering_president
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = SPR_victory_liberal_party }
		x = 3
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_empowering_president"
			add_ideas = SPR_empowering_president
		}
	}
	
	focus = {
		id = SPR_development_new_social_laws
		icon = GFX_z_goal_production
		prerequisite = { focus = SPR_empowering_president }
		x = 2
		y = 1
		relative_position_id = SPR_empowering_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_new_social_laws"
			add_ideas = SPR_development_new_social_laws_idea
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expanding_workers_rights
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_development_new_social_laws }
		x = 0
		y = 1
		relative_position_id = SPR_development_new_social_laws
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expanding_workers_rights"
			add_ideas = SPR_expanding_workers_rights
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expanding_role_unions
		icon = GFX_z_goal_soviet_civil_city1
		prerequisite = { focus = SPR_empowering_president }
		x = 0
		y = 1
		relative_position_id = SPR_empowering_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expanding_role_unions"
			add_stability = 0.05
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expansion_trade_with_neighbors
		icon = GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = SPR_expanding_role_unions }
		x = 0
		y = 2
		relative_position_id = SPR_expanding_role_unions
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expansion_trade_with_neighbors"
			add_ideas = SPR_expansion_trade_with_neighbors
		}
	}
	
	
	focus = {
		id = SPR_alliance_portugal
		icon = GFX_z_goal_friend_portugal
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_trade_france focus = SPR_trade_italy }
		x = -1
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
		}
		available = {
			country_exists = POR
			NOT = { has_war_with = POR }
		}
		bypass = {
			has_guaranteed = POR
			is_guaranteed_by = POR
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_alliance_portugal"
			POR = { country_event = { id = NWspain.19 } }
		}
	}
	
	focus = {
		id = SPR_trade_france
		icon = GFX_z_goal_economic_integration_france
		prerequisite = { focus = SPR_expansion_trade_with_neighbors }
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_alliance_portugal focus = SPR_trade_italy }
		x = 1
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = event_target:NW_france_scope
			}
		}
		available = {
			country_exists = event_target:NW_france_scope
			NOT = { has_war_with = event_target:NW_france_scope }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_trade_france"
			add_opinion_modifier = { target = event_target:NW_france_scope modifier = SPR_trade_france }
			event_target:NW_france_scope = { add_opinion_modifier = { target = ROOT modifier = SPR_trade_france } }
		}
	}
	
	focus = {
		id = SPR_trade_italy
		icon = GFX_z_goal_economic_integration_italy
		prerequisite = { focus = SPR_expansion_trade_with_neighbors }
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_alliance_portugal focus = SPR_trade_france }
		x = 3
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = ITA
			}
		}
		available = {
			country_exists = ITA
			NOT = { has_war_with = ITA }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_trade_italy"
			add_opinion_modifier = { target = ITA modifier = SPR_trade_italy }
			ITA = { add_opinion_modifier = { target = ROOT modifier = SPR_trade_italy } }
		}
	}
	
	##NATIONAL BLOCK##
	focus = {
		id = SPR_victory_national_block
		icon = GFX_z_goal_government_2
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_popular_front focus = SPR_victory_liberal_party }
		x = 16
		y = 1
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_national_block"
			set_politics = {
				ruling_party = monarchy
				elections_allowed = no
			}
			add_popularity = {
				ideology = monarchy
				popularity = 0.25
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_give_way_renewal_spain
		icon = GFX_goal_tripartite_pact
		prerequisite = { focus = SPR_victory_national_block }
		mutually_exclusive = { focus = SPR_dictatorship_icnp }
		x = -6
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_MONARCHY_ALTERNATE
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_give_way_renewal_spain"
			add_political_power = 50
			create_country_leader = {
				name = "Jos Calvo Sotelo"
				desc = "POLITICS_JOSE_CALVO_SOTELO_DESC"
				picture = "gfx/leaders/SPR/Portrait_Calvo_Sotelo.dds"
				expire = "1965.1.1"
				ideology = dual_monarchy
				traits = { }
			}
			set_party_name = { ideology = monarchy name = SPR_renewal_spain long_name = SPR_renewal_spain }
		}
	}
	
	focus = {
		id = SPR_guarantee_autonomy_minorities
		icon = GFX_z_guarantee_autonomy_minorities
		prerequisite = { focus = SPR_give_way_renewal_spain }
		x = -2
		y = 1
		relative_position_id = SPR_give_way_renewal_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_guarantee_autonomy_minorities"
			set_temp_variable = { total_spa_manpower = 0 }
			remove_ideas = {
				#SPR_catalon_nationalism
				SPR_basks_nationalism
				SPR_desire_for_decentralization
			}
			if = {
				limit = {
					country_exists = BAS
					BAS = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = BAS
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = BAS } }
				release_puppet = BAS
				hidden_effect = {
					BAS = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						BAS = { country_event = { id = NWspain.902 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = GLC
					GLC = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = GLC
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = GLC } }
				release_puppet = GLC
				hidden_effect = {
					GLC = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						GLC = { country_event = { id = NWspain.903 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = ASU
					ASU = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = ASU
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = ASU } }
				release_puppet = ASU
				hidden_effect = {
					ASU = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						ASU = { country_event = { id = NWspain.904 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = SNT
					SNT = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = SNT
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = SNT } }
				release_puppet = SNT
				hidden_effect = {
					SNT = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						SNT = { country_event = { id = NWspain.905 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = VLA
					VLA = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = VLA
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = VLA } }
				release_puppet = VLA
				hidden_effect = {
					VLA = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						VLA = { country_event = { id = NWspain.906 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			#if = {
			#	limit = {
			#		CAT = { exists = yes }
			#		has_war = no
			#		has_civil_war = no
			#	}
			#	set_autonomy = {
			#		target = CAT
			#		autonomous_state = puppet
			#	}
			#}
			#if = {
			#	limit = {
			#		CAT = { exists = no }
			#		has_war = no
			#		has_civil_war = no
			#	}
			#	release_puppet = CAT
			#	hidden_effect = {
			#		CAT = {
			#			set_country_flag = catalonia_focus_democrat_flag
			#			load_focus_tree = catalonia_focus_democrat
			#		}
			#	}
			#}
			if = {
				limit = {
					OR = {
						has_war = yes
						has_civil_war = yes
					}
				}
				set_country_flag = SPR_guarantee_autonomy_minorities_flag
			}
			if = {
				limit = { country_exists = CAT }
				set_country_flag = SPR_guarantee_autonomy_minorities_cat_flag
			}
			custom_effect_tooltip = SPR_guarantee_autonomy_minorities_tt
			hidden_effect = { add_manpower = total_spa_manpower }
		}
	}
	
	focus = {
		id = SPR_coronation_juan_barcelona
		icon = GFX_z_coronation_juan_barcelona
		prerequisite = { focus = SPR_give_way_renewal_spain }
		x = 0
		y = 1
		relative_position_id = SPR_give_way_renewal_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_coronation_juan_barcelona"
			add_ideas = SPR_coronation_juan_barcelona
			create_country_leader = {
				name = "Juan III"
				desc = "POLITICS_JUAN_I_DESC"
				picture = "gfx/leaders/SPR/Portrait_Juan_III.dds"
				expire = "1965.1.1"
				ideology = liberalism
				traits = {
					democratic_sympathies
					the_legitimist
				}
			}
			set_party_name = { ideology = democratic name = SPR_center long_name = SPR_center }
		}
	}
	
	focus = {
		id = SPR_policy_liberalisation
		icon = GFX_z_goal_authoritarian_democracy_focus
		prerequisite = { focus = SPR_coronation_juan_barcelona }
		x = 0
		y = 1
		relative_position_id = SPR_coronation_juan_barcelona
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_policy_liberalisation"
			add_political_power = 100
			add_timed_idea = { idea = SPR_policy_liberalisation days = 150 }
			hidden_effect = { set_cosmetic_tag = SPR_juan }
		}
	}
	
	focus = {
		id = SPR_democratization_regime_salazar
		icon = GFX_z_goal_give_democracy
		prerequisite = { focus = SPR_policy_liberalisation }
		x = -2
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			country_exists = POR
		}
		bypass = {
			OR = {
				NOT = { country_exists = POR }
				POR = { is_subject_of = ROOT }
				has_war_with = POR
				is_in_faction_with = POR
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_democratization_regime_salazar"
			create_wargoal = {
				type = puppet_wargoal_focus
				target = POR
			}
		}
	}
	
	focus = {
		id = SPR_spanish_union
		icon = GFX_goal_generic_alliance
		prerequisite = { focus = SPR_policy_liberalisation }
		mutually_exclusive = { focus = SPR_alliance_britain }
		x = 0
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_union"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_spanish_union
		}
	}
	
	focus = {
		id = SPR_alliance_britain
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = SPR_policy_liberalisation }
		mutually_exclusive = { focus = SPR_spanish_union }
		x = 2
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			country_exists = ENG
			ENG = { is_faction_leader = yes }
			NOT = { has_war_with = ENG }
		}
		bypass = {
			is_in_faction_with = ENG
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_union"
			ENG = { country_event = { id = generic.2 } }
			hidden_effect = {
				ENG = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_agreement_united_states
		icon = GFX_focus_chi_mission_to_the_us
		prerequisite = { focus = SPR_spanish_union }
		x = -1
		y = 1
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		 country_exists = USA
		 NOT = { has_war_with = USA }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_agreement_united_states"
			add_opinion_modifier = { target = USA modifier = SPR_agreement_united_states }
			USA = { add_opinion_modifier = { target = ROOT modifier = SPR_agreement_united_states } }
		}
	}
	
	focus = {
		id = SPR_return_america
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_spanish_union focus = SPR_alliance_britain }
		x = 1
		y = 1
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_america"
			if = {
				limit = { VEN = { NOT = { has_government = democratic } } }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = VEN
				}
			}
			if = {
				limit = { DOM = { NOT = { has_government = democratic } } }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = DOM
				}
			}
			if = {
				limit = {
					VEN = { has_government = democratic }
					DOM = { has_government = democratic }
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = DOM
							is_core_of = VEN
						}
					}
					add_claim_by = ROOT
				}
			}
		}
	}
	
	focus = {
		id = SPR_invite_mexico
		icon = GFX_goal_generic_major_alliance
		prerequisite = { focus = SPR_spanish_union }
		x = 0
		y = 2
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			MEX = {
				is_in_faction = no
				NOT = {
					has_government = communism
					has_government = trozkism
				}
			}
			NOT = { has_war_with = MEX }
		}
		bypass = {
			MEX = { is_in_faction_with = ROOT }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_invite_mexico"
			MEX = { country_event = { id = generic.5 } }
			hidden_effect = {
				MEX = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_dictatorship_icnp
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SPR_victory_national_block }
		mutually_exclusive = { focus = SPR_give_way_renewal_spain }
		x = -2
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_MONARCHY
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_dictatorship_icnp"
			add_political_power = 50
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			}
			create_country_leader = {
				name = "Jos Mara Gil-Robles"
				desc = "POLITICS_JOSE_GIL_ROBLES_DESC"
				picture = "gfx/leaders/SPR/Portrait_Jose_Gil-Robles.dds"
				expire = "1965.1.1"
				ideology = fascism_ideology
				traits = { }
			}
			create_country_leader = {
				name = "Juan III"
				desc = "POLITICS_JUAN_I_DESC"
				picture = "gfx/leaders/SPR/Portrait_Juan_III.dds"
				expire = "1965.1.1"
				ideology = monarchy_ideology
				traits = {
					democratic_sympathies
					the_legitimist
				}	
			}
			set_party_name = { ideology = fascism name = SPR_icnp long_name = SPR_icnp_long }
			set_party_name = { ideology = monarchy name = SPR_renewal_spain long_name = SPR_renewal_spain }
			custom_effect_tooltip = SPR_dictatorship_icnp_tt

			hidden_effect = {
				set_variable = { spr_king = party_popularity@monarchy }
				set_variable = { zero_king = 0 }
				subtract_from_variable = { zero_king = spr_king }
				add_popularity = {
					ideology = monarchy
					popularity = zero_king
				}
				add_popularity = {
					ideology = fascism
					popularity = spr_king
				}
				clear_variable = spr_king
				clear_variable = zero_king
			}
		}
	}
	
	focus = {
		id = SPR_restore_position_church_in_state
		icon = GFX_z_goal_monarchism_11
		prerequisite = { focus = SPR_give_way_renewal_spain focus = SPR_dictatorship_icnp }
		x = -2
		y = 1
		relative_position_id = SPR_dictatorship_icnp
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_restore_position_church_in_state"
			add_opinion_modifier = {
				target = VAT
				modifier = SPR_restore_position_church_in_state
			}
			VAT = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SPR_restore_position_church_in_state
				}
			}
		}
	}
	
	focus = {
		id = SPR_get_rid_supporters_monarchy
		icon = GFX_z_goal_monarchism_7
		prerequisite = { focus = SPR_dictatorship_icnp }
		x = 0
		y = 1
		relative_position_id = SPR_dictatorship_icnp
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_get_rid_supporters_monarchy"
			add_stability = 0.1
		}
	}
	
	focus = {
		id = SPR_seek_support_in_spanish_phalanga
		icon = GFX_focus_spa_the_phalanx_ascendant
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = -1
		y = 1
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_seek_support_in_spanish_phalanga"
			add_ideas = SPR_support_in_spanish_phalanga
		}
	}
	
	focus = {
		id = SPR_expand_rights_president
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = 0
		y = 2
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expand_rights_president"
			add_ideas = SPR_expand_rights_president
		}
	}
	
	focus = {
		id = SPR_great_spain
		icon = GFX_z_goal_great_spain
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = 1
		y = 1
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_great_spain"
			add_stability = 0.05
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = SPR_former_borders_aragon
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = SPR_expand_rights_president }
		x = -1
		y = 1
		relative_position_id = SPR_expand_rights_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_former_borders_aragon"
			every_state = {
				limit = {
					is_core_of = SIC
				}
				add_claim_by = ROOT
				add_core_of = ROOT
			}
			hidden_effect = {
				115 = {
					controller = {
						ROOT = {
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_spanish_netherlands
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = SPR_expand_rights_president }
		x = 1
		y = 1
		relative_position_id = SPR_expand_rights_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_netherlands"
			every_state = {
				limit = {
					OR = {
						is_core_of = BEL
						state = 29
						state = 1037
						state = 1038
					}
				}
				add_claim_by = ROOT
			}
			add_ai_strategy = {
				type = antagonize
				id = "BEL"
				value = 200
			}
		}
	}
	
	focus = {
		id = SPR_march_in_madrid
		icon = GFX_z_goal_rabgosudarstvo
		prerequisite = { focus = SPR_victory_national_block }
		x = 0
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_march_in_madrid"
			add_political_power = 150
			country_event = { id = NWspain.21 days = 0 }
		}
	}
	
	focus = {
		id = SPR_expansion_ties_centre
		icon = GFX_goal_generic_improve_relations
		prerequisite = { focus = SPR_march_in_madrid }
		x = 0
		y = 1
		relative_position_id = SPR_march_in_madrid
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expansion_ties_centre"
			add_popularity = {
				ideology = neutrality
				popularity = -0.05
			}
			add_popularity = {
				ideology = monarchy
				popularity = 0.05
			}
		}
	}
	
	focus = {
		id = SPR_prohibition_left_wing_parties
		icon = GFX_goal_generic_war_with_comintern
		prerequisite = { focus = SPR_victory_national_block }
		x = 2
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_prohibition_left_wing_parties"
			add_popularity = {
				ideology = democratic
				popularity = -0.1
			}
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.1
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.1
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_leftists
		icon = GFX_z_goal_broken_red_star
		prerequisite = { focus = SPR_prohibition_left_wing_parties }
		x = 0
		y = 1
		relative_position_id = SPR_prohibition_left_wing_parties
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_leftists"
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.05
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.05
			}
			if = {
				limit = { NOT = { has_global_flag = anarcho_spanish_civil_war } }
				custom_effect_tooltip = SPR_repression_against_leftists_tt
			}
		}
	}
	
	focus = {
		id = SPR_collapse_secularization
		icon = GFX_z_goal_monarchism_6
		prerequisite = { focus = SPR_victory_national_block }
		x = 4
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collapse_secularization"
			add_ideas = SPR_collapse_secularization
		}
	}
	
	focus = {
		id = SPR_return_land_landowners
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_collapse_secularization }
		x = 0
		y = 1
		relative_position_id = SPR_collapse_secularization
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_land_landowners"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_limiting_power_oligarchy
		icon = GFX_focus_rom_parties_end
		prerequisite = { focus = SPR_return_land_landowners }
		x = -2
		y = 1
		relative_position_id = SPR_return_land_landowners
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_limiting_power_oligarchy"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_introduction_progressive_tax_rent
		icon = GFX_z_goal_gold_up
		prerequisite = { focus = SPR_return_land_landowners }
		x = 0
		y = 1
		relative_position_id = SPR_return_land_landowners
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_introduction_progressive_tax_rent"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_overcome_crisis
		icon = GFX_z_goal_final_anticrisis
		prerequisite = { focus = SPR_expansion_ties_centre }
		prerequisite = { focus = SPR_limiting_power_oligarchy }
		prerequisite = { focus = SPR_introduction_progressive_tax_rent }
		x = -1
		y = 1
		relative_position_id = SPR_limiting_power_oligarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_overcome_crisis"
			remove_ideas = SPR_social_crisis
			if = {
				limit = { has_idea = SPR_catalon_nationalism }
				remove_ideas = SPR_catalon_nationalism
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_construction_new_railways
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = SPR_overcome_crisis }
		x = 0
		y = 1
		relative_position_id = SPR_overcome_crisis
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_construction_new_railways"
			capital_scope = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				every_neighbor_state = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				} 
			}
		}
	}
	
	focus = {
		id = SPR_preparing_for_wars_conquest
		icon = GFX_z_goal_authority
		prerequisite = { focus = SPR_construction_new_railways }
		x = 1
		y = 1
		relative_position_id = SPR_construction_new_railways
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_preparing_for_wars_conquest"
			add_war_support = 0.03
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_ports_barcelona
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = SPR_construction_new_railways }
		x = -1
		y = 1
		relative_position_id = SPR_construction_new_railways
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			165 = {
				free_building_slots = {
					building = dockyard
					size < 1
					include_locked = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_ports_barcelona"
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	##########################
	#### INDUSTRY SECTION ####
	##########################
	
	focus = {
		id = SPR_economic_reform
		icon = GFX_focus_hol_the_foundations_of_defense
		x = 8
		y = -3
		relative_position_id = SPR_ports_barcelona
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_economic_reform"
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1.0
				uses = 2
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_catalonia
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SPR_economic_reform }
		x = -2
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			165 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_catalonia"
			165 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_capital_industry
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SPR_economic_reform }
		x = 0
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_capital_industry"
			capital_scope = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_north_spain
		icon = GFX_z_goal_factory_complex
		prerequisite = { focus = SPR_economic_reform }
		x = 2
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			982 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			790 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_north_spain"
			982 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			790 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_university_madrid
		icon = GFX_z_goal_vienna_circle
		prerequisite = { focus = SPR_development_catalonia }
		prerequisite = { focus = SPR_development_capital_industry }
		prerequisite = { focus = SPR_development_north_spain }
		x = 0
		y = 1
		relative_position_id = SPR_development_capital_industry
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			41 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_university_madrid"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_university_barselon
		icon = GFX_z_goal_great_science
		prerequisite = {
			focus = SPR_university_madrid
		}
		x = 0
		y = 1
		relative_position_id = SPR_university_madrid
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			num_of_factories > 25
			165 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_university_madrid"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_bridging_gap
		icon = GFX_z_goal_atlantic_cooperation_program
		prerequisite = {
			focus = SPR_university_barselon
		}
		x = 0
		y = 1
		relative_position_id = SPR_university_barselon
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			num_of_factories > 50
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_bridging_gap"
			add_research_slot = 1
		}
	}
}
