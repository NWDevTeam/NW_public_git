focus_tree = {
	id = aragon_focus_anarchist

	country = {
		factor = 0

		modifier = {
			add = 10
			original_tag = ARA
			has_country_flag = aragon_focus_anarchist_flag
		}
	}

	default = no
	
	continuous_focus_position = { x = 50 y = 820 }

	######################
	#### ARMY SECTION ####
	######################
	
	focus = {
		id = ARA_militia_formations
		icon = GFX_z_goal_socmilirarism
		x = 3
		y = 0
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			has_completed_focus = ARA_organization_of_council_defense_aragon
		}
		bypass = {
		}
		
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_militia_formations"
			add_ideas = ARA_militia_formations
		}
	}
	
	focus = {
		id = ARA_federation_anarchists_iberia
		icon = GFX_z_goal_federation_anarchists
		prerequisite = { focus = ARA_militia_formations }
		x = -2
		y = 1
		relative_position_id = ARA_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_federation_anarchists_iberia"
			add_ideas = ARA_federation_anarchists_iberia_idea
		}
	}
	
	focus = {
		id = ARA_mujeres_libres
		icon = GFX_focus_mex_soldaderas
		prerequisite = { focus = ARA_militia_formations }
		x = 0
		y = 1
		relative_position_id = ARA_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_mujeres_libres"
			add_ideas = ARA_mujeres_libres
			if = {
				limit = {
					has_idea = SPR_anarchist_society_5
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_5
					add_idea = SPR_anarchist_society_11
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_8
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_8
					add_idea = SPR_anarchist_society_13
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_6
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_6
					add_idea = SPR_anarchist_society_12
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_9
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_9
					add_idea = SPR_anarchist_society_14
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_7
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_7
					add_idea = SPR_anarchist_society_15
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_10
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_10
					add_idea = SPR_anarchist_society_16
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_5
						add_idea = SPR_anarchist_society_11
					}
				}
			}
		}
	}
	
	focus = {
		id = ARA_international_brigades
		text = SPR_international_brigades
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = ARA_militia_formations }
		
		icon = GFX_goal_generic_allies_build_infantry
		x = 2
		y = 1
		relative_position_id = ARA_militia_formations
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_ideas = SPR_international_brigades
			custom_effect_tooltip = SPR_seize_public_transport_tt
		}
	}
	
	focus = {
		id = ARA_seize_public_transport
		text = SPR_seize_public_transport
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = ARA_militia_formations }
		
		icon = GFX_goal_generic_army_motorized
		x = -1
		y = 2
		relative_position_id = ARA_militia_formations
		cost = 5

		available_if_capitulated = yes
		
		ai_will_do = {
			factor = 5
		}

		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 3
			}
			add_ideas = SPR_anarchist_public_transport
			custom_effect_tooltip = SPR_seize_public_transport_tt
		}
	}
	
	focus = {
		id = SPR_arm_the_people
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = ARA_militia_formations }
		
		icon = GFX_goal_generic_military_sphere
		x = 1
		y = 2
		relative_position_id = ARA_militia_formations
		cost = 10
		
		ai_will_do = {
			factor = 15
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_war_support = 0.1
			swap_ideas = {
				remove_idea = SPR_disbanded_army_1
				add_idea = SPR_disbanded_army_2
			}
		}
	}
	
	
	######################
	#### PROM SECTION ####
	######################
	
	focus = {
		id = ARA_agrarian_collectivization
		text = SPR_agrarian_collectivization
		available = {
			has_completed_focus = ARA_organization_of_council_defense_aragon
		}
		bypass = {
		}
		
		icon = GFX_goal_generic_national_unity
		x = 5
		y = 0
		relative_position_id = ARA_militia_formations
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPR_anarchist_society_2
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_2
					add_idea = SPR_anarchist_society_5
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_5
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_5
					add_idea = SPR_anarchist_society_8
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_3
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_3
					add_idea = SPR_anarchist_society_6
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_6
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_6
					add_idea = SPR_anarchist_society_9
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_4
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_4
					add_idea = SPR_anarchist_society_7
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_7
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_7
					add_idea = SPR_anarchist_society_10
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_2
						add_idea = SPR_anarchist_society_5
					}
				}
			}
		}
	}
	
	focus = {
		id = ARA_collectivization_business
		icon = GFX_z_goal_nationalization_heavy_industry
		x = 2
		y = 0
		relative_position_id = ARA_agrarian_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			has_completed_focus = ARA_organization_of_council_defense_aragon
		}
		bypass = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_collectivization_business"
			add_ideas = ARA_collectivization_business
			if = {
				limit = {
					has_idea = SPR_anarchist_society_3
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_3
					add_idea = SPR_anarchist_society_4
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_6
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_6
					add_idea = SPR_anarchist_society_7
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_9
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_9
					add_idea = SPR_anarchist_society_10
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_12
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_12
					add_idea = SPR_anarchist_society_15
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_14
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_14
					add_idea = SPR_anarchist_society_16
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_3
						add_idea = SPR_anarchist_society_4
					}
				}
			}
		}
	}
	
	focus = {
		id = ARA_seize_the_gold_reserves
		text = SPR_seize_the_gold_reserves
		available = {
		}
		bypass = {
			OR = {
				has_global_flag = scw_over
				has_global_flag = SPR_gold_reserves_flag
			}
		}
		prerequisite = { focus = ARA_agrarian_collectivization }
		prerequisite = { focus = ARA_collectivization_business }
		
		icon = GFX_z_goal_gold_for_ppl
		x = 0
		y = 1
		relative_position_id = ARA_agrarian_collectivization
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_seized_gold_reserves  days = 730 }
			set_global_flag = SPR_gold_reserves_flag
		}
	}
	
	focus = {
		id = ARA_economy_of_gift
		icon = GFX_z_goal_economy_gift
		prerequisite = { focus = ARA_agrarian_collectivization }
		prerequisite = { focus = ARA_collectivization_business }
		x = 0
		y = 1
		relative_position_id = ARA_collectivization_business
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_economy_of_gift"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			add_ideas = ARA_economy_of_gift
		}
	}
	
	focus = {
		id = ARA_erasure_class_differences
		icon = GFX_z_goal_erasure_class_differences
		prerequisite = { focus = ARA_economy_of_gift }
		x = -1
		y = 1
		relative_position_id = ARA_economy_of_gift
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_erasure_class_differences"
			add_ideas = ARA_erasure_class_differences
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = ARA_syndication
		icon = GFX_z_goal_syndication
		prerequisite = { focus = ARA_erasure_class_differences }
		x = 0
		y = 1
		relative_position_id = ARA_erasure_class_differences
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_syndication"
			add_ideas = ARA_syndication
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = ARA_literacy_programs
		text = SPR_literacy_programs
		available = {
			num_of_factories > 25
		}
		bypass = {
		}
		prerequisite = { focus = ARA_economy_of_gift }
		prerequisite = { focus = ARA_seize_the_gold_reserves }
		
		icon = GFX_focus_research
		x = -1
		y = 1
		relative_position_id = ARA_seize_the_gold_reserves
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = ARA_science_anarchiste
		icon = GFX_z_goal_science_anarchiste
		prerequisite = { focus = ARA_literacy_programs }
		prerequisite = { focus = ARA_syndication }
		x = -1
		y = 1
		relative_position_id = ARA_syndication
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			num_of_factories > 40
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_science_anarchiste"
			add_research_slot = 1
		}
	}
	
	
	###########################
	#### POLITICAL SECTION ####
	###########################
	
	focus = {
		id = ARA_organization_of_council_defense_aragon
		icon = GFX_focus_spr_regional_defense_council_of_aragon
		x = 5
		y = 0
		relative_position_id = ARA_collectivization_business
		
		cost = 2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_organization_of_council_defense_aragon"
			hidden_effect = {
				SPR = {
					every_unit_leader = {
						limit = {
							OR = {
								has_id = 4712
								has_id = 4734
							}
						}
						retire = yes
					}
				}
			}
			create_corps_commander = {
			    name = "Buenaventura Durruti"
			    id = 4712
			    gfx = "GFX_portrait_SPR_buenaventura_durruti"
				traits = { infantry_officer offensive_doctrine aggressive_assaulter }
				skill = 3
			    attack_skill = 3
			    defense_skill = 3
			    planning_skill = 2
			    logistics_skill = 2
			}
			create_corps_commander = {
				name = "Eduardo Medrano Rivas"
				id = 4734
				gfx = "GFX_portrait_SPR_eduardo_medrano_rivas"
				traits = { infantry_leader }
				skill = 3
			    attack_skill = 3
			    defense_skill = 2
			    planning_skill = 2
			    logistics_skill = 3
			}
			add_political_power = 150
			add_stability = -0.1
			add_war_support = 0.1
			add_ideas = SPR_anarchist_society_1
			set_country_flag = anarchism_left_flag
		}
	}
	
	focus = {
		id = ARA_struggle_against_nazi
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		prerequisite = { focus = ARA_organization_of_council_defense_aragon }
		x = 0
		y = 4
		relative_position_id = ARA_organization_of_council_defense_aragon
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}
		
		will_lead_to_war_with = SPA
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_struggle_against_nazi"
			add_timed_idea = { idea = SPR_anti_nationalist_offensive days = 365 }
			if = {
				limit = { has_war_with = SPB }
				add_timed_idea = { idea = SPA_anti_carlist_offensive days = 365 }
			}
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			add_popularity = {
				ideology = fascism
				popularity = -0.05
			}
			if = {
				limit = {
					country_exists = SPA
					NOT = { has_war_with = SPA }
				}
				create_wargoal = {
					type = annex_everything
					target = SPA
					expire = 0
				}
			}
		}
	}
	
	focus = {
		id = ARA_protection_spanish_revolution
		icon = GFX_focus_spr_no_pasaran
		prerequisite = { focus = ARA_organization_of_council_defense_aragon }
		mutually_exclusive = { focus = ARA_struggle_against_restorers_capitalism }
		x = -3
		y = 1
		relative_position_id = ARA_organization_of_council_defense_aragon
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				SPR = { has_war_with = SPA }
			}
			modifier = {
				factor = 0
				is_historical_focus_on = no
				SPR = {
					has_war_with = SPA
					has_completed_focus = SPR_support_stalinists
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = no
				SPR = { has_completed_focus = SPR_victory_national_block }
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_protection_spanish_revolution"
			add_war_support = 0.05
			add_timed_idea = { idea = ARA_protection_spanish_revolution days = 180 }
		}
	}
	
	focus = {
		id = ARA_collective_business
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		prerequisite = { focus = ARA_economy_of_gift focus = ARA_protection_spanish_revolution }
		x = -1
		y = 1
		relative_position_id = ARA_protection_spanish_revolution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_collective_business"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = ARA_legalization_private_business
		icon = GFX_z_goal_support_businessmen_2
		prerequisite = { focus = ARA_collective_business }
		x = 0
		y = 1
		relative_position_id = ARA_collective_business
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_legalization_private_business"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = ARA_support_from_madrid
		icon = GFX_focus_generic_diplomatic_treaty
		prerequisite = { focus = ARA_protection_spanish_revolution }
		x = 1
		y = 1
		relative_position_id = ARA_protection_spanish_revolution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 15
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_support_from_madrid"
			swap_ideas = {
				remove_idea = SPR_disbanded_army_1
				add_idea = SPR_disbanded_army_2
			}
			if = {
				limit = {
					OR = {
						country_exists = SPR
						country_exists = SPA
					}
				}
				add_tech_bonus = {
					name = infantry_artillery_bonus
					bonus = 1.0
					uses = 2
					category = infantry_weapons
					category = artillery
				}
			}
			else = {
				add_tech_bonus = {
					name = infantry_artillery_bonus
					bonus = 1.0
					uses = 3
					category = infantry_weapons
					category = artillery
				}
			}
		}
	}
	
	focus = {
		id = ARA_propaganda_in_spain
		icon = GFX_z_goal_spain_dzin
		prerequisite = { focus = ARA_support_from_madrid }
		x = 0
		y = 1
		relative_position_id = ARA_support_from_madrid
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_propaganda_in_spain"
			if = {
				limit = { country_exists = SPR }
				SPR = { add_timed_idea = { idea = ARA_propaganda_in_spain_idea days = 60 } }
			}
			if = {
				limit = { country_exists = SPA }
				SPA = { add_timed_idea = { idea = ARA_propaganda_in_spain_idea days = 60 } }
			}
			if = {
				limit = {
					NOT = { country_exists = SPA }
					NOT = { country_exists = SPR }
				}
				add_popularity = {
					ideology = anarchism
					popularity = 0.15
				}
			}
		}
	}
	
	focus = {
		id = ARA_spanish_autonomy
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = ARA_propaganda_in_spain }
		mutually_exclusive = { focus = ARA_new_revolution }
		x = -3
		y = 1
		relative_position_id = ARA_propaganda_in_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			SPR = { exists = yes }
			NOT = { SPR = { has_completed_focus = SPR_support_stalinists } }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_spanish_autonomy"
			remove_ideas = SPR_disbanded_army_2
			if = {
				limit = { has_war_with = SPR }
				white_peace = SPR
			}
			ROOT = { add_to_tech_sharing_group = ARA_spain_ara_group }
			SPR = { add_to_tech_sharing_group = ARA_spain_ara_group }
			add_opinion_modifier = {
				target = SPR
				modifier = ARA_spanish_autonomy
			}
			SPR = {
				add_opinion_modifier = {
					target = ROOT
					modifier = ARA_spanish_autonomy
				}
			}
			if = {
				limit = { is_subject_of = SPR }
				swap_ideas = {
					remove_idea = SPR_spain_subject_idea
					add_idea = SPR_spain_subject_idea_2
				}
			}
		}
	}
	
	focus = {
		id = ARA_new_revolution
		icon = GFX_z_goal_revolution
		prerequisite = { focus = ARA_propaganda_in_spain }
		mutually_exclusive = { focus = ARA_spanish_autonomy }
		x = -1
		y = 1
		relative_position_id = ARA_propaganda_in_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}
		
		will_lead_to_war_with = SPR
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_new_revolution"
			if = {
				limit = { is_subject = yes }
				OVERLORD = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
			}
			if = {
				limit = { country_exists = SPR }
				if = {
					limit = { SPR = { has_war_with = SPA } }
					declare_war_on = {
						type = civil_war
						target = SPR
					}
					add_civil_war_target = SPR
				}
				else = {
					create_wargoal = {
						type = civil_war
						target = SPR
						expire = 0
					}
					add_civil_war_target = SPR
				}
				add_ai_strategy = {
					type = antagonize
					id = "SPR"
					value = 500
				}
				add_ai_strategy = {
					type = conquer
					id = "SPR" 
					value = 500
				}
			}
			if = {
				limit = { country_exists = SPA }
				if = {
					limit = { SPA = { has_war_with = SPR } }
					declare_war_on = {
						type = civil_war
						target = SPA
					}
					add_civil_war_target = SPA
				}
				else = {
					create_wargoal = {
						type = civil_war
						target = SPA
						expire = 0
					}
					add_civil_war_target = SPA
				}
				add_ai_strategy = {
					type = antagonize
					id = "SPA"
					value = 500
				}
				add_ai_strategy = {
					type = conquer
					id = "SPA" 
					value = 500
				}
			}
			add_ideas = ARA_new_revolution
			
			every_state = {
				limit = {
					OR = {
						is_owned_by = SPA
						is_owned_by = SPR
					}
				}
				add_claim_by = ARA
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SPA
						is_core_of = SPR
					}
				}
				add_core_of = ARA
			}
			
			hidden_effect = {
				if = {
					limit = { country_exists = SPR }
					every_state = {
						limit = { is_owned_by = ROOT }
						add_claim_by = SPR
					}
					every_state = {
						limit = { is_core_of = ROOT }
						add_core_of = SPR
					}
				}
				if = {
					limit = { country_exists = SPA }
					every_state = {
						limit = { is_owned_by = ROOT }
						add_claim_by = SPA
					}
					every_state = {
						limit = { is_core_of = ROOT }
						add_core_of = SPA
					}
				}
				if = {
					limit = { SPR = { has_completed_focus = SPR_support_stalinists } }
					SPR = { country_event = { id = NWspain.201 } }
				}
				if = {
					limit = { SPR = { has_war_with = SPA } }
					load_oob = "ARA_Civil_War"
				}
				if = {
					limit = {
						SPR = { has_war_with = SPA }
						NOT = { has_global_flag = expand_spanish_civil_war }
					}
					news_event = { id = trworldnews.68 hours = 6 }
				}
				else_if = {
					limit = { NOT = { has_global_flag = anarcho_spanish_civil_war } }
					news_event = { id = trworldnews.65 hours = 6 }
				}
			}
		}
	}
	
	
	focus = {
		id = ARA_struggle_against_restorers_capitalism
		icon = GFX_z_goal_molotov
		prerequisite = { focus = ARA_organization_of_council_defense_aragon }
		mutually_exclusive = { focus = ARA_protection_spanish_revolution }
		x = 3
		y = 1
		relative_position_id = ARA_organization_of_council_defense_aragon
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				is_historical_focus_on = no
				SPR = { has_war_with = SPA }
				SPR = { has_completed_focus = SPR_support_caballerito }
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_struggle_against_restorers_capitalism"
			set_global_flag = SPR_anarchist_uprising_flag
			every_other_country = {
				limit = {
					ROOT = {
						has_volunteers_amount_from = {
						    tag = PREV
						    count > 0
						}
					}
				}
				recall_volunteers_from = ROOT
			}
			if = {
				limit = {
					is_subject = yes
				}
				OVERLORD = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
			}
			add_timed_idea = { idea = ARA_struggle_against_restorers_capitalism days = 360 }
			if = {
				limit = { NOT = { has_war_with = SPR } }
				declare_war_on = {
					type = civil_war
					target = SPR
				}
				add_civil_war_target = SPR
				SPR = {
					every_subject_country = {
						add_to_war = { targeted_alliance = SPR enemy = ROOT hostility_reason = asked_to_join }
					}
				}
			}
			if = {
				limit = {
					SPA = { exists = yes }
					NOT = { has_war_with = SPA }
				}
				declare_war_on = {
					type = civil_war
					target = SPA
				}
				add_civil_war_target = SPA
				SPA = {
					every_subject_country = {
						add_to_war = { targeted_alliance = SPA enemy = ROOT hostility_reason = asked_to_join }
					}
				}
			}
			hidden_effect = {
				#if = {
				#	limit = { SPR = { has_completed_focus = SPR_support_stalinists } }
				#	SPR = { country_event = { id = NWspain.201 days = 1 } }
				#}
				if = {
					limit = { SPR = { has_war_with = SPA } }
					load_oob = "ARA_Civil_War"
					add_ai_strategy = {
						type = antagonize
						id = "SPR"
						value = 500
					}
					add_ai_strategy = {
						type = conquer
						id = "SPR" 
						value = 500
					}
					add_ai_strategy = {
						type = antagonize
						id = "SPA"
						value = 500
					}
					add_ai_strategy = {
						type = conquer
						id = "SPA" 
						value = 500
					}
					news_event = { id = trworldnews.68 hours = 6 }
				}
				every_state = {
					limit = {
						OR = {
							is_owned_by = SPR
							is_owned_by = SPA
						}
					}
					add_claim_by = ROOT
				}
			}
		}
	}
	
	focus = {
		id = ARA_call_to_anarchists_andalusia
		icon = GFX_z_goal_permrevolt
		prerequisite = { focus = ARA_struggle_against_restorers_capitalism }
		x = -1
		y = 1
		relative_position_id = ARA_struggle_against_restorers_capitalism
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			#has_political_power > 100
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_call_to_anarchists_andalusia"
			set_cosmetic_tag = ARA_and
			custom_effect_tooltip = ARA_call_to_anarchists_andalusia_tt
			hidden_effect = {
				169 = { add_core_of = ROOT }
				173 = { add_core_of = ROOT }
				if = {
					limit = {
						ROOT = { has_war_with = SPR }
						SPR = { NOT = { has_completed_focus = SPR_crush_the_revolution } }
					}
					if = {
						limit = {
							NOT = {
								169 = { is_core_of = ANL }
								173 = { is_core_of = ANL }
								169 = { is_core_of = SPC }
								173 = { is_core_of = SPC }
							}
						}
						set_state_controller = 169
						set_state_controller = 173
					}
					ROOT = {
						if = {
							limit = { NOT = { has_template = "Anarchists Brigada N2" } }
							division_template = {
								name = "Anarchists Brigada N2"
								priority = 1
								is_locked = no
								regiments = {
									infantry = { x = 0 y = 0 }
									infantry = { x = 0 y = 1 }
									infantry = { x = 0 y = 2 }
								}
							}
						}
						169 = {
							create_unit = {
								division = "name = \"1. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.5" 
								owner = ARA
								count = 3
								allow_spawning_on_enemy_provs = yes
							}
						}
						173 = {
							create_unit = {
								division = "name = \"2. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.5" 
								owner = ARA
								count = 3
								allow_spawning_on_enemy_provs = yes
							}
						}
					}
				}
				else_if = {
					limit = {
						OR = {
							ROOT = { NOT = { has_war_with = SPR } }
							SPR = { has_completed_focus = SPR_crush_the_revolution }
						}
					}
					ARA = { set_country_flag = ARA_call_to_anarchists_andalusia_flag }
				}
			}
		}
	}
	
	focus = {
		id = ARA_call_to_anarchists_catalonia
		icon = GFX_z_focus_propaganda_anarchist
		prerequisite = { focus = ARA_struggle_against_restorers_capitalism }
		x = 1
		y = 1
		relative_position_id = ARA_struggle_against_restorers_capitalism
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_call_to_anarchists_catalonia"
			if = {
				limit = { CAT = { has_government = anarchism } }
				CAT = { country_event = { id = NWspain.202 days = 1 } }
			}
			else_if = {
				limit = {
					CAT = { exists = no }
					SPR = { has_idea = SPR_catalon_nationalism }
				}
				custom_effect_tooltip = ARA_call_to_anarchists_catalonia_tt
				hidden_effect = {
					CAT = {
						transfer_state = 165
						165 = { add_core_of = CAT }
						inherit_technology = SPR
						set_country_flag = catalonia_focus_anarchist_flag
						load_focus_tree = catalonia_focus_anarchist
						set_popularities = {
							democratic = 10
							communism = 35
							monarchy = 5
							trozkism = 20
							anarchism = 30
						}
						set_politics = {
							ruling_party = anarchism
							elections_allowed = no
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 5000
						}
						give_military_access = ARA
						add_ai_strategy = {
							type = antagonize
							id = "SPR"
							value = 500
						}
						add_ai_strategy = {
							type = conquer
							id = "SPR" 
							value = 500
						}
						add_ai_strategy = {
							type = antagonize
							id = "SPA"
							value = 500
						}
						add_ai_strategy = {
							type = conquer
							id = "SPA" 
							value = 500
						}
						add_ai_strategy = {
							type = protect
							id = "ARA" 
							value = 500
						}
						ARA = {
							add_ai_strategy = {
								type = protect
								id = "CAT" 
								value = 500
							}
						}
						every_state = {
							limit = {
								OR = {
									is_owned_by = SPR
									is_owned_by = SPA
								}
							}
							add_claim_by = ROOT
						}
					}
					ARA = { give_military_access = CAT }
					CAT = { country_event = { id = NWspain.901 } }
					if = {
						limit = { country_exists = SPR }
						SPR = {
							declare_war_on = {
								target = CAT
								type = civil_war
							}
							add_civil_war_target = CAT
							remove_ideas = SPR_catalon_nationalism
						}
						every_other_country = {
							limit = { is_subject_of = SPR }
							add_to_war = { targeted_alliance = SPR enemy = ROOT hostility_reason = asked_to_join }
						}
					}
					if = {
						limit = { country_exists = SPA }
						SPA = {
							declare_war_on = {
								target = CAT
								type = civil_war
							}
							add_civil_war_target = CAT
							remove_ideas = SPR_catalon_nationalism
						}
						every_other_country = {
							limit = { is_subject_of = SPA }
							add_to_war = { targeted_alliance = SPA enemy = ROOT hostility_reason = asked_to_join }
						}
					}
				}
			}
			else_if = {
				limit = {
					CAT = {
						exists = yes
						NOT = { has_government = anarchism }
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = CAT
					expire = 0
				}
				add_timed_idea = { idea = ARA_war_with_catalonia days = 730 }
			}
			else = {
				165 = { add_claim_by = ROOT }
			}
			if = {
				limit = {
					OR = {
						has_war_with = CAT
						controls_state = 165
					}
				}
				if = {
					limit = {
						165 = { NOT = { is_core_of = ROOT } }
					}
					165 = { add_core_of = ROOT }
				}
				hidden_effect = {
					if = {
						limit = { NOT = { has_template = "Anarchists Brigada N2" } }
						division_template = {
							name = "Anarchists Brigada N2"
							is_locked = no
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
							}
						}
					}
				}
				165 = {
					create_unit = {
						division = "name = \"54. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.1" 
						owner = ARA
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"42. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.1" 
						owner = ARA
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"37. Anarchists Brigada\" division_template = \"Anarchists Brigada N2\" start_experience_factor = 0.1" 
						owner = ARA
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = ARA_organization_into_single_union
		icon = GFX_z_focus_generic_join_anarchism
		prerequisite = { focus = ARA_call_to_anarchists_andalusia }
		prerequisite = { focus = ARA_call_to_anarchists_catalonia }
		x = 1
		y = 1
		relative_position_id = ARA_call_to_anarchists_andalusia
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 4
				country_exists = CAT
				NOT = { has_war_with = CAT }
			}
		}
		available = {
			is_subject = no
			has_government = anarchism
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_organization_into_single_union"
			create_country_leader = {
				name = "Anarchist Commune"
				desc = "POLITICS_ANARCHIST_COMMUNE_DESC"
				picture = "GFX_portrait_SPR_anarchist_commune"
				expire = "1965.1.1"
				ideology = anarcho_sindicalism
				traits = {
					our_right_to_survive
				}
			}
			if = {
				limit = { is_faction_leader = yes }
				set_faction_name = ARA_union_anarchists_iberia
			}
			else_if = {
				limit = {
					is_in_faction = yes
					is_faction_leader = no
				}
				if = {
					limit = {
						FACTION_LEADER = {
							NOT = { has_government = anarchism }
						}
					}
					leave_faction = yes
					set_rule = { can_create_factions = yes }
					create_faction = ARA_union_anarchists_iberia
				}
				else = { set_rule = { can_create_factions = yes } }
			}
			else_if = {
				limit = { is_in_faction = no }
				set_rule = { can_create_factions = yes }
				create_faction = ARA_union_anarchists_iberia
			}
			if = {
				limit = {
					country_exists = CAT
					NOT = { has_war_with = CAT }
				}
				add_to_faction = CAT
			}
			else_if = {
				limit = {
					CAT = {
						is_in_faction_with = ROOT
						is_ai = yes
					}
				}
				annex_country = {
					target = CAT
					transfer_troops = yes
				}
			}
			ROOT = { add_to_tech_sharing_group = ARA_union_anarchists_iberia_group }
			every_other_country = {
				limit = { is_in_faction_with = ROOT }
				add_to_tech_sharing_group = ARA_union_anarchists_iberia_group
			}
		}
	}
	
	focus = {
		id = ARA_call_to_anarchists_spain
		icon = GFX_z_goal_fires_of_revolution
		prerequisite = { focus = ARA_organization_into_single_union }
		x = 0
		y = 1
		relative_position_id = ARA_organization_into_single_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			is_subject = no
			has_government = anarchism
		}
		bypass = {
		}
		
		will_lead_to_war_with = SPR
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_call_to_anarchists_spain"
			if = {
				limit = {
					SPR = { anarchism > 0.149 }
					NOT = { has_war_with = SPR }
					country_exists = SPR
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = SPR
					expire = 0
				}
				add_timed_idea = { idea = ARA_war_with_spr days = 730 }
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SPR
						is_core_of = SPA
						is_core_of = CAT
						is_core_of = BAS
						is_core_of = GLC
						is_core_of = ASU
						is_core_of = SNT
					}
				}
				add_core_of = ROOT
			}
			set_cosmetic_tag = ARA_SPAIN
		}
	}
	
	#focus = {
	#	id = ARA_ride_avalanche_to_west
	#	icon = GFX_goal_generic_more_territorial_claims
	#	prerequisite = { focus = ARA_new_revolution focus = ARA_call_to_anarchists_spain }
	#	x = -1
	#	y = 1
	#	relative_position_id = ARA_call_to_anarchists_spain
	#	
	#	cost = 10
	#	
	#	cancel_if_invalid = yes
	#	continue_if_invalid = no
	#	available_if_capitulated = no
	#
	#	ai_will_do = {
	#		factor = 5
	#		modifier = {
	#			factor = 0.1
	#			has_war = yes
	#		}
	#		modifier = {
	#			factor = 0
	#			OR = {
	#				has_war_with = SPA
	#				has_war_with = SPR
	#			}
	#		}
	#		modifier = {
	#			factor = 2
	#			enemies_strength_ratio < 1
	#		}
	#		modifier = {
	#			factor = 5
	#			enemies_strength_ratio < 0.5
	#		}
	#	}
	#	available = {
	#	}
	#	bypass = {
	#		OR = {
	#			NOT = { country_exists = POR }
	#			has_war_with = POR
	#		}
	#	}
	#
	#	completion_reward = {
	#		log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_ride_avalanche_to_west"
	#		create_wargoal = {
	#			type = puppet_wargoal_focus
	#			target = POR
	#			expire = 0
	#		}
	#		add_ai_strategy = {
	#			type = antagonize
	#			id = "POR"
	#			value = 500
	#		}
	#		add_ai_strategy = {
	#			type = conquer
	#			id = "POR" 
	#			value = 500
	#		}
	#	}
	#}
	
	
	
	
	
	focus = {
		id = SPR_appropriate_the_means_of_production
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = ARA_struggle_against_restorers_capitalism }
		
		icon = GFX_focus_generic_support_the_left_right
		x = 3
		y = 1
		relative_position_id = ARA_struggle_against_restorers_capitalism
		cost = 10

		available_if_capitulated = yes
		
		ai_will_do = {
			factor = 5
		}

		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 2
			}
			swap_ideas = {
				remove_idea = SPR_anarchist_society_1
				add_idea = SPR_anarchist_society_2
			}
		}
	}
	
	focus = {
		id = SPR_autogestion
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_appropriate_the_means_of_production }
		
		icon = GFX_goal_generic_production
		x = -1
		y = 1
		relative_position_id = SPR_appropriate_the_means_of_production
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPR_anarchist_society_2
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_2
					add_idea = SPR_anarchist_society_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_5
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_5
					add_idea = SPR_anarchist_society_6
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_8
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_8
					add_idea = SPR_anarchist_society_9
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_11
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_11
					add_idea = SPR_anarchist_society_12
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_13
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_13
					add_idea = SPR_anarchist_society_14
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_2
						add_idea = SPR_anarchist_society_3
					}
				}
			}
		}
	}

	focus = {
		id = SPR_the_maximum_concession
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_appropriate_the_means_of_production }
		
		icon = GFX_focus_generic_concessions
		x = 1
		y = 1
		relative_position_id = SPR_appropriate_the_means_of_production
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_timed_idea = { idea = SPR_the_maximum_concession days = 365 }
		}
	}

	focus = {
		id = SPR_shared_burdens
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_appropriate_the_means_of_production }
		
		icon = GFX_goal_generic_consumer_goods
		x = 3
		y = 1
		relative_position_id = SPR_appropriate_the_means_of_production
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPR_anarchist_society_2
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_2
					add_idea = SPR_anarchist_society_5
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_5
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_5
					add_idea = SPR_anarchist_society_8
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_3
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_3
					add_idea = SPR_anarchist_society_6
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_6
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_6
					add_idea = SPR_anarchist_society_9
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_4
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_4
					add_idea = SPR_anarchist_society_7
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_7
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_7
					add_idea = SPR_anarchist_society_10
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_15
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_15
					add_idea = SPR_anarchist_society_16
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_17
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_17
					add_idea = SPR_anarchist_society_18
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_18
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_18
					add_idea = SPR_anarchist_society_19
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_2
						add_idea = SPR_anarchist_society_5
					}
				}
			}
		}
	}
	
	focus = {
		id = ARA_foreign_arms_purchases
		text = SPR_foreign_arms_purchases
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_the_maximum_concession }
		
		icon = GFX_z_goal_trade_weapons
		x = -2
		y = 1
		relative_position_id = SPR_the_maximum_concession
		cost = 5
		
		ai_will_do = {
			factor = 15
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_foreign_arms_purchases_tt
		}
	}

	focus = {
		id = ARA_masters_of_our_own_fate
		text = SPR_masters_of_our_own_fate
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_the_maximum_concession }
		
		icon = GFX_focus_spr_masters_of_our_own_fate
		x = 0
		y = 1
		relative_position_id = SPR_the_maximum_concession
		cost = 5
		
		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes
		completion_reward = {
			if = {
				limit = { NOT = { has_government = anarchism } }
				set_politics = {
					ruling_party = anarchism
					elections_allowed = no
				}
			}
			add_popularity = {
				ideology = fascism
				popularity = -1
			}
			add_popularity = {
				ideology = monarchy
				popularity = -1
			}
			add_popularity = {
				ideology = communism
				popularity = -0.25
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.25
			}
			add_popularity = {
				ideology = democratic
				popularity = -0.25
			}
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				add_timed_idea = { idea = SPR_masters_of_our_own_fate days = 60 }
			}
			custom_effect_tooltip = SPR_masters_of_our_own_fate_tt_2
		}
	}

	focus = {
		id = SPR_all_must_bear_the_torch
		available = {
			is_subject = no
			has_government = anarchism
			OR = {
				has_completed_focus = ARA_new_revolution
				AND = {
					has_completed_focus = ARA_call_to_anarchists_spain
					has_completed_focus = ARA_masters_of_our_own_fate
				}
			}
		}
		bypass = {
		}

		prerequisite = {
			focus = ARA_new_revolution
			focus = ARA_call_to_anarchists_spain
			focus = ARA_masters_of_our_own_fate
		}
		
		icon = GFX_focus_spr_torchbearers_of_tomorrow
		x = 2
		y = 1
		relative_position_id = ARA_call_to_anarchists_spain
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER}
		completion_reward = {
			set_temp_variable = { anarchism_unity_add_var = 5 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
			if = {
				limit = {
					has_idea = SPR_anarchist_society_15
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_15
					add_idea = SPR_anarchist_society_17
				}
			}
			if = {
				limit = {
					has_idea = SPR_anarchist_society_16
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_16
					add_idea = SPR_anarchist_society_18
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_15
						add_idea = SPR_anarchist_society_17
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_maintaining_the_fire
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_all_must_bear_the_torch }
		
		icon = GFX_goal_generic_propaganda
		x = -2
		y = 1
		relative_position_id = SPR_all_must_bear_the_torch
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_war_support = 0.15
			set_temp_variable = { anarchism_unity_add_var = 10 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
		}
	}

	focus = {
		id = SPR_freedom_of_thought
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPR_maintaining_the_fire }
		
		icon = GFX_focus_research2
		x = -1
		y = 1
		relative_position_id = SPR_maintaining_the_fire
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = ARA_collective_recovery_efforts
		text = SPR_collective_recovery_efforts
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = ARA_spanish_autonomy focus = SPR_maintaining_the_fire }
		
		icon = GFX_goal_generic_construct_infrastructure
		x = -7
		y = 1
		relative_position_id = SPR_maintaining_the_fire
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_collective_recovery_efforts days = 730 }
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = ARA_repair_and_expand_the_dockyards
		text = SPR_repair_and_expand_the_dockyards
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = ARA_collective_recovery_efforts }
		
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 0
		y = 1
		relative_position_id = ARA_collective_recovery_efforts
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = ARA_repair_and_expand_the_dockyards_2DY }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = ARA_repair_and_expand_the_dockyards_2DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = ARA_repair_and_expand_the_dockyards_2DY }
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = ARA_repair_and_expand_the_dockyards_2DY
			}
		}
	}

	focus = {
		id = ARA_the_peoples_fleet
		text = SPR_the_peoples_fleet
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = ARA_repair_and_expand_the_dockyards }
		
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = 0
		y = 1
		relative_position_id = ARA_repair_and_expand_the_dockyards
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 75
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = ss_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = submarine_doctrine
			}
		}
	}
	

	focus = {
		id = SPR_the_threats_abound
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_all_must_bear_the_torch }
		
		icon = GFX_goal_generic_defence
		x = 1
		y = 1
		relative_position_id = SPR_all_must_bear_the_torch
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPR_the_threats_abound_1
		}
	}
	
	focus = {
		id = SPR_a_new_way_of_warfare
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_threats_abound }
		
		icon = GFX_goal_generic_army_tanks
		x = -2
		y = 1
		relative_position_id = SPR_the_threats_abound
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_a_new_way_of_warfare
				bonus = 1.0
				uses = 1
				category = light_fighter
			}
			add_tech_bonus = {
				name = SPR_a_new_way_of_warfare
				bonus = 1.0
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = SPR_torchbearers_of_tomorrow
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_a_new_way_of_warfare }
		prerequisite = { focus = ARA_collective_recovery_efforts }
		
		icon = GFX_goal_generic_demand_territory
		x = -1
		y = 1
		relative_position_id = SPR_a_new_way_of_warfare
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			set_temp_variable = { anarchism_unity_add_var = 5 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
			add_ideas = SPR_torchbearers_of_tomorrow
			swap_ideas = {
				remove_idea = SPR_the_threats_abound_1
				add_idea = SPR_the_threats_abound_2
			}
		}
	}
	
	focus = {
		id = SPR_communal_military_strategies
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_a_new_way_of_warfare }
		
		icon = GFX_goal_generic_army_doctrines
		x = 1
		y = 1
		relative_position_id = SPR_a_new_way_of_warfare
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			remove_ideas = SPR_disbanded_army_2
			add_doctrine_cost_reduction = {
				name = SPR_communal_military_strategies
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPR_council_of_theorists
		}
	}
	
	focus = {
		id = ARA_outpost_in_north
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SPR_the_threats_abound }
		x = 0
		y = 1
		relative_position_id = SPR_the_threats_abound
		
		cost = 10
		
		continue_if_invalid = yes
		available_if_capitulated = no

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.1
				has_war = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_war_with = SPA
					has_war_with = SPR
				}
			}
			modifier = {
				add = -5
				strength_ratio = {
					tag = FRA
					ratio < 1
				}
			}
			modifier = {
				add = -5
				strength_ratio = {
					tag = ADR
					ratio < 1
				}
			}
			modifier = {
				add = 5
				strength_ratio = {
					tag = ADR
					ratio > 1
				}
			}
			modifier = {
				factor = 10
				FRA = { has_war = yes }
			}
		}
		available = {
			is_subject = no
			set_temp_variable = { anarchism_unity_trigger_var = 25 }
			custom_trigger_tooltip = {
				check_variable = { anarchism_unity_var > anarchism_unity_trigger_var }
				tooltip = anarchism_unity_trigger_more
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = ADR }
				has_war_with = ADR
			}
		}
		
		will_lead_to_war_with = ADR
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_outpost_in_north"
			if = {
				limit = { ADR = { has_government = ROOT } }
				ADR = { country_event = { id = generic.5 } }
			}
			else = {
				set_temp_variable = { anarchism_unity_add_var = -7.5 }
				add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
				custom_effect_tooltip = anarchism_unity_add_effect
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ADR
					expire = 0
				}
			}
		}
	}

	focus = {
		id = SPR_portuguese_anarchism
		available = {
			is_subject = no
			set_temp_variable = { anarchism_unity_trigger_var = 40 }
			custom_trigger_tooltip = {
				check_variable = { anarchism_unity_var > anarchism_unity_trigger_var }
				tooltip = anarchism_unity_trigger_more
			}
			any_controlled_state = {
				is_fully_controlled_by = ROOT
				any_neighbor_state = {
					is_owned_by = POR
				}
			}
		}
		bypass = {
			owns_state = 180
			owns_state = 181
			owns_state = 112
			owns_state = 179
			owns_state = 795
		}
		
		prerequisite = { focus = SPR_the_threats_abound }
		
		icon = GFX_focus_generic_attack_portugal
		x = 2
		y = 1
		relative_position_id = SPR_the_threats_abound
		cost = 10
		
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0.1
				has_war = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_war_with = SPA
					has_war_with = SPR
				}
			}
			modifier = {
				factor = 2
				enemies_strength_ratio < 1
			}
			modifier = {
				factor = 5
				enemies_strength_ratio < 0.5
			}
		}
		
		continue_if_invalid = yes
		available_if_capitulated = no
		
		will_lead_to_war_with = POR
		completion_reward = {
			set_temp_variable = { anarchism_unity_add_var = -10 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
			if = {
				limit = {
					POR = { has_civil_war = yes }
				}
				every_country = {
					limit = {
						original_tag = POR
					}
					ROOT = {
						create_wargoal = {
							type = annex_everything
						    target = PREV
						    expire = 0
						}
					}
				}
			}
			else = {
				POR = { country_event = { id = lar_spain.48 hours = 6 random_hours = 18 } }
			}
		}
	}

	focus = {
		id = SPR_regional_defense_council_of_iberia
		available = {
			owns_state = 180
			owns_state = 181
			owns_state = 112
			owns_state = 179
			owns_state = 795
		}
		bypass = {
		}
		prerequisite = { focus = ARA_outpost_in_north }
		prerequisite = { focus = SPR_portuguese_anarchism }
		
		icon = GFX_goal_generic_alliance
		x = 1
		y = 1
		relative_position_id = ARA_outpost_in_north
		cost = 10
		
		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_regional_defense_council_of_iberia_tt
			hidden_effect = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = SPC_regional_defense_council_of_iberia
			}
			every_state = {
				limit = {
					is_core_of = POR
				}
				add_core_of = ROOT
			}
		}
	}
	
	focus = {
		id = SPR_faith_in_the_cause
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_torchbearers_of_tomorrow }
		prerequisite = { focus = SPR_regional_defense_council_of_iberia }
		
		icon = GFX_goal_tfv_saf_anti_colonialist_crusade
		x = 0
		y = 1
		relative_position_id = SPR_torchbearers_of_tomorrow
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_war_support = 0.1
			set_temp_variable = { anarchism_unity_add_var = 15 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
		}
	}
	
	focus = {
		id = ARA_international_workers_association
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_faith_in_the_cause }
		x = -1
		y = 1
		relative_position_id = SPR_faith_in_the_cause
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 20
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_international_workers_association"
			set_temp_variable = { anarchism_unity_add_var = 5 }
			add_to_variable = { anarchism_unity_var = anarchism_unity_add_var }
			custom_effect_tooltip = anarchism_unity_add_effect
			if = {
				limit = { is_faction_leader = yes }
				set_faction_name = ARA_iwa
			}
			else_if = {
				limit = {
					is_in_faction = yes
					is_faction_leader = no
				}
				leave_faction = yes
				set_rule = { can_create_factions = yes }
				create_faction = ARA_iwa
			}
			else = {
				set_rule = { can_create_factions = yes }
				create_faction = ARA_iwa
			}
			if = {
				limit = {
					CAT = {
						exists = yes
						has_government = anarchism
						NOT = { is_in_faction_with = ROOT }
					}
				}
				add_to_faction = CAT
			}
		}
	}
	

	focus = {
		id = SPR_the_inevitable_counterblow
		available = {
			has_country_leader = {
				name = "Anarchist Commune"
				ruling_only = yes
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_regional_defense_council_of_iberia }
		prerequisite = { focus = SPR_torchbearers_of_tomorrow }
		
		icon = GFX_goal_generic_construct_military
		x = -1
		y = 1
		relative_position_id = SPR_regional_defense_council_of_iberia
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_ideas = SPR_the_inevitable_counterblow
			add_country_leader_trait = anarchist_zeal
			hidden_effect = {
				news_event = { id = lar_news.22 hours = 6 }
			}
		}
	}
	
	focus = {
		id = SPR_militarize_the_people
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_inevitable_counterblow }
		prerequisite = { focus = SPR_faith_in_the_cause }
		
		icon = GFX_goal_generic_military_deal
		x = -2
		y = 1
		relative_position_id = SPR_the_inevitable_counterblow
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			swap_ideas = {
				remove_idea = SPR_the_threats_abound_2
				add_idea = SPR_the_threats_abound_3
			}
		}
	}

	focus = {
		id = SPR_anarchism_knows_no_borders
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_militarize_the_people }
		
		icon = GFX_focus_spr_anarchism_knows_no_borders
		x = 0
		y = 1
		relative_position_id = SPR_militarize_the_people
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_ideas = SPR_anarchism_knows_no_borders
			unlock_decision_category_tooltip = generic_policy_interventions_category
		}
	}

	focus = {
		id = SPR_plant_the_seeds_of_revolution
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_anarchism_knows_no_borders }
		
		icon = GFX_focus_prc_infiltration
		x = -1
		y = 1
		relative_position_id = SPR_anarchism_knows_no_borders
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_plant_the_seeds_of_revolution_tt
			unlock_decision_category_tooltip = generic_interventions_start_civil_war_category
			division_template = {
				name = "Anarchist Militia"
				priority = 1
				is_locked = yes
				division_names_group = SPD_INF_06
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
				}
			}
		}
	}

	focus = {
		id = SPR_global_defense_council
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_anarchism_knows_no_borders }
		
		icon = GFX_goal_generic_alliance
		x = 1
		y = 1
		relative_position_id = SPR_anarchism_knows_no_borders
		cost = 10
		
		ai_will_do = {
			factor = 25
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_global_defense_council_tt
			hidden_effect = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = SPC_global_defense_council
			}
			#custom_effect_tooltip = SPR_global_defense_council_tt_2
			unlock_decision_category_tooltip = generic_expand_anarchism_commune_category
			custom_effect_tooltip = generic_expand_anarchism_commune_category_tt
		}
	}
	
	focus = {
		id = ARA_extension_revolution
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_plant_the_seeds_of_revolution }
		prerequisite = { focus = SPR_global_defense_council }
		x = 1
		y = 1
		relative_position_id = SPR_plant_the_seeds_of_revolution
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		ai_will_do = {
			factor = 10
			modifier = {
				add = -10
				has_war = yes
				event_target:NW_france_scope = { NOT = { has_government = anarchism } }
			}
			modifier = {
				add = 10
				event_target:NW_france_scope = { has_war = yes }
			}
			modifier = {
				factor = 0.1
				strength_ratio = {
					tag = event_target:NW_france_scope
					ratio < 1
				}
			}
			modifier = {
				factor = 0
				num_divisions < 30
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus ARA_extension_revolution"
			if = {
				limit = {
					16 = {
						controller = {
							has_government = anarchism
							is_faction_leader = yes
						}
					}
				}
				16 = {
					controller = {
						country_event = { id = generic.5 }
						hidden_effect = {
							add_ai_strategy = {
								type = alliance
								id = ROOT
								value = 200
							}
							ROOT = {
								add_ai_strategy = {
									type = alliance
									id = PREV
									value = 200
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					is_faction_leader = yes
					16 = {
						controller = {
							has_government = anarchism
							is_faction_leader = no
						}
					}
				}
				16 = {
					controller = {
						country_event = { id = generic.2 }
						hidden_effect = {
							add_ai_strategy = {
								type = alliance
								id = ROOT
								value = 200
							}
							ROOT = {
								add_ai_strategy = {
									type = alliance
									id = PREV
									value = 200
								}
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					is_faction_leader = no
					16 = {
						controller = {
							has_government = anarchism
							is_faction_leader = no
						}
					}
				}
				16 = { controller = { country_event = { id = NWspain.207 } } }
			}
			else_if = {
				limit = { 16 = { controller = { NOT = { has_government = anarchism } } } }
				16 = {
					controller = {
						ROOT = {
							create_wargoal = {
								type = puppet_wargoal_focus
								target = PREV
							}
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
							add_ai_strategy = {
								type = conquer
								id = PREV
								value = 100
							}
						}
						add_ai_strategy = {
							type = antagonize
							id = ROOT
							value = 200
						}
						add_ai_strategy = {
							type = conquer
							id = ROOT
							value = 100
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_militarize_the_industry
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_inevitable_counterblow }
		
		icon = GFX_goal_generic_construct_mil_factory
		x = 0
		y = 1
		relative_position_id = SPR_the_inevitable_counterblow
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_militarize_the_industry_1mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_militarize_the_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_militarize_the_industry_1mil }
				}
				set_state_flag = SPR_militarize_the_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_militarize_the_industry_1mil }
				}
				set_state_flag = SPR_militarize_the_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_militarize_the_industry_1mil }
				}
				set_state_flag = SPR_militarize_the_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_communal_autarky
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_militarize_the_industry }
		
		icon = GFX_goal_generic_construction2
		x = 0
		y = 1
		relative_position_id = SPR_militarize_the_industry
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPR_anarchist_society_17
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_17
					add_idea = SPR_anarchist_society_18
				}
			}
			else_if = {
				limit = {
					has_idea = SPR_anarchist_society_18
				}
				swap_ideas = {
					remove_idea = SPR_anarchist_society_18
					add_idea = SPR_anarchist_society_19
				}
			}
			else = {
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPR_anarchist_society_17
						add_idea = SPR_anarchist_society_18
					}
				}
			}
			remove_ideas = SPA_recovering_from_civil_war
			add_tech_bonus = {
				name = SPR_communal_autarky
				bonus = 1
				uses = 1
				category = excavation_tech
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}
	
	focus = {
		id = SPR_improve_military_infrastructure
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_inevitable_counterblow }
		
		icon = GFX_goal_generic_construct_infrastructure
		x = 2
		y = 1
		relative_position_id = SPR_the_inevitable_counterblow
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = SPR_improve_military_infrastructure
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				set_state_flag = SPR_improve_military_infrastructure_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_improve_military_infrastructure_1inf }
				}
				set_state_flag = SPR_improve_military_infrastructure_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_improve_military_infrastructure_1inf }
				}
				set_state_flag = SPR_improve_military_infrastructure_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_improve_military_infrastructure_1inf }
				}
				set_state_flag = SPR_improve_military_infrastructure_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_fortify_the_pyrenees
		available = {
			has_full_control_of_state = 792
			has_full_control_of_state = 172
			has_full_control_of_state = 166
			has_full_control_of_state = 794
			has_full_control_of_state = 165
			has_full_control_of_state = 1043
		}
		bypass = {
		}
		prerequisite = { focus = SPR_improve_military_infrastructure }
		
		icon = GFX_goal_generic_fortify_city
		x = 0
		y = 1
		relative_position_id = SPR_improve_military_infrastructure
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_fortify_the_pyrenees_tt
			hidden_effect = {
				792 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 6756
						}
						level = 3
						instant_build = yes
					}
				}
				172 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3737
							id = 3931
						}
						level = 3
						instant_build = yes
					}
				}
				166 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 11838
						}
						level = 3
						instant_build = yes
					}
				}
				794 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 915
							id = 899
						}
						level = 3
						instant_build = yes
					}
				}
				165 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3899
							id = 3898
							id = 11779
							id = 9824
						}
						level = 3
						instant_build = yes
					}
				}
				1043 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 11779
							id = 9824
						}
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPR_fortify_la_linea_de_la_concepcion
		available = {
			has_full_control_of_state = 169
			has_full_control_of_state = 173
		}
		bypass = {
		}
		prerequisite = { focus = SPR_fortify_the_pyrenees }
		
		icon = GFX_goal_generic_fortify_city
		x = -1
		y = 1
		relative_position_id = SPR_fortify_the_pyrenees
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_fortify_la_linea_de_la_concepcion_tt
			hidden_effect = {
				169 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 13228
							id = 10094
						}
						level = 3
						instant_build = yes
					}
				}
				173 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 7153
						}
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPR_fortify_the_coastlines
		available = {
			NOT = {
				any_of_scopes = {
					array = ROOT.core_states
					tooltip = any_of_core_states_tt
					is_in_home_area = yes
					is_coastal = yes
					NOT = { is_controlled_by = ROOT }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_fortify_the_pyrenees }
		
		icon = GFX_focus_generic_coastal_fort
		x = 1
		y = 1
		relative_position_id = SPR_fortify_the_pyrenees
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_fortify_the_coastlines_tt_1
			custom_effect_tooltip = SPR_fortify_the_coastlines_tt_2
			hidden_effect = {
				171 = {
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
						level = 1
						instant_build = yes
					}
				}
				790 = {
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
						level = 1
						instant_build = yes
					}
				}
				792 = {
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
						level = 1
						instant_build = yes
					}
				}
				every_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						is_in_home_area = yes
					}
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
}