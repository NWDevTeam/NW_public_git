form_confederation_peru_bolivia_category = {
	
	form_confederation_peru_bolivia = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = PRU
				original_tag = BOL
			}
		}

		available = {
			is_subject = no
			# Peru
			custom_trigger_tooltip = {
				tooltip = form_country_peru_required_states_tt
				all_of_scopes = {
					array = PRU.core_states
					OR = {
						state = 490
						is_controlled_by = ROOT
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = form_country_bolivia_required_states_tt
				all_of_scopes = {
					array = BOL.core_states
					OR = {
						state = 688
						state = 1098
						is_controlled_by = ROOT
					}
				}
			}
		}

		visible = {
			OR = {
				original_tag = PRU
				original_tag = BOL
			}
			NOT = { has_global_flag = form_unite_pru_bol_flag }
		}

		complete_effect = {
			set_cosmetic_tag = PRU_BOL_confederation
			every_state = {
				limit = {
					NOT = { is_core_of = ROOT }
					OR = {
						is_core_of = PRU
						is_core_of = BOL
					}
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				news_event = { id = new_countries.1 hours = 6 }
				set_global_flag = form_unite_pru_bol_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_south_usa_confederation_category = {
	
	form_south_usa_confederation = {

		icon = generic_form_nation

		allowed = {
			original_tag = TEX
		}

		available = {
			is_subject = no
			# Texas
			controls_state = 372
			controls_state = 371
			controls_state = 367
			controls_state = 370
			controls_state = 366
			controls_state = 365
			controls_state = 364
			controls_state = 363
			controls_state = 368
			controls_state = 362
		}

		visible = {
			original_tag = TEX
			NOT = { has_global_flag = form_south_usa_confederation_flag }
		}

		complete_effect = {
			set_cosmetic_tag = South_USA_confederation
			# Texas
			372 = { add_core_of = ROOT }
			371 = { add_core_of = ROOT }
			367 = { add_core_of = ROOT }
			370 = { add_core_of = ROOT }
			366 = { add_core_of = ROOT }
			365 = { add_core_of = ROOT }
			364 = { add_core_of = ROOT }
			363 = { add_core_of = ROOT }
			368 = { add_core_of = ROOT }
			362 = { add_core_of = ROOT }
			
			hidden_effect = {
				news_event = { id = new_countries.2 hours = 6 }
				set_global_flag = form_south_usa_confederation_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_united_south_america_category = {
	
	form_united_south_america = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = BRA
				original_tag = ARG
				original_tag = URG
				original_tag = COL
				original_tag = VEN
				original_tag = ECU
				original_tag = PRU
				original_tag = CHL
				original_tag = PAR
				original_tag = BOL
			}
		}

		available = {
			is_subject = no
			# South America
			custom_trigger_tooltip = {
				tooltip = form_country_united_south_america_required_states_tt
				all_of_scopes = {
					array = PAR.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = CHL.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = BRA.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = URG.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = COL.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = VEN.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = ECU.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = BOL.core_states
					is_controlled_by = ROOT
				}
				all_of_scopes = {
					array = PRU.core_states
					is_controlled_by = ROOT
				}
				controls_state = 687
				controls_state = 309
				controls_state = 310
			}
		}

		visible = {
			OR = {
				original_tag = BRA
				original_tag = ARG
				original_tag = URG
				original_tag = COL
				original_tag = VEN
				original_tag = ECU
				original_tag = PRU
				original_tag = CHL
				original_tag = PAR
				original_tag = BOL
			}
			NOT = { has_global_flag = form_united_south_america_flag }
		}

		complete_effect = {
			set_cosmetic_tag = United_South_America
			# South America
			every_state = {
				limit = {
					OR = {
						is_core_of = BRA
						is_core_of = ARG
						is_core_of = URG
						is_core_of = COL
						is_core_of = VEN
						is_core_of = ECU
						is_core_of = PRU
						is_core_of = PAR
						is_core_of = BOL
						state = 687
						state = 310
						state = 309
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				news_event = { id = new_countries.3 hours = 6 }
				set_global_flag = form_united_south_america_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_great_morocco_category = {
	
	form_great_morocco = {

		icon = generic_form_nation

		allowed = {
			original_tag = MOR
		}

		available = {
			is_subject = no
			controls_state = 290
			controls_state = 1042
			controls_state = 1015
			controls_state = 699
		}

		visible = {
			original_tag = MOR
			NOT = { has_global_flag = form_great_morocco_flag }
		}

		complete_effect = {
			set_cosmetic_tag = MOR_great
			add_stability = 0.05
			every_state = {
				limit = {
					OR = {
						state = 290
						state = 1042
						state = 1015
						state = 699
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_great_morocco_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_empire_of_east_and_west_category = {
	
	revive_empire_of_charlemagne = {

		icon = generic_form_nation

		allowed = {
			original_tag = FRA
		}

		available = {
			is_subject = no
			OR = {
				has_government = neutrality
				has_government = fascism
				has_government = monarchy
			}
			# Spain
			controls_state = 165
			controls_state = 794
			controls_state = 166
			controls_state = 172
			
			# Italy
			controls_state = 2
			controls_state = 39
			controls_state = 157
			controls_state = 158
			controls_state = 159
			controls_state = 160
			controls_state = 161
			controls_state = 162
			controls_state = 736
			controls_state = 824
			controls_state = 846
			controls_state = 985
			controls_state = 986
			controls_state = 987
			controls_state = 1041
			
			# YUG
			controls_state = 102
			controls_state = 858
			controls_state = 904
			
			# GER
			controls_state = 42
			controls_state = 50
			controls_state = 51
			controls_state = 52
			controls_state = 53
			controls_state = 54
			controls_state = 55
			controls_state = 56
			controls_state = 57
			controls_state = 58
			controls_state = 59
			controls_state = 60
			controls_state = 801
			controls_state = 802
			controls_state = 804
			controls_state = 808
			controls_state = 809
			controls_state = 829
			controls_state = 832
			controls_state = 835
			controls_state = 836
			controls_state = 1021
			controls_state = 1022
			
			# LUX
			controls_state = 8
			
			# Austria
			custom_trigger_tooltip = {
				tooltip = form_country_austria_required_states_tt
				controls_state = 4
				controls_state = 152
				controls_state = 153
				controls_state = 775
				controls_state = 810
				controls_state = 840
				controls_state = 841
				controls_state = 845
			}
			
			# HOL
			custom_trigger_tooltip = {
				tooltip = form_eu_netherlands_required_states_tt
				controls_state = 7
				controls_state = 35
				controls_state = 36
				controls_state = 976
			}
			
			# Belgium
			custom_trigger_tooltip = {
				tooltip = form_eu_belgium_required_states_tt
				controls_state = 6
				controls_state = 34
				
				controls_state = 766
				controls_state = 973
				controls_state = 975
				controls_state = 1061
			}
			
			# Switzerland
			custom_trigger_tooltip = {
				tooltip = form_country_switzerland_required_states_tt
				controls_state = 3
				controls_state = 151
				
				controls_state = 859
				controls_state = 860
				controls_state = 861
			}
		}

		visible = {
			original_tag = FRA
			NOT = { has_global_flag = revive_empire_of_charlemagne_flag }
		}

		complete_effect = {
			set_cosmetic_tag = FRA_empire_of_west
			every_state = {
				limit = {
					NOT = { is_core_of = ROOT }
					OR = {
						state = 165
						state = 794
						state = 166
						state = 172
						state = 2
						state = 39
						state = 157
						state = 158
						state = 159
						state = 160
						state = 161
						state = 162
						state = 736
						state = 824
						state = 846
						state = 985
						state = 986
						state = 987
						state = 1041
						state = 102
						state = 858
						state = 904
						state = 42
						state = 50
						state = 51
						state = 52
						state = 53
						state = 54
						state = 55
						state = 56
						state = 57
						state = 58
						state = 59
						state = 60
						state = 801
						state = 802
						state = 804
						state = 808
						state = 809
						state = 829
						state = 832
						state = 835
						state = 836
						state = 1021
						state = 1022
						state = 8
						state = 4
						state = 152
						state = 153
						state = 775
						state = 810
						state = 840
						state = 841
						state = 845
						state = 7
						state = 35
						state = 36
						state = 976
						state = 6
						state = 34
						state = 766
						state = 973
						state = 975
						state = 1061
						state = 3
						state = 151
						state = 859
						state = 860
						state = 861
					}
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = revive_empire_of_charlemagne_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	
	form_empire_of_east_and_west = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = FRA
				original_tag = FRF
			}
		}

		available = {
			is_subject = no
			OR = {
				has_government = neutrality
				has_government = fascism
				has_government = monarchy
			}
			controls_state = 64
			controls_state = 9
			controls_state = 2
			controls_state = 341
			OR = {
				controls_state = 219
				OR = {
					SOV = { is_subject_of = ROOT }
					RUS = { is_subject_of = ROOT }
					is_in_faction_with = SOV
					is_in_faction_with = RUS
				}
			}
		}

		visible = {
			OR = {
				original_tag = FRA
				original_tag = FRF
			}
			#NOT = { has_global_flag = form_empire_of_east_and_west_flag }
		}

		complete_effect = {
			set_cosmetic_tag = FRA_empire_of_west_and_east
			every_state = {
				limit = {
					NOT = { is_core_of = ROOT }
					OR = {
						is_core_of = GER
						is_core_of = ITA
						is_core_of = SWI
						is_core_of = AUS
						is_core_of = BEL
						is_core_of = HOL
						is_core_of = SPA
						is_core_of = SPR
						is_core_of = ARA
						is_core_of = CZE
						is_core_of = POL
						is_core_of = YUG
						is_core_of = ROM
						is_core_of = HUN
						is_core_of = ALB
					}
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_empire_of_east_and_west_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_europe_category = {
	
	form_europe = {

		icon = generic_form_nation

		allowed = {
			original_tag = FRC
		}

		available = {
			is_subject = no
			has_government = trozkism
			controls_state = 41
			controls_state = 64
			controls_state = 2
			controls_state = 4
			OR = {
				controls_state = 219
				OR = {
					SOV = { is_subject_of = ROOT }
					RUS = { is_subject_of = ROOT }
					is_in_faction_with = SOV
					is_in_faction_with = RUS
				}
			}
		}

		visible = {
			original_tag = FRC
			NOT = { has_global_flag = form_europe_flag }
		}

		complete_effect = {
			set_cosmetic_tag = FRC_great
			every_state = {
				limit = {
					OR = {
						is_core_of = GER
						is_core_of = ITA
						is_core_of = SWI
						is_core_of = AUS
						is_core_of = BEL
						is_core_of = HOL
						is_core_of = SPA
						is_core_of = SPR
						is_core_of = ARA
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_europe_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_unite_iranian_peoples_category = {
	
	form_unite_iranian_peoples = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = PER
				original_tag = AFG
				original_tag = KRD
				original_tag = ERB
				original_tag = ROJ
				original_tag = MHB
				original_tag = TAJ
			}
		}

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				#tooltip = form_unite_iranian_peoples_required_per_states_tt
				tooltip = form_country_iran_required_states_tt
				controls_state = 419
				controls_state = 421
				controls_state = 420
				controls_state = 417
				controls_state = 413
				controls_state = 266
				controls_state = 418
				controls_state = 411
				controls_state = 412
				controls_state = 416
				controls_state = 414
				controls_state = 410
				controls_state = 963
				controls_state = 1099
				controls_state = 1187
				controls_state = 1188
			}
			
			custom_trigger_tooltip = {
				#tooltip = form_unite_iranian_peoples_required_afg_states_tt
				tooltip = form_country_afghanistan_required_states_tt
				controls_state = 267
				controls_state = 415
				controls_state = 946
				controls_state = 947
				controls_state = 948
				controls_state = 949
				controls_state = 950
				controls_state = 951
				controls_state = 952
			}
		}

		visible = {
			if = {
				limit = { original_tag = AFG }
				has_completed_focus = AFG_farsi_national_lang
			}
			NOT = { has_global_flag = form_unite_iranian_peoples_flag }
		}

		complete_effect = {
			if = {
				limit = {
					NOT = {
						has_cosmetic_tag = PER_technat
						has_cosmetic_tag = KRD_great
					}
				}
				set_cosmetic_tag = PER_great
			}
			every_state = {
				limit = {
					NOT = { is_core_of = ROOT }
					OR = {
						is_core_of = PER
						is_core_of = AFG
						is_core_of = TAJ
						is_core_of = KRD
						is_core_of = ERB
						is_core_of = ROJ
						is_core_of = MHB
					}
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_unite_iranian_peoples_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	
	form_integrate_close_people_kurds = {

		icon = generic_form_nation

		allowed = {
			original_tag = PER
		}

		available = {
			is_subject = no
			OR = {
				controls_state = 962
				controls_state = 352
				controls_state = 786
			}
		}

		visible = {
			original_tag = PER
			NOT = { has_global_flag = form_integrate_close_people_kurds_flag }
		}

		complete_effect = {
			every_state = {
				limit = {
					is_core_of = KRD
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_integrate_close_people_kurds_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_litbel_category = {
	form_litbel = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = LIT
				original_tag = BLR
			}
		}

		available = {
			is_subject = no
			1029 = { is_owned_and_controlled_by = ROOT }
			97 = { is_owned_and_controlled_by = ROOT }
			94 = { is_owned_and_controlled_by = ROOT }
			95 = { is_owned_and_controlled_by = ROOT }
			96 = { is_owned_and_controlled_by = ROOT }
			771 = { is_owned_and_controlled_by = ROOT }
			939 = { is_owned_and_controlled_by = ROOT }
			204 = { is_owned_and_controlled_by = ROOT }
			206 = { is_owned_and_controlled_by = ROOT }
			207 = { is_owned_and_controlled_by = ROOT }
			194 = { is_owned_and_controlled_by = ROOT }
			900 = { is_owned_and_controlled_by = ROOT }
			241 = { is_owned_and_controlled_by = ROOT }
		}

		visible = {
			OR = {
				original_tag = LIT
				original_tag = BLR
			}
			NOT = { has_global_flag = form_litbel_flag }
		}

		complete_effect = {
			set_cosmetic_tag = LTB
			1029 = { add_core_of = ROOT }
			97 = { add_core_of = ROOT }
			94 = { add_core_of = ROOT }
			95 = { add_core_of = ROOT }
			96 = { add_core_of = ROOT }
			771 = { add_core_of = ROOT }
			939 = { add_core_of = ROOT }
			204 = { add_core_of = ROOT }
			206 = { add_core_of = ROOT }
			207 = { add_core_of = ROOT }
			194 = { add_core_of = ROOT }
			900 = { add_core_of = ROOT }
			241 = { add_core_of = ROOT }
			set_global_flag = form_litbel_flag
		}

		ai_will_do = {
			factor = 200
		}
	}
}

form_great_lit_category = {
	form_great_lit = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = LIT
				original_tag = BLR
			}
		}

		available = {
			is_subject = no
			OR = {
				has_government = neutrality
				has_government = monarchy
				has_government = fascism
			}
			#NOT = {
			#	any_state = {
			#		is_core_of = LIT
			#		NOT = { is_controlled_by = ROOT }
			#		NOT = { state = 188 }
			#	}
			#}
			custom_trigger_tooltip = {
				tooltip = form_lit_cores
				all_of_scopes = {
					array = LIT.core_states
					OR = {
						state = 188
						is_controlled_by = ROOT
					}
				}
			}
			1029 = { is_controlled_by = ROOT }
			97 = { is_controlled_by = ROOT }
			94 = { is_controlled_by = ROOT }
			95 = { is_controlled_by = ROOT }
			96 = { is_controlled_by = ROOT }
			771 = { is_controlled_by = ROOT }
			939 = { is_controlled_by = ROOT }
			204 = { is_controlled_by = ROOT }
			206 = { is_controlled_by = ROOT }
			207 = { is_controlled_by = ROOT }
			194 = { is_controlled_by = ROOT }
			900 = { is_controlled_by = ROOT }
			241 = { is_controlled_by = ROOT }
			997 = { is_controlled_by = ROOT }
			93 = { is_controlled_by = ROOT }
			198 = { is_controlled_by = ROOT }
			199 = { is_controlled_by = ROOT }
			989 = { is_controlled_by = ROOT }
			192 = { is_controlled_by = ROOT }
			197 = { is_controlled_by = ROOT }
			226 = { is_controlled_by = ROOT }
			203 = { is_controlled_by = ROOT }
			903 = { is_controlled_by = ROOT }
			220 = { is_controlled_by = ROOT }
			221 = { is_controlled_by = ROOT }
			240 = { is_controlled_by = ROOT }
			259 = { is_controlled_by = ROOT }
			201 = { is_controlled_by = ROOT }
			202 = { is_controlled_by = ROOT }
			193 = { is_controlled_by = ROOT }
			225 = { is_controlled_by = ROOT }
			222 = { is_controlled_by = ROOT }
			205 = { is_controlled_by = ROOT }
			224 = { is_controlled_by = ROOT }
			996 = { is_controlled_by = ROOT }
			901 = { is_controlled_by = ROOT }
			242 = { is_controlled_by = ROOT }
			243 = { is_controlled_by = ROOT }
		}

		visible = {
			OR = {
				original_tag = LIT
				original_tag = BLR
			}
			NOT = { has_global_flag = form_great_lit_flag }
		}

		complete_effect = {
			set_cosmetic_tag = LIT_GREAT
			every_state = {
				limit = {
					OR = {
						is_core_of = LIT
						is_core_of = BLR
						is_core_of = UKR
						state = 1029
						state = 97
						state = 94
						state = 95
						state = 96
						state = 771
						state = 939
						state = 204
						state = 206
						state = 207
						state = 194
						state = 900
						state = 241
						state = 997
						state = 93
						state = 198
						state = 199
						state = 989
						state = 192
						state = 197
						state = 226
						state = 203
						state = 903
						state = 220
						state = 221
						state = 240
						state = 259
						state = 201
						state = 202
						state = 193
						state = 225
						state = 222
						state = 205
						state = 224
						state = 996
						state = 901
						state = 242
						state = 243
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			hidden_effect = {
				set_global_flag = form_great_lit_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_slavia_category = {
	form_slavia = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = SOV
				original_tag = RUS
				original_tag = POL
				original_tag = CZE
				original_tag = SLO
				original_tag = UKR
				original_tag = KPR
				original_tag = BLR
				original_tag = YUG
				original_tag = BUL
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
				original_tag = SIB
				original_tag = DVR
				original_tag = SOR
			}
		}

		available = {
			is_subject = no
			219 = { is_owned_and_controlled_by = ROOT }
			195 = { is_owned_and_controlled_by = ROOT }
			202 = { is_owned_and_controlled_by = ROOT }
			206 = { is_owned_and_controlled_by = ROOT }
			10 = { is_owned_and_controlled_by = ROOT }
			66 = { is_owned_and_controlled_by = ROOT }
			109 = { is_owned_and_controlled_by = ROOT }
			107 = { is_owned_and_controlled_by = ROOT }
			48 = { is_owned_and_controlled_by = ROOT }
			70 = { is_owned_and_controlled_by = ROOT }
			9 = { is_owned_and_controlled_by = ROOT }
		}
			
		visible = {
			OR = {
				original_tag = SOV
				original_tag = RUS
				original_tag = POL
				original_tag = CZE
				original_tag = SLO
				original_tag = UKR
				original_tag = KPR
				original_tag = BLR
				original_tag = YUG
				original_tag = BUL
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
				original_tag = SIB
				original_tag = DVR
				original_tag = SOR
			}
			NOT = { has_global_flag = form_slavia_flag }
		}

		complete_effect = {
			set_cosmetic_tag = SLAVIA
			every_state = {
				limit = {
					OR = {
						is_core_of = SOV
						is_core_of = RUS
						is_core_of = POL
						is_core_of = CZE
						is_core_of = SLO
						is_core_of = UKR
						is_core_of = BLR
						is_core_of = YUG
						is_core_of = BUL
						is_core_of = SER
						is_core_of = CRO
						is_core_of = SLV
						is_core_of = BOS
						is_core_of = MAC
						is_core_of = MNT
						is_core_of = HRZ
						is_core_of = KOS
						is_core_of = VOJ
						is_core_of = SIB
						is_core_of = DVR
						is_core_of = SOR
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			every_state = {
				limit = {
					OR = {
						is_claimed_by = SOV
						is_claimed_by = RUS
						is_claimed_by = POL
						is_claimed_by = CZE
						is_claimed_by = SLO
						is_claimed_by = UKR
						is_claimed_by = BLR
						is_claimed_by = YUG
						is_claimed_by = BUL
						is_claimed_by = SER
						is_claimed_by = CRO
						is_claimed_by = BOS
						is_claimed_by = SLV
						is_claimed_by = MNT
						is_claimed_by = SIB
						is_claimed_by = DVR
						is_claimed_by = SOR
					}
					NOT = {
						is_claimed_by = ROOT
						is_owned_by = ROOT
					}
				}
				add_claim_by = ROOT
			}
			set_global_flag = form_slavia_flag
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	
	form_yugoslavia = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
			}
		}

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = form_yugoslavia_cores
				all_of_scopes = {
					array = global.yugoslavia_cores
					is_controlled_by = ROOT
				}
			}
		}
			
		visible = {
			OR = {
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
			}
			YUG = { exists = no }
			NOT = { has_global_flag = form_yugoslavia_flag }
		}

		complete_effect = {
			set_cosmetic_tag = YUG
			every_state = {
				limit = {
					OR = {
						is_in_array = { global.yugoslavia_cores = This.id }
						is_core_of = YUG
						is_core_of = SER
						is_core_of = CRO
						is_core_of = SLV
						is_core_of = BOS
						is_core_of = MAC
						is_core_of = MNT
						is_core_of = HRZ
						is_core_of = KOS
						is_core_of = VOJ
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			set_global_flag = form_yugoslavia_flag
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}

	form_zapadoslavia = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = POL
				original_tag = CZE
				original_tag = SLO
			}
		}

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = form_zapadoslavia_tt
				all_of_scopes = {
					array = global.zapadoslavia_cores
					is_controlled_by = ROOT
				}
			}
		}
			
		visible = {
			OR = {
				original_tag = POL
				original_tag = CZE
				original_tag = SLO
			}
			NOT = { has_global_flag = form_zapadoslavia_flag }
		}

		complete_effect = {
			set_cosmetic_tag = ZSLAVIA
			every_state = {
				limit = {
					OR = {
						is_core_of = POL
						is_core_of = CZE
						is_core_of = SLO
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
			set_global_flag = form_zapadoslavia_flag
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_earth_category = {
	
	form_earth = {

		icon = generic_form_nation_tt

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = form_earth_avail
				all_state = {
					is_owned_by = ROOT
				}
			}
		}

		visible = {
			num_of_controlled_states > 200
			NOT = { has_global_flag = form_earth_flag }
		}
		
		fire_only_once = yes

		complete_effect = {
			set_cosmetic_tag = EARTH
			custom_effect_tooltip = form_earth_cores
			hidden_effect = {
				every_state = {
					limit = { NOT = { is_core_of = ROOT } }
					add_core_of = ROOT
				}
			}
			set_global_flag = form_earth_flag
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_balcan_category = {
	
	form_balcan = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = BUL
				original_tag = ROM
				original_tag = GRE
				original_tag = CRE
				original_tag = ALB
				original_tag = YUG
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
			}
		}

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = form_balcan_cores
				all_of_scopes = {
					array = global.balcan_cores
					is_controlled_by = ROOT
				}
			}
		}

		visible = {
			OR = {
				original_tag = BUL
				original_tag = ROM
				original_tag = GRE
				original_tag = CRE
				original_tag = ALB
				original_tag = YUG
				original_tag = SER
				original_tag = CRO
				original_tag = SLV
				original_tag = BOS
				original_tag = MAC
				original_tag = MNT
				original_tag = HRZ
				original_tag = KOS
				original_tag = VOJ
			}
			NOT = { has_global_flag = form_balcan_flag }
		}

		complete_effect = {
			set_cosmetic_tag = BALCAN
			custom_effect_tooltip = form_balcan_effect
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = BUL
							is_core_of = ROM
							is_core_of = ALB
							is_core_of = GRE
							is_core_of = CRE
							is_core_of = YUG
							is_core_of = SER
							is_core_of = CRO
							is_core_of = SLV
							is_core_of = BOS
							is_core_of = MAC
							is_core_of = MNT
							is_core_of = HRZ
							is_core_of = KOS
							is_core_of = VOJ
						}
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			hidden_effect = {
				set_global_flag = form_balcan_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_africa_category = {
	
	form_africa = {

		icon = generic_form_nation
		
		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = form_africa_available
				all_of_scopes = {
					array = global.africa
					is_controlled_by = ROOT
				}
			}
		}

		visible = {
			capital_scope = { is_on_continent = africa }
			NOT = { has_global_flag = form_africa_flag }
		}

		complete_effect = {
			set_cosmetic_tag = AFRICA
			custom_effect_tooltip = form_africa_effect
			hidden_effect = {
				every_state = {
					limit = {
						is_on_continent = africa
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			hidden_effect = {
				set_global_flag = form_africa_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_mexicana_category = {
	
	form_mexicana = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = KMX
				original_tag = MEX
				original_tag = USA
			}
			has_dlc = "Waking the Tiger"
		}

		available = {
			is_subject = no
			# USA
			custom_trigger_tooltip = {
				tooltip = form_country_usa_required_states_tt
				controls_state = 463
				controls_state = 386
				controls_state = 385
				controls_state = 378
				controls_state = 379
				controls_state = 387
				controls_state = 388
				controls_state = 381
				controls_state = 380
				controls_state = 377
				controls_state = 382
				controls_state = 389
				controls_state = 390
				controls_state = 384
				controls_state = 383
				controls_state = 374
				controls_state = 375
				controls_state = 371
				controls_state = 370
				controls_state = 372
				controls_state = 373
				controls_state = 392
				controls_state = 393
				controls_state = 394
				controls_state = 395
				controls_state = 358
				controls_state = 357
				controls_state = 360
				controls_state = 359
				controls_state = 361
				controls_state = 362
				controls_state = 261
				controls_state = 396
				controls_state = 366
				controls_state = 367
				controls_state = 365
				controls_state = 364
				controls_state = 363
				controls_state = 368
				controls_state = 369
			}
			# Mex
			custom_trigger_tooltip = {
				tooltip = form_country_mex_required_states_tt
				controls_state = 484
				controls_state = 483
				controls_state = 482
				controls_state = 480
				controls_state = 481
				controls_state = 479
				controls_state = 478
				controls_state = 277
				controls_state = 485
				controls_state = 477
				controls_state = 476
				controls_state = 475
				controls_state = 474
			}
			# Canada
			custom_trigger_tooltip = {
				tooltip = form_country_can_required_states_tt
				controls_state = 471
				controls_state = 473
				controls_state = 740
				controls_state = 470
				controls_state = 472
				controls_state = 469
				controls_state = 467
				controls_state = 683
				controls_state = 682
				controls_state = 276
				controls_state = 468
				controls_state = 465
				controls_state = 464
				controls_state = 466
				controls_state = 332
			}
			# Centr amer
			custom_trigger_tooltip = {
				tooltip = form_country_centr_amer_required_states_tt
				controls_state = 313
				controls_state = 311
				controls_state = 312
				controls_state = 314
				controls_state = 317
				controls_state = 316
				controls_state = 304
				controls_state = 385
			}
		}

		visible = {
			OR = {
				original_tag = KMX
				original_tag = MEX
				original_tag = USA
			}
			NOT = { has_global_flag = form_mexicana_flag }
		}

		complete_effect = {
			set_cosmetic_tag = USA_UNIFIED
			# Usa
			custom_effect_tooltip = form_country_usa_coring_states_tt
			hidden_effect = {
				every_state = {
					limit = {
						is_core_of = USA
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			# Mex
			custom_effect_tooltip = form_country_mex_coring_states_tt
			hidden_effect = {
				every_state = {
					limit = {
						is_core_of = MEX
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			# Canada
			custom_effect_tooltip = form_can_coring_states_tt
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = CAN
							is_core_of = NFL
						}
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			# centr_amer
			custom_effect_tooltip = form_centr_amer_coring_states_tt
			hidden_effect = {
				313 = { add_core_of = ROOT }
				311 = { add_core_of = ROOT }
				312 = { add_core_of = ROOT }
				314 = { add_core_of = ROOT }
				317 = { add_core_of = ROOT }
				316 = { add_core_of = ROOT }
				304 = { add_core_of = ROOT }
				385 = { add_core_of = ROOT }
			}
			
			hidden_effect = {
				news_event = { id = trworldnews.29 hours = 6 }
				set_global_flag = form_mexicana_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}



form_iberia_category = {
	
	form_iberia = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = SPR
				original_tag = SPA
				original_tag = POR
				original_tag = CAS
				original_tag = NAV
				original_tag = SEU
				original_tag = SPC
				original_tag = ANL
				original_tag = ARA
				original_tag = ASU
				original_tag = SNT
				original_tag = CAT
				original_tag = BAS
				original_tag = GLC
				original_tag = VLA
				original_tag = ADR
			}
			has_dlc = "Waking the Tiger"
		}

		available = {
			is_subject = no
			if = {
				limit = { original_tag = POR }
				# Spain
				custom_trigger_tooltip = {
					tooltip = form_country_spain_required_states_tt
					controls_state = 165
					controls_state = 166
					controls_state = 167
					controls_state = 177
					controls_state = 171
					controls_state = 174
					controls_state = 172
					controls_state = 176
					controls_state = 170
					controls_state = 41
					controls_state = 175
					controls_state = 169
					controls_state = 173
					controls_state = 168
					
					controls_state = 788
					controls_state = 789
					controls_state = 790
					controls_state = 792
					controls_state = 794
					controls_state = 982
					controls_state = 1040
					# North Africa
					controls_state = 290
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = form_country_spain_required_states_tt2
					165 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					166 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					167 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					177 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					171 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					174 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					172 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					176 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					170 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					41 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					175 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					169 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					173 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					168 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					
					788 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					789 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					790 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					792 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					794 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					982 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					1040 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
					# North Africa
					290 = { controller = { OR = { tag = ROOT is_subject_of = ROOT } } }
				}
			}
			# Port
			custom_trigger_tooltip = {
				tooltip = form_country_port_required_states_tt
				controls_state = 180
				controls_state = 181
				controls_state = 112
				controls_state = 179
				controls_state = 795
			}
		}

		visible = {
			OR = {
				original_tag = SPR
				original_tag = SPA
				original_tag = POR
				original_tag = CAS
				original_tag = NAV
				original_tag = SEU
				original_tag = SPC
				original_tag = ANL
				original_tag = ARA
				original_tag = ASU
				original_tag = SNT
				original_tag = CAT
				original_tag = BAS
				original_tag = GLC
				original_tag = VLA
				original_tag = ADR
			}
			NOT = { has_global_flag = form_iberia_flag }
		}

		complete_effect = {
			set_cosmetic_tag = IBR_UNIFIED
			# Spain
			custom_effect_tooltip = form_country_spain_coring_states_tt
			hidden_effect = {
				every_state = {
					limit = {
						NOT = { is_core_of = ROOT }
						OR = {
							state = 165
							state = 166
							state = 167
							state = 177
							state = 171
							state = 174
							state = 172
							state = 176
							state = 170
							state = 41
							state = 175
							state = 169
							state = 173
							state = 168

							state = 788
							state = 789
							state = 790
							state = 792
							state = 794
							state = 982
							state = 1040
							# North Africa
							state = 290
							# Port
							state = 180
							state = 181
							state = 112
							state = 179
							state = 795
						}
					}
					add_core_of = ROOT
				}
			}
			custom_effect_tooltip = form_country_port_coring_states_tt
			hidden_effect = {
				news_event = { id = trworldnews.30 hours = 6 }
				set_global_flag = form_iberia_flag
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_middle_east_union_category = {
	
	form_middle_east_union = {

		icon = generic_form_nation

		allowed = {
			OR = {
				original_tag = TUR
				original_tag = TRK
				original_tag = PER
				original_tag = IRQ
				original_tag = SYR
			}
		}

		available = {
			is_subject = no
			49 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			341 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			if = {
				limit = {
					NOT = {
						original_tag = PER
						original_tag = IRQ
					}
				}
				controls_state = 945
				945 = {
					controller = {
						OR = {
							tag = ROOT
							is_subject_of = ROOT
						}
					}
				}
			}
			266 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			291 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			292 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			677 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}

		visible = {
			NOT = { has_global_flag = form_middle_east_union_flag }
			if = {
				limit = { original_tag = PER }
				has_completed_focus = PER_coup_of_peoples_party_iran
			}
			else_if = {
				limit = { original_tag = IRQ }
				has_completed_focus = IRQ_rebellion_of_communist_party
			}
			else_if = {
				limit = {
					has_focus_tree = nw_turkish_focus_new
				}
				OR = {
					has_government = trozkism
					has_completed_focus = TUR_proclaim_aggressive_anti_colonialism
				}
			}
			else_if = {
				limit = {
					has_focus_tree = nw_turkish_focus
				}
				OR = {
					has_government = trozkism
					has_completed_focus = TUR_proclaim_aggressive_anti_colonialism_2
				}
			}
		}

		complete_effect = {
			set_cosmetic_tag = TUR_ME_UNION
			add_stability = 0.05
			add_war_support = 0.05
			
			#Идеология
			every_other_country = {
				limit = { is_subject_of = ROOT }
				add_popularity = {
					ideology = var:ROOT.current_party_ideology_group
					popularity = 0.15
				}
				if = {
					limit = { NOT = { has_government = ROOT } }
					set_politics = {
						ruling_party = var:ROOT.current_party_ideology_group
					}
				}
			}
			set_global_flag = form_middle_east_union_flag

			#Тэги
			if = {
				limit = { PER = { is_subject_of = ROOT } }
				PER = { set_cosmetic_tag = TUR_ME_UNION_PER }
			}
			if = {
				limit = { TUR = { is_subject_of = ROOT } }
				TUR = { set_cosmetic_tag = TUR_ME_UNION_TUR }
			}
			if = {
				limit = { TRK = { is_subject_of = ROOT } }
				TRK = { set_cosmetic_tag = TUR_ME_UNION_TUR }
			}
			if = {
				limit = { IRQ = { is_subject_of = ROOT } }
				IRQ = { set_cosmetic_tag = TUR_ME_UNION_IRQ }
			}
			if = {
				limit = { SAU = { is_subject_of = ROOT } }
				SAU = { set_cosmetic_tag = TUR_ME_UNION_SAU }
			}
			if = {
				limit = { OMA = { is_subject_of = ROOT } }
				OMA = { set_cosmetic_tag = TUR_ME_UNION_OMA }
			}
			if = {
				limit = { YEM = { is_subject_of = ROOT } }
				YEM = { set_cosmetic_tag = TUR_ME_UNION_YEM }
			}
			if = {
				limit = { SYR = { is_subject_of = ROOT } }
				SYR = { set_cosmetic_tag = TUR_ME_UNION_SYR }
			}
			
			every_state = {
				limit = {
					NOT = { owner = { is_subject_of = ROOT } }
					OR = {
						is_core_of = PER
						is_core_of = TUR
						is_core_of = TRK
						is_core_of = IRQ
						is_core_of = SAU
						is_core_of = OMA
						is_core_of = YEM
						is_core_of = SYR
					}
					NOT = { is_core_of = ROOT }
				}
				add_core_of = ROOT
			}
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0.01
				NOT = {
					has_government = communism
					has_government = trozkism
				}
			}
		}
	}
}

form_gimalay_category = {
	
	form_gimalay_impire_union = {

		icon = generic_form_nation
		fire_only_once = yes

		allowed = {
			OR = {
				original_tag = NEP
				original_tag = SKM
				original_tag = TIB
				original_tag = BHU
			}
		}

		available = {
			is_subject = no
			controls_state = 833
			controls_state = 323
			controls_state = 1104
			controls_state = 324
			controls_state = 758
			controls_state = 757
			controls_state = 322
			controls_state = 434
			controls_state = 601
		}

		visible = {
			NOT = { has_global_flag = form_gimalay_impire_union_flag }
			OR = {
				original_tag = NEP
				original_tag = SKM
				original_tag = TIB
				original_tag = BHU
			}
		}

		complete_effect = {
			set_global_flag = form_gimalay_impire_union_flag
			set_cosmetic_tag = gimalay_confederation
			833 = { add_core_of = ROOT }
			323 = { add_core_of = ROOT }
			1104 = { add_core_of = ROOT }
			324 = { add_core_of = ROOT }
			758 = { add_core_of = ROOT }
			757 = { add_core_of = ROOT }
			322 = { add_core_of = ROOT }
			434 = { add_core_of = ROOT }
			601 = { add_core_of = ROOT }
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_antillean_confederation_category = {
	
	form_antillean_confederation = {

		icon = generic_form_nation
		fire_only_once = yes

		allowed = {
			OR = {
				original_tag = CUB
				original_tag = DOM
				original_tag = HAI
				original_tag = PUE
			}
		}

		available = {
			is_subject = no
			count_triggers = {
				amount = 3
				custom_trigger_tooltip = {
					tooltip = required_cub_states_tt
					controls_state = 864
					controls_state = 315
				}
				custom_trigger_tooltip = {
					tooltip = required_hai_states_tt
					controls_state = 318
					controls_state = 869
				}
				custom_trigger_tooltip = {
					tooltip = required_dom_states_tt
					controls_state = 870
					controls_state = 319
				}
				controls_state = 686
			}
		}

		visible = {
			NOT = { has_global_flag = form_antillean_confederation_flag }
			OR = {
				original_tag = CUB
				original_tag = DOM
				original_tag = HAI
				original_tag = PUE
			}
		}

		complete_effect = {
			set_global_flag = form_antillean_confederation_flag
			set_cosmetic_tag = antillean_confederation
			864 = { add_core_of = ROOT }
			315 = { add_core_of = ROOT }
			1139 = { add_core_of = ROOT }
			318 = { add_core_of = ROOT }
			869 = { add_core_of = ROOT }
			870 = { add_core_of = ROOT }
			319 = { add_core_of = ROOT }
			686 = { add_core_of = ROOT }
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	
	form_expand_antillean_confederation = {

		icon = generic_form_nation
		fire_only_once = yes

		allowed = {
			OR = {
				original_tag = CUB
				original_tag = DOM
				original_tag = HAI
				original_tag = PUE
			}
		}

		available = {
			is_subject = no
			custom_trigger_tooltip = {
				tooltip = required_antillean_confederation_tt
				has_cosmetic_tag = antillean_confederation
			}
			controls_state = 689
			controls_state = 690
			controls_state = 693
			controls_state = 1146
			controls_state = 1142
			controls_state = 934
			controls_state = 308
			controls_state = 694
			controls_state = 692
			controls_state = 1144
			controls_state = 691
		}

		visible = {
			OR = {
				original_tag = CUB
				original_tag = DOM
				original_tag = HAI
				original_tag = PUE
			}
		}

		complete_effect = {
			689 = { add_core_of = ROOT }
			690 = { add_core_of = ROOT }
			693 = { add_core_of = ROOT }
			1146 = { add_core_of = ROOT }
			1142 = { add_core_of = ROOT }
			934 = { add_core_of = ROOT }
			308 = { add_core_of = ROOT }
			694 = { add_core_of = ROOT }
			692 = { add_core_of = ROOT }
			1144 = { add_core_of = ROOT }
			691 = { add_core_of = ROOT }
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

form_tibetan_empire_category = {
	
	form_tibetan_empire = {

		icon = generic_form_nation
		fire_only_once = yes

		allowed = {
			original_tag = TIB
		}

		available = {
			is_subject = no
			#BHU
			controls_state = 324
			#NEP
			controls_state = 323
			controls_state = 833
			#SKM
			controls_state = 1104
			#TNG
			controls_state = 1046
			controls_state = 1120
			controls_state = 287
			controls_state = 759
			#XSM
			controls_state = 1124
			controls_state = 1126
			controls_state = 283
			controls_state = 604
			controls_state = 754
			controls_state = 755
			controls_state = 756
		}

		visible = {
			original_tag = TIB
		}

		complete_effect = {
			set_cosmetic_tag = TIB_EMPIRE
			324 = { add_core_of = ROOT }
			323 = { add_core_of = ROOT }
			833 = { add_core_of = ROOT }
			1104 = { add_core_of = ROOT }
			1046 = { add_core_of = ROOT }
			1120 = { add_core_of = ROOT }
			287 = { add_core_of = ROOT }
			759 = { add_core_of = ROOT }
			1124 = { add_core_of = ROOT }
			1126 = { add_core_of = ROOT }
			283 = { add_core_of = ROOT }
			604 = { add_core_of = ROOT }
			754 = { add_core_of = ROOT }
			755 = { add_core_of = ROOT }
			756 = { add_core_of = ROOT }
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}


form_magrib_category = {
    form_magrib = {

		icon = generic_form_nation
		fire_only_once = yes
		allowed = {
			OR = {			
				original_tag = MOR
				original_tag = ALG
				original_tag = TUN
				original_tag = WES
				original_tag = LBA
				original_tag = MRT
			}
		}
		
        available = {
		    is_subject = no
		    custom_trigger_tooltip = {
				tooltip = form_magrib_lba_tt
				controls_state = 448
				controls_state = 661
				controls_state = 449
				controls_state = 662
				controls_state = 450
				controls_state = 451
				controls_state = 663
			}
		    custom_trigger_tooltip = {
				tooltip = form_magrib_alg_tt
				controls_state = 1067
				controls_state = 460
				controls_state = 513
				controls_state = 459
				
			}
			
		    custom_trigger_tooltip = {
				tooltip = form_magrib_mor_tt
				controls_state = 290
				controls_state = 461
				controls_state = 806
				controls_state = 462
				controls_state = 1015
				controls_state = 461
				controls_state = 462
			}
			
			custom_trigger_tooltip = {
				tooltip = form_magrib_tun_tt
				controls_state = 458
				controls_state = 665
				
			}
			
			custom_trigger_tooltip = {
				tooltip = form_magrib_wes_tt
				controls_state = 669
				
			}
			
			custom_trigger_tooltip = {
				tooltip = form_magrib_mrt_tt
				controls_state = 1068
				controls_state = 557
				
			}
		}
		
		visible = {
			NOT = { has_global_flag = form_maghreb_flag }
			OR = {			
				original_tag = MOR
				original_tag = ALG
				original_tag = TUN
				original_tag = WES
				original_tag = LBA
				original_tag = MRT
			}
		}
		
		complete_effect = {
		    set_global_flag = form_maghreb_flag
		    set_cosmetic_tag = MAGHREB
		    custom_effect_tooltip = form_magrib_lba_coring_states_tt
		    custom_effect_tooltip = form_magrib_alg_coring_states_tt
		    custom_effect_tooltip = form_magrib_mor_coring_states_tt
		    custom_effect_tooltip = form_magrib_tun_coring_states_tt
		    custom_effect_tooltip = form_magrib_wes_coring_states_tt
		    custom_effect_tooltip = form_magrib_mrt_coring_states_tt
		    hidden_effect = {
				448 = { add_core_of = ROOT }
				661 = { add_core_of = ROOT }
				449 = { add_core_of = ROOT }
				662 = { add_core_of = ROOT }
				450 = { add_core_of = ROOT }
				451 = { add_core_of = ROOT }
				663 = { add_core_of = ROOT }
				1067 = { add_core_of = ROOT }
				460 = { add_core_of = ROOT }
				513 = { add_core_of = ROOT }
				459 = { add_core_of = ROOT }
				290 = { add_core_of = ROOT }
				461 = { add_core_of = ROOT }
				806 = { add_core_of = ROOT }
				462 = { add_core_of = ROOT }
				1015 = { add_core_of = ROOT }
				461 = { add_core_of = ROOT }
				462 = { add_core_of = ROOT }
				458 = { add_core_of = ROOT }
				665 = { add_core_of = ROOT }
				669 = { add_core_of = ROOT }
				1068 = { add_core_of = ROOT }
				557 = { add_core_of = ROOT }
		    }
		}
	}
}

form_arav_category = {
	form_aravia = {
		icon = generic_form_nation
		fire_only_once = yes

		allowed = {
		
	    }
		
		visible = {
		    is_ai = yes
		    NOT = {
			    has_country_flag = form_arabian_peninsula_flag
		    }
		}
		
		available = {
		    controls_state = 938
		    controls_state = 960
		    controls_state = 679
		    controls_state = 292
		    controls_state = 1115
		    controls_state = 1073
		    controls_state = 769
		    controls_state = 797
		    controls_state = 991
		    controls_state = 1116
		    controls_state = 851
		    controls_state = 959
		}
		
		complete_effect = {
		    set_country_flag = form_arabian_peninsula_flag
		    938 = { add_core_of = ROOT }
		    960 = { add_core_of = ROOT }
		    679 = { add_core_of = ROOT }
		    292 = { add_core_of = ROOT }
		    1115 = { add_core_of = ROOT }
		    1073 = { add_core_of = ROOT }
		    769 = { add_core_of = ROOT }
		    797 = { add_core_of = ROOT }
		    911 = { add_core_of = ROOT }
		    1116 = { add_core_of = ROOT }
		    851 = { add_core_of = ROOT }
		    959 = { add_core_of = ROOT }
		    if = {
		   		limit = { original_tag = YEM has_cosmetic_tag = YEM_WAS}
		    	set_cosmetic_tag = YEM_WAS_ARA
		    }
		    else_if = {
		   	    limit = { original_tag = YEM }
				if = {
			 		limit = { has_government = monarchy }
			 		custom_effect_tooltip = YEM_monarchy_arav_form_tt
			 		hidden_effect = {
			 			set_party_name = { 
							ideology = monarchy
							long_name = YEM_monarchy_arav_long
							name = YEM_monarchy_arav
			 			}
			 		}
				}
				drop_cosmetic_tag = yes
				set_cosmetic_tag = YEM_ARA
		    }
		    else_if = {
				limit = { original_tag = OMA }
				drop_cosmetic_tag = yes
				set_cosmetic_tag = OMA_ARA
		    }
		    else_if = {
				limit = { original_tag = IOM }
				drop_cosmetic_tag = yes
				set_cosmetic_tag = IOM_ARA
		    }
		    else = {
		        drop_cosmetic_tag = yes
		        set_cosmetic_tag = OMA_ARA
		    }
		}
	
	
		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	
	domination_aravia = {

		icon = generic_form_nation

		allowed = {
			
	    }
		
		visible = {
		    NOT = {
			    has_country_flag = form_arabian_peninsula_flag
		    }
		    is_ai = no
		}
		
		available = {
		   is_subject = no
		   if = {
		        limit = { 
		            OR = { 
					    original_tag = OMA 
					    original_tag = IOM
					} 
				}
				custom_trigger_tooltip = {
					tooltip = domination_aravia_24_tt
					num_of_controlled_states > 23
					controls_state = 938
					controls_state = 960
					controls_state = 679
					controls_state = 292
				    controls_state = 1115
				    controls_state = 1073
				    controls_state = 769
				    controls_state = 797
				    controls_state = 991
				    controls_state = 1116
				    controls_state = 851
				    controls_state = 959
		        }
		   }
		   else = {
				custom_trigger_tooltip = {
					tooltip = domination_aravia_22_tt
					num_of_controlled_states > 21
					controls_state = 938
					controls_state = 960
					controls_state = 679
					controls_state = 292
				    controls_state = 1115
				    controls_state = 1073
				    controls_state = 769
				    controls_state = 797
				    controls_state = 991
				    controls_state = 1116
				    controls_state = 851
				    controls_state = 959
		        }
		    }
		}
		
		cost = 30
		
		complete_effect = {
		    set_country_flag = form_arabian_peninsula_flag
		    custom_effect_tooltip = form_aravian_coring
		    hidden_effect = {
		        938 = { add_core_of = ROOT }
		        960 = { add_core_of = ROOT }
		        679 = { add_core_of = ROOT }
		        292 = { add_core_of = ROOT }
		        1115 = { add_core_of = ROOT }
		        1073 = { add_core_of = ROOT }
		        769 = { add_core_of = ROOT }
		        797 = { add_core_of = ROOT }
		        911 = { add_core_of = ROOT }
		        1116 = { add_core_of = ROOT }
		        851 = { add_core_of = ROOT }
		        959 = { add_core_of = ROOT }
		    }
		    if = {
		        limit = {original_tag = YEM has_cosmetic_tag = YEM_WAS NOT = {has_cosmetic_tag = YEM_caliphate}}
		        set_cosmetic_tag = YEM_WAS_ARA
		    }
		    else_if = {
		        limit = {
				    original_tag = YEM 
					NOT = {
					    has_cosmetic_tag = YEM_caliphate
					}
				}
		        if = {
				    limit = {has_government = monarchy}
				    custom_effect_tooltip = YEM_monarchy_arav_form_tt
				    hidden_effect = {
					    set_party_name = { 
					        ideology = monarchy
					        long_name = YEM_monarchy_arav_long
					        name = YEM_monarchy_arav
				        }
				    }
			    }
			    drop_cosmetic_tag = yes
			    set_cosmetic_tag = YEM_ARA
		    }
		    else_if = {
			    limit = { original_tag = OMA }
			    drop_cosmetic_tag = yes
				set_cosmetic_tag = OMA_ARA
		    }
		    else_if = {
			    limit = { original_tag = IOM }
			    drop_cosmetic_tag = yes
			    set_cosmetic_tag = IOM_ARA
		    }
		    else = {
			    drop_cosmetic_tag = yes
			    set_cosmetic_tag = OMA_ARA
		    }
		}
	
        ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
    }
}