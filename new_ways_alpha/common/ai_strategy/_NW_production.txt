# Written by Henrik "Groogy" Hansson
# Modified by Daniel "Da9L" Sjöberg
# Modified by DRAFT

# befriend
# conquer
# antagonize
# build_ship
# build_army
# unit_ratio
# build_building
# research_tech
# garrison
# protect
# influence
# contain
# area_priority

# Example of strategy for intelligence agency
#example_strategy = {
#
#	enable = {
#		original_tag = FRA
#	}
#
#	ai_strategy = {
#		type = intelligence_agency_usable_factories
#		# no need of id for this one
#		value = 10
#	}
#
#	ai_strategy = {
#		type = intelligence_agency_branch_desire_factor
#		id = branch_defense
#		value = -50    # -50% on the AI weight
#	}
#}


# example unit buffer strategy. this strategy will make ai buffer/garrison some units in a target area  which can be used in orders that is in target areas
# 
# ai_strategy = {
# 	type = put_unit_buffers
# 	
#	# ratio of total armeis in country to be buffered
# 	ratio = 0.4
#
#	# you can specify an order id. ratio of same orders ids will be share same ratio
# 	order_id = 2
# 	
# 	# states to put garrison orders (if no state is friendly, strat is invalid)
# 	states = { 
# 		125
# 		126
# 		127
# 		128
# 		129
# 		338
# 		123
# 		122 
# 	}
# 	
#	# ai areas that the orders will use these buffers in
# 	area = europe
# 	area = asia
# 	
# 	# by default if you have orders in target areas, the buffer will request less units. 
#	# you can override this to disable the feature
# 	subtract_invasions_from_need = yes
# 	subtract_fronts_from_need = yes
# }


#used for controlling invasion or regular fronts
#ai_strategy = {
# 	type = front_control
#
#	#you can define a target in following ways. you can define more than one
#
#	original_tag = GER 				# target against a specific country
#	state = 42 				# target on a state
#	strategic_region = 65	# target on a strategic region
#	area = europe			# target on a specific ai area
#	country_trigger = { always = no } 	# a trigger to check agaisnt a specific country. scope is enemy country from scope is our country
#	state_trigger = { always = no } 	# a trigger to check agaisnt a state. scope is state. from scope is enemy country from.from scope is our country
#
#	ratio = 0.0 # the strategy is enabled only if ratio of the front covered by this strat's targets greater than this ratio
#
#	priority = 0 # default 0, higher prio strats will override lower
#	ordertype = front # front or invasion. if set this strategy will only apply to that specific order type
#	execution_type = careful # one of careful balanced rush rush_weak. if set will override the execution type of front (only for front orders)
#	execute_order = yes # yes or no. if set will override execute or not decision of front
#	manual_attack = yes # default yes. if no ai will not do manual pokes at enemy (only for front orders)
#}

#used for increasing/decreasing unit requests for invasions or fronts
#ai_strategy = {
#	# use one of them
# 	type = front_unit_request
# 	type = invasion_unit_request
#
#	#invasions will check invasion target, fronts will check provinces at front
#
#	original_tag = GER 				# province of a specific country
#	state = 42 				# province on a state
#	strategic_region = 65	# province on a strategic region
#	area = europe			# province on a specific ai area
#	country_trigger = { always = no } 	# a trigger to check agaisnt a specific country. scope is enemy country from scope is our country
#	state_trigger = { always = no } 	# a trigger to check agaisnt a state. scope is state. from scope is enemy country from.from scope is our country
#
#	value = 40				# will be added as a factor over regular requests
#}

# makes ai do an operation 
# ai_strategy = {
# 	type = operative_operation
# 	operation = operation_id
# 	value = 900 # score compared to other operations & missions
# 	operation_target = GER # target
#	state = 1 # if specified ai will prefer this states for targeted operations assuming they are valid target
#	state = 2
#	region = 1 # if specified ai will prefer this regions for targeted operations assuming they are valid
#	region = 2
#	priority = 100 # ai will prefer state/region of the highest prio strategy
# }

# ai_strategy = {
# 	type = operative_mission
# 	mission = build_intel_network # mission token
# 	value = 800 # score compared to other operations & missions
# 	mission_target = GER # target
#	state = 1 # if specified ai will prefer this states for targeted operations assuming they are valid target
#	state = 2
#	priority = 100 # ai will prefer state of the highest prio strategy
# }


### СНАРЯГА ВСЕГДА ОБНОВЛЯЕТСЯ ПО ТЕХАМ

production_line_upgrades_no_tank = {
	enable = { always = yes }
	ai_strategy = { type = production_upgrade_desire_offset id = fighter_equipment_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = cv_fighter_equipment_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = CAS_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = nav_bomber_equipment_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = tac_bomber_equipment_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_plane_fighter_airframe_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = strat_bomber_equipment_2	value = 200 }
}
production_line_upgrades_tank_no_nsb = {
	allowed = { NOT = { has_dlc = "No Step Back" } }
	enable = { always = yes }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_equipment_2				value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_artillery_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_destroyer_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_aa_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_aa_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_flame_equipment_2		value = 200 }

	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_artillery_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_destroyer_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_aa_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_flame_equipment_2		value = 200 }

	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_equipment_2				value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_artillery_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_destroyer_equipment_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_aa_equipment_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_flame_equipment_2		value = 200 }
}
production_line_upgrades_tank_nsb = {
	allowed = { has_dlc = "No Step Back" }
	enable = { always = yes }
	
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_chassis_2				value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_artillery_chassis_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_destroyer_chassis_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_aa_chassis_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_aa_chassis_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_flame_chassis_2			value = 200 }

	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_chassis_2				value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_artillery_chassis_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_destroyer_chassis_2	value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_aa_chassis_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_flame_chassis_2		value = 200 }

	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_chassis_2				value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_artillery_chassis_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_destroyer_chassis_2		value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_aa_chassis_2			value = 200 }
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_flame_chassis_2			value = 200 }
}


### ВОЗДЕРЖАНИЕ ОТ ОБНОВЛЕНИЯ ПРИ НИЗКОМ ЗАПАСЕ

infantry_eq_production_line_upgrade = {
	enable = { has_equipment = { infantry_equipment < 10000 } }
	abort_when_not_enabled = yes
	
	ai_strategy = { type = production_upgrade_desire_offset id = infantry_equipment_1	value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = infantry_equipment_2	value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = infantry_equipment_3	value = -100 }
}
artillery_eq_production_line_upgrade = {
	enable = { has_equipment = { artillery_equipment < 1000 } }
	abort_when_not_enabled = yes
	
	ai_strategy = { type = production_upgrade_desire_offset id = artillery_equipment_1 value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = artillery_equipment_2 value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = artillery_equipment_3 value = -100 }
}
mechanized_eq_production_line_upgrade = {
	enable = { has_equipment = { mechanized_equipment < 1000 } }
	abort_when_not_enabled = yes
	
	ai_strategy = { type = production_upgrade_desire_offset id = mechanized_equipment_1 value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = mechanized_equipment_2 value = -100 }
	ai_strategy = { type = production_upgrade_desire_offset id = mechanized_equipment_3 value = -100 }
}

### LIGHT TANK

lt_eq_production_line_upgrade = {
	enable = { has_equipment = { light_tank_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_chassis_3 value = -100 }
}
lta_eq_production_line_upgrade = {
	enable = { has_equipment = { light_tank_artillery_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_artillery_chassis_3 value = -100 }
}
ltd_eq_production_line_upgrade = {
	enable = { has_equipment = { light_tank_destroyer_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_destroyer_chassis_3 value = -100 }
}
ltaa_eq_production_line_upgrade = {
	enable = { has_equipment = { light_tank_aa_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_aa_chassis_3 value = -100 }
}
ltf_eq_production_line_upgrade = {
	enable = { has_equipment = { light_tank_flame_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = light_tank_flame_chassis_3 value = -100 }
}

### MEDIUM TANK

mt_eq_production_line_upgrade = {
	enable = { has_equipment = { medium_tank_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_chassis_3 value = -100 }
}
mta_eq_production_line_upgrade = {
	enable = { has_equipment = { medium_tank_artillery_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_artillery_chassis_3 value = -100 }
}
mtd_eq_production_line_upgrade = {
	enable = { has_equipment = { medium_tank_destroyer_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_destroyer_chassis_3 value = -100 }
}
mtaa_eq_production_line_upgrade = {
	enable = { has_equipment = { medium_tank_aa_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_aa_chassis_3 value = -100 }
}
mtf_eq_production_line_upgrade = {
	enable = { has_equipment = { medium_tank_flame_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = medium_tank_flame_chassis_3 value = -100 }
}

### HEAVY TANK

ht_eq_production_line_upgrade = {
	enable = { has_equipment = { heavy_tank_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_chassis_3 value = -100 }
}
hta_eq_production_line_upgrade = {
	enable = { has_equipment = { heavy_tank_artillery_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_artillery_chassis_3 value = -100 }
}
htd_eq_production_line_upgrade = {
	enable = { has_equipment = { heavy_tank_destroyer_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_destroyer_chassis_3 value = -100 }
}
htaa_eq_production_line_upgrade = {
	enable = { has_equipment = { heavy_tank_aa_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_aa_chassis_3 value = -100 }
}
htf_eq_production_line_upgrade = {
	enable = { has_equipment = { heavy_tank_flame_chassis < 1000 } }
	abort_when_not_enabled = yes
	ai_strategy = { type = production_upgrade_desire_offset id = heavy_tank_flame_chassis_3 value = -100 }
}



### ОБЩИЕ СЛУЧАИ

default_railway_gun_management = {
	allowed = { has_dlc = "No Step Back" }
	enable = {
		num_divisions > 150
		is_major = yes
	}
	abort = {
		num_divisions < 120
	}

	ai_strategy = { # This will add the specified value to the RAILWAY_GUN_PRODUCTION_BASE_DIVISIONS_RATIO_PERCENT define and use that as the desired railway guns / divisions ratio (in %)
		type = railway_gun_divisions_ratio
		value = 4
	}
}
floating_harbors_production = {
	enable = {
		num_of_naval_factories > 25
		num_of_military_factories > 40
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = unit_ratio id = floating_harbor value = 10 }
}


### ЭКОНОМИМ РЕСУРСЫ

stop_infantry_production = {
	enable = {
		has_equipment = { infantry_equipment > 200000 } 
	}
	abort = {
		has_equipment = { infantry_equipment < 100000 }
	}
	ai_strategy = { type = equipment_production_factor id = infantry					value = -100 }
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment	value = -1000 }
}

reduce_infantry_production = {
	enable = {
		has_army_manpower = { size < 800000 } 
		has_equipment = { infantry_equipment > 60000 } 
	}
	abort = {
		NOT = {
			AND = {
				has_army_manpower = { size < 800000 } 
				has_equipment = { infantry_equipment > 50000 } 
			} 
		} 
	}
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment	value = -200 }
	ai_strategy = { type = equipment_variant_production_factor id = artillery_equipment value = 50 }
	ai_strategy = { type = equipment_variant_production_factor id = anti_tank_equipment value = 50 }
	ai_strategy = { type = equipment_production_min_factories id = infantry				value = -100 }
}
reduce_infantry_production_2 = {
	enable = {
		NOT = { has_army_manpower = { size < 800000 } }
		has_equipment = { infantry_equipment > 75000 } 
	}
	abort = {
		NOT = {
			AND = {
				NOT = { has_army_manpower = { size < 800000 }  }
				has_equipment = { infantry_equipment > 50000 } 
			} 
		} 
	}
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment value = -100 }
}


## АРТА
stop_artillery_production = {
	enable = {
		has_equipment = { artillery_equipment > 50000 } 
	}
	abort = {
		has_equipment = { artillery_equipment < 25000 }
	}
	ai_strategy = { type = equipment_production_factor id = artillery					value = -100 }
	ai_strategy = { type = equipment_variant_production_factor id = artillery_equipment value = -1000 }
}

reduce_artillery_production = {
	enable = {
		has_equipment = { artillery_equipment > 10000 } 
		has_equipment = { infantry_equipment < 1000 }
	}
	abort = {
		NOT = {
			AND = {
				has_equipment = { artillery_equipment > 2500 } 
				has_equipment = { infantry_equipment < 1000 } 
			} 
		} 
	}
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment	value = 50 }
	ai_strategy = { type = equipment_variant_production_factor id = artillery_equipment	value = -99 }
	ai_strategy = { type = equipment_production_min_factories  id = artillery			value = -10 }
}
reduce_artillery_production_2 = { # вольфрам
	enable = {
		has_equipment = { artillery_equipment > 20000 } 
		num_of_military_factories > 75
	}
	abort = {
		NOT = {
			AND = {
				has_equipment = { artillery_equipment > 10000 } 
				num_of_military_factories > 75
			} 
		} 
	}
	ai_strategy = { type = equipment_variant_production_factor id = artillery_equipment value = -1000 }
}

minimum_artillery_production = {
	enable = {
		num_of_military_factories < 2
	}
	abort = {
		num_of_military_factories > 1
	}
	ai_strategy = { type = equipment_production_factor	id = artillery	value = -100 }
}
default_artillery_production = {
	enable = {
		num_of_military_factories > 9
	}
	abort = {
		OR = {
			num_of_military_factories < 10
			num_of_military_factories > 19
		}
	}
	ai_strategy = { type = equipment_production_factor	id = artillery	value = 15 }
}
major_artillery_production = {
	enable = {
		num_of_military_factories > 19
	}
	abort = {
		num_of_military_factories < 20
	}
	ai_strategy = { type = equipment_production_factor	id = artillery	value = 25 }
}


reduce_motorized_production = {
	enable = {
		has_equipment = { motorized_equipment > 2500 }
	}
	abort = {
		has_equipment = { motorized_equipment < 500 }
	}
	ai_strategy = { type = equipment_production_factor id = motorized	value = -125 }
	ai_strategy = { type = equipment_production_factor id = infantry	value = 50 }
}
reduce_motorized_production_2 = {
	enable = {
		has_equipment = { motorized_equipment > 10000 }
	}
	abort = {
		has_equipment = { motorized_equipment < 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = motorized	value = -75 }
	ai_strategy = { type = equipment_production_factor id = infantry	value = 50 }
}


reduce_support_production = {
	enable = {
		has_equipment = { support_equipment > 2500 }
	}
	abort = {
		has_equipment = { support_equipment < 500 }
	}
	ai_strategy = { type = equipment_production_factor id = support		value = -25 }
	ai_strategy = { type = equipment_production_factor id = infantry	value = 5 }
}
reduce_support_production_2 = {
	enable = {
		has_equipment = { support_equipment > 5000 }
	}
	abort = {
		has_equipment = { support_equipment < 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = support		value = -50 }
	ai_strategy = { type = equipment_production_factor id = infantry	value = 25 }
}
support_equipment_assignment = {
	enable = {	
		has_equipment = { support_equipment < 100 }
		num_of_military_factories > 19
	}
	abort = {
		OR = { 
			num_of_military_factories < 20
			has_equipment = { support_equipment > 1000 }
		}
	}
	ai_strategy = { type = equipment_production_factor id = support		value = 15 }
}


reduce_anti_air_production = {
	enable = {
		has_equipment = { anti_air_equipment > 2000 }
	}
	abort = {
		has_equipment = { anti_air_equipment < 500 }
	}
	ai_strategy = { type = equipment_production_factor id = anti_air	value = -25 }
}
reduce_anti_air_production_2 = {
	enable = {
		has_equipment = { anti_air_equipment > 5000 }
	}
	abort = {
		has_equipment = { anti_air_equipment < 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = anti_air	value = -200 }
}

reduce_anti_tank_production = {
	enable = {
		has_equipment = { anti_tank_equipment > 2000 }
	}
	abort = {
		has_equipment = { anti_tank_equipment < 500 }
	}
	ai_strategy = { type = equipment_production_factor id = anti_tank	value = -25 }
}
reduce_anti_tank_production_2 = {
	enable = {
		num_of_military_factories < 50
		has_equipment = { anti_tank_equipment > 100 }
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_factor id = anti_tank	value = -200 }
}
reduce_anti_tank_production_3 = {
	enable = {
		has_equipment = { anti_tank_equipment > 5000 }
	}
	abort = {
		has_equipment = { anti_tank_equipment < 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = anti_tank	value = -75 }
}



######################################
##	МИНИМАЛЬНЫЕ ФАБРИКИ
######################################

support_equipment_assignment = {
	enable = {
		has_equipment = { support_equipment < 100 }
	}
	abort = {
		has_equipment = { support_equipment > 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = support value = 15 }
}


artillery_factory_assignment_1 = {
	enable = { num_of_military_factories > 5 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories id = artillery	value = 2 }
}
artillery_factory_assignment_2 = {
	enable = { num_of_military_factories > 15 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories id = artillery	value = 3 }
}


motorized_factory_assignment = {
	enable = { 
		always = yes
	}
	ai_strategy = { type = equipment_production_min_factories id = motorized	value = 1 }
}


# anti air
anti_air_factory_assignment_0 = {
	enable = { num_of_military_factories > 0 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_1 = {
	enable = { num_of_military_factories > 20 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_2 = {
	enable = { num_of_military_factories > 40 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_3 = {
	enable = { num_of_military_factories > 60 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_4 = {
	enable = { num_of_military_factories > 80 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_5 = {
	enable = { num_of_military_factories > 100 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_6 = {
	enable = { num_of_military_factories > 120 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_7 = {
	enable = { num_of_military_factories > 140 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_8 = {
	enable = { num_of_military_factories > 160 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_9 = {
	enable = { num_of_military_factories > 180 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}
anti_air_factory_assignment_10 = {
	enable = { num_of_military_factories > 200 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_air	value = 1 }
}

# anti tank
anti_tank_factory_assignment_0 = {
	enable = { num_of_military_factories > 0 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_tank	value = 1 }
}
anti_tank_factory_assignment_1 = {
	enable = { num_of_military_factories > 20 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_tank	value = 1 }
}
anti_tank_factory_assignment_2 = {
	enable = { num_of_military_factories > 40 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_tank	value = 1 }
}
anti_tank_factory_assignment_3 = {
	enable = { num_of_military_factories > 60 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_tank	value = 1 }
}
anti_tank_factory_assignment_4 = {
	enable = { num_of_military_factories > 80 }
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_min_factories	id = anti_tank	value = 1 }
}




######################################
#	ПРОИЗВОДСТВО ТАНКОВ
######################################

equipment_production_armor = {
	enable = {
		num_of_military_factories > 50
		OR = {
			has_design_based_on = light_tank_chassis
			has_design_based_on = medium_tank_chassis
			has_design_based_on = heavy_tank_chassis
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_production_factor			id = armor	value = 35 }
	ai_strategy = { type = equipment_production_min_factories	id = armor	value = 5 }
}

equipment_production_light_armor = {
	enable = {
		NOT = {
			has_design_based_on = light_tank_chassis
			has_template_containing_unit = light_tank_recon
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis	value = -50 }
}

equipment_production_light_armor_2 = {
	enable = {
		OR = {
			has_design_based_on = light_tank_chassis
			has_template_containing_unit = light_tank_recon
		}
		has_equipment = { infantry_equipment > 10000 }
		has_equipment = { light_tank_chassis < 5000 }
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis	value = 40 }
}

equipment_production_light_armor_3 = {
	enable = {
		has_equipment = { light_tank_chassis > 100 }
		NOT = {
			has_design_based_on = light_tank_chassis
			has_template_containing_unit = light_tank_recon
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis value = -200 }
}


### ОГНЕТАНКИ

fire_tank_no_nsb = {
	allowed = {
		NOT = { has_dlc = "No Step Back" }
	}
	enable = {
		OR = {
			has_tech = basic_light_fire
			has_tech = improved_light_fire
			has_tech = advanced_light_fire
	
			has_tech = basic_medium_fire
			has_tech = improved_medium_fire
			has_tech = advanced_medium_fire
			
			has_tech = basic_heavy_fire
			has_tech = improved_heavy_fire
			has_tech = advanced_heavy_fire
		}
		ai_wants_divisions > 5
		
		any_enemy_country = {
			OR = {
				ROOT = {
					estimated_intel_max_armor = {
						tag = PREV
						value > 32
					}
				}
				has_template_majority_unit = infantry
			}
		}
	}
	abort = {
		ai_wants_divisions < 6
	}
	ai_strategy = { type = role_ratio	id = fire_tank	value = 10 }
}

fire_tank_nsb = {
	allowed = {
		has_dlc = "No Step Back"
	}
	enable = {
		has_tech = tech_flamethrower_squad
		OR = {
			has_tech = basic_light_tank_chassis
			has_tech = improved_light_tank_chassis
			has_tech = advanced_light_tank_chassis
	
			has_tech = basic_medium_tank_chassis
			has_tech = improved_medium_tank_chassis
			has_tech = advanced_medium_tank_chassis
			
			has_tech = basic_heavy_tank_chassis
			has_tech = improved_heavy_tank_chassis
			has_tech = advanced_heavy_tank_chassis
		}
		ai_wants_divisions > 5
		
		any_enemy_country = {
			OR = {
				ROOT = {
					estimated_intel_max_armor = {
						tag = PREV
						value > 32
					}
				}
				has_template_majority_unit = infantry
			}
		}
	}
	abort = {
		ai_wants_divisions < 6
	}
	ai_strategy = { type = role_ratio	id = fire_tank	value = 10 }
}


### LAND CRUISER

land_cruiser_default_production = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		OR = {
			has_design_based_on = land_cruiser_tank_chassis
			has_template_containing_unit = land_cruiser_armor
			has_tech = land_cruiser_complete_tech
		}
		num_of_military_factories > 50
	}
	abort = {
		num_of_military_factories < 51
	}
	ai_strategy = { type = equipment_variant_production_factor	id = land_cruiser_tank_chassis	value = 1000 }
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis			value = -100 }
	ai_strategy = { type = equipment_variant_production_factor	id = medium_tank_chassis		value = -100 }
	ai_strategy = { type = equipment_variant_production_factor	id = heavy_tank_chassis			value = -100 }
	ai_strategy = { type = equipment_production_factor			id = armor						value = 500 }
	ai_strategy = { type = equipment_production_min_factories	id = armor						value = 20 }
	ai_strategy = { type = template_prio						id = land_cruiser_armor			value = 500 }
	ai_strategy = { type = role_ratio							id = land_cruiser_armor_role	value = 10 }
	ai_strategy = { type = build_army							id = land_cruiser_armor_role	value = 10 }
}
land_cruiser_artillery_default_production = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		OR = {
			has_design_based_on = land_cruiser_tank_artillery_chassis
			has_tech = land_cruiser_complete_tech
		}
		OR = {
			NOT = { has_template_containing_unit = land_cruiser_armor }
			has_equipment = { land_cruiser_tank_chassis > 10 }
		}
		num_of_military_factories > 50
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = equipment_variant_production_factor	id = land_cruiser_tank_artillery_chassis	value = 1000 }
	ai_strategy = { type = equipment_variant_production_factor	id = land_cruiser_tank_chassis				value = -500 }
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis						value = -100 }
	ai_strategy = { type = equipment_variant_production_factor	id = medium_tank_chassis					value = -100 }
	ai_strategy = { type = equipment_variant_production_factor	id = heavy_tank_chassis						value = -100 }
	ai_strategy = { type = equipment_production_factor			id = armor									value = 500 }
	ai_strategy = { type = equipment_production_min_factories	id = armor									value = 20 }
	ai_strategy = { type = template_prio						id = land_cruiser_sp_artillery_brigade		value = 500 }
	ai_strategy = { type = role_ratio							id = land_cruiser_artillery_armor_role		value = 10 }
	ai_strategy = { type = build_army							id = land_cruiser_artillery_armor_role		value = 10 }
}
#SOV_land_cruiser_artillery_default_production = {
#	allowed = {
#		original_tag = SOV
#	}
#	enable = {
#		has_design_based_on = land_cruiser_tank_chassis
#	}
#	abort = {
#		always = no
#	}
#	ai_strategy = { type = equipment_variant_production_factor	id = land_cruiser_tank_artillery_chassis	value = -5000 }
#	ai_strategy = { type = template_prio						id = land_cruiser_sp_artillery_brigade		value = -5000 }
#	ai_strategy = { type = role_ratio							id = land_cruiser_artillery_armor_role		value = -5000 }
#	ai_strategy = { type = build_army							id = land_cruiser_artillery_armor_role		value = -5000 }
#}

land_cruiser_build_army = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		has_design_based_on = land_cruiser_tank_chassis
		check_variable = { num_armies_with_type@land_cruiser_armor < 20 }	#тебе реально пора остановиться
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = build_army	id = land_cruiser_armor_role			value = 100 }
}
land_cruiser_artillery_build_army = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		has_design_based_on = land_cruiser_tank_artillery_chassis
		check_variable = { num_armies_with_type@land_cruiser_sp_artillery_brigade < 20 }	#тебе реально пора остановиться
	}
	abort_when_not_enabled = yes
	ai_strategy = { type = build_army	id = land_cruiser_artillery_armor_role	value = 100 }
}


### MILITARY AI ###

default_unit_production = {
	allowed = {
		NOT = {
			original_tag = GER original_tag = ENG original_tag = SOV original_tag = ITA original_tag = JAP original_tag = USA
			original_tag = POL original_tag = CHI
		}
	}
	enable = {
		always = yes
	}
	abort = {
		always = no
	}
	ai_strategy = {
		type = role_ratio
		id = armor
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = medium_armor_role
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = 80
	}
	ai_strategy = {
		type = role_ratio
		id = marine
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = mountaineer
		value = 0
	}
	ai_strategy = {
		type = role_ratio
		id = suppression
		value = 0
	}
	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = irregular_infantry
		value = 2
	}
	ai_strategy = {
		type = role_ratio
		id = militias
		value = 2
	}
}


DEFAULT_template_design = {
	allowed = {
		NOT = { original_tag = GER original_tag = ENG original_tag = SOV original_tag = ITA original_tag = JAP original_tag = USA original_tag = POL }
	}
	enable = {
		date < 1944.1.1
	}
	abort = {
		date > 1944.1.1
	}

	ai_strategy = {
		type = template_prio
		id = motorized
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = cavalry
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = light_armor
		value = 50
	}

	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = paratroopers
		value = -100
	}
	
	ai_strategy = {
		type = template_prio
		id = infantry
		value = 60
	}
}

LATE_template_design = {
	allowed = {
		NOT = { original_tag = GER original_tag = ENG original_tag = SOV original_tag = ITA original_tag = JAP original_tag = USA original_tag = POL }
	}
	enable = {
		OR = {
			date > 1944.1.1
			has_tech = main_battle_tank
			has_tech = main_battle_tank_chassis
		}	
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = template_prio
		id = mechanized
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = cavalry
		value = -100
	}

	ai_strategy = {
		type = template_prio
		id = light_armor
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = 20
	}

	ai_strategy = {
		type = template_prio
		id = modern_armor
		value = 50
	}

	ai_strategy = {
		type = template_prio
		id = paratroopers
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = infantry
		value = 10
	}
}

default_garrison_production = {
	allowed = {
		NOT = { 
			original_tag = GER 
			original_tag = SOV
			original_tag = USA
			original_tag = CHI
			original_tag = FRA
			original_tag = FRC
			original_tag = FRF
			original_tag = JAP
			original_tag = ENG
		}
	}
	enable = {
		ai_wants_divisions > 12 #Massively decreasing the amount of garrison and suppression the AI wants
		is_major = yes
	}
	abort = {
		ai_wants_divisions < 13 #Massively decreasing the amount of garrison and suppression the AI wants
		is_major = no
	}

	ai_strategy = {
		type = role_ratio
		id = garrison
		value = 5
	}
	
	# Old garrison system against resistance
	# ai_strategy = {
	# 	type = role_ratio
	# 	id = suppression
	# 	value = 2
	# }
}
less_garrison_production = {
	enable = {
		num_of_controlled_states < 5
	}
	abort = {
		num_of_controlled_states > 4
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = 5
	}
	ai_strategy = {
		type = role_ratio
		id = garrison
		value = -5
	}
}

default_marine_production = {
	enable = {
		has_tech = marines
		OR = {
			is_major = yes
			OR = {
				num_of_factories > 49
				original_tag = GER
				original_tag = FRA
				original_tag = FRC
				original_tag = FRF
				original_tag = ENG
				original_tag = RUS
				original_tag = SOV
				original_tag = JAP
				original_tag = USA
				original_tag = MEX
				original_tag = TUR
				original_tag = ARA
				original_tag = SPR
				original_tag = SPA
				has_country_flag = hbbrg_flag
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -2
	}
	ai_strategy = {
		type = role_ratio
		id = marine
		value = 2
	}
}

extra_marine_production = {
	enable = {
		has_tech = marines
		OR = {
			original_tag = CAN
			original_tag = USA
			original_tag = ENG
			original_tag = JAP
			original_tag = MEX
			original_tag = TUR
			original_tag = ARA
			original_tag = SPR
			original_tag = SPA
			has_country_flag = hbbrg_flag
			AND = {
				has_war = yes
				num_of_naval_factories > 10
				NOT = {
					any_enemy_country = {
						is_neighbor_of = ROOT
					}
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -3
	}
	ai_strategy = {
		type = role_ratio
		id = marine
		value = 3
	}
}

default_mountaineer_production = {
	enable = {
		has_tech = tech_mountaineers
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -3
	}
	ai_strategy = {
		type = role_ratio
		id = mountaineer
		value = 3
	}
}

more_mountaineer_focused_nation = {
	enable = {
		has_tech = tech_mountaineers
		OR = {
			original_tag = SWI
			original_tag = FIN
			original_tag = NOR
			original_tag = TIB
			original_tag = NEP
			original_tag = MON
			original_tag = CHL
			original_tag = MEX
			original_tag = TUR
			original_tag = PER
			original_tag = CHI
			original_tag = PRC
			original_tag = RAJ
			has_country_flag = hbbrg_flag
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = mountaineer
		value = 4
	}
	ai_strategy = {
		type = template_prio
		id = mountaineer
		value = 100
	}
}

more_cavalry_focused_nation = {
	allowed = { NOT = { original_tag = POL } }
	enable = {
		cavalry_role_prioritet = yes
	}
	abort = {
		check_variable = { num_armies_with_type@cavalry > 80 }	#тебе реально пора остановиться
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -30
	}
	ai_strategy = {
		type = role_ratio
		id = cavalry_role
		value = 60
	}
	ai_strategy = {
		type = template_prio
		id = cavalry
		value = 125
	}
}

extra_camelry_production = {
	enable = {
		has_tech = camelry
		any_enemy_country = {
			OR = {
				capital_scope = { is_on_continent = africa }
				capital_scope = { is_on_continent = middle_east }
			}
		}
	}
	abort = {
		check_variable = { num_armies_with_type@camelry > 80 }	#тебе реально пора остановиться
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -60
	}
	ai_strategy = {
		type = role_ratio
		id = cavalry_role
		value = 60
	}
	ai_strategy = {
		type = template_prio
		id = cavalry
		value = -125
	}
	ai_strategy = {
		type = template_prio
		id = camelry
		value = 125
	}
}

default_mobile_production = {
	enable = {
		has_tech = motorised_infantry
		num_of_military_factories > 10
		NOT = {
			original_tag = MON
			original_tag = TUR
			original_tag = SAU
			original_tag = PER
			original_tag = RAJ
		}
	}
	abort = {
		num_of_military_factories < 11
	}

	ai_strategy = {
		type = role_ratio
		id = cavalry_role
		value = -5
	}
	ai_strategy = {
		type = role_ratio
		id = mobile
		value = 5
	}
}

late_mobile_production = {
	enable = {
		OR = {
			has_tech = mechanised_infantry
			AND = {
				date > 1940.1.1
				has_tech = motorised_infantry
			}
		}
		OR = {
			num_of_military_factories < 11
			original_tag = MON
			original_tag = TUR
			original_tag = SAU
			original_tag = PER
			original_tag = RAJ
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = cavalry_role
		value = -10
	}
	ai_strategy = {
		type = role_ratio
		id = mobile
		value = 10
	}
}

limit_mobile_production = {
	enable = {
		has_tech = motorised_infantry
		num_of_military_factories > 10
		OR = {
			num_of_military_factories < 30
			oil < 20
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = mobile
		value = -6
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = 6
	}
}

more_mobile_production = {
	enable = {
		has_tech = motorised_infantry
		num_of_military_factories > 30
		oil > 30
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = mobile
		value = 6
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -6
	}
}

default_armored_production = {
	allowed = {
		NOT = { original_tag = GER }
	}
	enable = {
		OR = {
			has_tech = basic_light_tank
			has_tech = basic_light_tank_chassis
		}
		OR = {
			num_of_military_factories > 10
			ai_wants_divisions > 49
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = role_ratio
		id = armor
		value = 5
	}
}

higher_armored_production = {
	allowed = {
		NOT = { original_tag = GER }
	}
	enable = {
		OR = {
			has_tech = basic_light_tank
			has_tech = basic_light_tank_chassis
		}
		num_of_military_factories > 100
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = role_ratio
		id = armor
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = medium_armor_role
		value = 20
	}
}

more_armor_focused_nation = {
	enable = {
		OR = {
			has_tech = basic_light_tank
			has_tech = basic_light_tank_chassis
			has_tech = basic_medium_tank
			has_tech = basic_medium_tank_chassis
		}
		num_of_military_factories > 40
		OR = {
			original_tag = GER
			original_tag = SOV
			original_tag = FRA
			original_tag = FRC
			original_tag = FRF
			original_tag = ENG
			original_tag = USA
			original_tag = MEX
			original_tag = SPR
			original_tag = SPA
			original_tag = ARA
			has_country_flag = hbbrg_flag
		}
	}
	abort = {
		num_of_military_factories < 41
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -15
	}
	ai_strategy = {
		type = role_ratio
		id = armor
		value = 15
	}
	ai_strategy = {
		type = role_ratio
		id = medium_armor_role
		value = 20
	}
	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 20
	}
	ai_strategy = {
		type = template_prio
		id = light_armor
		value = 50
	}
	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = 100
	}
}

halt_light_armor_production_in_transitioning = {
	allowed = {
		NOT = { original_tag = GER }
	}
	enable = {
		has_template_majority_unit = medium_armor
		num_of_military_factories > 30
		OR = {
			has_equipment = { light_tank_chassis > 600 }
			date > 1939.1.1
		}
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_chassis
		value = -100
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_chassis
		value = 100
	}
}

super_boost_light_for_med_armor = {
	allowed = {
		NOT = { original_tag = GER }
	}
	enable = {
		OR = {
			has_tech = basic_medium_tank
			has_tech = basic_medium_tank_chassis
		}
		num_of_military_factories > 30
		NOT = { has_template_majority_unit = medium_armor }
	}
	abort = {
		OR = {
			has_template_majority_unit = medium_armor
			num_of_military_factories < 31
		}
	}

	ai_strategy = {
		type = template_prio
		id = light_armor
		value = -100
	}
	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = 150
	}
}

super_boost_medium_for_modern_armor = {
	allowed = {
		NOT = { original_tag = GER }
	}
	enable = {
		OR = {
			has_tech = main_battle_tank
			has_tech = main_battle_tank_chassis
		}
		num_of_military_factories > 30
		NOT = { has_template_majority_unit = modern_armor }
	}

	abort = {
		OR = {
			has_template_majority_unit = modern_armor
			num_of_military_factories < 31
		}
	}

	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = -100
	}
	ai_strategy = {
		type = template_prio
		id = modern_armor
		value = 150
	}
}

default_antitank_production = {
	enable = {
		num_of_military_factories > 10
		has_tech = interwar_antitank
		has_tech = tech_engineers
		OR = {
			any_enemy_country = {
				ROOT = { estimated_intel_max_armor = { tag = PREV value > 25 } }
			}
			any_neighbor_country = {
				NOT = {
					is_in_faction_with = ROOT
					is_subject_of = ROOT
					ROOT = { is_subject_of = PREV }
					has_war_with = ROOT
					OR = {
						AND = {
							has_government = democratic
							ROOT = { has_government = democratic }
						}
						AND = {
							has_government = communism
							ROOT = { has_government = communism }
						}
						AND = {
							has_government = fascism
							ROOT = { has_government = fascism }
						}
						AND = {
							has_government = neutrality
							ROOT = { has_government = neutrality }
						}
						AND = {
							has_government = trozkism
							ROOT = { has_government = trozkism }
						}
						AND = {
							has_government = monarchy
							ROOT = { has_government = monarchy }
						}
						AND = {
							has_government = anarchism
							ROOT = { has_government = anarchism }
						}
					}
				}
				ROOT = { estimated_intel_max_armor = { tag = PREV value > 25 } }
			}
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -3
	}
	ai_strategy = {
		type = role_ratio
		id = mobile
		value = -2
	}
	ai_strategy = {
		type = role_ratio
		id = motorized
		value = -2
	}
	ai_strategy = {
		type = role_ratio
		id = anti_armor
		value = 5
	}
}


stockpile_less_early_game = {
	enable = {
		date < 1938.1.1
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = -20
	}
}
default_stockpile_management = {
	enable = {
		num_divisions > 150
	}
	abort = {
		num_divisions < 130
	}
	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = 35 # double base stockpile #from 25 to 35
	}
}


extra_civil_war_production = {
	enable = {
		is_major = no
		num_of_military_factories < 25
		has_civil_war = yes
		has_equipment = { infantry_equipment < 25000 }
	}
	abort = { 
		NOT = {
			AND = {
				is_major = no
				num_of_military_factories < 25
				has_civil_war = yes
				has_equipment = { infantry_equipment < 50000 } 
			}
		}
	}
	ai_strategy = { type = equipment_production_min_factories id = infantry value = 15 }
	ai_strategy = { type = equipment_production_factor id = armor value = -200 }
	ai_strategy = { type = equipment_production_factor id = artillery value = -200 }
	ai_strategy = { type = equipment_variant_production_factor id = support_equipment value = -200 }
}

excess_equipment_production_1 = {
	enable = {
		has_equipment = { infantry_equipment > 20000 }
	}
	abort = {
		has_equipment = { infantry_equipment < 15000 }
	}
	ai_strategy = { type = equipment_production_factor id = infantry value = -50 }
	ai_strategy = { type = equipment_production_factor id = fighter value = 10 }
	ai_strategy = { type = equipment_production_factor id = motorized value = 20 }
	ai_strategy = { type = equipment_production_factor id = artillery value = 10 }
}

excess_equipment_production_2 = {
	enable = {
		has_equipment = { infantry_equipment > 50000 }
	}
	abort = {
		has_equipment = { infantry_equipment < 40000 }
	}
	ai_strategy = { type = equipment_production_factor id = infantry value = -50 }
	ai_strategy = { type = equipment_production_factor id = fighter value = 10 }
	ai_strategy = { type = equipment_production_factor id = motorized value = 20 }
	ai_strategy = { type = equipment_production_factor id = artillery value = 10 }
}

excess_artillery_production_1 = {
	enable = {
		has_equipment = { artillery_equipment > 15000 }
	}
	abort = {
		has_equipment = { artillery_equipment < 12500 }
	}
	ai_strategy = { type = equipment_production_factor id = artillery value = -25 }
}

excess_motorized_production_1 = {
	enable = {
		has_equipment = { motorized_equipment > 20000 }
	}
	abort = {
		has_equipment = { motorized_equipment < 19000 }
	}

	ai_strategy = { type = equipment_production_factor id = motorized value = -15 }
	ai_strategy = { type = equipment_production_factor id = infantry value = 5 }
	ai_strategy = { type = equipment_production_factor id = fighter value = 5 }
}

excess_motorized_production_2 = {
	enable = {
		has_equipment = { motorized_equipment > 30000 }
	}
	abort = {
		has_equipment = { motorized_equipment < 29000 }
	}

	ai_strategy = { type = equipment_production_factor id = motorized value = -40 }
	ai_strategy = { type = equipment_production_factor id = infantry value = 15 }
	ai_strategy = { type = equipment_production_factor id = armor value = 5 }
	ai_strategy = { type = equipment_production_factor id = anti_tank value = 5 }
	ai_strategy = { type = equipment_production_factor id = fighter value = 15 }
}


default_armored_car_production = {
	allowed = {
		has_dlc = "La Resistance"
	}
	enable = {
		num_of_military_factories > 9
	}
	abort = {
		OR = {
			num_of_military_factories < 10
			num_of_military_factories > 19
		}
	}

	ai_strategy = {
		type = equipment_production_factor
		id = motorized
		value = 10
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = armored_car_equipment
		value = 10
	}
}

major_armored_car_production = {
	allowed = {
		has_dlc = "La Resistance"
	}
	enable = {
		num_of_military_factories > 19
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = motorized
		value = 20
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = armored_car_equipment
		value = 20
	}
}

NW_more_motorized_focused_nation = {
	enable = {
		motorized_role_prioritet = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = motorized
		value = 15
	}
	ai_strategy = {
		type = equipment_production_factor
		id = motorized
		value = 15
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = motorized_equipment
		value = 15
	}
}

NW_more_armored_car_focused_nation = {
	allowed = {
		has_dlc = "La Resistance"
		OR = {
			original_tag = SOV
			original_tag = FRA
			original_tag = FRC
			original_tag = FRF
			original_tag = ITA
			original_tag = TUR
			original_tag = PER
			original_tag = IRQ
			original_tag = AFG
			original_tag = EGY
			original_tag = BPL
			original_tag = SAU
			original_tag = RAJ
			original_tag = ETH
		}
	}
	enable = {
		has_tech = armored_car1
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = armored_car
		value = 5
	}
}

NW_more_armored_car_focused_nation_2 = {
	allowed = {
		has_dlc = "La Resistance"
	}
	enable = {
		armored_car_role_prioritet = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = armored_car
		value = 15
	}
	ai_strategy = {
		type = equipment_production_factor
		id = motorized
		value = 15
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = armored_car_equipment
		value = 15
	}
}

reduce_armored_car_production = {
	enable = {
		has_equipment = { armored_car_equipment > 2500 }
	}
	abort = {
		has_equipment = { armored_car_equipment < 500 }
	}
	ai_strategy = { type = equipment_variant_production_factor id = armored_car_equipment	value = -75 }
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment		value = 5 }
}
reduce_armored_car_production_2 = {
	enable = {
		has_equipment = { armored_car_equipment > 10000 }
	}
	abort = {
		has_equipment = { armored_car_equipment < 1000 }
	}
	ai_strategy = { type = equipment_production_factor id = motorized	value = -25 }
}

default_rocket_production = {
	allowed = {
		NOT = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		OR = {
			has_tech = rocket_artillery
			has_tech = motorized_rocket_unit
		}
		num_of_military_factories > 14
	}
	abort = {
		OR = {
			num_of_military_factories < 15
			num_of_military_factories > 29
		}
	}

	ai_strategy = {
		type = equipment_production_factor
		id = rocket
		value = 10
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = motorized_rocket_equipment
		value = 5
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = rocket_artillery_equipment
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = rocket
		value = 5
	}
}

major_rocket_production = {
	allowed = {
		NOT = {
			original_tag = GER
			original_tag = SOV
		}
	}
	enable = {
		has_tech = motorized_rocket_unit
		num_of_military_factories > 29
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = rocket
		value = 20
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = motorized_rocket_equipment
		value = 20
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = rocket_artillery_equipment
		value = -5
	}
	ai_strategy = {
		type = role_ratio
		id = motorized_rocket
		value = 10
	}
}

reduce_rocket_artillery_production = {
	enable = {
		has_equipment = { rocket_artillery_equipment > 2500 }
	}
	abort = {
		has_equipment = { rocket_artillery_equipment < 500 }
	}
	ai_strategy = { type = equipment_variant_production_factor id = rocket_artillery_equipment	value = -75 }
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment			value = 5 }
}

reduce_motorized_rocket_production = {
	enable = {
		has_equipment = { motorized_rocket_equipment > 2500 }
	}
	abort = {
		has_equipment = { motorized_rocket_equipment < 500 }
	}
	ai_strategy = { type = equipment_variant_production_factor id = motorized_rocket_equipment	value = -75 }
	ai_strategy = { type = equipment_variant_production_factor id = infantry_equipment			value = 5 }
}

NW_default_flamethrower_infantry_production = {
	enable = {
		has_tech = tech_flamethrower
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -3
	}
	ai_strategy = {
		type = role_ratio
		id = flamethrower_infantry
		value = 3
	}
}

NW_flamethrower_infantry_ratio = {
	enable = {
		has_tech = tech_flamethrower
		fuel_ratio < 0.30
	}
	abort = {
		fuel_ratio > 0.50
	}
	
	ai_strategy = {
		type = role_ratio
		id = flamethrower_infantry
		value = -3
	}
}

NW_more_flamethrower_infantry_focused_nation = {
	enable = {
		has_tech = tech_flamethrower
		OR = {
			original_tag = SOV
			original_tag = GER
			original_tag = USA
			original_tag = ITA
		}
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -2
	}
	ai_strategy = {
		type = role_ratio
		id = flamethrower_infantry
		value = 2
	}
}



###################################
# Individual Armor
###################################

NW_more_light_armor_production = {
	allowed = {
		original_tag = ITA
	}
	enable = {
		num_of_military_factories > 50
		has_army_manpower = { type = infantry size > 1000000 }
	}
	abort = {
		OR = {
			num_of_military_factories < 50
			has_army_manpower = { type = infantry size < 900000 }
		}
	}

	ai_strategy = {
		type = equipment_production_factor
		id = flame
		value = 40
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_chassis
		value = 30
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_flame_chassis
		value = 10
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -14
	}
	ai_strategy = {
		type = role_ratio
		id = fire_tank
		value = 14
	}
}

NW_more_medium_armor_production = {
	allowed = {
		OR = {
			original_tag = SOV
			original_tag = GER
			original_tag = FRA
			original_tag = FRC
			original_tag = FRF
			original_tag = USA
		}
	}
	enable = {
		num_of_military_factories > 75
		has_army_manpower = { type = infantry size > 1000000 }
	}
	abort = {
		OR = {
			num_of_military_factories < 74
			has_army_manpower = { type = infantry size < 900000 }
		}
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 50
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_chassis
		value = 50
	}
	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -14
	}
	ai_strategy = {
		type = role_ratio
		id = armor
		value = 24
	}
}



###################################
# Individual Fire Armor
###################################

NW_fire_light_armor_production = {
	allowed = {
		OR = {
			original_tag = SOV
			original_tag = GER
			original_tag = USA
		}
	}
	enable = {
		date < 1940.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = flame
		value = 50
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_flame_chassis
		value = 75
	}
	ai_strategy = {
		type = role_ratio
		id = fire_tank
		value = 10
	}
	ai_strategy = {
		type = template_prio
		id = light_flame_tank
		value = 75
	}
	ai_strategy = {
		type = template_prio
		id = medium_flame_tank
		value = 25
	}
}

NW_fire_medium_armor_production = {
	allowed = {
		OR = {
			original_tag = SOV
			original_tag = GER
			original_tag = USA
		}
	}
	enable = {
		OR = {
			date > 1940.1.1
			num_of_military_factories > 85
		}
	}
	abort = {
		num_of_military_factories < 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = flame
		value = 75
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_flame_chassis
		value = 75
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_flame_chassis
		value = -50
	}
	ai_strategy = {
		type = role_ratio
		id = fire_tank
		value = 15
	}
	ai_strategy = {
		type = template_prio
		id = light_flame_tank
		value = 40
	}
	ai_strategy = {
		type = template_prio
		id = medium_flame_tank
		value = 75
	}
}

NW_fire_heavy_armor_production = {
	allowed = {
		original_tag = ENG
	}
	enable = {
		num_of_military_factories > 60
	}
	abort = {
		num_of_military_factories < 30
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_chassis
		value = 75
	}
	ai_strategy = {
		type = equipment_production_factor
		id = flame
		value = 100
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_tank_flame_chassis
		value = 125
	}
	ai_strategy = {
		type = role_ratio
		id = fire_tank
		value = 10
	}
	ai_strategy = {
		type = template_prio
		id = light_flame_tank
		value = -50
	}
	ai_strategy = {
		type = template_prio
		id = medium_flame_tank
		value = -50
	}
	ai_strategy = {
		type = template_prio
		id = heavy_flame_tank
		value = 75
	}
}


reduce_light_armor_production = {
	enable = {
		has_equipment = { light_tank_chassis > 5000 }
	}
	abort = {
		has_equipment = { light_tank_chassis < 500 }
	}
	ai_strategy = { type = equipment_production_factor			id = armor					value = -10 }
	ai_strategy = { type = equipment_variant_production_factor	id = light_tank_chassis		value = -75 }
	ai_strategy = { type = equipment_production_factor			id = infantry				value = 20 }
	ai_strategy = { type = equipment_variant_production_factor	id = infantry_equipment		value = 35 }
}
reduce_medium_armor_production = {
	enable = {
		has_equipment = { medium_tank_chassis > 3000 }
	}
	abort = {
		has_equipment = { medium_tank_chassis < 500 }
	}
	ai_strategy = { type = equipment_production_factor			id = armor					value = -10 }
	ai_strategy = { type = equipment_variant_production_factor	id = medium_tank_chassis	value = -75 }
	ai_strategy = { type = equipment_production_factor			id = infantry				value = 20 }
	ai_strategy = { type = equipment_variant_production_factor	id = infantry_equipment		value = 35 }
}
reduce_heavy_armor_production = {
	enable = {
		has_equipment = { heavy_tank_chassis > 1000 }
	}
	abort = {
		has_equipment = { heavy_tank_chassis < 500 }
	}
	ai_strategy = { type = equipment_production_factor			id = armor					value = -10 }
	ai_strategy = { type = equipment_variant_production_factor	id = heavy_tank_chassis		value = -75 }
	ai_strategy = { type = equipment_production_factor			id = infantry				value = 20 }
	ai_strategy = { type = equipment_variant_production_factor	id = infantry_equipment		value = 35 }
}